/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

This software includes Backoff library under the following license

    Copyright (C) 2012 Mathieu Turcotte

    Permission is hereby granted, free of charge, to any person obtaining a copy of
    this software and associated documentation files (the "Software"), to deal in
    the Software without restriction, including without limitation the rights to
    use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
    of the Software, and to permit persons to whom the Software is furnished to do
    so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.

This software includes Event-to-Promise library under the following license

    Copyright (c) 2014, Julien Fontanet <julien.fontanet@isonoe.net>.

    Permission to use, copy, modify, and/or distribute this software for any purpose
    with or without fee is hereby granted, provided that the above copyright notice
    and this permission notice appear in all copies.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
    OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
    TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
    THIS SOFTWARE.

*/
this.Twilio=this.Twilio||{},this.Twilio.Sync=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var r=function(t){return t&&t.Math==Math&&t},i=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o={},a=function(t){try{return!!t()}catch(t){return!0}},u=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},c={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,f=l&&!c.call({1:2},1);s.f=f?function(t){var e=l(this,t);return!!e&&e.enumerable}:c;var p,d,h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,y=function(t){return v.call(t).slice(8,-1)},g=y,m="".split,b=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},k=b,x=w,_=function(t){return k(x(t))},S=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=i,I=function(t){return"function"==typeof t?t:void 0},T=function(t,e){return arguments.length<2?I(E[t]):E[t]&&E[t][e]},O=T("navigator","userAgent")||"",R=i,A=O,P=R.process,j=R.Deno,C=P&&P.versions||j&&j.version,L=C&&C.v8;L?d=(p=L.split("."))[0]<4?1:p[0]+p[1]:A&&(!(p=A.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=A.match(/Chrome\/(\d+)/))&&(d=p[1]);var M=d&&+d,N=M,F=a,D=!!Object.getOwnPropertySymbols&&!F((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),U=D&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,B=T,q=U?function(t){return"symbol"==typeof t}:function(t){var e=B("Symbol");return"function"==typeof e&&Object(t)instanceof e},W=S,z={exports:{}},K=i,$=function(t,e){try{Object.defineProperty(K,t,{value:e,configurable:!0,writable:!0})}catch(n){K[t]=e}return e},V=$,G="__core-js_shared__",H=i[G]||V(G,{}),Q=H;(z.exports=function(t,e){return Q[t]||(Q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var Y=w,J=function(t){return Object(Y(t))},X=J,Z={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Z.call(X(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},it=i,ot=z.exports,at=tt,ut=rt,st=D,ct=U,lt=ot("wks"),ft=it.Symbol,pt=ct?ft:ft&&ft.withoutSetter||ut,dt=function(t){return at(lt,t)&&(st||"string"==typeof lt[t])||(st&&at(ft,t)?lt[t]=ft[t]:lt[t]=pt("Symbol."+t)),lt[t]},ht=S,vt=q,yt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!W(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!W(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!W(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},gt=dt("toPrimitive"),mt=function(t,e){if(!ht(t)||vt(t))return t;var n,r=t[gt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!ht(n)||vt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),yt(t,e)},bt=mt,wt=q,kt=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},xt=S,_t=i.document,St=xt(_t)&&xt(_t.createElement),Et=function(t){return St?_t.createElement(t):{}},It=Et,Tt=!u&&!a((function(){return 7!=Object.defineProperty(It("div"),"a",{get:function(){return 7}}).a})),Ot=u,Rt=s,At=h,Pt=_,jt=kt,Ct=tt,Lt=Tt,Mt=Object.getOwnPropertyDescriptor;o.f=Ot?Mt:function(t,e){if(t=Pt(t),e=jt(e),Lt)try{return Mt(t,e)}catch(t){}if(Ct(t,e))return At(!Rt.f.call(t,e),t[e])};var Nt={},Ft=S,Dt=function(t){if(!Ft(t))throw TypeError(String(t)+" is not an object");return t},Ut=u,Bt=Tt,qt=Dt,Wt=kt,zt=Object.defineProperty;Nt.f=Ut?zt:function(t,e,n){if(qt(t),e=Wt(e),qt(n),Bt)try{return zt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Kt=Nt,$t=h,Vt=u?function(t,e,n){return Kt.f(t,e,$t(1,n))}:function(t,e,n){return t[e]=n,t},Gt={exports:{}},Ht=H,Qt=Function.toString;"function"!=typeof Ht.inspectSource&&(Ht.inspectSource=function(t){return Qt.call(t)});var Yt,Jt,Xt,Zt=Ht.inspectSource,te=Zt,ee=i.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=z.exports,ie=rt,oe=re("keys"),ae=function(t){return oe[t]||(oe[t]=ie(t))},ue={},se=ne,ce=S,le=Vt,fe=tt,pe=H,de=ae,he=ue,ve="Object already initialized",ye=i.WeakMap;if(se||pe.state){var ge=pe.state||(pe.state=new ye),me=ge.get,be=ge.has,we=ge.set;Yt=function(t,e){if(be.call(ge,t))throw new TypeError(ve);return e.facade=t,we.call(ge,t,e),e},Jt=function(t){return me.call(ge,t)||{}},Xt=function(t){return be.call(ge,t)}}else{var ke=de("state");he[ke]=!0,Yt=function(t,e){if(fe(t,ke))throw new TypeError(ve);return e.facade=t,le(t,ke,e),e},Jt=function(t){return fe(t,ke)?t[ke]:{}},Xt=function(t){return fe(t,ke)}}var xe={set:Yt,get:Jt,has:Xt,enforce:function(t){return Xt(t)?Jt(t):Yt(t,{})},getterFor:function(t){return function(e){var n;if(!ce(e)||(n=Jt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},_e=i,Se=Vt,Ee=tt,Ie=$,Te=Zt,Oe=xe.get,Re=xe.enforce,Ae=String(String).split("String");(Gt.exports=function(t,e,n,r){var i,o=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ee(n,"name")||Se(n,"name",e),(i=Re(n)).source||(i.source=Ae.join("string"==typeof e?e:""))),t!==_e?(o?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Se(t,e,n)):a?t[e]=n:Ie(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Oe(this).source||Te(this)}));var Pe={},je=Math.ceil,Ce=Math.floor,Le=function(t){return isNaN(t=+t)?0:(t>0?Ce:je)(t)},Me=Le,Ne=Math.min,Fe=function(t){return t>0?Ne(Me(t),9007199254740991):0},De=Le,Ue=Math.max,Be=Math.min,qe=function(t,e){var n=De(t);return n<0?Ue(n+e,0):Be(n,e)},We=_,ze=Fe,Ke=qe,$e=function(t){return function(e,n,r){var i,o=We(e),a=ze(o.length),u=Ke(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}},Ve={includes:$e(!0),indexOf:$e(!1)},Ge=tt,He=_,Qe=Ve.indexOf,Ye=ue,Je=function(t,e){var n,r=He(t),i=0,o=[];for(n in r)!Ge(Ye,n)&&Ge(r,n)&&o.push(n);for(;e.length>i;)Ge(r,n=e[i++])&&(~Qe(o,n)||o.push(n));return o},Xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ze=Je,tn=Xe.concat("length","prototype");Pe.f=Object.getOwnPropertyNames||function(t){return Ze(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn=Pe,rn=en,on=Dt,an=T("Reflect","ownKeys")||function(t){var e=nn.f(on(t)),n=rn.f;return n?e.concat(n(t)):e},un=tt,sn=an,cn=o,ln=Nt,fn=function(t,e){for(var n=sn(e),r=ln.f,i=cn.f,o=0;o<n.length;o++){var a=n[o];un(t,a)||r(t,a,i(e,a))}},pn=a,dn=/#|\.prototype\./,hn=function(t,e){var n=yn[vn(t)];return n==mn||n!=gn&&("function"==typeof e?pn(e):!!e)},vn=hn.normalize=function(t){return String(t).replace(dn,".").toLowerCase()},yn=hn.data={},gn=hn.NATIVE="N",mn=hn.POLYFILL="P",bn=hn,wn=i,kn=o.f,xn=Vt,_n=Gt.exports,Sn=$,En=fn,In=bn,Tn=function(t,e){var n,r,i,o,a,u=t.target,s=t.global,c=t.stat;if(n=s?wn:c?wn[u]||Sn(u,{}):(wn[u]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=kn(n,r))&&a.value:n[r],!In(s?r:u+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;En(o,i)}(t.sham||i&&i.sham)&&xn(o,"sham",!0),_n(n,r,o,t)}},On=Je,Rn=Xe,An=Object.keys||function(t){return On(t,Rn)},Pn=J,jn=An;Tn({target:"Object",stat:!0,forced:a((function(){jn(1)}))},{keys:function(t){return jn(Pn(t))}});var Cn,Ln=y,Mn=Array.isArray||function(t){return"Array"==Ln(t)},Nn=q,Fn=function(t){if(Nn(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},Dn=Nt,Un=Dt,Bn=An,qn=u?Object.defineProperties:function(t,e){Un(t);for(var n,r=Bn(e),i=r.length,o=0;i>o;)Dn.f(t,n=r[o++],e[n]);return t},Wn=T("document","documentElement"),zn=Dt,Kn=qn,$n=Xe,Vn=ue,Gn=Wn,Hn=Et,Qn=ae("IE_PROTO"),Yn=function(){},Jn=function(t){return"<script>"+t+"</"+"script>"},Xn=function(t){t.write(Jn("")),t.close();var e=t.parentWindow.Object;return t=null,e},Zn=function(){try{Cn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Zn="undefined"!=typeof document?document.domain&&Cn?Xn(Cn):((e=Hn("iframe")).style.display="none",Gn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Jn("document.F=Object")),t.close(),t.F):Xn(Cn);for(var n=$n.length;n--;)delete Zn.prototype[$n[n]];return Zn()};Vn[Qn]=!0;var tr=Object.create||function(t,e){var n;return null!==t?(Yn.prototype=zn(t),n=new Yn,Yn.prototype=null,n[Qn]=t):n=Zn(),void 0===e?n:Kn(n,e)},er={},nr=_,rr=Pe.f,ir={}.toString,or="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];er.f=function(t){return or&&"[object Window]"==ir.call(t)?function(t){try{return rr(t)}catch(t){return or.slice()}}(t):rr(nr(t))};var ar={},ur=dt;ar.f=ur;var sr=i,cr=tt,lr=ar,fr=Nt.f,pr=function(t){var e=sr.Symbol||(sr.Symbol={});cr(e,t)||fr(e,t,{value:lr.f(t)})},dr=Nt.f,hr=tt,vr=dt("toStringTag"),yr=function(t,e,n){t&&!hr(t=n?t:t.prototype,vr)&&dr(t,vr,{configurable:!0,value:e})},gr=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},mr=gr,br=function(t,e,n){if(mr(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},wr=S,kr=Mn,xr=dt("species"),_r=function(t){var e;return kr(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!kr(e.prototype)?wr(e)&&null===(e=e[xr])&&(e=void 0):e=void 0),void 0===e?Array:e},Sr=function(t,e){return new(_r(t))(0===e?0:e)},Er=br,Ir=b,Tr=J,Or=Fe,Rr=Sr,Ar=[].push,Pr=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,u=5==t||o;return function(s,c,l,f){for(var p,d,h=Tr(s),v=Ir(h),y=Er(c,l,3),g=Or(v.length),m=0,b=f||Rr,w=e?b(s,g):n||a?b(s,0):void 0;g>m;m++)if((u||m in v)&&(d=y(p=v[m],m,h),t))if(e)w[m]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:Ar.call(w,p)}else switch(t){case 4:return!1;case 7:Ar.call(w,p)}return o?-1:r||i?i:w}},jr={forEach:Pr(0),map:Pr(1),filter:Pr(2),some:Pr(3),every:Pr(4),find:Pr(5),findIndex:Pr(6),filterReject:Pr(7)},Cr=Tn,Lr=i,Mr=T,Nr=u,Fr=D,Dr=a,Ur=tt,Br=Mn,qr=S,Wr=q,zr=Dt,Kr=J,$r=_,Vr=kt,Gr=Fn,Hr=h,Qr=tr,Yr=An,Jr=Pe,Xr=er,Zr=en,ti=o,ei=Nt,ni=s,ri=Vt,ii=Gt.exports,oi=z.exports,ai=ue,ui=rt,si=dt,ci=ar,li=pr,fi=yr,pi=xe,di=jr.forEach,hi=ae("hidden"),vi="Symbol",yi=si("toPrimitive"),gi=pi.set,mi=pi.getterFor(vi),bi=Object.prototype,wi=Lr.Symbol,ki=Mr("JSON","stringify"),xi=ti.f,_i=ei.f,Si=Xr.f,Ei=ni.f,Ii=oi("symbols"),Ti=oi("op-symbols"),Oi=oi("string-to-symbol-registry"),Ri=oi("symbol-to-string-registry"),Ai=oi("wks"),Pi=Lr.QObject,ji=!Pi||!Pi.prototype||!Pi.prototype.findChild,Ci=Nr&&Dr((function(){return 7!=Qr(_i({},"a",{get:function(){return _i(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=xi(bi,e);r&&delete bi[e],_i(t,e,n),r&&t!==bi&&_i(bi,e,r)}:_i,Li=function(t,e){var n=Ii[t]=Qr(wi.prototype);return gi(n,{type:vi,tag:t,description:e}),Nr||(n.description=e),n},Mi=function(t,e,n){t===bi&&Mi(Ti,e,n),zr(t);var r=Vr(e);return zr(n),Ur(Ii,r)?(n.enumerable?(Ur(t,hi)&&t[hi][r]&&(t[hi][r]=!1),n=Qr(n,{enumerable:Hr(0,!1)})):(Ur(t,hi)||_i(t,hi,Hr(1,{})),t[hi][r]=!0),Ci(t,r,n)):_i(t,r,n)},Ni=function(t,e){zr(t);var n=$r(e),r=Yr(n).concat(Bi(n));return di(r,(function(e){Nr&&!Fi.call(n,e)||Mi(t,e,n[e])})),t},Fi=function(t){var e=Vr(t),n=Ei.call(this,e);return!(this===bi&&Ur(Ii,e)&&!Ur(Ti,e))&&(!(n||!Ur(this,e)||!Ur(Ii,e)||Ur(this,hi)&&this[hi][e])||n)},Di=function(t,e){var n=$r(t),r=Vr(e);if(n!==bi||!Ur(Ii,r)||Ur(Ti,r)){var i=xi(n,r);return!i||!Ur(Ii,r)||Ur(n,hi)&&n[hi][r]||(i.enumerable=!0),i}},Ui=function(t){var e=Si($r(t)),n=[];return di(e,(function(t){Ur(Ii,t)||Ur(ai,t)||n.push(t)})),n},Bi=function(t){var e=t===bi,n=Si(e?Ti:$r(t)),r=[];return di(n,(function(t){!Ur(Ii,t)||e&&!Ur(bi,t)||r.push(Ii[t])})),r};(Fr||(wi=function(){if(this instanceof wi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Gr(arguments[0]):void 0,e=ui(t),n=function(t){this===bi&&n.call(Ti,t),Ur(this,hi)&&Ur(this[hi],e)&&(this[hi][e]=!1),Ci(this,e,Hr(1,t))};return Nr&&ji&&Ci(bi,e,{configurable:!0,set:n}),Li(e,t)},ii(wi.prototype,"toString",(function(){return mi(this).tag})),ii(wi,"withoutSetter",(function(t){return Li(ui(t),t)})),ni.f=Fi,ei.f=Mi,ti.f=Di,Jr.f=Xr.f=Ui,Zr.f=Bi,ci.f=function(t){return Li(si(t),t)},Nr&&(_i(wi.prototype,"description",{configurable:!0,get:function(){return mi(this).description}}),ii(bi,"propertyIsEnumerable",Fi,{unsafe:!0}))),Cr({global:!0,wrap:!0,forced:!Fr,sham:!Fr},{Symbol:wi}),di(Yr(Ai),(function(t){li(t)})),Cr({target:vi,stat:!0,forced:!Fr},{for:function(t){var e=Gr(t);if(Ur(Oi,e))return Oi[e];var n=wi(e);return Oi[e]=n,Ri[n]=e,n},keyFor:function(t){if(!Wr(t))throw TypeError(t+" is not a symbol");if(Ur(Ri,t))return Ri[t]},useSetter:function(){ji=!0},useSimple:function(){ji=!1}}),Cr({target:"Object",stat:!0,forced:!Fr,sham:!Nr},{create:function(t,e){return void 0===e?Qr(t):Ni(Qr(t),e)},defineProperty:Mi,defineProperties:Ni,getOwnPropertyDescriptor:Di}),Cr({target:"Object",stat:!0,forced:!Fr},{getOwnPropertyNames:Ui,getOwnPropertySymbols:Bi}),Cr({target:"Object",stat:!0,forced:Dr((function(){Zr.f(1)}))},{getOwnPropertySymbols:function(t){return Zr.f(Kr(t))}}),ki)&&Cr({target:"JSON",stat:!0,forced:!Fr||Dr((function(){var t=wi();return"[null]"!=ki([t])||"{}"!=ki({a:t})||"{}"!=ki(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(qr(e)||void 0!==t)&&!Wr(t))return Br(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Wr(e))return e}),i[1]=e,ki.apply(null,i)}});wi.prototype[yi]||ri(wi.prototype,yi,wi.prototype.valueOf),fi(wi,vi),ai[hi]=!0;var qi=a,Wi=M,zi=dt("species"),Ki=function(t){return Wi>=51||!qi((function(){var e=[];return(e.constructor={})[zi]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},$i=jr.filter;Tn({target:"Array",proto:!0,forced:!Ki("filter")},{filter:function(t){return $i(this,t,arguments.length>1?arguments[1]:void 0)}});var Vi=Tn,Gi=a,Hi=_,Qi=o.f,Yi=u,Ji=Gi((function(){Qi(1)}));Vi({target:"Object",stat:!0,forced:!Yi||Ji,sham:!Yi},{getOwnPropertyDescriptor:function(t,e){return Qi(Hi(t),e)}});var Xi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Zi=Et("span").classList,to=Zi&&Zi.constructor&&Zi.constructor.prototype,eo=to===Object.prototype?void 0:to,no=a,ro=function(t,e){var n=[][t];return!!n&&no((function(){n.call(null,e||function(){throw 1},1)}))},io=jr.forEach,oo=ro("forEach")?[].forEach:function(t){return io(this,t,arguments.length>1?arguments[1]:void 0)},ao=i,uo=Xi,so=eo,co=oo,lo=Vt,fo=function(t){if(t&&t.forEach!==co)try{lo(t,"forEach",co)}catch(e){t.forEach=co}};for(var po in uo)fo(ao[po]&&ao[po].prototype);fo(so);var ho=kt,vo=Nt,yo=h,go=function(t,e,n){var r=ho(e);r in t?vo.f(t,r,yo(0,n)):t[r]=n},mo=an,bo=_,wo=o,ko=go;Tn({target:"Object",stat:!0,sham:!u},{getOwnPropertyDescriptors:function(t){for(var e,n,r=bo(t),i=wo.f,o=mo(r),a={},u=0;o.length>u;)void 0!==(n=i(r,e=o[u++]))&&ko(a,e,n);return a}});var xo=i,_o=yr;Tn({global:!0},{Reflect:{}}),_o(xo.Reflect,"Reflect",!0);var So=gr,Eo=S,Io=[].slice,To={},Oo=function(t,e,n){if(!(e in To)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";To[e]=Function("C,a","return new C("+r.join(",")+")")}return To[e](t,n)},Ro=Function.bind||function(t){var e=So(this),n=Io.call(arguments,1),r=function(){var i=n.concat(Io.call(arguments));return this instanceof r?Oo(e,i.length,i):e.apply(t,i)};return Eo(e.prototype)&&(r.prototype=e.prototype),r},Ao=Tn,Po=gr,jo=Dt,Co=S,Lo=tr,Mo=Ro,No=a,Fo=T("Reflect","construct"),Do=No((function(){function t(){}return!(Fo((function(){}),[],t)instanceof t)})),Uo=!No((function(){Fo((function(){}))})),Bo=Do||Uo;function qo(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function Wo(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){qo(o,r,i,a,u,"next",t)}function u(t){qo(o,r,i,a,u,"throw",t)}a(void 0)}))}}function zo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $o(t,e,n){return e&&Ko(t.prototype,e),n&&Ko(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Go(t,e){return Go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Go(t,e)}function Ho(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Go(t,e)}function Qo(t){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qo(t)}function Yo(t,e){if(e&&("object"===Qo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vo(t)}function Jo(t){return Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jo(t)}function Xo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ao({target:"Reflect",stat:!0,forced:Bo,sham:Bo},{construct:function(t,e){Po(t),jo(e);var n=arguments.length<3?t:Po(arguments[2]);if(Uo&&!Do)return Fo(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(Mo.apply(t,r))}var i=n.prototype,o=Lo(Co(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return Co(a)?a:o}});var Zo=jr.map;Tn({target:"Array",proto:!0,forced:!Ki("map")},{map:function(t){return Zo(this,t,arguments.length>1?arguments[1]:void 0)}});var ta={};ta[dt("toStringTag")]="z";var ea="[object z]"===String(ta),na=ea,ra=y,ia=dt("toStringTag"),oa="Arguments"==ra(function(){return arguments}()),aa=na?ra:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ia))?n:oa?ra(e):"Object"==(r=ra(e))&&"function"==typeof e.callee?"Arguments":r},ua=aa,sa=ea?{}.toString:function(){return"[object "+ua(this)+"]"},ca=ea,la=Gt.exports,fa=sa;ca||la(Object.prototype,"toString",fa,{unsafe:!0});var pa=i.Promise,da=Gt.exports,ha=function(t,e,n){for(var r in e)da(t,r,e[r],n);return t},va=S,ya=Dt,ga=function(t){if(!va(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},ma=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return ya(n),ga(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ba=T,wa=Nt,ka=u,xa=dt("species"),_a=function(t){var e=ba(t),n=wa.f;ka&&e&&!e[xa]&&n(e,xa,{configurable:!0,get:function(){return this}})},Sa=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Ea={},Ia=Ea,Ta=dt("iterator"),Oa=Array.prototype,Ra=function(t){return void 0!==t&&(Ia.Array===t||Oa[Ta]===t)},Aa=aa,Pa=Ea,ja=dt("iterator"),Ca=function(t){if(null!=t)return t[ja]||t["@@iterator"]||Pa[Aa(t)]},La=Dt,Ma=Ca,Na=function(t,e){var n=arguments.length<2?Ma(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return La(n.call(t))},Fa=Dt,Da=function(t,e,n){var r,i;Fa(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return Fa(r),n},Ua=Dt,Ba=Ra,qa=Fe,Wa=br,za=Na,Ka=Ca,$a=Da,Va=function(t,e){this.stopped=t,this.result=e},Ga=function(t,e,n){var r,i,o,a,u,s,c,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),h=Wa(e,l,1+f+d),v=function(t){return r&&$a(r,"normal",t),new Va(!0,t)},y=function(t){return f?(Ua(t),d?h(t[0],t[1],v):h(t[0],t[1])):d?h(t,v):h(t)};if(p)r=t;else{if("function"!=typeof(i=Ka(t)))throw TypeError("Target is not iterable");if(Ba(i)){for(o=0,a=qa(t.length);a>o;o++)if((u=y(t[o]))&&u instanceof Va)return u;return new Va(!1)}r=za(t,i)}for(s=r.next;!(c=s.call(r)).done;){try{u=y(c.value)}catch(t){$a(r,"throw",t)}if("object"==typeof u&&u&&u instanceof Va)return u}return new Va(!1)},Ha=dt("iterator"),Qa=!1;try{var Ya=0,Ja={next:function(){return{done:!!Ya++}},return:function(){Qa=!0}};Ja[Ha]=function(){return this},Array.from(Ja,(function(){throw 2}))}catch(t){}var Xa,Za,tu,eu,nu=function(t,e){if(!e&&!Qa)return!1;var n=!1;try{var r={};r[Ha]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},ru=Dt,iu=gr,ou=dt("species"),au=function(t,e){var n,r=ru(t).constructor;return void 0===r||null==(n=ru(r)[ou])?e:iu(n)},uu=/(?:ipad|iphone|ipod).*applewebkit/i.test(O),su="process"==y(i.process),cu=i,lu=a,fu=br,pu=Wn,du=Et,hu=uu,vu=su,yu=cu.setImmediate,gu=cu.clearImmediate,mu=cu.process,bu=cu.MessageChannel,wu=cu.Dispatch,ku=0,xu={},_u="onreadystatechange";try{Xa=cu.location}catch(t){}var Su=function(t){if(xu.hasOwnProperty(t)){var e=xu[t];delete xu[t],e()}},Eu=function(t){return function(){Su(t)}},Iu=function(t){Su(t.data)},Tu=function(t){cu.postMessage(String(t),Xa.protocol+"//"+Xa.host)};yu&&gu||(yu=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return xu[++ku]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Za(ku),ku},gu=function(t){delete xu[t]},vu?Za=function(t){mu.nextTick(Eu(t))}:wu&&wu.now?Za=function(t){wu.now(Eu(t))}:bu&&!hu?(eu=(tu=new bu).port2,tu.port1.onmessage=Iu,Za=fu(eu.postMessage,eu,1)):cu.addEventListener&&"function"==typeof postMessage&&!cu.importScripts&&Xa&&"file:"!==Xa.protocol&&!lu(Tu)?(Za=Tu,cu.addEventListener("message",Iu,!1)):Za=_u in du("script")?function(t){pu.appendChild(du("script")).onreadystatechange=function(){pu.removeChild(this),Su(t)}}:function(t){setTimeout(Eu(t),0)});var Ou,Ru,Au,Pu,ju,Cu,Lu,Mu,Nu={set:yu,clear:gu},Fu=i,Du=/ipad|iphone|ipod/i.test(O)&&void 0!==Fu.Pebble,Uu=/web0s(?!.*chrome)/i.test(O),Bu=i,qu=o.f,Wu=Nu.set,zu=uu,Ku=Du,$u=Uu,Vu=su,Gu=Bu.MutationObserver||Bu.WebKitMutationObserver,Hu=Bu.document,Qu=Bu.process,Yu=Bu.Promise,Ju=qu(Bu,"queueMicrotask"),Xu=Ju&&Ju.value;Xu||(Ou=function(){var t,e;for(Vu&&(t=Qu.domain)&&t.exit();Ru;){e=Ru.fn,Ru=Ru.next;try{e()}catch(t){throw Ru?Pu():Au=void 0,t}}Au=void 0,t&&t.enter()},zu||Vu||$u||!Gu||!Hu?!Ku&&Yu&&Yu.resolve?((Lu=Yu.resolve(void 0)).constructor=Yu,Mu=Lu.then,Pu=function(){Mu.call(Lu,Ou)}):Pu=Vu?function(){Qu.nextTick(Ou)}:function(){Wu.call(Bu,Ou)}:(ju=!0,Cu=Hu.createTextNode(""),new Gu(Ou).observe(Cu,{characterData:!0}),Pu=function(){Cu.data=ju=!ju}));var Zu=Xu||function(t){var e={fn:t,next:void 0};Au&&(Au.next=e),Ru||(Ru=e,Pu()),Au=e},ts={},es=gr,ns=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=es(e),this.reject=es(n)};ts.f=function(t){return new ns(t)};var rs,is,os,as,us=Dt,ss=S,cs=ts,ls=i,fs="object"==typeof window,ps=Tn,ds=i,hs=T,vs=pa,ys=Gt.exports,gs=ha,ms=ma,bs=yr,ws=_a,ks=S,xs=gr,_s=Sa,Ss=Zt,Es=Ga,Is=nu,Ts=au,Os=Nu.set,Rs=Zu,As=function(t,e){if(us(t),ss(e)&&e.constructor===t)return e;var n=cs.f(t);return(0,n.resolve)(e),n.promise},Ps=function(t,e){var n=ls.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},js=ts,Cs=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ls=xe,Ms=bn,Ns=fs,Fs=su,Ds=M,Us=dt("species"),Bs="Promise",qs=Ls.get,Ws=Ls.set,zs=Ls.getterFor(Bs),Ks=vs&&vs.prototype,$s=vs,Vs=Ks,Gs=ds.TypeError,Hs=ds.document,Qs=ds.process,Ys=js.f,Js=Ys,Xs=!!(Hs&&Hs.createEvent&&ds.dispatchEvent),Zs="function"==typeof PromiseRejectionEvent,tc="unhandledrejection",ec=!1,nc=Ms(Bs,(function(){var t=Ss($s),e=t!==String($s);if(!e&&66===Ds)return!0;if(Ds>=51&&/native code/.test(t))return!1;var n=new $s((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Us]=r,!(ec=n.then((function(){}))instanceof r)||!e&&Ns&&!Zs})),rc=nc||!Is((function(t){$s.all(t).catch((function(){}))})),ic=function(t){var e;return!(!ks(t)||"function"!=typeof(e=t.then))&&e},oc=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Rs((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,u,s,c=n[o++],l=i?c.ok:c.fail,f=c.resolve,p=c.reject,d=c.domain;try{l?(i||(2===t.rejection&&cc(t),t.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),s=!0)),a===c.promise?p(Gs("Promise-chain cycle")):(u=ic(a))?u.call(a,f,p):f(a)):p(r)}catch(t){d&&!s&&d.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&uc(t)}))}},ac=function(t,e,n){var r,i;Xs?((r=Hs.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),ds.dispatchEvent(r)):r={promise:e,reason:n},!Zs&&(i=ds["on"+t])?i(r):t===tc&&Ps("Unhandled promise rejection",n)},uc=function(t){Os.call(ds,(function(){var e,n=t.facade,r=t.value;if(sc(t)&&(e=Cs((function(){Fs?Qs.emit("unhandledRejection",r,n):ac(tc,n,r)})),t.rejection=Fs||sc(t)?2:1,e.error))throw e.value}))},sc=function(t){return 1!==t.rejection&&!t.parent},cc=function(t){Os.call(ds,(function(){var e=t.facade;Fs?Qs.emit("rejectionHandled",e):ac("rejectionhandled",e,t.value)}))},lc=function(t,e,n){return function(r){t(e,r,n)}},fc=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,oc(t,!0))},pc=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Gs("Promise can't be resolved itself");var r=ic(e);r?Rs((function(){var n={done:!1};try{r.call(e,lc(pc,n,t),lc(fc,n,t))}catch(e){fc(n,e,t)}})):(t.value=e,t.state=1,oc(t,!1))}catch(e){fc({done:!1},e,t)}}};if(nc&&(Vs=($s=function(t){_s(this,$s,Bs),xs(t),rs.call(this);var e=qs(this);try{t(lc(pc,e),lc(fc,e))}catch(t){fc(e,t)}}).prototype,(rs=function(t){Ws(this,{type:Bs,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=gs(Vs,{then:function(t,e){var n=zs(this),r=Ys(Ts(this,$s));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Fs?Qs.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&oc(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),is=function(){var t=new rs,e=qs(t);this.promise=t,this.resolve=lc(pc,e),this.reject=lc(fc,e)},js.f=Ys=function(t){return t===$s||t===os?new is(t):Js(t)},"function"==typeof vs&&Ks!==Object.prototype)){as=Ks.then,ec||(ys(Ks,"then",(function(t,e){var n=this;return new $s((function(t,e){as.call(n,t,e)})).then(t,e)}),{unsafe:!0}),ys(Ks,"catch",Vs.catch,{unsafe:!0}));try{delete Ks.constructor}catch(t){}ms&&ms(Ks,Vs)}ps({global:!0,wrap:!0,forced:nc},{Promise:$s}),bs($s,Bs,!1),ws(Bs),os=hs(Bs),ps({target:Bs,stat:!0,forced:nc},{reject:function(t){var e=Ys(this);return e.reject.call(void 0,t),e.promise}}),ps({target:Bs,stat:!0,forced:nc},{resolve:function(t){return As(this,t)}}),ps({target:Bs,stat:!0,forced:rc},{all:function(t){var e=this,n=Ys(e),r=n.resolve,i=n.reject,o=Cs((function(){var n=xs(e.resolve),o=[],a=0,u=1;Es(t,(function(t){var s=a++,c=!1;o.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,o[s]=t,--u||r(o))}),i)})),--u||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Ys(e),r=n.reject,i=Cs((function(){var i=xs(e.resolve);Es(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var dc,hc=Object.prototype,vc=hc.hasOwnProperty,yc="function"==typeof Symbol?Symbol:{},gc=yc.iterator||"@@iterator",mc=yc.asyncIterator||"@@asyncIterator",bc=yc.toStringTag||"@@toStringTag";function wc(t,e,n,r){var i=e&&e.prototype instanceof Tc?e:Tc,o=Object.create(i.prototype),a=new Bc(r||[]);return o._invoke=function(t,e,n){var r=xc;return function(i,o){if(r===Sc)throw new Error("Generator is already running");if(r===Ec){if("throw"===i)throw o;return Wc()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=Fc(a,n);if(u){if(u===Ic)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===xc)throw r=Ec,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=Sc;var s=kc(t,e,n);if("normal"===s.type){if(r=n.done?Ec:_c,s.arg===Ic)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=Ec,n.method="throw",n.arg=s.arg)}}}(t,n,a),o}function kc(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}var xc="suspendedStart",_c="suspendedYield",Sc="executing",Ec="completed",Ic={};function Tc(){}function Oc(){}function Rc(){}var Ac={};Ac[gc]=function(){return this};var Pc=Object.getPrototypeOf,jc=Pc&&Pc(Pc(qc([])));jc&&jc!==hc&&vc.call(jc,gc)&&(Ac=jc);var Cc=Rc.prototype=Tc.prototype=Object.create(Ac);function Lc(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function Mc(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===Oc||"GeneratorFunction"===(e.displayName||e.name))}function Nc(t,e){function n(r,i,o,a){var u=kc(t[r],t,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"===Qo(c)&&vc.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(c).then((function(t){s.value=t,o(s)}),(function(t){return n("throw",t,o,a)}))}a(u.arg)}var r;this._invoke=function(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}}function Fc(t,e){var n=t.iterator[e.method];if(n===dc){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=dc,Fc(t,e),"throw"===e.method))return Ic;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Ic}var r=kc(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Ic;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=dc),e.delegate=null,Ic):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Ic)}function Dc(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Uc(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Bc(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Dc,this),this.reset(!0)}function qc(t){if(t){var e=t[gc];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(vc.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=dc,e.done=!0,e};return r.next=r}}return{next:Wc}}function Wc(){return{value:dc,done:!0}}Oc.prototype=Cc.constructor=Rc,Rc.constructor=Oc,Rc[bc]=Oc.displayName="GeneratorFunction",Lc(Nc.prototype),Nc.prototype[mc]=function(){return this},Lc(Cc),Cc[bc]="Generator",Cc[gc]=function(){return this},Cc.toString=function(){return"[object Generator]"},Bc.prototype={constructor:Bc,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=dc,this.done=!1,this.delegate=null,this.method="next",this.arg=dc,this.tryEntries.forEach(Uc),!t)for(var e in this)"t"===e.charAt(0)&&vc.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=dc)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=dc),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=vc.call(i,"catchLoc"),u=vc.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&vc.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,Ic):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Ic},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Uc(n),Ic}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;Uc(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:qc(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=dc),Ic}};var zc={wrap:wc,isGeneratorFunction:Mc,AsyncIterator:Nc,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Rc):(t.__proto__=Rc,bc in t||(t[bc]="GeneratorFunction")),t.prototype=Object.create(Cc),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new Nc(wc(t,e,n,r),i);return Mc(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:qc},Kc=Object.freeze({__proto__:null,default:zc});function $c(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Qo(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Vc(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Qo(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var Gc={},Hc={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Hc);var Qc=u,Yc=Nt.f,Jc=Function.prototype,Xc=Jc.toString,Zc=/^\s*function ([^ (]*)/,tl="name";Qc&&!(tl in Jc)&&Yc(Jc,tl,{configurable:!0,get:function(){try{return Xc.call(this).match(Zc)[1]}catch(t){return""}}});var el,nl={exports:{}},rl={exports:{}};(el=rl).exports=function(t){if(Array.isArray(t))return t},el.exports.__esModule=!0,el.exports.default=el.exports;var il={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports}(il);var ol={exports:{}},al={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports}(al),function(t){var e=al.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}(ol);var ul={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(ul),function(t){var e=rl.exports,n=il.exports,r=ol.exports,i=ul.exports;t.exports=function(t,o){return e(t)||n(t,o)||r(t,o)||i()},t.exports.__esModule=!0,t.exports.default=t.exports}(nl);var sl=tr,cl=Nt,ll=dt("unscopables"),fl=Array.prototype;null==fl[ll]&&cl.f(fl,ll,{configurable:!0,value:sl(null)});var pl,dl,hl,vl=function(t){fl[ll][t]=!0},yl=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),gl=tt,ml=J,bl=yl,wl=ae("IE_PROTO"),kl=Object.prototype,xl=bl?Object.getPrototypeOf:function(t){return t=ml(t),gl(t,wl)?t[wl]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?kl:null},_l=a,Sl=xl,El=Vt,Il=dt("iterator"),Tl=!1;[].keys&&("next"in(hl=[].keys())?(dl=Sl(Sl(hl)))!==Object.prototype&&(pl=dl):Tl=!0);var Ol=null==pl||_l((function(){var t={};return pl[Il].call(t)!==t}));Ol&&(pl={}),"function"!=typeof pl[Il]&&El(pl,Il,(function(){return this}));var Rl={IteratorPrototype:pl,BUGGY_SAFARI_ITERATORS:Tl},Al=Rl.IteratorPrototype,Pl=tr,jl=h,Cl=yr,Ll=Ea,Ml=function(){return this},Nl=Tn,Fl=function(t,e,n){var r=e+" Iterator";return t.prototype=Pl(Al,{next:jl(1,n)}),Cl(t,r,!1),Ll[r]=Ml,t},Dl=xl,Ul=ma,Bl=yr,ql=Vt,Wl=Gt.exports,zl=Ea,Kl=Rl.IteratorPrototype,$l=Rl.BUGGY_SAFARI_ITERATORS,Vl=dt("iterator"),Gl="keys",Hl="values",Ql="entries",Yl=function(){return this},Jl=function(t,e,n,r,i,o,a){Fl(n,e,r);var u,s,c,l=function(t){if(t===i&&v)return v;if(!$l&&t in d)return d[t];switch(t){case Gl:case Hl:case Ql:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,h=d[Vl]||d["@@iterator"]||i&&d[i],v=!$l&&h||l(i),y="Array"==e&&d.entries||h;if(y&&(u=Dl(y.call(new t)))!==Object.prototype&&u.next&&(Dl(u)!==Kl&&(Ul?Ul(u,Kl):"function"!=typeof u[Vl]&&ql(u,Vl,Yl)),Bl(u,f,!0)),i==Hl&&h&&h.name!==Hl&&(p=!0,v=function(){return h.call(this)}),d[Vl]!==v&&ql(d,Vl,v),zl[e]=v,i)if(s={values:l(Hl),keys:o?v:l(Gl),entries:l(Ql)},a)for(c in s)($l||p||!(c in d))&&Wl(d,c,s[c]);else Nl({target:e,proto:!0,forced:$l||p},s);return s},Xl=_,Zl=vl,tf=Ea,ef=xe,nf=Jl,rf="Array Iterator",of=ef.set,af=ef.getterFor(rf),uf=nf(Array,"Array",(function(t,e){of(this,{type:rf,target:Xl(t),index:0,kind:e})}),(function(){var t=af(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");tf.Arguments=tf.Array,Zl("keys"),Zl("values"),Zl("entries");var sf=i,cf=Xi,lf=eo,ff=uf,pf=Vt,df=dt,hf=df("iterator"),vf=df("toStringTag"),yf=ff.values,gf=function(t,e){if(t){if(t[hf]!==yf)try{pf(t,hf,yf)}catch(e){t[hf]=yf}if(t[vf]||pf(t,vf,e),cf[e])for(var n in ff)if(t[n]!==ff[n])try{pf(t,n,ff[n])}catch(e){t[n]=ff[n]}}};for(var mf in cf)gf(sf[mf]&&sf[mf].prototype,mf);gf(lf,"DOMTokenList");var bf=Tn,wf=a,kf=Mn,xf=S,_f=J,Sf=Fe,Ef=go,If=Sr,Tf=Ki,Of=M,Rf=dt("isConcatSpreadable"),Af=9007199254740991,Pf="Maximum allowed index exceeded",jf=Of>=51||!wf((function(){var t=[];return t[Rf]=!1,t.concat()[0]!==t})),Cf=Tf("concat"),Lf=function(t){if(!xf(t))return!1;var e=t[Rf];return void 0!==e?!!e:kf(t)};bf({target:"Array",proto:!0,forced:!jf||!Cf},{concat:function(t){var e,n,r,i,o,a=_f(this),u=If(a,0),s=0;for(e=-1,r=arguments.length;e<r;e++)if(Lf(o=-1===e?a:arguments[e])){if(s+(i=Sf(o.length))>Af)throw TypeError(Pf);for(n=0;n<i;n++,s++)n in o&&Ef(u,s,o[n])}else{if(s>=Af)throw TypeError(Pf);Ef(u,s++,o)}return u.length=s,u}});var Mf=Tn,Nf=S,Ff=Mn,Df=qe,Uf=Fe,Bf=_,qf=go,Wf=dt,zf=Ki("slice"),Kf=Wf("species"),$f=[].slice,Vf=Math.max;Mf({target:"Array",proto:!0,forced:!zf},{slice:function(t,e){var n,r,i,o=Bf(this),a=Uf(o.length),u=Df(t,a),s=Df(void 0===e?a:e,a);if(Ff(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ff(n.prototype)?Nf(n)&&null===(n=n[Kf])&&(n=void 0):n=void 0,n===Array||void 0===n))return $f.call(o,u,s);for(r=new(void 0===n?Array:n)(Vf(s-u,0)),i=0;u<s;u++,i++)u in o&&qf(r,i,o[u]);return r.length=i,r}});var Gf=Dt,Hf=Da,Qf=br,Yf=J,Jf=function(t,e,n,r){try{return r?e(Gf(n)[0],n[1]):e(n)}catch(e){Hf(t,"throw",e)}},Xf=Ra,Zf=Fe,tp=go,ep=Na,np=Ca,rp=function(t){var e,n,r,i,o,a,u=Yf(t),s="function"==typeof this?this:Array,c=arguments.length,l=c>1?arguments[1]:void 0,f=void 0!==l,p=np(u),d=0;if(f&&(l=Qf(l,c>2?arguments[2]:void 0,2)),null==p||s==Array&&Xf(p))for(n=new s(e=Zf(u.length));e>d;d++)a=f?l(u[d],d):u[d],tp(n,d,a);else for(o=(i=ep(u,p)).next,n=new s;!(r=o.call(i)).done;d++)a=f?Jf(i,l,[r.value,d],!0):r.value,tp(n,d,a);return n.length=d,n};Tn({target:"Array",stat:!0,forced:!nu((function(t){Array.from(t)}))},{from:rp});var ip=Le,op=Fn,ap=w,up=function(t){return function(e,n){var r,i,o=op(ap(e)),a=ip(n),u=o.length;return a<0||a>=u?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},sp={codeAt:up(!1),charAt:up(!0)},cp=sp.charAt,lp=Fn,fp=xe,pp=Jl,dp="String Iterator",hp=fp.set,vp=fp.getterFor(dp);pp(String,"String",(function(t){hp(this,{type:dp,string:lp(t),index:0})}),(function(){var t,e=vp(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=cp(n,r),e.index+=t.length,{value:t,done:!1})}));var yp=Dt,gp=function(){var t=yp(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},mp={},bp=a,wp=i.RegExp;mp.UNSUPPORTED_Y=bp((function(){var t=wp("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),mp.BROKEN_CARET=bp((function(){var t=wp("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var kp,xp,_p=a,Sp=i.RegExp,Ep=_p((function(){var t=Sp(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Ip=a,Tp=i.RegExp,Op=Ip((function(){var t=Tp("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Rp=Fn,Ap=gp,Pp=mp,jp=z.exports,Cp=tr,Lp=xe.get,Mp=Ep,Np=Op,Fp=RegExp.prototype.exec,Dp=jp("native-string-replace",String.prototype.replace),Up=Fp,Bp=(kp=/a/,xp=/b*/g,Fp.call(kp,"a"),Fp.call(xp,"a"),0!==kp.lastIndex||0!==xp.lastIndex),qp=Pp.UNSUPPORTED_Y||Pp.BROKEN_CARET,Wp=void 0!==/()??/.exec("")[1];(Bp||Wp||qp||Mp||Np)&&(Up=function(t){var e,n,r,i,o,a,u,s=this,c=Lp(s),l=Rp(t),f=c.raw;if(f)return f.lastIndex=s.lastIndex,e=Up.call(f,l),s.lastIndex=f.lastIndex,e;var p=c.groups,d=qp&&s.sticky,h=Ap.call(s),v=s.source,y=0,g=l;if(d&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=l.slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==l.charAt(s.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),n=new RegExp("^(?:"+v+")",h)),Wp&&(n=new RegExp("^"+v+"$(?!\\s)",h)),Bp&&(r=s.lastIndex),i=Fp.call(d?n:s,g),d?i?(i.input=i.input.slice(y),i[0]=i[0].slice(y),i.index=s.lastIndex,s.lastIndex+=i[0].length):s.lastIndex=0:Bp&&i&&(s.lastIndex=s.global?i.index+i[0].length:r),Wp&&i&&i.length>1&&Dp.call(i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&p)for(i.groups=a=Cp(null),o=0;o<p.length;o++)a[(u=p[o])[0]]=i[u[1]];return i});var zp=Up;Tn({target:"RegExp",proto:!0,forced:/./.exec!==zp},{exec:zp});var Kp=Tn,$p=S,Vp=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),Gp=/./.test;Kp({target:"RegExp",proto:!0,forced:!Vp},{test:function(t){if("function"!=typeof this.exec)return Gp.call(this,t);var e=this.exec(t);if(null!==e&&!$p(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var Hp=Tn,Qp=u,Yp=i,Jp=tt,Xp=S,Zp=Nt.f,td=fn,ed=Yp.Symbol;if(Qp&&"function"==typeof ed&&(!("description"in ed.prototype)||void 0!==ed().description)){var nd={},rd=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof rd?new ed(t):void 0===t?ed():ed(t);return""===t&&(nd[e]=!0),e};td(rd,ed);var id=rd.prototype=ed.prototype;id.constructor=rd;var od=id.toString,ad="Symbol(test)"==String(ed("test")),ud=/^Symbol\((.*)\)[^)]+$/;Zp(id,"description",{configurable:!0,get:function(){var t=Xp(this)?this.valueOf():this,e=od.call(t);if(Jp(nd,t))return"";var n=ad?e.slice(7,-1):e.replace(ud,"$1");return""===n?void 0:n}}),Hp({global:!0,forced:!0},{Symbol:rd})}pr("iterator");var sd={exports:{}},cd={exports:{}};!function(t){var e=al.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(cd);var ld={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(ld);var fd={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(fd),function(t){var e=cd.exports,n=ld.exports,r=ol.exports,i=fd.exports;t.exports=function(t){return e(t)||n(t)||r(t)||i()},t.exports.__esModule=!0,t.exports.default=t.exports}(sd);var pd={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(pd);var dd={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(dd);var hd={exports:{}},vd={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(vd),function(t){var e=vd.exports;t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports}(hd);var yd={exports:{}},gd={exports:{}};!function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}(gd),function(t){var e=Hc.exports.default,n=gd.exports;t.exports=function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(yd);var md={exports:{}};!function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(md);var bd=Ve.includes,wd=vl;Tn({target:"Array",proto:!0},{includes:function(t){return bd(this,t,arguments.length>1?arguments[1]:void 0)}}),wd("includes");var kd=Tn,xd=_,_d=[].join,Sd=b!=Object,Ed=ro("join",",");kd({target:"Array",proto:!0,forced:Sd||!Ed},{join:function(t){return _d.call(xd(this),void 0===t?",":t)}});var Id=S,Td=Math.floor,Od=function(t){return!Id(t)&&isFinite(t)&&Td(t)===t};Tn({target:"Number",stat:!0},{isInteger:Od});var Rd=S,Ad=ma,Pd=function(t,e,n){var r,i;return Ad&&"function"==typeof(r=e.constructor)&&r!==n&&Rd(i=r.prototype)&&i!==n.prototype&&Ad(t,i),t},jd=w,Cd=Fn,Ld="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Md=RegExp("^"+Ld+Ld+"*"),Nd=RegExp(Ld+Ld+"*$"),Fd=function(t){return function(e){var n=Cd(jd(e));return 1&t&&(n=n.replace(Md,"")),2&t&&(n=n.replace(Nd,"")),n}},Dd={start:Fd(1),end:Fd(2),trim:Fd(3)},Ud=u,Bd=i,qd=bn,Wd=Gt.exports,zd=tt,Kd=y,$d=Pd,Vd=q,Gd=mt,Hd=a,Qd=tr,Yd=Pe.f,Jd=o.f,Xd=Nt.f,Zd=Dd.trim,th="Number",eh=Bd.Number,nh=eh.prototype,rh=Kd(Qd(nh))==th,ih=function(t){if(Vd(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,i,o,a,u,s,c=Gd(t,"number");if("string"==typeof c&&c.length>2)if(43===(e=(c=Zd(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,u=0;u<a;u++)if((s=o.charCodeAt(u))<48||s>i)return NaN;return parseInt(o,r)}return+c};if(qd(th,!eh(" 0o1")||!eh("0b1")||eh("+0x1"))){for(var oh,ah=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof ah&&(rh?Hd((function(){nh.valueOf.call(n)})):Kd(n)!=th)?$d(new eh(ih(e)),n,ah):ih(e)},uh=Ud?Yd(eh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),sh=0;uh.length>sh;sh++)zd(eh,oh=uh[sh])&&!zd(ah,oh)&&Xd(ah,oh,Jd(eh,oh));ah.prototype=nh,nh.constructor=ah,Wd(Bd,th,ah)}var ch=u,lh=An,fh=_,ph=s.f,dh=function(t){return function(e){for(var n,r=fh(e),i=lh(r),o=i.length,a=0,u=[];o>a;)n=i[a++],ch&&!ph.call(r,n)||u.push(t?[n,r[n]]:r[n]);return u}},hh={entries:dh(!0),values:dh(!1)}.entries;Tn({target:"Object",stat:!0},{entries:function(t){return hh(t)}}),Object.defineProperty(Gc,"__esModule",{value:!0});var vh=nl.exports,yh=sd.exports,gh=pd.exports,mh=dd.exports,bh=hd.exports,wh=yd.exports,kh=md.exports;function xh(t){return t&&"object"===Qo(t)&&"default"in t?t:{default:t}}var _h=xh(Hc.exports),Sh=xh(vh),Eh=xh(yh),Ih=xh(gh),Th=xh(mh),Oh=xh(bh),Rh=xh(wh),Ah=xh(kh),Ph=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{checks:e}},jh=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ph((function(t){for(var n=!1,r=[],i=0,o=e;i<o.length;i++){var a=o[i];"string"!=typeof a?(n=n||t instanceof a,r.push("an instance of ".concat(a.name))):(n=n||_h.default(t)===a,r.push("of type ".concat(a)))}return[n,r]}))};function Ch(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ah.default(t);if(e){var i=Ah.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rh.default(this,n)}}function Lh(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Mh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Nh=function(t,e){if(e.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(e.length));for(;e.length<t.length;)e.push(void 0);var n,r=Lh(e.entries());try{for(r.s();!(n=r.n()).done;){var i=Sh.default(n.value,2),o=i[0],a=i[1],u=Bh(t[o],a),s=Sh.default(u,4),c=s[0],l=s[1],f=s[2],p=s[3];if(!c)throw new Error("Argument ".concat(o+1," is expected to be ").concat(f).concat(p," but got ").concat(l))}}catch(t){r.e(t)}finally{r.f()}},Fh=function(t){var e,n,r;(["undefined","boolean","number","bigint","string"].includes(_h.default(t))&&(n="string"==typeof t?'"'.concat(t,'"'):"".concat(t)),"object"===_h.default(t)&&"Object"!==(null==t||null===(e=t.constructor)||void 0===e?void 0:e.name))&&(n=null===t?"null":"instance of ".concat(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name));return n||(n=_h.default(t)),n},Dh=function(t){var e,n=[],r=Lh(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(Uh(i))}}catch(t){r.e(t)}finally{r.f()}return n},Uh=function(t){var e,n=[],r=Lh(Array.isArray(t)?t:[t]);try{for(r.s();!(e=r.n()).done;){var i=e.value;"string"!=typeof i&&"function"!=typeof i?n.push(i):n.push(jh(i))}}catch(t){r.e(t)}finally{r.f()}return n},Bh=function(t,e){var n,r,i=[],o=!1,a=Lh(t);try{for(a.s();!(r=a.n()).done;){var u,s=Lh(r.value.checks);try{for(s.s();!(u=s.n()).done;){var c=(0,u.value)(e),l=Sh.default(c,3),f=l[0],p=l[1],d=l[2];o=o||f,!n&&d&&(n=d),p&&(i=[].concat(Eh.default(i),"string"==typeof p?[p]:Eh.default(p)))}}catch(t){s.e(t)}finally{s.f()}}}catch(t){a.e(t)}finally{a.f()}if(o)return[!0];var h=n||Fh(e),v=i.length-1;return[!1,h,v>0?"".concat(i.slice(0,v).join(", ")," or ").concat(i[v]):i.join(", "),v>1?";":","]};function qh(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Wh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Wh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zh=Ph((function(t){return["string"==typeof t&&t.length>0,"a non-empty string"]})),Kh=Ph((function(t){return["number"==typeof t&&Number.isInteger(t)&&t>=0,"a non-negative integer"]})),$h=Ph((function(t){return["object"===_h.default(t)&&null!==t&&!Array.isArray(t),"a pure object (non-null and non-array)"]}));function Vh(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Gh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function Gh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Gc.array=function(t,e){return Ph((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(t)];var r,i=Vh(n.entries());try{for(i.s();!(r=i.n()).done;){var o=Sh.default(r.value,2),a=o[0],u=o[1],s=Bh(Uh(e),u),c=Sh.default(s,3),l=c[0],f=c[1],p=c[2];if(!l)return[!1,"a valid array of ".concat(t," (index ").concat(a," should be ").concat(p,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(f,")")]}}catch(t){i.e(t)}finally{i.f()}return[!0]}))};var Hh=Gc.custom=Ph,Qh=Gc.literal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ph((function(t){for(var n=!1,r=[],i=0,o=e;i<o.length;i++){var a=o[i];n=n||t===a,r.push("string"==typeof a?'"'.concat(a,'"'):"".concat(a))}return[n,r]}))};Gc.nonEmptyArray=function(t,e){return Ph((function(n){if(!Array.isArray(n)||n.length<1)return[!1,"a non-empty array of ".concat(t)];var r,i=qh(n.entries());try{for(i.s();!(r=i.n()).done;){var o=Sh.default(r.value,2),a=o[0],u=o[1],s=Bh(Uh(e),u),c=Sh.default(s,3),l=c[0],f=c[1],p=c[2];if(!l)return[!1,"a valid non-empty array of ".concat(t," (index ").concat(a," should be ").concat(p,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(f,")")]}}catch(t){i.e(t)}finally{i.f()}return[!0]}))};var Yh=Gc.nonEmptyString=zh,Jh=Gc.nonNegativeInteger=Kh,Xh=Gc.objectSchema=function(t,e){return Ph((function(n){if("object"!==_h.default(n)||null===n||Array.isArray(n))return[!1,"valid ".concat(t," (should be a pure object)")];for(var r=0,i=Object.entries(e);r<i.length;r++){var o=Sh.default(i[r],2),a=o[0],u=o[1],s=Bh(Uh(u),n[a]),c=Sh.default(s,3),l=c[0],f=c[1],p=c[2];if(!l)return[!1,"valid ".concat(t,' (key "').concat(a,'" should be ').concat(p,")"),"malformed ".concat(t,' (key "').concat(a,'" is ').concat(f,")")]}return[!0]}))},Zh=Gc.pureObject=$h;Gc.runtimeTypeValidation=Nh,Gc.stringifyReceivedType=Fh,Gc.type=jh,Gc.validateConstructorTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dh(e);return function(t){return function(t){Oh.default(n,t);var e=Ch(n);function n(){Th.default(this,n);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return Nh(r,i),e.call.apply(e,[this].concat(i))}return Ih.default(n)}(t)}};var tv=Gc.validateTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dh(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var i=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Nh(r,e),i.apply(this,e)}}},ev=Gc.validateTypesAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dh(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var i=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{Nh(r,e)}catch(t){return Promise.reject(t)}return i.apply(this,e)}}},nv={},rv={exports:{}};!function(t){function e(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function u(t){e(a,i,o,u,s,"next",t)}function s(t){e(a,i,o,u,s,"throw",t)}u(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports}(rv);var iv={exports:{}},ov={exports:{}};!function(t){var e=md.exports;t.exports=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports}(ov),function(t){var e=ov.exports;function n(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=n=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=n=function(t,n,r){var i=e(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?t:r):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(iv);var av={exports:{}};!function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports}(av);var uv=n(Kc),sv=Gt.exports,cv=Dt,lv=Fn,fv=a,pv=gp,dv="toString",hv=RegExp.prototype,vv=hv.toString,yv=fv((function(){return"/a/b"!=vv.call({source:"a",flags:"b"})})),gv=vv.name!=dv;(yv||gv)&&sv(RegExp.prototype,dv,(function(){var t=cv(this),e=lv(t.source),n=t.flags;return"/"+e+"/"+lv(void 0===n&&t instanceof RegExp&&!("flags"in hv)?pv.call(t):n)}),{unsafe:!0});var mv={exports:{}};!function(t){var n,r;n=e,r=function(){var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":Qo(window))!==e&&Qo(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":Qo(console))!==e&&("trace"===r&&n?o:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):t)}function u(e,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function s(t,n,r){return function(){("undefined"==typeof console?"undefined":Qo(console))!==e&&(u.call(this,n,r),this[t].apply(this,arguments))}}function c(t,e,n){return a(t)||s.apply(this,arguments)}function l(t,n,i){var o,a=this;n=null==n?"WARN":n;var s="loglevel";function l(){var t;if(("undefined"==typeof window?"undefined":Qo(window))!==e&&s){try{t=window.localStorage[s]}catch(t){}if(Qo(t)===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(s)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?s+=":"+t:"symbol"===Qo(t)&&(s=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||c,a.getLevel=function(){return o},a.setLevel=function(n,i){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==i&&function(t){var n=(r[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":Qo(window))!==e&&s){try{return void(window.localStorage[s]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+n+";"}catch(t){}}}(n),u.call(a,n,t),("undefined"==typeof console?"undefined":Qo(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,l()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(("undefined"==typeof window?"undefined":Qo(window))!==e&&s){try{return void window.localStorage.removeItem(s)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var f=l();null==f&&(f=n),a.setLevel(f,!1)}var f=new l,p={};f.getLogger=function(t){if("symbol"!==Qo(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=p[t];return e||(e=p[t]=new l(t,f.getLevel(),f.methodFactory)),e};var d=("undefined"==typeof window?"undefined":Qo(window))!==e?window.log:void 0;return f.noConflict=function(){return("undefined"==typeof window?"undefined":Qo(window))!==e&&window.log===f&&(window.log=d),f},f.getLoggers=function(){return p},f.default=f,f},t.exports?t.exports=r():n.log=r()}(mv);var bv={exports:{}},wv=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),kv=Tn,xv=ue,_v=S,Sv=tt,Ev=Nt.f,Iv=Pe,Tv=er,Ov=wv,Rv=!1,Av=rt("meta"),Pv=0,jv=Object.isExtensible||function(){return!0},Cv=function(t){Ev(t,Av,{value:{objectID:"O"+Pv++,weakData:{}}})},Lv=bv.exports={enable:function(){Lv.enable=function(){},Rv=!0;var t=Iv.f,e=[].splice,n={};n[Av]=1,t(n).length&&(Iv.f=function(n){for(var r=t(n),i=0,o=r.length;i<o;i++)if(r[i]===Av){e.call(r,i,1);break}return r},kv({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Tv.f}))},fastKey:function(t,e){if(!_v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Sv(t,Av)){if(!jv(t))return"F";if(!e)return"E";Cv(t)}return t[Av].objectID},getWeakData:function(t,e){if(!Sv(t,Av)){if(!jv(t))return!0;if(!e)return!1;Cv(t)}return t[Av].weakData},onFreeze:function(t){return Ov&&Rv&&jv(t)&&!Sv(t,Av)&&Cv(t),t}};xv[Av]=!0;var Mv=Tn,Nv=i,Fv=bn,Dv=Gt.exports,Uv=bv.exports,Bv=Ga,qv=Sa,Wv=S,zv=a,Kv=nu,$v=yr,Vv=Pd,Gv=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=Nv[t],u=a&&a.prototype,s=a,c={},l=function(t){var e=u[t];Dv(u,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!Wv(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!Wv(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!Wv(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Fv(t,"function"!=typeof a||!(i||u.forEach&&!zv((function(){(new a).entries().next()})))))s=n.getConstructor(e,t,r,o),Uv.enable();else if(Fv(t,!0)){var f=new s,p=f[o](i?{}:-0,1)!=f,d=zv((function(){f.has(1)})),h=Kv((function(t){new a(t)})),v=!i&&zv((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));h||((s=e((function(e,n){qv(e,s,t);var i=Vv(new a,e,s);return null!=n&&Bv(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=u,u.constructor=s),(d||v)&&(l("delete"),l("has"),r&&l("get")),(v||p)&&l(o),i&&u.clear&&delete u.clear}return c[t]=s,Mv({global:!0,forced:s!=a},c),$v(s,t),i||n.setStrong(s,t,r),s},Hv=Nt.f,Qv=tr,Yv=ha,Jv=br,Xv=Sa,Zv=Ga,ty=Jl,ey=_a,ny=u,ry=bv.exports.fastKey,iy=xe.set,oy=xe.getterFor,ay={getConstructor:function(t,e,n,r){var i=t((function(t,o){Xv(t,i,e),iy(t,{type:e,index:Qv(null),first:void 0,last:void 0,size:0}),ny||(t.size=0),null!=o&&Zv(o,t[r],{that:t,AS_ENTRIES:n})})),o=oy(e),a=function(t,e,n){var r,i,a=o(t),s=u(t,e);return s?s.value=n:(a.last=s={index:i=ry(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),ny?a.size++:t.size++,"F"!==i&&(a.index[i]=s)),t},u=function(t,e){var n,r=o(t),i=ry(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Yv(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,ny?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=u(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),ny?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=Jv(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),Yv(i.prototype,n?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),ny&&Hv(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=oy(e),o=oy(r);ty(t,e,(function(t,e){iy(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ey(e)}};Gv("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ay);var uy={exports:{}};!function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,r,i;for(n=1;n<arguments.length;n++)for(i in r=arguments[n])r.hasOwnProperty(i)&&(t[i]=r[i]);return t}},function(t,e,n){var r=n(0);t.exports={build:function(t,e){var n,i,o,a=e.plugins;for(n=0,i=a.length;n<i;n++)(o=a[n]).methods&&r(t,o.methods),o.properties&&Object.defineProperties(t,o.properties)},hook:function(t,e,n){var r,i,o,a,u=t.config.plugins,s=[t.context];for(n&&(s=s.concat(n)),r=0,i=u.length;r<i;r++)a=u[r],(o=u[r][e])&&o.apply(a,s)}}},function(t,e,n){function r(t){if(0===t.length)return t;var e,n,r=t.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return t;for(n=r[0].toLowerCase(),e=1;e<r.length;e++)n=n+r[e].charAt(0).toUpperCase()+r[e].substring(1).toLowerCase();return n}r.prepended=function(t,e){return t+(e=r(e))[0].toUpperCase()+e.substring(1)},t.exports=r},function(t,e,n){var r=n(0),i=n(2);function o(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}r(o.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=i.prepended("onEnter",t),this.lifecycle.onLeave[t]=i.prepended("onLeave",t),this.lifecycle.on[t]=i.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=i.prepended("onBefore",t),this.lifecycle.onAfter[t]=i.prepended("onAfter",t),this.lifecycle.on[t]=i.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,r=t.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(r({},this.defaults.init,{to:t,active:!0})):"object"===Qo(t)?this.mapTransition(r({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===Qo(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,r,i;for(n=0,r=(t=t||[]).length;n<r;n++)"function"==typeof(i=t[n])&&(t[n]=i=i()),i.configure&&i.configure(this);return t},configureTransitions:function(t){var e,n,r,i,o,a=this.defaults.wildcard;for(n=0;n<t.length;n++)for(r=t[n],i=Array.isArray(r.from)?r.from:[r.from||a],o=r.to||a,e=0;e<i.length;e++)this.mapTransition({name:r.name,from:i[e],to:o})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=o},function(t,e,n){var r=n(0),i=n(6),o=n(1),a=[null,[]];function u(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}r(u.prototype,{init:function(t){if(r(this.context,this.config.data.apply(this.context,t)),o.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,t),i=r&&r.to;return"function"==typeof i?i.apply(this.context,e):i===n?this.state:i},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,r){var i=this.config.lifecycle,o=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[t]),o?this.observersForEvent(i.onLeave.state):a,o?this.observersForEvent(i.onLeave[e]):a,this.observersForEvent(i.on.transition),o?["doTransit",[this]]:a,o?this.observersForEvent(i.onEnter.state):a,o?this.observersForEvent(i.onEnter[n]):a,o?this.observersForEvent(i.on[n]):a,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[t]),this.observersForEvent(i.on[t])],r)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,r=this.observers.length,i=[];n<r;n++)(e=this.observers[n])[t]&&i.push(e);return[t,i,!0]},observeEvents:function(t,e,n,r){if(0===t.length)return this.endTransit(void 0===r||r);var i=t[0][0],a=t[0][1],u=t[0][2];if(e[0].event=i,i&&u&&i!==n&&o.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,i,r);var s=a.shift(),c=s[i].apply(s,e);return c&&"function"==typeof c.then?c.then(this.observeEvents.bind(this,t,e,i)).catch(this.failTransit.bind(this)):!1===c?this.endTransit(!1):this.observeEvents(t,e,i,c)},onInvalidTransition:function(t,e,n){throw new i("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new i("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=u},function(t,e,n){var r=n(0),i=n(2),o=n(1),a=n(3),u=n(4),s={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},c={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function l(t){return f(this||{},t)}function f(t,e){return p(t,new a(e,l)),t._fsm(),t}function p(t,e){if("object"!==Qo(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");o.build(t,e),Object.defineProperties(t,c),r(t,s),r(t,e.methods),e.allTransitions().forEach((function(e){t[i(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}})),t._fsm=function(){this._fsm=new u(this,e),this._fsm.init(arguments)}}l.version="3.0.1",l.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new a(e,l);return p(t.prototype,n),t.prototype._fsm.config=n,t},l.apply=f,l.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=l},function(t,e,n){t.exports=function(t,e,n,r,i){this.message=t,this.transition=e,this.from=n,this.to=r,this.current=i}}])},t.exports=n()}(uy);var sy={exports:{}},cy="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(cy){var ly=new Uint8Array(16);sy.exports=function(){return cy(ly),ly}}else{var fy=new Array(16);sy.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),fy[e]=t>>>((3&e)<<3)&255;return fy}}for(var py=[],dy=0;dy<256;++dy)py[dy]=(dy+256).toString(16).substr(1);var hy,vy,yy=function(t,e){var n=e||0,r=py;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},gy=sy.exports,my=yy,by=0,wy=0;var ky=function(t,e,n){var r=e&&n||0,i=e||[],o=(t=t||{}).node||hy,a=void 0!==t.clockseq?t.clockseq:vy;if(null==o||null==a){var u=gy();null==o&&(o=hy=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=vy=16383&(u[6]<<8|u[7]))}var s=void 0!==t.msecs?t.msecs:(new Date).getTime(),c=void 0!==t.nsecs?t.nsecs:wy+1,l=s-by+(c-wy)/1e4;if(l<0&&void 0===t.clockseq&&(a=a+1&16383),(l<0||s>by)&&void 0===t.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");by=s,wy=c,vy=a;var f=(1e4*(268435455&(s+=122192928e5))+c)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var p=s/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=255&p,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var d=0;d<6;++d)i[r+d]=o[d];return e||my(i)},xy=sy.exports,_y=yy;var Sy=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||xy)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;++o)e[r+o]=i[o];return e||_y(i)},Ey=ky,Iy=Sy,Ty=Iy;Ty.v1=Ey,Ty.v4=Iy;var Oy=Ty,Ry=Gt.exports,Ay=zp,Py=a,jy=dt,Cy=Vt,Ly=jy("species"),My=RegExp.prototype,Ny=function(t,e,n,r){var i=jy(t),o=!Py((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!Py((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ly]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var u=/./[i],s=e(i,""[t],(function(t,e,n,r,i){var a=e.exec;return a===Ay||a===My.exec?o&&!i?{done:!0,value:u.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));Ry(String.prototype,t,s[0]),Ry(My,i,s[1])}r&&Cy(My[i],"sham",!0)},Fy=sp.charAt,Dy=function(t,e,n){return e+(n?Fy(t,e).length:1)},Uy=J,By=Math.floor,qy="".replace,Wy=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,zy=/\$([$&'`]|\d{1,2})/g,Ky=y,$y=zp,Vy=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Ky(t))throw TypeError("RegExp#exec called on incompatible receiver");return $y.call(t,e)},Gy=Ny,Hy=a,Qy=Dt,Yy=Le,Jy=Fe,Xy=Fn,Zy=w,tg=Dy,eg=function(t,e,n,r,i,o){var a=n+t.length,u=r.length,s=zy;return void 0!==i&&(i=Uy(i),s=Wy),qy.call(o,s,(function(o,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":c=i[s.slice(1,-1)];break;default:var l=+s;if(0===l)return o;if(l>u){var f=By(l/10);return 0===f?o:f<=u?void 0===r[f-1]?s.charAt(1):r[f-1]+s.charAt(1):o}c=r[l-1]}return void 0===c?"":c}))},ng=Vy,rg=dt("replace"),ig=Math.max,og=Math.min,ag="$0"==="a".replace(/./,"$0"),ug=!!/./[rg]&&""===/./[rg]("a","$0"),sg=!Hy((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));Gy("replace",(function(t,e,n){var r=ug?"$":"$0";return[function(t,n){var r=Zy(this),i=null==t?void 0:t[rg];return void 0!==i?i.call(t,r,n):e.call(Xy(r),t,n)},function(t,i){var o=Qy(this),a=Xy(t);if("string"==typeof i&&-1===i.indexOf(r)&&-1===i.indexOf("$<")){var u=n(e,o,a,i);if(u.done)return u.value}var s="function"==typeof i;s||(i=Xy(i));var c=o.global;if(c){var l=o.unicode;o.lastIndex=0}for(var f=[];;){var p=ng(o,a);if(null===p)break;if(f.push(p),!c)break;""===Xy(p[0])&&(o.lastIndex=tg(a,Jy(o.lastIndex),l))}for(var d,h="",v=0,y=0;y<f.length;y++){p=f[y];for(var g=Xy(p[0]),m=ig(og(Yy(p.index),a.length),0),b=[],w=1;w<p.length;w++)b.push(void 0===(d=p[w])?d:String(d));var k=p.groups;if(s){var x=[g].concat(b,m,a);void 0!==k&&x.push(k);var _=Xy(i.apply(void 0,x))}else _=eg(g,a,m,b,k,i);m>=v&&(h+=a.slice(v,m)+_,v=m+g.length)}return h+a.slice(v)}]}),!sg||!ag||ug);var cg,lg,fg,pg={exports:{}},dg="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,hg=dg,vg=u,yg=i,gg=S,mg=tt,bg=aa,wg=Vt,kg=Gt.exports,xg=Nt.f,_g=xl,Sg=ma,Eg=dt,Ig=rt,Tg=yg.Int8Array,Og=Tg&&Tg.prototype,Rg=yg.Uint8ClampedArray,Ag=Rg&&Rg.prototype,Pg=Tg&&_g(Tg),jg=Og&&_g(Og),Cg=Object.prototype,Lg=Cg.isPrototypeOf,Mg=Eg("toStringTag"),Ng=Ig("TYPED_ARRAY_TAG"),Fg=Ig("TYPED_ARRAY_CONSTRUCTOR"),Dg=hg&&!!Sg&&"Opera"!==bg(yg.opera),Ug=!1,Bg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},qg={BigInt64Array:8,BigUint64Array:8},Wg=function(t){if(!gg(t))return!1;var e=bg(t);return mg(Bg,e)||mg(qg,e)};for(cg in Bg)(fg=(lg=yg[cg])&&lg.prototype)?wg(fg,Fg,lg):Dg=!1;for(cg in qg)(fg=(lg=yg[cg])&&lg.prototype)&&wg(fg,Fg,lg);if((!Dg||"function"!=typeof Pg||Pg===Function.prototype)&&(Pg=function(){throw TypeError("Incorrect invocation")},Dg))for(cg in Bg)yg[cg]&&Sg(yg[cg],Pg);if((!Dg||!jg||jg===Cg)&&(jg=Pg.prototype,Dg))for(cg in Bg)yg[cg]&&Sg(yg[cg].prototype,jg);if(Dg&&_g(Ag)!==jg&&Sg(Ag,jg),vg&&!mg(jg,Mg))for(cg in Ug=!0,xg(jg,Mg,{get:function(){return gg(this)?this[Ng]:void 0}}),Bg)yg[cg]&&wg(yg[cg],Ng,cg);var zg={NATIVE_ARRAY_BUFFER_VIEWS:Dg,TYPED_ARRAY_CONSTRUCTOR:Fg,TYPED_ARRAY_TAG:Ug&&Ng,aTypedArray:function(t){if(Wg(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(Sg&&!Lg.call(Pg,t))throw TypeError("Target is not a typed array constructor");return t},exportTypedArrayMethod:function(t,e,n){if(vg){if(n)for(var r in Bg){var i=yg[r];if(i&&mg(i.prototype,t))try{delete i.prototype[t]}catch(t){}}jg[t]&&!n||kg(jg,t,n?e:Dg&&Og[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(vg){if(Sg){if(n)for(r in Bg)if((i=yg[r])&&mg(i,t))try{delete i[t]}catch(t){}if(Pg[t]&&!n)return;try{return kg(Pg,t,n?e:Dg&&Pg[t]||e)}catch(t){}}for(r in Bg)!(i=yg[r])||i[t]&&!n||kg(i,t,e)}},isView:function(t){if(!gg(t))return!1;var e=bg(t);return"DataView"===e||mg(Bg,e)||mg(qg,e)},isTypedArray:Wg,TypedArray:Pg,TypedArrayPrototype:jg},Kg=i,$g=a,Vg=nu,Gg=zg.NATIVE_ARRAY_BUFFER_VIEWS,Hg=Kg.ArrayBuffer,Qg=Kg.Int8Array,Yg=!Gg||!$g((function(){Qg(1)}))||!$g((function(){new Qg(-1)}))||!Vg((function(t){new Qg,new Qg(null),new Qg(1.5),new Qg(t)}),!0)||$g((function(){return 1!==new Qg(new Hg(2),1,void 0).length})),Jg=Le,Xg=Fe,Zg=function(t){if(void 0===t)return 0;var e=Jg(t),n=Xg(e);if(e!==n)throw RangeError("Wrong length or index");return n},tm=Math.abs,em=Math.pow,nm=Math.floor,rm=Math.log,im=Math.LN2,om=J,am=qe,um=Fe,sm=function(t){for(var e=om(this),n=um(e.length),r=arguments.length,i=am(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:am(o,n);a>i;)e[i++]=t;return e},cm=i,lm=u,fm=dg,pm=Vt,dm=ha,hm=a,vm=Sa,ym=Le,gm=Fe,mm=Zg,bm={pack:function(t,e,n){var r,i,o,a=new Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,l=23===e?em(2,-24)-em(2,-77):0,f=t<0||0===t&&1/t<0?1:0,p=0;for((t=tm(t))!=t||t===1/0?(i=t!=t?1:0,r=s):(r=nm(rm(t)/im),t*(o=em(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?l/o:l*em(2,1-c))*o>=2&&(r++,o/=2),r+c>=s?(i=0,r=s):r+c>=1?(i=(t*o-1)*em(2,e),r+=c):(i=t*em(2,c-1)*em(2,e),r=0));e>=8;a[p++]=255&i,i/=256,e-=8);for(r=r<<e|i,u+=e;u>0;a[p++]=255&r,r/=256,u-=8);return a[--p]|=128*f,a},unpack:function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,c=t[s--],l=127&c;for(c>>=7;u>0;l=256*l+t[s],s--,u-=8);for(n=l&(1<<-u)-1,l>>=-u,u+=e;u>0;n=256*n+t[s],s--,u-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-1/0:1/0;n+=em(2,e),l-=a}return(c?-1:1)*n*em(2,l-e)}},wm=xl,km=ma,xm=Pe.f,_m=Nt.f,Sm=sm,Em=yr,Im=xe.get,Tm=xe.set,Om="ArrayBuffer",Rm="DataView",Am="Wrong index",Pm=cm.ArrayBuffer,jm=Pm,Cm=cm.DataView,Lm=Cm&&Cm.prototype,Mm=Object.prototype,Nm=cm.RangeError,Fm=bm.pack,Dm=bm.unpack,Um=function(t){return[255&t]},Bm=function(t){return[255&t,t>>8&255]},qm=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Wm=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},zm=function(t){return Fm(t,23,4)},Km=function(t){return Fm(t,52,8)},$m=function(t,e){_m(t.prototype,e,{get:function(){return Im(this)[e]}})},Vm=function(t,e,n,r){var i=mm(n),o=Im(t);if(i+e>o.byteLength)throw Nm(Am);var a=Im(o.buffer).bytes,u=i+o.byteOffset,s=a.slice(u,u+e);return r?s:s.reverse()},Gm=function(t,e,n,r,i,o){var a=mm(n),u=Im(t);if(a+e>u.byteLength)throw Nm(Am);for(var s=Im(u.buffer).bytes,c=a+u.byteOffset,l=r(+i),f=0;f<e;f++)s[c+f]=l[o?f:e-f-1]};if(fm){if(!hm((function(){Pm(1)}))||!hm((function(){new Pm(-1)}))||hm((function(){return new Pm,new Pm(1.5),new Pm(NaN),Pm.name!=Om}))){for(var Hm,Qm=(jm=function(t){return vm(this,jm),new Pm(mm(t))}).prototype=Pm.prototype,Ym=xm(Pm),Jm=0;Ym.length>Jm;)(Hm=Ym[Jm++])in jm||pm(jm,Hm,Pm[Hm]);Qm.constructor=jm}km&&wm(Lm)!==Mm&&km(Lm,Mm);var Xm=new Cm(new jm(2)),Zm=Lm.setInt8;Xm.setInt8(0,2147483648),Xm.setInt8(1,2147483649),!Xm.getInt8(0)&&Xm.getInt8(1)||dm(Lm,{setInt8:function(t,e){Zm.call(this,t,e<<24>>24)},setUint8:function(t,e){Zm.call(this,t,e<<24>>24)}},{unsafe:!0})}else jm=function(t){vm(this,jm,Om);var e=mm(t);Tm(this,{bytes:Sm.call(new Array(e),0),byteLength:e}),lm||(this.byteLength=e)},Cm=function(t,e,n){vm(this,Cm,Rm),vm(t,jm,Rm);var r=Im(t).byteLength,i=ym(e);if(i<0||i>r)throw Nm("Wrong offset");if(i+(n=void 0===n?r-i:gm(n))>r)throw Nm("Wrong length");Tm(this,{buffer:t,byteLength:n,byteOffset:i}),lm||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},lm&&($m(jm,"byteLength"),$m(Cm,"buffer"),$m(Cm,"byteLength"),$m(Cm,"byteOffset")),dm(Cm.prototype,{getInt8:function(t){return Vm(this,1,t)[0]<<24>>24},getUint8:function(t){return Vm(this,1,t)[0]},getInt16:function(t){var e=Vm(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Vm(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Wm(Vm(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Wm(Vm(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Dm(Vm(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Dm(Vm(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Gm(this,1,t,Um,e)},setUint8:function(t,e){Gm(this,1,t,Um,e)},setInt16:function(t,e){Gm(this,2,t,Bm,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Gm(this,2,t,Bm,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Gm(this,4,t,qm,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Gm(this,4,t,qm,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Gm(this,4,t,zm,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Gm(this,8,t,Km,e,arguments.length>2?arguments[2]:void 0)}});Em(jm,Om),Em(Cm,Rm);var tb=Le,eb=function(t){var e=tb(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},nb=function(t,e){var n=eb(t);if(n%e)throw RangeError("Wrong offset");return n},rb=J,ib=Fe,ob=Na,ab=Ca,ub=Ra,sb=br,cb=zg.aTypedArrayConstructor,lb=Tn,fb=i,pb=u,db=Yg,hb=zg,vb={ArrayBuffer:jm,DataView:Cm},yb=Sa,gb=h,mb=Vt,bb=Od,wb=Fe,kb=Zg,xb=nb,_b=kt,Sb=tt,Eb=aa,Ib=S,Tb=q,Ob=tr,Rb=ma,Ab=Pe.f,Pb=function(t){var e,n,r,i,o,a,u=rb(t),s=arguments.length,c=s>1?arguments[1]:void 0,l=void 0!==c,f=ab(u);if(null!=f&&!ub(f))for(a=(o=ob(u,f)).next,u=[];!(i=a.call(o)).done;)u.push(i.value);for(l&&s>2&&(c=sb(c,arguments[2],2)),n=ib(u.length),r=new(cb(this))(n),e=0;n>e;e++)r[e]=l?c(u[e],e):u[e];return r},jb=jr.forEach,Cb=_a,Lb=Nt,Mb=o,Nb=Pd,Fb=xe.get,Db=xe.set,Ub=Lb.f,Bb=Mb.f,qb=Math.round,Wb=fb.RangeError,zb=vb.ArrayBuffer,Kb=vb.DataView,$b=hb.NATIVE_ARRAY_BUFFER_VIEWS,Vb=hb.TYPED_ARRAY_CONSTRUCTOR,Gb=hb.TYPED_ARRAY_TAG,Hb=hb.TypedArray,Qb=hb.TypedArrayPrototype,Yb=hb.aTypedArrayConstructor,Jb=hb.isTypedArray,Xb="BYTES_PER_ELEMENT",Zb="Wrong length",tw=function(t,e){for(var n=0,r=e.length,i=new(Yb(t))(r);r>n;)i[n]=e[n++];return i},ew=function(t,e){Ub(t,e,{get:function(){return Fb(this)[e]}})},nw=function(t){var e;return t instanceof zb||"ArrayBuffer"==(e=Eb(t))||"SharedArrayBuffer"==e},rw=function(t,e){return Jb(t)&&!Tb(e)&&e in t&&bb(+e)&&e>=0},iw=function(t,e){return e=_b(e),rw(t,e)?gb(2,t[e]):Bb(t,e)},ow=function(t,e,n){return e=_b(e),!(rw(t,e)&&Ib(n)&&Sb(n,"value"))||Sb(n,"get")||Sb(n,"set")||n.configurable||Sb(n,"writable")&&!n.writable||Sb(n,"enumerable")&&!n.enumerable?Ub(t,e,n):(t[e]=n.value,t)};pb?($b||(Mb.f=iw,Lb.f=ow,ew(Qb,"buffer"),ew(Qb,"byteOffset"),ew(Qb,"byteLength"),ew(Qb,"length")),lb({target:"Object",stat:!0,forced:!$b},{getOwnPropertyDescriptor:iw,defineProperty:ow}),pg.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,i=t+(n?"Clamped":"")+"Array",o="get"+t,a="set"+t,u=fb[i],s=u,c=s&&s.prototype,l={},f=function(t,e){Ub(t,e,{get:function(){return function(t,e){var n=Fb(t);return n.view[o](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,i){var o=Fb(t);n&&(i=(i=qb(i))<0?0:i>255?255:255&i),o.view[a](e*r+o.byteOffset,i,!0)}(this,e,t)},enumerable:!0})};$b?db&&(s=e((function(t,e,n,o){return yb(t,s,i),Nb(Ib(e)?nw(e)?void 0!==o?new u(e,xb(n,r),o):void 0!==n?new u(e,xb(n,r)):new u(e):Jb(e)?tw(s,e):Pb.call(s,e):new u(kb(e)),t,s)})),Rb&&Rb(s,Hb),jb(Ab(u),(function(t){t in s||mb(s,t,u[t])})),s.prototype=c):(s=e((function(t,e,n,o){yb(t,s,i);var a,u,c,l=0,p=0;if(Ib(e)){if(!nw(e))return Jb(e)?tw(s,e):Pb.call(s,e);a=e,p=xb(n,r);var d=e.byteLength;if(void 0===o){if(d%r)throw Wb(Zb);if((u=d-p)<0)throw Wb(Zb)}else if((u=wb(o)*r)+p>d)throw Wb(Zb);c=u/r}else c=kb(e),a=new zb(u=c*r);for(Db(t,{buffer:a,byteOffset:p,byteLength:u,length:c,view:new Kb(a)});l<c;)f(t,l++)})),Rb&&Rb(s,Hb),c=s.prototype=Ob(Qb)),c.constructor!==s&&mb(c,"constructor",s),mb(c,Vb,s),Gb&&mb(c,Gb,i),l[i]=s,lb({global:!0,forced:s!=u,sham:!$b},l),Xb in s||mb(s,Xb,r),Xb in c||mb(c,Xb,r),Cb(i)}):pg.exports=function(){},(0,pg.exports)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var aw=J,uw=qe,sw=Fe,cw=Math.min,lw=[].copyWithin||function(t,e){var n=aw(this),r=sw(n.length),i=uw(t,r),o=uw(e,r),a=arguments.length>2?arguments[2]:void 0,u=cw((void 0===a?r:uw(a,r))-o,r-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);u-- >0;)o in n?n[i]=n[o]:delete n[i],i+=s,o+=s;return n},fw=lw,pw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("copyWithin",(function(t,e){return fw.call(pw(this),t,e,arguments.length>2?arguments[2]:void 0)}));var dw=jr.every,hw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("every",(function(t){return dw(hw(this),t,arguments.length>1?arguments[1]:void 0)}));var vw=sm,yw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("fill",(function(t){return vw.apply(yw(this),arguments)}));var gw=au,mw=zg.TYPED_ARRAY_CONSTRUCTOR,bw=zg.aTypedArrayConstructor,ww=function(t){return bw(gw(t,t[mw]))},kw=function(t,e){for(var n=0,r=e.length,i=new t(r);r>n;)i[n]=e[n++];return i},xw=ww,_w=jr.filter,Sw=function(t,e){return kw(xw(t),e)},Ew=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("filter",(function(t){var e=_w(Ew(this),t,arguments.length>1?arguments[1]:void 0);return Sw(this,e)}));var Iw=jr.find,Tw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("find",(function(t){return Iw(Tw(this),t,arguments.length>1?arguments[1]:void 0)}));var Ow=jr.findIndex,Rw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("findIndex",(function(t){return Ow(Rw(this),t,arguments.length>1?arguments[1]:void 0)}));var Aw=jr.forEach,Pw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("forEach",(function(t){Aw(Pw(this),t,arguments.length>1?arguments[1]:void 0)}));var jw=Ve.includes,Cw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("includes",(function(t){return jw(Cw(this),t,arguments.length>1?arguments[1]:void 0)}));var Lw=Ve.indexOf,Mw=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("indexOf",(function(t){return Lw(Mw(this),t,arguments.length>1?arguments[1]:void 0)}));var Nw=i,Fw=zg,Dw=uf,Uw=dt("iterator"),Bw=Nw.Uint8Array,qw=Dw.values,Ww=Dw.keys,zw=Dw.entries,Kw=Fw.aTypedArray,$w=Fw.exportTypedArrayMethod,Vw=Bw&&Bw.prototype[Uw],Gw=!!Vw&&("values"==Vw.name||null==Vw.name),Hw=function(){return qw.call(Kw(this))};$w("entries",(function(){return zw.call(Kw(this))})),$w("keys",(function(){return Ww.call(Kw(this))})),$w("values",Hw,!Gw),$w(Uw,Hw,!Gw);var Qw=zg.aTypedArray,Yw=[].join;(0,zg.exportTypedArrayMethod)("join",(function(t){return Yw.apply(Qw(this),arguments)}));var Jw=_,Xw=Le,Zw=Fe,tk=ro,ek=Math.min,nk=[].lastIndexOf,rk=!!nk&&1/[1].lastIndexOf(1,-0)<0,ik=tk("lastIndexOf"),ok=rk||!ik?function(t){if(rk)return nk.apply(this,arguments)||0;var e=Jw(this),n=Zw(e.length),r=n-1;for(arguments.length>1&&(r=ek(r,Xw(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:nk,ak=ok,uk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("lastIndexOf",(function(t){return ak.apply(uk(this),arguments)}));var sk=jr.map,ck=ww,lk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("map",(function(t){return sk(lk(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(ck(t))(e)}))}));var fk=gr,pk=J,dk=b,hk=Fe,vk=function(t){return function(e,n,r,i){fk(n);var o=pk(e),a=dk(o),u=hk(o.length),s=t?u-1:0,c=t?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(i=n(i,a[s],s,o));return i}},yk={left:vk(!1),right:vk(!0)},gk=yk.left,mk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("reduce",(function(t){return gk(mk(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var bk=yk.right,wk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("reduceRight",(function(t){return bk(wk(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var kk=zg.aTypedArray,xk=zg.exportTypedArrayMethod,_k=Math.floor;xk("reverse",(function(){for(var t,e=this,n=kk(e).length,r=_k(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e}));var Sk=Fe,Ek=nb,Ik=J,Tk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("set",(function(t){Tk(this);var e=Ek(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=Ik(t),i=Sk(r.length),o=0;if(i+e>n)throw RangeError("Wrong length");for(;o<i;)this[e+o]=r[o++]}),a((function(){new Int8Array(1).set({})})));var Ok=ww,Rk=zg.aTypedArray,Ak=[].slice;(0,zg.exportTypedArrayMethod)("slice",(function(t,e){for(var n=Ak.call(Rk(this),t,e),r=Ok(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),a((function(){new Int8Array(1).slice()})));var Pk=jr.some,jk=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("some",(function(t){return Pk(jk(this),t,arguments.length>1?arguments[1]:void 0)}));var Ck=Math.floor,Lk=function(t,e){var n=t.length,r=Ck(n/2);return n<8?Mk(t,e):Nk(Lk(t.slice(0,r),e),Lk(t.slice(r),e),e)},Mk=function(t,e){for(var n,r,i=t.length,o=1;o<i;){for(r=o,n=t[o];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==o++&&(t[r]=n)}return t},Nk=function(t,e,n){for(var r=t.length,i=e.length,o=0,a=0,u=[];o<r||a<i;)o<r&&a<i?u.push(n(t[o],e[a])<=0?t[o++]:e[a++]):u.push(o<r?t[o++]:e[a++]);return u},Fk=Lk,Dk=O.match(/firefox\/(\d+)/i),Uk=!!Dk&&+Dk[1],Bk=/MSIE|Trident/.test(O),qk=O.match(/AppleWebKit\/(\d+)\./),Wk=!!qk&&+qk[1],zk=a,Kk=gr,$k=Fe,Vk=Fk,Gk=Uk,Hk=Bk,Qk=M,Yk=Wk,Jk=zg.aTypedArray,Xk=zg.exportTypedArrayMethod,Zk=i.Uint16Array,tx=Zk&&Zk.prototype.sort,ex=!!tx&&!zk((function(){var t=new Zk(2);t.sort(null),t.sort({})})),nx=!!tx&&!zk((function(){if(Qk)return Qk<74;if(Gk)return Gk<67;if(Hk)return!0;if(Yk)return Yk<602;var t,e,n=new Zk(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));Xk("sort",(function(t){var e=this;if(void 0!==t&&Kk(t),nx)return tx.call(e,t);Jk(e);var n,r=$k(e.length),i=Array(r);for(n=0;n<r;n++)i[n]=e[n];for(i=Vk(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=i[n];return e}),!nx||ex);var rx=Fe,ix=qe,ox=ww,ax=zg.aTypedArray;(0,zg.exportTypedArrayMethod)("subarray",(function(t,e){var n=ax(this),r=n.length,i=ix(t,r);return new(ox(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,rx((void 0===e?r:ix(e,r))-i))}));var ux=zg,sx=a,cx=i.Int8Array,lx=ux.aTypedArray,fx=ux.exportTypedArrayMethod,px=[].toLocaleString,dx=[].slice,hx=!!cx&&sx((function(){px.call(new cx(1))}));fx("toLocaleString",(function(){return px.apply(hx?dx.call(lx(this)):lx(this),arguments)}),sx((function(){return[1,2].toLocaleString()!=new cx([1,2]).toLocaleString()}))||!sx((function(){cx.prototype.toLocaleString.call([1,2])})));var vx=zg.exportTypedArrayMethod,yx=a,gx=i.Uint8Array,mx=gx&&gx.prototype||{},bx=[].toString,wx=[].join;yx((function(){bx.call({})}))&&(bx=function(){return wx.call(this)});var kx=mx.toString!=bx;vx("toString",bx,kx);var xx=S,_x=y,Sx=dt("match"),Ex=Ny,Ix=function(t){var e;return xx(t)&&(void 0!==(e=t[Sx])?!!e:"RegExp"==_x(t))},Tx=Dt,Ox=w,Rx=au,Ax=Dy,Px=Fe,jx=Fn,Cx=Vy,Lx=zp,Mx=a,Nx=mp.UNSUPPORTED_Y,Fx=[].push,Dx=Math.min,Ux=4294967295,Bx=!Mx((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Ex("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=jx(Ox(this)),i=void 0===n?Ux:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Ix(t))return e.call(r,t,i);for(var o,a,u,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,c+"g");(o=Lx.call(f,r))&&!((a=f.lastIndex)>l&&(s.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&Fx.apply(s,o.slice(1)),u=o[0].length,l=a,s.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!u&&f.test("")||s.push(""):s.push(r.slice(l)),s.length>i?s.slice(0,i):s}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=Ox(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(jx(i),e,n)},function(t,i){var o=Tx(this),a=jx(t),u=n(r,o,a,i,r!==e);if(u.done)return u.value;var s=Rx(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Nx?"g":"y"),f=new s(Nx?"^(?:"+o.source+")":o,l),p=void 0===i?Ux:i>>>0;if(0===p)return[];if(0===a.length)return null===Cx(f,a)?[a]:[];for(var d=0,h=0,v=[];h<a.length;){f.lastIndex=Nx?0:h;var y,g=Cx(f,Nx?a.slice(h):a);if(null===g||(y=Dx(Px(f.lastIndex+(Nx?h:0)),a.length))===d)h=Ax(a,h,c);else{if(v.push(a.slice(d,h)),v.length===p)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===p)return v;h=d=y}}return v.push(a.slice(d)),v}]}),!Bx,Nx);var qx={exports:{}},Wx={exports:{}};!function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports}(Wx);var zx={exports:{}},Kx={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}(Kx),function(t){var e=vd.exports,n=Kx.exports;function r(i,o,a){return n()?(t.exports=r=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=r=function(t,n,r){var i=[null];i.push.apply(i,n);var o=new(Function.bind.apply(t,i));return r&&e(o,r.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),r.apply(null,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(zx),function(t){var e=md.exports,n=vd.exports,r=Wx.exports,i=zx.exports;function o(a){var u="function"==typeof Map?new Map:void 0;return t.exports=o=function(t){if(null===t||!r(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==u){if(u.has(t))return u.get(t);u.set(t,o)}function o(){return i(t,arguments,e(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n(o,t)},t.exports.__esModule=!0,t.exports.default=t.exports,o(a)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}(qx);var $x={};Object.defineProperty($x,"__esModule",{value:!0});var Vx=pd.exports,Gx=gd.exports,Hx=hd.exports,Qx=yd.exports,Yx=md.exports,Jx=av.exports;function Xx(t){return t&&"object"===Qo(t)&&"default"in t?t:{default:t}}var Zx=Xx(dd.exports),t_=Xx(Vx),e_=Xx(Gx),n_=Xx(Hx),r_=Xx(Qx),i_=Xx(Yx),o_=Xx(Jx);function a_(){}function u_(){u_.init.call(this)}function s_(t){return void 0===t._maxListeners?u_.defaultMaxListeners:t._maxListeners}function c_(t,e,n){if(e)t.call(n);else for(var r=t.length,i=g_(t,r),o=0;o<r;++o)i[o].call(n)}function l_(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=g_(t,i),a=0;a<i;++a)o[a].call(n,r)}function f_(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=g_(t,o),u=0;u<o;++u)a[u].call(n,r,i)}function p_(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,u=g_(t,a),s=0;s<a;++s)u[s].call(n,r,i,o)}function d_(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=g_(t,i),a=0;a<i;++a)o[a].apply(n,r)}function h_(t,e,n,r){var i,o,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new a_,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=s_(t))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=o[e]=n,++t._eventsCount;return t}function v_(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function y_(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g_(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function m_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i_.default(t);if(e){var i=i_.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return r_.default(this,n)}}a_.prototype=Object.create(null),u_.EventEmitter=u_,u_.usingDomains=!1,u_.prototype.domain=void 0,u_.prototype._events=void 0,u_.prototype._maxListeners=void 0,u_.defaultMaxListeners=10,u_.init=function(){this.domain=null,u_.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new a_,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u_.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},u_.prototype.getMaxListeners=function(){return s_(this)},u_.prototype.emit=function(t){var e,n,r,i,o,a,u,s="error"===t;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(u=this.domain,s){if(e=arguments[1],!u){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=u,e.domainThrown=!1,u.emit("error",e),!1}if(!(n=a[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:c_(n,l,this);break;case 2:l_(n,l,this,arguments[1]);break;case 3:f_(n,l,this,arguments[1],arguments[2]);break;case 4:p_(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];d_(n,l,this,i)}return!0},u_.prototype.addListener=function(t,e){return h_(this,t,e,!1)},u_.prototype.on=u_.prototype.addListener,u_.prototype.prependListener=function(t,e){return h_(this,t,e,!0)},u_.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,v_(this,t,e)),this},u_.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,v_(this,t,e)),this},u_.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new a_:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new a_,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},u_.prototype.off=function(t,e){return this.removeListener(t,e)},u_.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new a_,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new a_:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new a_,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},u_.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},u_.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y_.call(t,e)},u_.prototype.listenerCount=y_,u_.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var b_=function(t){n_.default(n,t);var e=m_(n);function n(t){var r;return Zx.default(this,n),r=e.call(this),o_.default(e_.default(r),"timeout",null),o_.default(e_.default(r),"startTimestamp",-1),r.minDelay=t.min,r.maxDelay=t.max,r.initialDelay=t.initial||0,r.maxAttemptsCount=t.maxAttemptsCount||0,r.maxAttemptsTime=t.maxAttemptsTime||0,r.randomness=t.randomness||0,r.inProgress=!1,r.attemptNum=0,r.prevDelay=0,r.currDelay=0,r}return t_.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var e=this.currDelay+this.prevDelay;return this.maxDelay&&e>this.maxDelay&&(this.currDelay=this.maxDelay,e=this.maxDelay),this.currDelay=e,e}},{key:"randomize",value:function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)}},{key:"scheduleAttempt",value:function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var n=this.nextDelay(t);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return e.attempt()}),n)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(t){this.emit("succeeded",t)}},{key:"failed",value:function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)}}]),n}(u_),w_=function(t){n_.default(n,t);var e=m_(n);function n(t){var r;return Zx.default(this,n),r=e.call(this),o_.default(e_.default(r),"resolve",(function(){})),o_.default(e_.default(r),"reject",(function(){})),r.retrier=new b_(t),r}return t_.default(n,[{key:"run",value:function(t){var e=this;return this.retrier.on("attempt",(function(){t().then((function(t){return e.retrier.succeeded(t)})).catch((function(t){return e.retrier.failed(t)}))})),this.retrier.on("succeeded",(function(t){return e.resolve(t)})),this.retrier.on("cancelled",(function(){return e.reject(new Error("Cancelled"))})),this.retrier.on("failed",(function(t){return e.reject(t)})),new Promise((function(t,n){e.resolve=t,e.reject=n,e.retrier.start()}))}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(u_);function k_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i_.default(t);if(e){var i=i_.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return r_.default(this,n)}}function x_(t){return null!=t}var __=function(t){n_.default(n,t);var e=k_(n);function n(t){var r;Zx.default(this,n),r=e.call(this),o_.default(e_.default(r),"backoffDelay",0),o_.default(e_.default(r),"nextBackoffDelay",0),o_.default(e_.default(r),"backoffNumber",0),o_.default(e_.default(r),"timeoutID",null),o_.default(e_.default(r),"maxNumberOfRetry",-1);var i=t=t||{},o=i.initialDelay,a=i.maxDelay,u=i.randomisationFactor,s=i.factor;if(x_(o)&&o<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(x_(a)&&a<=1)throw new Error("The maximal timeout must be greater than 1.");if(x_(u)&&(u<0||u>1))throw new Error("The randomisation factor must be between 0 and 1.");if(x_(s)&&s<=1)throw new Error("Exponential factor should be greater than 1.");if(r.initialDelay=o||100,r.maxDelay=a||1e4,r.maxDelay<=r.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return r.randomisationFactor=u||0,r.factor=s||2,r.reset(),r}return t_.default(n,[{key:"backoff",value:function(t){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",t),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,t)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(t){if(t<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(t));this.maxNumberOfRetry=t}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var t=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*t))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(t){return new n(t)}}]),n}(u_);$x.AsyncRetrier=w_;var S_=$x.Backoff=__,E_=$x.Retrier=b_;Gv("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),ay);var I_={exports:{}};!function(t,n){(function(){var r={function:!0,object:!0}["undefined"==typeof window?"undefined":Qo(window)]&&window||this,i=n,o=t&&!t.nodeType&&t,a=i&&o&&"object"==Qo(e)&&e;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var u=Math.pow(2,53)-1,s=/\bOpera/,c=Object.prototype,l=c.hasOwnProperty,f=c.toString;function p(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function d(t){return t=m(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:p(t)}function h(t,e){for(var n in t)l.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?p(t):f.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function g(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)e(t[n],n,t);else h(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function m(t){return String(t).replace(/^ +| +$/g,"")}var b=function t(e){var n=r,i=e&&"object"==Qo(e)&&"String"!=v(e);i&&(n=e,e=null);var o=n.navigator||{},a=o.userAgent||"";e||(e=a);var u,c,l=i?!!o.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(f.toString()),p="Object",b=i?p:"ScriptBridgingProxyObject",w=i?p:"Environment",k=i&&n.java?"JavaPackage":v(n.java),x=i?p:"RuntimeObject",_=/\bJava/.test(k)&&n.java,S=_&&v(n.environment)==w,E=_?"a":"Î±",I=_?"b":"Î²",T=n.document||{},O=n.operamini||n.opera,R=s.test(R=i&&O?O["[[Class]]"]:v(O))?R:O=null,A=e,P=[],j=null,C=e==a,L=C&&O&&"function"==typeof O.version&&O.version(),M=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)})),N=function(t){return g(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),D=function(t){return g(t,(function(t,n,r){return t||(n[F]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),U=function(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),d(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function B(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=d(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function q(t){return g(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(M&&(M=[M]),/\bAndroid\b/.test(U)&&!F&&(u=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(F=m(u[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),D&&!F?F=B([D]):D&&F&&(F=F.replace(RegExp("^("+y(D)+")[-_.\\s]","i"),D+" ").replace(RegExp("^("+y(D)+")[-_.]?(\\w)","i"),D+" $2")),(u=/\bGoogle TV\b/.exec(F))&&(F=u[0]),/\bSimulator\b/i.test(e)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(e)&&P.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(e)?(D=(u=t(e.replace(/like iPhone OS/,""))).manufacturer,F=u.product):/^iP/.test(F)?(N||(N="Safari"),U="iOS"+((u=/ OS ([\d_]+)/i.exec(e))?" "+u[1].replace(/_/g,"."):"")):"Konqueror"==N&&/^Linux\b/i.test(U)?U="Kubuntu":D&&"Google"!=D&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(F))||/\bAndroid\b/.test(U)&&/^Chrome/.test(N)&&/\bVersion\//i.test(e)?(N="Android Browser",U=/\bAndroid\b/.test(U)?U:"Android"):"Silk"==N?(/\bMobi/i.test(e)||(U="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&P.unshift("accelerated")):"UC Browser"==N&&/\bUCWEB\b/.test(e)?P.push("speed mode"):"PaleMoon"==N&&(u=/\bFirefox\/([\d.]+)\b/.exec(e))?P.push("identifying as Firefox "+u[1]):"Firefox"==N&&(u=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(U||(U="Firefox OS"),F||(F=u[1])):!N||(u=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!F&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(u+"/")+8))&&(N=null),(u=F||D||U)&&(F||D||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(U))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(U)?U:u)+" Browser")):"Electron"==N&&(u=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&P.push("Chromium "+u),L||(L=q(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(N),"(?:Firefox|Minefield|NetFront)"])),(u=("iCab"==M&&parseFloat(L)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(M)&&"WebKit"||!M&&/\bMSIE\b/i.test(e)&&("Mac OS"==U?"Tasman":"Trident")||"WebKit"==M&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(M=[u]),"IE"==N&&(u=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(N+=" Mobile",U="Windows Phone "+(/\+$/.test(u)?u:u+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(N="IE Mobile",U="Windows Phone 8.x",P.unshift("desktop mode"),L||(L=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=N&&"Trident"==M&&(u=/\brv:([\d.]+)/.exec(e))&&(N&&P.push("identifying as "+N+(L?" "+L:"")),N="IE",L=u[1]),C){if(function(t,e){var n=null!=t?Qo(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(n,"global"))if(_&&(A=(u=_.lang.System).getProperty("os.arch"),U=U||u.getProperty("os.name")+" "+u.getProperty("os.version")),S){try{L=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(t){(u=n.system)&&u.global.system==n.system&&(N="Narwhal",U||(U=u[0].os||null))}N||(N="Rhino")}else"object"==Qo(n.process)&&!n.process.browser&&(u=n.process)&&("object"==Qo(u.versions)&&("string"==typeof u.versions.electron?(P.push("Node "+u.versions.node),N="Electron",L=u.versions.electron):"string"==typeof u.versions.nw&&(P.push("Chromium "+L,"Node "+u.versions.node),N="NW.js",L=u.versions.nw)),N||(N="Node.js",A=u.arch,U=u.platform,L=(L=/[\d.]+/.exec(u.version))?L[0]:null));else v(u=n.runtime)==b?(N="Adobe AIR",U=u.flash.system.Capabilities.os):v(u=n.phantom)==x?(N="PhantomJS",L=(u=u.version||null)&&u.major+"."+u.minor+"."+u.patch):"number"==typeof T.documentMode&&(u=/\bTrident\/(\d+)/i.exec(e))?(L=[L,T.documentMode],(u=+u[1]+4)!=L[1]&&(P.push("IE "+L[1]+" mode"),M&&(M[1]=""),L[1]=u),L="IE"==N?String(L[1].toFixed(1)):L[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(P.push("masking as "+N+" "+L),N="IE",L="11.0",M=["Trident"],U="Windows");U=U&&d(U)}if(L&&(u=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(L)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(C&&o.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(j=/b/i.test(u)?"beta":"alpha",L=L.replace(RegExp(u+"\\+?$"),"")+("beta"==j?I:E)+(/\d+\+?/.exec(u)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(U))N="Firefox Mobile";else if("Maxthon"==N&&L)L=L.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(U=null),"Xbox 360"==F&&/\bIEMobile\b/.test(e)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||F||/Browser|Mobi/.test(N))||"Windows CE"!=U&&!/Mobi/i.test(e))if("IE"==N&&C)try{null===n.external&&P.unshift("platform preview")}catch(t){P.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(e))&&(u=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||L)?(U=((u=[u,/BB10/.test(e)])[1]?(F=null,D="BlackBerry"):"Device Software")+" "+u[0],L=null):this!=h&&"Wii"!=F&&(C&&O||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(U)||"IE"==N&&(U&&!/^Win/.test(U)&&L>5.5||/\bWindows XP\b/.test(U)&&L>8||8==L&&!/\bTrident\b/.test(e)))&&!s.test(u=t.call(h,e.replace(s,"")+";"))&&u.name&&(u="ing as "+u.name+((u=u.version)?" "+u:""),s.test(N)?(/\bIE\b/.test(u)&&"Mac OS"==U&&(U=null),u="identify"+u):(u="mask"+u,N=R?d(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(u)&&(U=null),C||(L=null)),M=["Presto"],P.push(u));else N+=" Mobile";(u=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(u=[parseFloat(u.replace(/\.(\d)$/,".0$1")),u],"Safari"==N&&"+"==u[1].slice(-1)?(N="WebKit Nightly",j="alpha",L=u[1].slice(0,-1)):L!=u[1]&&L!=(u[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(L=null),u[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==u[0]&&537.36==u[2]&&parseFloat(u[1])>=28&&"WebKit"==M&&(M=["Blink"]),C&&(l||u[1])?(M&&(M[1]="like Chrome"),u=u[1]||((u=u[0])<530?1:u<532?2:u<532.05?3:u<533?4:u<534.03?5:u<534.07?6:u<534.1?7:u<534.13?8:u<534.16?9:u<534.24?10:u<534.3?11:u<535.01?12:u<535.02?"13+":u<535.07?15:u<535.11?16:u<535.19?17:u<536.05?18:u<536.1?19:u<537.01?20:u<537.11?"21+":u<537.13?23:u<537.18?24:u<537.24?25:u<537.36?26:"Blink"!=M?"27":"28")):(M&&(M[1]="like Safari"),u=(u=u[0])<400?1:u<500?2:u<526?3:u<533?4:u<534?"4+":u<535?5:u<537?6:u<538?7:u<601?8:u<602?9:u<604?10:u<606?11:u<608?12:"12"),M&&(M[1]+=" "+(u+="number"==typeof u?".x":/[.+]/.test(u)?"":"+")),"Safari"==N&&(!L||parseInt(L)>45)?L=u:"Chrome"==N&&/\bHeadlessChrome/i.test(e)&&P.unshift("headless")),"Opera"==N&&(u=/\bzbov|zvav$/.exec(U))?(N+=" ",P.unshift("desktop mode"),"zvav"==u?(N+="Mini",L=null):N+="Mobile",U=U.replace(RegExp(" *"+u+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(M&&M[1])?(P.unshift("desktop mode"),N="Chrome Mobile",L=null,/\bOS X\b/.test(U)?(D="Apple",U="iOS 4.3+"):U=null):/\bSRWare Iron\b/.test(N)&&!L&&(L=q("Chrome")),L&&0==L.indexOf(u=/[\d.]+$/.exec(U))&&e.indexOf("/"+u+"-")>-1&&(U=m(U.replace(u,""))),U&&-1!=U.indexOf(N)&&!RegExp(N+" OS").test(U)&&(U=U.replace(RegExp(" *"+y(N)+" *"),"")),M&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(U)&&/\bSafari\b/.test(M[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(N)&&M[1])&&(u=M[M.length-1])&&P.push(u),P.length&&(P=["("+P.join("; ")+")"]),D&&F&&F.indexOf(D)<0&&P.push("on "+D),F&&P.push((/^on /.test(P[P.length-1])?"":"on ")+F),U&&(u=/ ([\d.+]+)$/.exec(U),c=u&&"/"==U.charAt(U.length-u[0].length-1),U={architecture:32,family:u&&!c?U.replace(u[0],""):U,version:u?u[1]:null,toString:function(){var t=this.version;return this.family+(t&&!c?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(u=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(A))&&!/\bi686\b/i.test(A)?(U&&(U.architecture=64,U.family=U.family.replace(RegExp(" *"+u),"")),N&&(/\bWOW64\b/i.test(e)||C&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(e))&&P.unshift("32-bit")):U&&/^OS X/.test(U.family)&&"Chrome"==N&&parseFloat(L)>=39&&(U.architecture=64),e||(e=null);var W={};return W.description=e,W.layout=M&&M[0],W.manufacturer=D,W.name=N,W.prerelease=j,W.product=F,W.ua=e,W.version=N&&L,W.os=U||{architecture:null,family:null,version:null,toString:function(){return"null"}},W.parse=t,W.toString=function(){return this.description||""},W.version&&P.unshift(L),W.name&&P.unshift(N),U&&N&&(U!=String(U).split(" ")[0]||U!=N.split(" ")[0]&&!F)&&P.push(F?"("+U+")":"on "+U),P.length&&(W.description=P.join(" ")),W}();i&&o?h(b,(function(t,e){i[e]=t})):r.platform=b}).call(e)}(I_,I_.exports);var T_=Dt,O_=Fe,R_=Fn,A_=w,P_=Dy,j_=Vy;Ny("match",(function(t,e,n){return[function(e){var n=A_(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](R_(n))},function(t){var r=T_(this),i=R_(t),o=n(e,r,i);if(o.done)return o.value;if(!r.global)return j_(r,i);var a=r.unicode;r.lastIndex=0;for(var u,s=[],c=0;null!==(u=j_(r,i));){var l=R_(u[0]);s[c]=l,""===l&&(r.lastIndex=P_(i,O_(r.lastIndex),a)),c++}return 0===c?null:s}]}));var C_=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},L_=Dt,M_=w,N_=C_,F_=Fn,D_=Vy;Ny("search",(function(t,e,n){return[function(e){var n=M_(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](F_(n))},function(t){var r=L_(this),i=F_(t),o=n(e,r,i);if(o.done)return o.value;var a=r.lastIndex;N_(a,0)||(r.lastIndex=0);var u=D_(r,i);return N_(r.lastIndex,a)||(r.lastIndex=a),null===u?-1:u.index}]}));var U_=Tn,B_=qe,q_=Le,W_=Fe,z_=J,K_=Sr,$_=go,V_=Ki("splice"),G_=Math.max,H_=Math.min,Q_=9007199254740991,Y_="Maximum allowed length exceeded";U_({target:"Array",proto:!0,forced:!V_},{splice:function(t,e){var n,r,i,o,a,u,s=z_(this),c=W_(s.length),l=B_(t,c),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=c-l):(n=f-2,r=H_(G_(q_(e),0),c-l)),c+n-r>Q_)throw TypeError(Y_);for(i=K_(s,r),o=0;o<r;o++)(a=l+o)in s&&$_(i,o,s[a]);if(i.length=r,n<r){for(o=l;o<c-r;o++)u=o+n,(a=o+r)in s?s[u]=s[a]:delete s[u];for(o=c;o>c-r+n;o--)delete s[o-1]}else if(n>r)for(o=c-r;o>l;o--)u=o+n-1,(a=o+r-1)in s?s[u]=s[a]:delete s[u];for(o=0;o<n;o++)s[o+l]=arguments[o+2];return s.length=c-r+n,i}}),function(t){var e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Object.defineProperty(t,"__esModule",{value:!0});var n=rv.exports,r=pd.exports,i=gd.exports,o=iv.exports,a=hd.exports,u=yd.exports,s=md.exports,c=dd.exports,l=av.exports,f=uv,p=Hc.exports,d=Gc,h=mv.exports,v=uy.exports,y=Oy,g=qx.exports,m=$x,b=I_.exports;function w(t){return t&&"object"===Qo(t)&&"default"in t?t:{default:t}}function k(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var x=w(n),_=w(r),S=w(i),E=w(o),I=w(a),T=w(u),O=w(s),R=w(c),A=w(l),P=w(f),j=w(p),C=k(h),L=k(v),M=w(g),N=k(b);function F(){}function D(){D.init.call(this)}function U(t){return void 0===t._maxListeners?D.defaultMaxListeners:t._maxListeners}function B(t,e,n){if(e)t.call(n);else for(var r=t.length,i=H(t,r),o=0;o<r;++o)i[o].call(n)}function q(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=H(t,i),a=0;a<i;++a)o[a].call(n,r)}function W(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=H(t,o),u=0;u<o;++u)a[u].call(n,r,i)}function z(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,u=H(t,a),s=0;s<a;++s)u[s].call(n,r,i,o)}function K(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=H(t,i),a=0;a<i;++a)o[a].apply(n,r)}function $(t,e,n,r){var i,o,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new F,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=U(t))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=o[e]=n,++t._eventsCount;return t}function V(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function G(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function H(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}F.prototype=Object.create(null),D.EventEmitter=D,D.usingDomains=!1,D.prototype.domain=void 0,D.prototype._events=void 0,D.prototype._maxListeners=void 0,D.defaultMaxListeners=10,D.init=function(){this.domain=null,D.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new F,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},D.prototype.getMaxListeners=function(){return U(this)},D.prototype.emit=function(t){var e,n,r,i,o,a,u,s="error"===t;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(u=this.domain,s){if(e=arguments[1],!u){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=u,e.domainThrown=!1,u.emit("error",e),!1}if(!(n=a[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:B(n,l,this);break;case 2:q(n,l,this,arguments[1]);break;case 3:W(n,l,this,arguments[1],arguments[2]);break;case 4:z(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];K(n,l,this,i)}return!0},D.prototype.addListener=function(t,e){return $(this,t,e,!1)},D.prototype.on=D.prototype.addListener,D.prototype.prependListener=function(t,e){return $(this,t,e,!0)},D.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,V(this,t,e)),this},D.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,V(this,t,e)),this},D.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new F:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new F,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},D.prototype.off=function(t,e){return this.removeListener(t,e)},D.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new F,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new F:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new F,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},D.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},D.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):G.call(t,e)},D.prototype.listenerCount=G,D.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Q=C.getLogger("twilsock");function Y(t,e){return["".concat((new Date).toISOString()," Twilsock ").concat(t,":")].concat(Array.from(e))}var J=function(){function t(e){R.default(this,t),A.default(this,"prefix",""),this.prefix=null!=e&&e.length>0?" "+e+":":""}return _.default(t,[{key:"setLevel",value:function(t){Q.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.trace.apply(null,Y("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.debug.apply(null,Y("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.info.apply(null,Y("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.warn.apply(null,Y("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.error.apply(null,Y("E",e))}}],[{key:"setLevel",value:function(t){Q.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.trace.apply(null,Y("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.debug.apply(null,Y("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.info.apply(null,Y("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.warn.apply(null,Y("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Q.error.apply(null,Y("E",e))}}]),t}(),X=new J(""),Z="0.12.2",tt=function(){function t(e,n,r){R.default(this,t),A.default(this,"confirmedCapabilities",new Set),this.activeGrant=n,this._token=e;var i=r.region||"us1",o="wss://tsock.".concat(i,".twilio.com/v3/wsconnect"),a=r.twilsock||r.Twilsock||{};this.url=a.uri||o,this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver=Z,this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return _.default(t,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(t){this._token=t}},{key:"updateContinuationToken",value:function(t){this._continuationToken=t}}]),t}(),et=function t(e){R.default(this,t),this.id=e||"TM".concat(y.v4())};function nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var rt=function(t){I.default(n,t);var e=nt(n);function n(t,r,i,o,a){var u;return R.default(this,n),u=e.call(this),A.default(S.default(u),"method","init"),u.token=t,u.continuation_token=r,u.metadata=i,u.registrations=o,u.tweaks=a,u.capabilities=["client_update","offline_storage","telemetry.v1"],u}return n}(et);function it(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var ot=function(t){I.default(n,t);var e=it(n);function n(t,r,i,o,a,u,s){var c;return R.default(this,n),(c=e.call(this,t)).continuationToken=r,c.continuationTokenStatus=o,c.offlineStorage=a,c.initRegistrations=u,c.debugInfo=s,c.confirmedCapabilities=i,c}return n}(et);function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var ut=function(t){I.default(n,t);var e=at(n);function n(t){var r;return R.default(this,n),r=e.call(this),A.default(S.default(r),"method","update"),r.token=t,r}return n}(et);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var ct=function(t){I.default(n,t);var e=st(n);function n(t,r,i){var o;return R.default(this,n),o=e.call(this),A.default(S.default(o),"method","message"),o.active_grant=t,o.payload_type=r,o.http_request=i,o}return n}(et);function lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var ft=function(t){I.default(n,t);var e=lt(n);function n(t){var r;return R.default(this,n),r=e.call(this,t),A.default(S.default(r),"method","reply"),A.default(S.default(r),"payload_type","application/json"),A.default(S.default(r),"status",{code:200,status:"OK"}),r}return n}(et);function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var dt=function(t){I.default(n,t);var e=pt(n);function n(){var t;return R.default(this,n),t=e.call(this),A.default(S.default(t),"method","close"),t}return n}(et);function ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var vt=function t(e,n,r,i,o,a){R.default(this,t),this.start=e,this.end=n,this.title=r,this.details=i,this.id=o,this.type=a},yt=function(t){I.default(n,t);var e=ht(n);function n(t){var r;return R.default(this,n),r=e.call(this),A.default(S.default(r),"method","telemetry.v1"),r.events=t,r}return n}(et);function gt(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})).length}function mt(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})),n=new Uint8Array(e.length);return Array.prototype.forEach.call(e,(function(t,e){n[e]=t.charCodeAt(0)})),n}function bt(t){var e=Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join("").replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function wt(t){return JSON.parse(bt(t))}var kt=function(){function t(){R.default(this,t)}return _.default(t,null,[{key:"parse",value:function(t){var e,n,r=new Uint8Array(t),i=function(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var i=e.split(" ");return{size:n,protocol:i[0],version:i[1],headerSize:Number(i[2])}}(r);if("TWILSOCK"!==i.protocol||"V3.0"!==i.version)return X.error("unsupported protocol: ".concat(i.protocol," ver ").concat(i.version)),null;try{e=wt(r.subarray(i.size,i.size+i.headerSize))}catch(e){return X.error("failed to parse message header",e,t),null}if(X.debug("message received: ",e.method),X.trace("message received: ",e),e.payload_size>0){var o=2+i.size+i.headerSize,a=e.payload_size;if(e.hasOwnProperty("payload_type")&&0!==e.payload_type.indexOf("application/json"))0===e.payload_type.indexOf("text/plain")&&(n=bt(r.subarray(o,o+a)));else try{n=wt(r.subarray(o,o+a))}catch(e){return X.error("failed to parse message body",e,t),null}}return{method:e.method,header:e,payload:n}}},{key:"createPacket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.payload_size=gt(e);var n=JSON.stringify(t),r="TWILSOCK V3.0 "+gt(n);X.debug("send request:",r+n+e);var i=mt(r+"\r\n"+n+"\r\n"+e);return i.buffer}}]),t}();function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var _t=function(t){I.default(n,t);var e=xt(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(M.default(Error));function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Et=function(t){I.default(n,t);var e=St(n);function n(t,r){var i;return R.default(this,n),(i=e.call(this,t)).reply=r,i}return n}(_t);function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){A.default(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ot(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Rt=function(t){I.default(n,t);var e=Ot(n);function n(t){var r;return R.default(this,n),r=e.call(this),A.default(S.default(r),"newBackoff",null),A.default(S.default(r),"usedBackoff",null),A.default(S.default(r),"retrier",null),r.options=t?Tt({},t):{},r}return _.default(n,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(t){this.newBackoff=t}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");var t,e;this.newBackoff?!this.usedBackoff||this.usedBackoff<this.newBackoff?this.createRetrier():null===(t=this.retrier)||void 0===t||t.failed(new Error):null===(e=this.retrier)||void 0===e||e.failed(new Error)}},{key:"cancel",value:function(){var t;null===(t=this.retrier)||void 0===t||t.cancel()}},{key:"cleanRetrier",value:function(){var t,e;null===(t=this.retrier)||void 0===t||t.removeAllListeners(),null===(e=this.retrier)||void 0===e||e.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var t=Tt({},this.options);return this.newBackoff&&(t.min=this.newBackoff,t.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),t.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,t}},{key:"createRetrier",value:function(){var t=this;this.cleanRetrier();var e=this.getRetryPolicy();this.retrier=new m.Retrier(e),this.retrier.once("attempt",(function(){var e,n;null===(e=t.retrier)||void 0===e||e.on("attempt",(function(){return t.emit("attempt")})),null===(n=t.retrier)||void 0===n||n.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(e){return t.emit("failed",e)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),n}(D);function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Pt=function(t){I.default(i,t);var e,n,r=At(i);function i(t,e,n){var o;R.default(this,i),o=r.call(this),A.default(S.default(o),"disconnectingTimer",null),A.default(S.default(o),"disconnectedPromiseResolve",null),A.default(S.default(o),"terminalStates",["disconnected","rejected"]),A.default(S.default(o),"tokenExpiredSasCode",20104),A.default(S.default(o),"terminationReason","Connection is not initialized"),o.websocket=t,o.websocket.on("connected",(function(){return o.fsm.socketConnected()})),o.websocket.on("disconnected",(function(){return o.fsm.socketClosed()})),o.websocket.on("message",(function(t){return o.onIncomingMessage(t)})),o.websocket.on("socketError",(function(t){return o.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(t.message),httpStatusCode:null,errorCode:null})})),o.transport=e,o.config=n,o.retrier=new Rt(n.retryPolicy),o.retrier.on("attempt",(function(){return o.retry()})),o.retrier.on("failed",(function(t){X.warn("Retrying failed: ".concat(t.message)),o.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){X.debug("Browser reported connectivity state: online"),o.resetBackoff(),o.fsm.systemOnline()})),window.addEventListener("offline",(function(){X.debug("Browser reported connectivity state: offline"),o.websocket.close(),o.fsm.socketClosed()})));var a=L.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){o.setupSocket(),o.emit("connecting")},onEnterInitialising:function(){o.sendInit()},onLeaveInitialising:function(){o.cancelInit()},onEnterUpdating:function(){o.sendUpdate()},onLeaveUpdating:function(){o.cancelUpdate()},onEnterRetrying:function(){o.initRetry(),o.emit("connecting")},onEnterConnected:function(){o.resetBackoff(),o.onConnected()},onUserUpdateToken:function(){o.resetBackoff()},onTokenRejected:function(){o.resetBackoff(),o.closeSocket(!0),o.finalizeSocket()},onUserDisconnect:function(){o.closeSocket(!0)},onEnterDisconnecting:function(){o.startDisconnectTimer()},onLeaveDisconnecting:function(){o.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){o.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){o.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){o.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){o.cancelDisconnectTimer()},onDisconnected:function(){o.resetBackoff(),o.finalizeSocket()},onReceiveClose:function(){o.onCloseReceived()},onReceiveOffload:function(t,e){X.debug("onreceiveoffload: ",e),o.modifyBackoff(e.body),o.onCloseReceived()},onUnsupported:function(){o.closeSocket(!0),o.finalizeSocket()},onError:function(t,e){o.closeSocket(e),o.finalizeSocket()},onEnterState:function(t){"none"!==t.from&&o.changeState(t)},onInvalidTransition:function(t,e,n){X.warn("FSM: unexpected transition",e,n)}}});return o.fsm=new a,o}return _.default(i,[{key:"changeState",value:function(t){X.debug("FSM: ".concat(t.transition,": ").concat(t.from," --\x3e ").concat(t.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){X.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(t){X.trace("modifyBackoff",t);var e=t?t.backoff_policy:null;e&&"number"==typeof e.reconnect_min_ms&&this.retrier.modifyBackoff(e.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var t=this;X.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){X.debug("disconnecting is timed out"),t.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){X.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";default:return"disconnected"}}},{key:"initRetry",value:function(){X.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(X.trace("retry"),this.websocket.close(),this.fsm.userRetry()):X.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){X.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){X.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(t){var e=kt.parse(t);if(e){var n=e.method,r=e.header,i=e.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,i);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:i});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)X.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:i});else if(406===r.status.code){var o="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(o,r,!0),X.error(o),this.fsm.receiveFatalClose()}else 417===r.status.code?(X.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(X.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(X.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(X.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}}},{key:"sendInit",value:(n=x.default(P.default.mark((function t(){var e,n;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X.trace("sendInit"),t.prev=1,this.emit("beforeSendInit"),t.next=5,this.transport.sendInit();case 5:e=t.sent,this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),t.t0 instanceof Et?(n=!1,X.warn("Init rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),this.emit("sendInitFailed"),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.initError(!0)):500===t.t0.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(t.t0.message,t.t0.reply,n)):(this.terminationReason=t.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(t.t0.message,"\n").concat(JSON.stringify(t.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"sendUpdate",value:(e=x.default(P.default.mark((function t(){var e,n,r;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X.trace("sendUpdate"),e=new ut(this.config.token),t.prev=2,t.next=5,this.transport.sendWithReply(e);case 5:n=t.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0 instanceof Et?(r=!1,X.warn("Token update rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.updateError(t.t0.reply.status)):this.fsm.updateError(t.t0.reply.status),this.emitReplyConnectionError(t.t0.message,t.t0.reply,r)):(this.emit("error",!1,t.t0.message,null,null),this.fsm.updateError(t.t0)),this.emit("tokenUpdated",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return e.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(t,e,n){var r=e.status&&e.status.description?e.status.description:t,i=e.status.code,o=e.status&&e.status.errorCode?e.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: ".concat(r),httpStatusCode:i,errorCode:o})}},{key:"cancelInit",value:function(){X.trace("cancelInit")}},{key:"cancelUpdate",value:function(){X.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(t){X.trace("confirmReceiving");try{this.transport.send(new ft(t.id))}catch(t){X.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(t){var e=this;X.trace("closeSocket (graceful: ".concat(t,")")),t&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return e.fsm.socketClosed()}),0)}},{key:"connect",value:function(){X.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return X.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(e){t.disconnectedPromiseResolve=e,t.fsm.userDisconnect()}))}},{key:"updateToken",value:function(t){var e=this;return X.trace("updateToken:",t),new Promise((function(t,n){e.once("tokenUpdated",(function(e){e?n(e):t()})),e.fsm.userUpdateToken()}))}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),i}(D),jt=function(){function t(){R.default(this,t)}return _.default(t,null,[{key:"getMetadata",value:function(t){var e,n,r,i,o,a,u,s,c=t&&t.clientMetadata?t.clientMetadata:{},l={env:null!==(e=N.name)&&void 0!==e?e:"unknown",envv:null!==(n=N.version)&&void 0!==n?n:"unknown",os:null!==(r=null===(i=N.os)||void 0===i?void 0:i.family)&&void 0!==r?r:"unknown",osv:null!==(o=null===(a=N.os)||void 0===a?void 0:a.version)&&void 0!==o?o:"unknown",osa:null!==(u=null===(s=N.os)||void 0===s?void 0:s.architecture)&&void 0!==u?u:"unknown",sdk:"js-default"},f={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(t){return t in c||t in l})).forEach((function(t){return f[t]=t in c?c[t]:l[t]})),f}}]),t}();var Ct=function(){function t(e,n){var r=this;R.default(this,t),this.config=n,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",(function(t){return r.processReply(t)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new _t("disconnected"))})),r.activeRequests.clear()}))}var e;return _.default(t,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(t){var e,n=this.activeRequests.get(t.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(t.id),(e=t.status.code)>=200&&e<300?n.resolve(t):(n.reject(new Et("Transport failure: "+t.status.status,t)),X.trace("message rejected")))}},{key:"storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout((function(){X.trace("request",t,"is timed out"),n(new _t("Twilsock: request timeout: "+t))}),3e4)};this.activeRequests.set(t,r)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new _t("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(e=x.default(P.default.mark((function t(){var e,n,r;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X.trace("sendInit"),e=jt.getMetadata(this.config),n=new rt(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),t.next=5,this.sendWithReply(n);case 5:return r=t.sent,t.abrupt("return",new ot(r.id,r.header.continuation_token,new Set(r.header.capabilities),r.header.continuation_token_status,r.header.offline_storage,r.header.init_registrations,r.header.debug_info));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendClose",value:function(){var t=new dt;this.send(t)}},{key:"sendWithReply",value:function(t,e){var n=this;return new Promise((function(r,i){var o=n.send(t,e);n.storeRequest(o,r,i)}))}},{key:"send",value:function(t,e){t.id=t.id||"TM".concat(y.v4());var n=kt.createPacket(t,function(t){switch(j.default(t)){case"undefined":return"";case"object":return JSON.stringify(t);default:return t}}(e));try{return this.channel.send(n),t.id}catch(e){throw X.debug("failed to send ",t,e),X.trace(e.stack),e}}}]),t}();function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Mt=function(t){I.default(r,t);var n=Lt(r);function r(t){var i;return R.default(this,r),i=n.call(this),A.default(S.default(i),"socket",null),i.url=t,i.url=t,i.WebSocket=e.WebSocket||e.MozWebSocket||{},i}return _.default(r,[{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}},{key:"connect",value:function(){var t,e=this;X.trace("connecting to socket");try{t=new this.WebSocket(this.url)}catch(t){return X.debug("Socket error: ".concat(this.url)),void this.emit("socketError",t)}t.binaryType="arraybuffer",t.onopen=function(){X.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){X.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){X.debug("Socket error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(t){return this.socket&&this.socket.send(t)}},{key:"close",value:function(){if(X.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),r}(D);function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Ft=function(t){I.default(s,t);var e,n,r,i,o,a,u=Nt(s);function s(t){var e;return R.default(this,s),(e=u.call(this)).transport=t,e.registrations=new Map,e.registrationsInProgress=new Map,e}return _.default(s,[{key:"putNotificationContext",value:(a=x.default(P.default.mark((function t(e,n){var r;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deleteNotificationContext",value:(o=x.default(P.default.mark((function t(e){var n;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"updateRegistration",value:(i=x.default(P.default.mark((function t(e,n){var r,i;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X.debug("update registration for context",e),(r=this.registrationsInProgress.get(e))||(r=new Set,this.registrationsInProgress.set(e,r)),i=y.v4(),r.add(i),t.prev=5,t.next=8,this.putNotificationContext(e,n);case 8:X.debug("registration attempt succeeded for context",n),r.delete(i),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e)),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(5),X.warn("registration attempt failed for context",n),X.debug(t.t0),r.delete(i),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,t.t0));case 19:case"end":return t.stop()}}),t,this,[[5,13]])}))),function(t,e){return i.apply(this,arguments)})},{key:"updateRegistrations",value:(r=x.default(P.default.mark((function t(){var e,n=this;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X.trace("refreshing ".concat(this.registrations.size," registrations")),e=[],this.registrations.forEach((function(t,r){e.push(n.updateRegistration(r,t))})),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setNotificationsContext",value:(n=x.default(P.default.mark((function t(e,n){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}throw new _t("Invalid arguments provided");case 2:return this.registrations.set(e,n),t.next=5,this.updateRegistration(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeNotificationsContext",value:(e=x.default(P.default.mark((function t(e){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrations.has(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.deleteNotificationContext(e);case 4:this.transport.isConnected&&this.registrations.delete(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),s}(D);function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var Ut=function(t){I.default(n,t);var e=Dt(n);function n(t,r,i){var o;return R.default(this,n),(o=e.call(this,r)).status=t,o.description=r,o.body=i,o}return n}(_t);function Bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var qt=function(t){I.default(n,t);var e=Bt(n);function n(t){return R.default(this,n),e.call(this,t)}return n}(_t);function Wt(t,e){var n=function(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7],params:{}};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(t){return t.split("=")})).reduce((function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t}),{})}return n}throw new _t("Incorrect URI: "+t)}(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function zt(t,e,n,r,i){return{to:Wt(t,e),headers:n,body:r,grant:i}}var Kt=function(){function t(e,n,r){R.default(this,t),this.config=r,this.transport=e,this.pendingMessages=[],this.twilsock=n}var e;return _.default(t,[{key:"saveMessage",value:function(t){var e=this;return new Promise((function(n,r){var i={message:t,resolve:n,reject:r,alreadyRejected:!1,timeout:setTimeout((function(){X.debug("request is timed out"),r(new _t("request '".concat(t.to.method,"' to '").concat(t.to.host,"' timed out"))),i.alreadyRejected=!0}),2e4)};e.pendingMessages.push(i)}))}},{key:"sendPendingMessages",value:function(){for(var t=this,e=function(){var e=t.pendingMessages[0];if(!e.alreadyRejected)try{var n=e.message;t.actualSend(n).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),clearTimeout(e.timeout)}catch(t){return X.debug("Failed to send pending message",t),"break"}t.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){if("break"===e())break}}},{key:"rejectPendingMessages",value:function(){var t=this;this.pendingMessages.forEach((function(e){e.reject(new qt("Unable to connect: "+t.twilsock.getTerminationReason)),e.alreadyRejected=!0,clearTimeout(e.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(e=x.default(P.default.mark((function t(e){var n,r,i,o,a,u,s,c;return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.to,i=e.headers,o=e.body,a=null!==(n=e.grant)&&void 0!==n?n:this.config.activeGrant,u={host:r.host,path:r.path,method:r.method,params:r.params,headers:i},s=new ct(a,i["Content-Type"]||"application/json",u),X.trace("Sending upstream message",s),t.next=9,this.transport.sendWithReply(s,o);case 9:if(c=t.sent,X.trace("Received upstream message response",c),!((f=c)&&f.header&&f.header.http_status)||(l=c.header.http_status.code)>=200&&l<300){t.next=13;break}throw new Ut(c.header.http_status.code,c.header.http_status.status,c.body);case 13:return t.abrupt("return",{status:c.header.http_status,headers:c.header.http_headers,body:c.body});case 14:case"end":return t.stop()}var l,f}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"send",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new qt("Unable to connect: "+this.twilsock.getTerminationReason));var o=zt(t,e,n,r,i);return this.twilsock.isConnected?this.actualSend(o):this.saveMessage(o)}}]),t}(),$t=function(){function t(){var e=this;R.default(this,t),this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return _.default(t,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}}]),t}(),Vt=function(){function t(e){R.default(this,t),this.id=e}return _.default(t,null,[{key:"create",value:function(e){if(e instanceof Object&&"storage_id"in e)return new t(e.storage_id);throw new _t('Field "storage_id" is missing')}}]),t}(),Gt=function(){function t(){return R.default(this,t),A.default(this,"initializedFlag","twilio_twilsock_token_storage"),A.default(this,"tokenStoragePrefix","twilio_continuation_token_"),t._instance||(this.initialize(),t._instance=this),t._instance}return _.default(t,[{key:"sessionStorage",value:function(){try{return e.sessionStorage}catch(t){return null}}},{key:"window",value:function(){try{return e.window}catch(t){return null}}},{key:"storeToken",value:function(t,e){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(e),t)}},{key:"getStoredToken",value:function(t){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(t)):null}},{key:"initialize",value:function(){var t=this;if(this.canStore()){this.sessionStorage.getItem(this.initializedFlag)&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var e=this.sessionStorage.removeItem;this.window.addEventListener("unload",(function(){e(t.initializedFlag)}))}}},{key:"clear",value:function(){if(this.canStore()){for(var t=[],e=0;e<this.sessionStorage.length;e++){var n=this.sessionStorage.key(e);n&&0===n.indexOf(this.tokenStoragePrefix)&&t.push(n)}var r=this.sessionStorage.removeItem;t.forEach((function(t){return r(t)})),r(this.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(this.tokenStoragePrefix).concat(t)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),t}();A.default(Gt,"_instance",null);var Ht,Qt,Yt=new Gt,Jt=function(){function t(e,n,r,i,o,a){R.default(this,t),this.title=e,this.details=n,this.start=r,this.type=o,this.id=a,this.end=i}return _.default(t,[{key:"toTelemetryEvent",value:function(){var t=new Date,e=this.start,n=this.end?this.end:t;if(n<e){var r=n;n=e,e=r}var i=e.getTime()-t.getTime(),o=n.getTime()-t.getTime();return new vt(i,o,this.title,this.details,this.id,this.type)}}]),t}();t.TelemetryPoint=void 0,(Ht=t.TelemetryPoint||(t.TelemetryPoint={}))[Ht.Start=0]="Start",Ht[Ht.End=1]="End",t.EventSendingLimitation=void 0,(Qt=t.EventSendingLimitation||(t.EventSendingLimitation={}))[Qt.MinEventsPortion=0]="MinEventsPortion",Qt[Qt.AnyEvents=1]="AnyEvents",Qt[Qt.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished";var Xt=function(){function e(t,n){R.default(this,e),A.default(this,"minEventsPortionToSend",50),A.default(this,"maxEventsPortionToSend",100),A.default(this,"pendingEvents",new Map),A.default(this,"readyEvents",[]),A.default(this,"hasInitializationFinished",!1),A.default(this,"_canSendTelemetry",!1),this.config=t,this.packetInterface=n}return _.default(e,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){X.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(t.EventSendingLimitation.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(t){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(t)}},{key:"addPartialEvent",value:function(e,n,r){X.debug("Adding ".concat(r===t.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(n,"' event"));var i=this.pendingEvents.has(n);if(r===t.TelemetryPoint.Start)i&&X.debug("Overwriting starting point for '".concat(n,"' event")),this.pendingEvents.set(n,e);else{if(!i)return void X.info("Could not find started event for '".concat(n,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(n),e)),this.pendingEvents.delete(n)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==t.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==t.EventSendingLimitation.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(t){var e=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return t&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(t,n){if(!(r.length>=e.maxEventsPortionToSend)){var i=e.pendingEvents.get(n);e.pendingEvents.delete(n),r.push(new Jt("[UNFINISHED] ".concat(i.title),i.details,i.start,null,i.type,i.id))}})),r}},{key:"merge",value:function(t,e){return new Jt(e.title?e.title:t.title,e.details?e.details:t.details,t.start,e.end,e.type?e.type:t.type,e.id?e.id:t.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(t.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(t){var e=this.getTelemetryToSend(t);if(0!==e.length)try{this.packetInterface.send(new yt(e.map((function(t){return t.toTelemetryEvent()}))))}catch(t){X.debug("Error while sending ".concat(e.length," telemetry events due to ").concat(t,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(e)}}}]),e}();function Zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=O.default(t);if(e){var i=O.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T.default(this,n)}}var te=function t(){R.default(this,t)};A.default(te,"TWILSOCK_CONNECT","twilsock.sdk.connect"),A.default(te,"TWILSOCK_INIT","twilsock.sdk.init"),t.TwilsockClient=function(e){I.default(f,e);var n,r,i,o,a,u,s,c,l=Zt(f);function f(e,n,r){var i;R.default(this,f),i=l.call(this),A.default(S.default(i),"version",Z),A.default(S.default(i),"offlineStorageDeferred",new $t),r.continuationToken=r.continuationToken?r.continuationToken:Yt.getStoredToken(n);var o=i.config=new tt(e,n,r);X.setLevel(o.logLevel);var a=new Mt(o.url),u=new Ct(a,o);return i.channel=new Pt(a,u,o),i.registrations=new Ft(u),i.upstream=new Kt(u,i.channel,o),i.telemetryTracker=new Xt(o,u),i.channel.on("initialized",(function(){return i.telemetryTracker.canSendTelemetry=!0})),a.on("disconnected",(function(){return i.telemetryTracker.canSendTelemetry=!1})),i.registrations.on("registered",(function(t){return i.emit("registered",t)})),i.channel.on("message",(function(t,e){return setTimeout((function(){return i.emit("message",t,e)}),0)})),i.channel.on("stateChanged",(function(t){return setTimeout((function(){return i.emit("stateChanged",t)}),0)})),i.channel.on("connectionError",(function(t){return setTimeout((function(){return i.emit("connectionError",t)}),0)})),i.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return i.emit("tokenAboutToExpire")}),0)})),i.channel.on("tokenExpired",(function(){return setTimeout((function(){return i.emit("tokenExpired")}),0)})),i.channel.on("connected",(function(){return i.registrations.updateRegistrations()})),i.channel.on("connected",(function(){return i.upstream.sendPendingMessages()})),i.channel.on("connected",(function(){return setTimeout((function(){return i.emit("connected")}),0)})),i.channel.on("beforeConnect",(function(){return i.telemetryTracker.addPartialEvent(new Jt("Establish WebSocket connection","",new Date),te.TWILSOCK_CONNECT,t.TelemetryPoint.Start)})),i.channel.on("connected",(function(){return i.telemetryTracker.addPartialEvent(new Jt("Establish WebSocket connection","",new Date,new Date),te.TWILSOCK_CONNECT,t.TelemetryPoint.End)})),i.channel.on("beforeSendInit",(function(){return i.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","",new Date),te.TWILSOCK_INIT,t.TelemetryPoint.Start)})),i.channel.on("initialized",(function(){return i.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","Succeeded",new Date,new Date),te.TWILSOCK_INIT,t.TelemetryPoint.End)})),i.channel.on("sendInitFailed",(function(){return i.telemetryTracker.addPartialEvent(new Jt("Send Twilsock init","Failed",new Date,new Date),te.TWILSOCK_INIT,t.TelemetryPoint.End)})),i.channel.on("initialized",(function(t){i.handleStorageId(n,t),Yt.storeToken(t.continuationToken,n),setTimeout((function(){return i.emit("initialized",t)}),0)})),i.channel.on("disconnected",(function(){return setTimeout((function(){return i.emit("disconnected")}),0)})),i.channel.on("disconnected",(function(){return i.upstream.rejectPendingMessages()})),i.channel.on("disconnected",(function(){return i.offlineStorageDeferred.fail(new _t("Client disconnected"))})),i.offlineStorageDeferred.promise.catch((function(){})),i}return _.default(f,[{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return X.debug("Emitting ".concat(t.toString(),"(").concat(r.map((function(t){return JSON.stringify(t)})).join(", "),")")),(e=E.default(O.default(f.prototype),"emit",this)).call.apply(e,[this,t].concat(r))}},{key:"handleStorageId",value:function(t,e){if(e.offlineStorage)if(e.offlineStorage.hasOwnProperty(t))try{this.offlineStorageDeferred.set(Vt.create(e.offlineStorage[t])),X.debug("Offline storage for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage[t]),"."))}catch(n){this.offlineStorageDeferred.fail(new _t("Failed to parse offline storage for ".concat(t," ").concat(JSON.stringify(e.offlineStorage[t]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new _t("No offline storage id for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage))));else this.offlineStorageDeferred.fail(new _t("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:(c=x.default(P.default.mark((function t(e){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(X.trace("updating token '".concat(e,"'")),this.config.token!==e){t.next=3;break}return t.abrupt("return");case 3:return this.config.updateToken(e),t.next=6,this.channel.updateToken(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"setNotificationsContext",value:(s=x.default(P.default.mark((function t(e,n){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.setNotificationsContext(e,n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"removeNotificationsContext",value:(u=x.default(P.default.mark((function t(e){return P.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.removeNotificationsContext(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:(a=x.default(P.default.mark((function e(){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEventsIncludingUnfinished),e.next=3,this.channel.disconnect();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:(o=x.default(P.default.mark((function e(n,r,i){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("GET",n,r,void 0,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n){return o.apply(this,arguments)})},{key:"post",value:(i=x.default(P.default.mark((function e(n,r,i,o){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("POST",n,r,i,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,r){return i.apply(this,arguments)})},{key:"put",value:(r=x.default(P.default.mark((function e(n,r,i,o){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("PUT",n,r,i,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,i){return r.apply(this,arguments)})},{key:"delete",value:(n=x.default(P.default.mark((function e(n,r,i,o){return P.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("DELETE",n,r,i,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,r,i){return n.apply(this,arguments)})},{key:"addTelemetryEvent",value:function(t){this.telemetryTracker.addTelemetryEvent(t),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,n,r){this.telemetryTracker.addPartialEvent(e,n,r),r===t.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),f}(D),t.TwilsockClient=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":j.default(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([d.validateConstructorTypes(d.nonEmptyString,d.nonEmptyString,[d.pureObject,"undefined",d.literal(null)]),function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":j.default(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String,String,Object])],t.TwilsockClient);var ee=function(){function t(e){R.default(this,t),this.product=e,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return _.default(t,[{key:"populateInitRegistrations",value:function(t){var e=new Set(this.message_types);for(var n in t)e.add(t[n]);this.message_types=Array.from(e)}}]),t}();t.InitRegistration=ee,t.TelemetryEventDescription=Jt,t.TelemetryTracker=Xt,t.TransportUnavailableError=qt,t.Twilsock=t.TwilsockClient,t.TwilsockError=_t}(nv);var J_=function(){function t(e){zo(this,t),this.base=e,this.args=new Array,this.paths=new Array}return $o(t,[{key:"pathSegment",value:function(t){return this.paths.push(encodeURIComponent(t)),this}},{key:"queryParam",value:function(t,e){return void 0!==e&&this.args.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),this}},{key:"build",value:function(){var t=this.base;return this.paths.length&&(t+="/"+this.paths.join("/")),this.args.length&&(t+="?"+this.args.join("&")),t}}]),t}();function X_(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Z_(t,e,n){return Z_=X_()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Go(i,n.prototype),i},Z_.apply(null,arguments)}function tS(t){var e="function"==typeof Map?new Map:void 0;return tS=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Z_(t,arguments,Jo(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Go(r,t)},tS(t)}function eS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}var nS=function(t){Ho(n,t);var e=eS(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return zo(this,n),(r=e.call(this)).name=r.constructor.name,r.message="".concat(t," (status: ").concat(i,", code: ").concat(o,")"),r.status=i,r.code=o,r}return $o(n)}(tS(Error)),rS=function(t){Ho(n,t);var e=eS(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;return zo(this,n),(r=e.call(this,t,i,o)).body=a,r}return $o(n)}(nS),iS=Tn,oS=a,aS=T("JSON","stringify"),uS=/[\uD800-\uDFFF]/g,sS=/^[\uD800-\uDBFF]$/,cS=/^[\uDC00-\uDFFF]$/,lS=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return sS.test(t)&&!cS.test(i)||cS.test(t)&&!sS.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},fS=oS((function(){return'"\\udf06\\ud834"'!==aS("\udf06\ud834")||'"\\udead"'!==aS("\udead")}));function pS(t){return JSON.parse(JSON.stringify(t))}function dS(t){if(!(void 0===t||hS(t)))throw new nS("Invalid pageSize parameter. Expected a positive integer, was '".concat(t,"'."),400,20007)}function hS(t){return function(t){return!isNaN(parseInt(t))&&isFinite(t)}(t)&&t>0}aS&&iS({target:"JSON",stat:!0,forced:fS},{stringify:function(t,e,n){var r=aS.apply(null,arguments);return"string"==typeof r?r.replace(uS,lS):r}});var vS=mv.exports.getLogger("twilio-sync");function yS(t,e){return["".concat((new Date).toISOString()," Sync ").concat(t,":")].concat(Array.from(e))}var gS=function(t){vS.setLevel(t)},mS=function(){if(vS.getLevel()==vS.levels.TRACE){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vS.debug.apply(null,yS("T",e))}},bS=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vS.debug.apply(null,yS("D",e))},wS=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vS.warn.apply(null,yS("W",e))},kS=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];vS.error.apply(null,yS("E",e))},xS="/v4/Subscriptions",_S="/v3/Maps",SS="/v3/Lists",ES="/v3/Documents",IS="/v3/Streams",TS="/v3/Insights";function OS(t,e,n){return t&&void 0!==t[e]?t[e]:n}var RS=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zo(this,t);var n=e.region||"us1",r="https://cds.".concat(n,".twilio.com"),i=e.cdsUri||r;this.settings={subscriptionsUri:i+xS,documentsUri:i+ES,listsUri:i+SS,mapsUri:i+_S,streamsUri:i+IS,insightsUri:i+TS,sessionStorageEnabled:OS(e.Sync,"enableSessionStorage",!0),productId:e.productId}}return $o(t,[{key:"subscriptionsUri",get:function(){return this.settings.subscriptionsUri}},{key:"documentsUri",get:function(){return this.settings.documentsUri}},{key:"listsUri",get:function(){return this.settings.listsUri}},{key:"mapsUri",get:function(){return this.settings.mapsUri}},{key:"streamsUri",get:function(){return this.settings.streamsUri}},{key:"insightsUri",get:function(){return this.settings.insightsUri}},{key:"backoffConfig",get:function(){return this.settings.backoffConfig||{}}},{key:"sessionStorageEnabled",get:function(){return this.settings.sessionStorageEnabled}},{key:"productId",get:function(){return this.settings.productId}}]),t}();function AS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PS(t,e){if(t){if("string"==typeof t)return AS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AS(t,e):void 0}}function jS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){u=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(t,e)||PS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var CS=u,LS=a,MS=An,NS=en,FS=s,DS=J,US=b,BS=Object.assign,qS=Object.defineProperty,WS=!BS||LS((function(){if(CS&&1!==BS({b:1},BS(qS({},"a",{enumerable:!0,get:function(){qS(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=BS({},t)[n]||MS(BS({},e)).join("")!=r}))?function(t,e){for(var n=DS(t),r=arguments.length,i=1,o=NS.f,a=FS.f;r>i;)for(var u,s=US(arguments[i++]),c=o?MS(s).concat(o(s)):MS(s),l=c.length,f=0;l>f;)u=c[f++],CS&&!a.call(s,u)||(n[u]=s[u]);return n}:BS,zS=WS;function KS(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return $S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function $S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Tn({target:"Object",stat:!0,forced:Object.assign!==zS},{assign:zS});var VS=function(){function t(e){zo(this,t),this.localObject=e,this.pendingCorrelationId=null,this.pendingAction=null,this.established=!1,this.retryCount=0}return $o(t,[{key:"sid",get:function(){return this.localObject.sid}},{key:"type",get:function(){return this.localObject.type}},{key:"lastEventId",get:function(){return this.localObject.lastEventId}},{key:"indexName",get:function(){return this.localObject.indexName}},{key:"queryString",get:function(){return this.localObject.queryString}},{key:"isEstablished",get:function(){return this.established}},{key:"update",value:function(t,e){this.localObject._update(t,e)}},{key:"updatePending",value:function(t,e){this.pendingAction=t,this.pendingCorrelationId=e}},{key:"reset",value:function(){this.updatePending(null,null),this.retryCount=0,this.established=!1,this.setSubscriptionState("none")}},{key:"markAsFailed",value:function(t){this.rejectedWithError=t.error,this.updatePending(null,null),this.localObject.reportFailure(new nS("Failed to subscribe on service events: ".concat(t.error.message),t.error.status,t.error.code))}},{key:"complete",value:function(t){this.updatePending(null,null),this.established=!0,this.localObject._advanceLastEventId(t)}},{key:"setSubscriptionState",value:function(t){this.localObject._setSubscriptionState(t)}}]),t}(),GS=function(){function t(e){var n=this;zo(this,t),Xo(this,"isConnected",!1),Xo(this,"maxBatchSize",100),Xo(this,"subscriptionTtlTimer",null),Xo(this,"pendingPokeReason",null),this.services=e,this.subscriptions=new Map,this.persisted=new Map,this.latestPokeResponseArrivalTimestampByCorrelationId=new Map;this.backoff=S_.exponential(Object.assign({randomisationFactor:.2,initialDelay:100,maxDelay:12e4},this.services.config.backoffConfig)),this.backoff.on("ready",(function(){var t=n.getSubscriptionUpdateBatch(),e=t.action,r=t.subscriptions;e?n.applyNewSubscriptionUpdateBatch(e,r):(n.backoff.reset(),bS("All subscriptions resolved."))}))}var e;return $o(t,[{key:"getSubscriptionUpdateBatch",value:function(){function t(t,e,n,r){var i,o=[],a=KS(t);try{for(a.s();!(i=a.n()).done;){var u=jS(i.value,2),s=u[0],c=u[1];if(!e.get(s)&&n!==c.pendingAction&&!c.rejectedWithError&&(o.push(c),r&&o.length>=r))break}}catch(t){a.e(t)}finally{a.f()}return o}var e=t(this.subscriptions,this.persisted,"establish",this.maxBatchSize);if(e.length>0)return{action:"establish",subscriptions:e};var n=t(this.persisted,this.subscriptions,"cancel",this.maxBatchSize);return n.length>0?{action:"cancel",subscriptions:n}:{action:null,subscriptions:null}}},{key:"persist",value:function(){this.backoff.backoff()}},{key:"applyNewSubscriptionUpdateBatch",value:(e=Wo(zc.mark((function t(e,n){var r,i,o,a,u,s,c,l,f,p,d,h,v=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isConnected){t.next=4;break}return bS("Twilsock connection (required for subscription) not ready; waitingâ¦"),this.backoff.reset(),t.abrupt("return");case 4:n=this.processLocalActions(e,n),r=(new Date).getTime(),i=KS(n);try{for(i.s();!(o=i.n()).done;)a=o.value,this.recordActionAttemptOn(a,e,r)}catch(t){i.e(t)}finally{i.f()}return u=this.pendingPokeReason,this.pendingPokeReason=null,t.prev=10,t.next=13,this.request(e,r,u,n);case 13:s=t.sent,c=s.body.max_batch_size,!isNaN(parseInt(c))&&isFinite(c)&&c>0&&(this.maxBatchSize=c),this.subscriptionTtlTimer||(l=s.body.ttl_in_s,!isNaN(parseFloat(l))&&isFinite(l)&&l>0&&(this.subscriptionTtlTimer=setTimeout((function(){return v.onSubscriptionTtlElapsed()}),1e3*l))),"establish"===e&&(f=s.body.estimated_delivery_in_ms,!isNaN(parseFloat(f))&&isFinite(f)&&f>0?setTimeout((function(){return v.verifyPokeDelivery(r,f,n)}),f):kS("Invalid timeout: ".concat(f)),n.filter((function(t){return t.pendingCorrelationId===r})).forEach((function(t){return t.setSubscriptionState("response_in_flight")}))),this.backoff.reset(),t.next=26;break;case 21:t.prev=21,t.t0=t.catch(10),p=KS(n);try{for(p.s();!(d=p.n()).done;)h=d.value,this.recordActionFailureOn(h,e)}catch(t){p.e(t)}finally{p.f()}t.t0 instanceof nv.TransportUnavailableError?(bS("Twilsock connection (required for subscription) not ready (c:".concat(r,"); waitingâ¦")),this.backoff.reset()):(bS("Failed an attempt to ".concat(e," subscriptions (c:").concat(r,"); retrying"),t.t0),this.persist());case 26:case"end":return t.stop()}}),t,this,[[10,21]])}))),function(t,n){return e.apply(this,arguments)})},{key:"verifyPokeDelivery",value:function(t,e,n){var r=this,i=this.latestPokeResponseArrivalTimestampByCorrelationId.get(t),o=i?(new Date).getTime()-i:e;o>=e?(n.filter((function(e){return e.pendingCorrelationId===t})).forEach((function(t){t.updatePending(null,null),t.retryCount++,r.persisted.delete(t.sid)})),this.persist(),this.latestPokeResponseArrivalTimestampByCorrelationId.delete(t)):setTimeout((function(){return r.verifyPokeDelivery(t,e,n)}),e-o)}},{key:"processLocalActions",value:function(t,e){return"cancel"===t?e.filter((function(t){return!t.rejectedWithError})):e}},{key:"recordActionAttemptOn",value:function(t,e,n){if(t.setSubscriptionState("request_in_flight"),"establish"===e)this.persisted.set(t.sid,t),t.updatePending(e,n);else{var r=this.persisted.get(t.sid);r&&r.updatePending(e,n)}}},{key:"recordActionFailureOn",value:function(t,e){t.setSubscriptionState("none"),t.updatePending(null,null),"establish"===e&&this.persisted.delete(t.sid)}},{key:"request",value:function(t,e,n,r){var i=r.map((function(e){return{object_sid:e.sid,object_type:e.type,last_event_id:"establish"===t?e.lastEventId:void 0,index_name:"establish"===t?e.indexName:void 0,query_string:"establish"===t?e.queryString:void 0}})),o=r.filter((function(t){return t.retryCount>0})).length;bS("Attempting '".concat(t,"' request (c:").concat(e,"):"),i);var a={event_protocol_version:4,action:t,correlation_id:e,retried_requests:o,ttl_in_s:-1,requests:i};return"ttl"===n&&(a.reason=n),this.services.network.post(this.services.config.subscriptionsUri,a)}},{key:"add",value:function(t,e){bS("Establishing intent to subscribe to ".concat(t));var n=this.subscriptions.get(t);n&&e&&n.lastEventId===e.lastEventId||(this.persisted.delete(t),this.subscriptions.set(t,new VS(e)),this.persist())}},{key:"remove",value:function(t){bS("Establishing intent to unsubscribe from ".concat(t)),this.subscriptions.delete(t)&&this.persist()}},{key:"acceptMessage",value:function(t,e){mS("Subscriptions received",t);var n=t.event_type,r=void 0!==t.events?t.events:[t.event],i=t.correlation_id;i&&this.latestPokeResponseArrivalTimestampByCorrelationId.set(i,(new Date).getTime());var o,a=KS(r);try{for(a.s();!(o=a.n()).done;){var u=o.value,s=void 0;switch(t.event_type){case"subscription_established":this.applySubscriptionEstablishedMessage(u,i);break;case"subscription_canceled":this.applySubscriptionCancelledMessage(u,i);break;case"subscription_failed":this.applySubscriptionFailedMessage(u,i);break;case(s=n.match(/^(?:map|list|document|stream|live_query)_/)||{}).input:var c=void 0;switch(s[0]){case"map_":c=u.map_sid;break;case"list_":c=u.list_sid;break;case"document_":c=u.document_sid;break;case"stream_":c=u.stream_sid;break;case"live_query_":c=u.query_id,e=!1,!0===t.strictly_ordered&&(e=!0);break;default:c=void 0}this.applyEventToSubscribedEntity(c,u,n,e);break;default:bS("Dropping unknown message type ".concat(n))}}}catch(t){a.e(t)}finally{a.f()}}},{key:"applySubscriptionEstablishedMessage",value:function(t,e){var n=t.object_sid,r=this.persisted.get(t.object_sid);r&&r.pendingCorrelationId===e?"interrupted"===t.replay_status?(bS("Event Replay for subscription to ".concat(n," (c:").concat(e,") interrupted; continuing eagerly.")),r.updatePending(null,null),this.persisted.delete(r.sid),this.backoff.reset()):"completed"===t.replay_status&&(bS("Event Replay for subscription to ".concat(n," (c:").concat(e,") completed. Subscription is ready.")),r.complete(t.last_event_id),this.persisted.set(t.object_sid,r),r.setSubscriptionState("established"),this.backoff.reset()):bS("Late message for ".concat(t.object_sid," (c:").concat(e,") dropped.")),this.persist()}},{key:"applySubscriptionCancelledMessage",value:function(t,e){var n=this.persisted.get(t.object_sid);n&&n.pendingCorrelationId===e?(n.updatePending(null,null),n.setSubscriptionState("none"),this.persisted.delete(t.object_sid)):bS("Late message for ".concat(t.object_sid," (c:").concat(e,") dropped.")),this.persist()}},{key:"applySubscriptionFailedMessage",value:function(t,e){var n=t.object_sid,r=this.subscriptions.get(n),i=this.persisted.get(n);r&&i?i.pendingCorrelationId===e&&(kS("Failed to subscribe on ".concat(i.sid),t.error),i.markAsFailed(t),i.setSubscriptionState("none")):!r&&i&&(this.persisted.delete(n),i.setSubscriptionState("none")),this.persist()}},{key:"applyEventToSubscribedEntity",value:function(t,e,n,r){if(t){var i;r=r||(i=this.persisted.get(t))&&i.isEstablished;var o=this.subscriptions.get(t);o?(e.type=n,o.update(e,r)):bS("Message dropped for SID '".concat(t,"', for which there is no subscription."))}}},{key:"onConnectionStateChanged",value:function(t){this.isConnected=t,t&&this.poke("reconnect")}},{key:"onSubscriptionTtlElapsed",value:function(){this.isConnected&&this.poke("ttl")}},{key:"poke",value:function(t){bS("Triggering event replay for all subscriptions, reason=".concat(t)),this.pendingPokeReason=t,this.subscriptionTtlTimer&&(clearTimeout(this.subscriptionTtlTimer),this.subscriptionTtlTimer=null);var e,n=[],r=KS(this.persisted.values());try{for(r.s();!(e=r.n()).done;){var i=e.value;i.reset(),i.rejectedWithError&&n.push(i)}}catch(t){r.e(t)}finally{r.f()}this.persisted.clear();for(var o=0,a=n;o<a.length;o++){var u=a[o];this.persisted.set(u.sid,u)}this.persist()}},{key:"shutdown",value:function(){this.backoff.reset(),this.subscriptions.clear()}}]),t}();function HS(t){if(t.body&&t.body.message)return t.body.message;switch(t.status){case 429:return"Throttled by server";case 404:return"Not found from server";default:return"Error from server"}}function QS(t){return t.body?t.body.code:0}function YS(t){return 409===t.status?new rS(HS(t),t.status,QS(t),t.body):t.status?new nS(HS(t),t.status,QS(t)):t instanceof nv.TransportUnavailableError?t:new nS(t.message,0,0)}var JS=function(){function t(e,n,r){zo(this,t),this.clientInfo=e,this.config=n,this.transport=r}return $o(t,[{key:"createHeaders",value:function(){return{"Content-Type":"application/json","Twilio-Sync-Client-Info":JSON.stringify(this.clientInfo),"Twilio-Request-Id":"RQ"+Oy.v4().replace(/-/g,"")}}},{key:"backoffConfig",value:function(){return Object.assign({min:4e3,max:6e4,maxAttemptsTime:9e4,randomness:.2},this.config.backoffConfig)}},{key:"executeWithRetry",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(r,i){var o=[502,503,504];n&&o.push(429);var a=new E_(e.backoffConfig());a.on("attempt",(function(){t().then((function(t){return a.succeeded(t)})).catch((function(t){if(o.includes(t.status)){var e=parseInt(t.headers?t.headers["Retry-After"]:null);a.failed(YS(t),isNaN(e)?null:1e3*e)}else"Twilsock disconnected"===t.message?a.failed(YS(t)):(a.removeAllListeners(),a.cancel(),i(YS(t)))}))})),a.on("succeeded",(function(t){r(t)})),a.on("cancelled",(function(t){return i(YS(t))})),a.on("failed",(function(t){return i(YS(t))})),a.start()}))}},{key:"get",value:function(t){var e=this,n=this.createHeaders();return bS("GET",t,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry((function(){return e.transport.get(t,n,e.config.productId)}),!0)}},{key:"post",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.createHeaders();return null!=n&&(o["If-Match"]=n),bS("POST",t,"ID:",o["Twilio-Request-Id"]),this.executeWithRetry((function(){return r.transport.post(t,o,e,r.config.productId)}),i)}},{key:"put",value:function(t,e,n){var r=this,i=this.createHeaders();return null!=n&&(i["If-Match"]=n),bS("PUT",t,"ID:",i["Twilio-Request-Id"]),this.executeWithRetry((function(){return r.transport.put(t,i,e,r.config.productId)}),!1)}},{key:"delete",value:function(t){var e=this,n=this.createHeaders();return bS("DELETE",t,"ID:",n["Twilio-Request-Id"]),this.executeWithRetry((function(){return e.transport.delete(t,n,e.config.productId)}),!1)}}]),t}(),XS=function(){function t(e,n){zo(this,t),this.config=e,this.storageId=null;try{this.storage=n||sessionStorage}catch(t){}}return $o(t,[{key:"storageKey",value:function(t,e){return"".concat(this.storageId,"::").concat(t,"::").concat(e)}},{key:"isReady",get:function(){return this.config.sessionStorageEnabled&&!!this.storageId}},{key:"updateStorageId",value:function(t){this.storageId=t}},{key:"store",value:function(t,e,n){return this.isReady?this._store(this.storageKey(t,e),n):null}},{key:"read",value:function(t,e){return this.isReady?this._read(this.storageKey(t,e)):null}},{key:"remove",value:function(t,e,n){if(!this.isReady)return null;try{this.storage.removeItem(this.storageKey(t,e)),n&&this.storage.removeItem(this.storageKey(t,n))}catch(t){}}},{key:"update",value:function(t,e,n,r){if(!this.isReady)return null;this._apply(this.storageKey(t,e),r),n&&this._apply(this.storageKey(t,n),r)}},{key:"_store",value:function(t,e){try{this.storage.setItem(t,JSON.stringify(e))}catch(t){}}},{key:"_read",value:function(t){try{var e=this.storage.getItem(t);if(e)return JSON.parse(e)}catch(t){}return null}},{key:"_apply",value:function(t,e){var n=this._read(t);if(!n)return!1;this._store(t,Object.assign(n,e))}}]),t}();function ZS(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jo(t)););return t}function tE(){return tE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=ZS(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},tE.apply(this,arguments)}function eE(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nE(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function nE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rE=function(){function t(e,n){zo(this,t),this.services=e,this.removalHandler=n,this.subscriptionState="none",this._attachedListeners=new Map}return $o(t,[{key:"_advanceLastEventId",value:function(t,e){}},{key:"reportFailure",value:function(t){404===t.status?this.onRemoved(!1):this.broadcastEventToListeners("failure",t)}},{key:"_subscribe",value:function(){this.services.router._subscribe(this.sid,this)}},{key:"_unsubscribe",value:function(){this.services.router._unsubscribe(this.sid)}},{key:"_setSubscriptionState",value:function(t){this.subscriptionState=t,this.broadcastEventToListeners("_subscriptionStateChanged",t)}},{key:"close",value:function(){this._unsubscribe(),null!=this.removalHandler&&this.removalHandler(this.type,this.sid,this.uniqueName)}},{key:"attach",value:function(t){var e=t.listenerUuid;this._attachedListeners.get(e)||(this._attachedListeners.size||this._subscribe(),this._attachedListeners.set(e,t))}},{key:"detach",value:function(t){this._attachedListeners.delete(t),this._attachedListeners.size||this.close()}},{key:"broadcastEventToListeners",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,o=eE(this._attachedListeners.values());try{for(o.s();!(i=o.n()).done;){var a=i.value;a.emit.apply(a,[t].concat(n))}}catch(t){o.e(t)}finally{o.f()}}}]),t}(),iE=function(){function t(e){zo(this,t),Xo(this,"queuedRequests",[]),Xo(this,"isRequestInFlight",!1),this.inputMergingFunction=e}return $o(t,[{key:"add",value:function(t,e){var n=this,r=new Promise((function(r,i){return n.queuedRequests.push({input:t,requestFunction:e,resolve:r,reject:i})}));return this.wakeupQueue(),r}},{key:"squashAndAdd",value:function(t,e){var n,r=this.queuedRequests;this.queuedRequests=[],r.length>0?(n=r.map((function(t){return t.input})).reduce(this.inputMergingFunction),n=this.inputMergingFunction(n,t)):n=t;var i=this.add(n,e);return r.forEach((function(t){return i.then(t.resolve,t.reject)})),i}},{key:"isEmpty",value:function(){return 0===this.queuedRequests.length&&!this.isRequestInFlight}},{key:"wakeupQueue",value:function(){var t=this;if(0!==this.queuedRequests.length&&!this.isRequestInFlight){var e=this.queuedRequests.shift();this.isRequestInFlight=!0,e.requestFunction(e.input).then(e.resolve,e.reject).then((function(e){t.isRequestInFlight=!1,t.wakeupQueue()}))}}}]),t}(),oE=function(){function t(e){zo(this,t),Xo(this,"queueByNamespaceKey",new Map),this.inputReducer=e}var e,n,r;return $o(t,[{key:"add",value:(r=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.invokeQueueMethod(e,(function(t){return t.add(n,r)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"squashAndAdd",value:(n=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.invokeQueueMethod(e,(function(t){return t.squashAndAdd(n,r)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"invokeQueueMethod",value:(e=Wo(zc.mark((function t(e,n){var r,i;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.queueByNamespaceKey.has(e)||this.queueByNamespaceKey.set(e,new iE(this.inputReducer)),r=this.queueByNamespaceKey.get(e),i=n(r),this.queueByNamespaceKey.get(e).isEmpty()&&this.queueByNamespaceKey.delete(e),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}(),aE={};Object.defineProperty(aE,"__esModule",{value:!0});var uE=dd.exports,sE=pd.exports,cE=gd.exports,lE=iv.exports,fE=hd.exports,pE=yd.exports,dE=md.exports,hE=av.exports;function vE(t){return t&&"object"===Qo(t)&&"default"in t?t:{default:t}}var yE=vE(sd.exports),gE=vE(uE),mE=vE(sE),bE=vE(cE),wE=vE(lE),kE=vE(fE),xE=vE(pE),_E=vE(dE),SE=vE(hE);function EE(){}function IE(){IE.init.call(this)}function TE(t){return void 0===t._maxListeners?IE.defaultMaxListeners:t._maxListeners}function OE(t,e,n){if(e)t.call(n);else for(var r=t.length,i=NE(t,r),o=0;o<r;++o)i[o].call(n)}function RE(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=NE(t,i),a=0;a<i;++a)o[a].call(n,r)}function AE(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,a=NE(t,o),u=0;u<o;++u)a[u].call(n,r,i)}function PE(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var a=t.length,u=NE(t,a),s=0;s<a;++s)u[s].call(n,r,i,o)}function jE(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=NE(t,i),a=0;a<i;++a)o[a].apply(n,r)}function CE(t,e,n,r){var i,o,a,u;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]):(o=t._events=new EE,t._eventsCount=0),a){if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=TE(t))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,u=s,"function"==typeof console.warn?console.warn(u):console.log(u)}}else a=o[e]=n,++t._eventsCount;return t}function LE(t,e,n){var r=!1;function i(){t.removeListener(e,i),r||(r=!0,n.apply(t,arguments))}return i.listener=n,i}function ME(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function NE(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function FE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_E.default(t);if(e){var i=_E.default(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xE.default(this,n)}}EE.prototype=Object.create(null),IE.EventEmitter=IE,IE.usingDomains=!1,IE.prototype.domain=void 0,IE.prototype._events=void 0,IE.prototype._maxListeners=void 0,IE.defaultMaxListeners=10,IE.init=function(){this.domain=null,IE.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new EE,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},IE.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},IE.prototype.getMaxListeners=function(){return TE(this)},IE.prototype.emit=function(t){var e,n,r,i,o,a,u,s="error"===t;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(u=this.domain,s){if(e=arguments[1],!u){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=u,e.domainThrown=!1,u.emit("error",e),!1}if(!(n=a[t]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:OE(n,l,this);break;case 2:RE(n,l,this,arguments[1]);break;case 3:AE(n,l,this,arguments[1],arguments[2]);break;case 4:PE(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];jE(n,l,this,i)}return!0},IE.prototype.addListener=function(t,e){return CE(this,t,e,!1)},IE.prototype.on=IE.prototype.addListener,IE.prototype.prependListener=function(t,e){return CE(this,t,e,!0)},IE.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,LE(this,t,e)),this},IE.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,LE(this,t,e)),this},IE.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new EE:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new EE,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}(n,i);r.removeListener&&this.emit("removeListener",t,a||e)}return this},IE.prototype.off=function(t,e){return this.removeListener(t,e)},IE.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new EE,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new EE:delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new EE,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},IE.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},IE.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):ME.call(t,e)},IE.prototype.listenerCount=ME,IE.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var DE=function(t){kE.default(n,t);var e=FE(n);function n(){var t;return gE.default(this,n),t=e.call(this),SE.default(bE.default(t),"eventHistory",new Map),t}return mE.default(n,[{key:"on",value:function(t,e){return wE.default(_E.default(n.prototype),"on",this).call(this,t,e)}},{key:"once",value:function(t,e){return wE.default(_E.default(n.prototype),"once",this).call(this,t,e)}},{key:"off",value:function(t,e){return wE.default(_E.default(n.prototype),"off",this).call(this,t,e)}},{key:"emit",value:function(t){for(var e,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return this.eventHistory.set(t,i),(e=wE.default(_E.default(n.prototype),"emit",this)).call.apply(e,[this,t].concat(i))}},{key:"addListener",value:function(t,e){return wE.default(_E.default(n.prototype),"addListener",this).call(this,t,e)}},{key:"removeListener",value:function(t,e){return wE.default(_E.default(n.prototype),"removeListener",this).call(this,t,e)}},{key:"addListenerWithReplay",value:function(t,e){var n=this.eventHistory.get(t);return void 0!==n&&e.apply(void 0,yE.default(n)),this.addListener(t,e)}},{key:"onWithReplay",value:function(t,e){return this.addListenerWithReplay(t,e)}},{key:"onceWithReplay",value:function(t,e){var r=this.eventHistory.get(t);return void 0!==r?(e.apply(void 0,yE.default(r)),this):wE.default(_E.default(n.prototype),"once",this).call(this,t,e)}}]),n}(IE),UE=aE.ReplayEventEmitter=DE;function BE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}var qE=function(t){Ho(n,t);var e=BE(n);function n(){var t;return zo(this,n),(t=e.call(this)).closed=!1,t.uuid=Oy.v4(),t}return $o(n,[{key:"listenerUuid",get:function(){return this.uuid}},{key:"close",value:function(){this.removeAllListeners(),this.closed=!0}},{key:"ensureNotClosed",value:function(){if(this.closed)throw new Error("Invalid operation on closed object")}}]),n}(UE);function WE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}var zE=function(t){Ho(f,t);var e,n,r,i,o,a,u,s,c,l=WE(f);function f(t,e,n){var r;zo(this,f),Xo(Vo(r=l.call(this,t,n)),"isDeleted",!1);return r.updateMergingQueue=new iE((function(t,e){return"number"==typeof e.ttl?{ttl:e.ttl}:t})),r.descriptor=e,r.descriptor.data=r.descriptor.data||{},r.descriptor.date_updated=new Date(r.descriptor.date_updated),r}return $o(f,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"document"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"_update",value:function(t){switch(t.date_created=new Date(t.date_created),t.type){case"document_updated":if(t.id<=this.lastEventId){mS("Document update skipped, current:",this.lastEventId,", remote:",t.id);break}var e=void 0!==this.descriptor.data?pS(this.descriptor.data):null;this.descriptor.last_event_id=t.id,this.descriptor.revision=t.document_revision,this.descriptor.date_updated=t.date_created,this.descriptor.data=t.document_data,this.broadcastEventToListeners("updated",{data:t.document_data,isLocal:!1,previousData:e}),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:t.id,revision:t.document_revision,date_updated:t.date_created,data:t.document_data});break;case"document_removed":this.onRemoved(!1)}}},{key:"set",value:(c=Wo(zc.mark((function t(e,n){var r,i=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n||{},t.abrupt("return",this.updateMergingQueue.squashAndAdd(r,(function(t){return i._setUnconditionally(e,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"mutate",value:(s=Wo(zc.mark((function t(e,n){var r,i=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n||{},t.abrupt("return",this.updateMergingQueue.add(r,(function(t){return i._setWithIfMatch(e,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"update",value:(u=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mutate((function(t){return Object.assign(t,e)}),n));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"setTtl",value:(a=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._postUpdateToServer({ttl:e});case 2:n=t.sent,this.descriptor.date_expires=n.date_expires;case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_setUnconditionally",value:(o=Wo(zc.mark((function t(e,n){var r;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._postUpdateToServer({data:e,revision:void 0,ttl:n});case 2:return r=t.sent,this._handleSuccessfulUpdateResult(r),t.abrupt("return",this.descriptor.data);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"_setWithIfMatch",value:(i=Wo(zc.mark((function t(e,n){var r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e(pS(this.descriptor.data)))){t.next=22;break}return i=this.revision,t.prev=3,t.next=6,this._postUpdateToServer({data:r,revision:i,ttl:n});case 6:return o=t.sent,this._handleSuccessfulUpdateResult(o),t.abrupt("return",this.descriptor.data);case 11:if(t.prev=11,t.t0=t.catch(3),412!==t.t0.status){t.next=19;break}return t.next=16,this._softSync();case 16:return t.abrupt("return",this._setWithIfMatch(e));case 19:throw t.t0;case 20:t.next=23;break;case 22:return t.abrupt("return",this.descriptor.data);case 23:case"end":return t.stop()}}),t,this,[[3,11]])}))),function(t,e){return i.apply(this,arguments)})},{key:"_handleSuccessfulUpdateResult",value:function(t){if(!(t.last_event_id<=this.descriptor.last_event_id)){var e=void 0!==this.descriptor.data?pS(this.descriptor.data):null;this.descriptor.revision=t.revision,this.descriptor.data=t.data,this.descriptor.last_event_id=t.last_event_id,this.descriptor.date_expires=t.date_expires,this.descriptor.date_updated=new Date(t.date_updated),this.services.storage.update(this.type,this.sid,this.uniqueName,{last_event_id:t.last_event_id,revision:t.revision,date_updated:t.date_updated,data:t.data}),this.broadcastEventToListeners("updated",{data:this.descriptor.data,isLocal:!0,previousData:e})}}},{key:"_postUpdateToServer",value:(r=Wo(zc.mark((function t(e){var n,r,i;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDeleted){t.next=17;break}return n={data:e.data},void 0!==e.ttl&&(n.ttl=e.ttl),r=e.revision,t.prev=4,t.next=7,this.services.network.post(this.uri,n,r);case 7:return i=t.sent,t.abrupt("return",{revision:i.body.revision,data:e.data,last_event_id:i.body.last_event_id,date_updated:i.body.date_updated,date_expires:i.body.date_expires});case 11:throw t.prev=11,t.t0=t.catch(4),404===t.t0.status&&this.onRemoved(!1),t.t0;case 15:t.next=18;break;case 17:return t.abrupt("return",Promise.reject(new nS("The Document has been removed",404,54100)));case 18:case"end":return t.stop()}}),t,this,[[4,11]])}))),function(t){return r.apply(this,arguments)})},{key:"_softSync",value:(n=Wo(zc.mark((function t(){var e=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.services.network.get(this.uri).then((function(t){var n={type:"document_updated",id:t.body.last_event_id,document_revision:t.body.revision,document_data:t.body.data,date_created:t.body.date_updated};return e._update(n),e})).catch((function(t){404===t.status?e.onRemoved(!1):kS("Can't get updates for ".concat(e.sid,":"),t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onRemoved",value:function(t){if(!this.isDeleted){var e=void 0!==this.descriptor.data?pS(this.descriptor.data):null;this.isDeleted=!0,this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:t,previousData:e})}}},{key:"removeDocument",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isDeleted){t.next=6;break}return t.next=3,this.services.network.delete(this.uri);case 3:this.onRemoved(!0),t.next=7;break;case 6:return t.abrupt("return",Promise.reject(new nS("The Document has been removed",404,54100)));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"type",get:function(){return"document"}}]),f}(rE),KE=function(t){Ho(u,t);var e,n,r,i,o,a=WE(u);function u(t){var e;return zo(this,u),(e=a.call(this)).syncDocumentImpl=t,e.syncDocumentImpl.attach(Vo(e)),e}return $o(u,[{key:"uri",get:function(){return this.syncDocumentImpl.uri}},{key:"revision",get:function(){return this.syncDocumentImpl.revision}},{key:"lastEventId",get:function(){return this.syncDocumentImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncDocumentImpl.dateExpires}},{key:"type",get:function(){return zE.type}},{key:"sid",get:function(){return this.syncDocumentImpl.sid}},{key:"data",get:function(){return this.syncDocumentImpl.data}},{key:"dateUpdated",get:function(){return this.syncDocumentImpl.dateUpdated}},{key:"uniqueName",get:function(){return this.syncDocumentImpl.uniqueName}},{key:"set",value:(o=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncDocumentImpl.set(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"mutate",value:(i=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncDocumentImpl.mutate(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"update",value:(r=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncDocumentImpl.update(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"setTtl",value:(n=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncDocumentImpl.setTtl(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"removeDocument",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncDocumentImpl.removeDocument());case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"close",value:function(){tE(Jo(u.prototype),"close",this).call(this),this.syncDocumentImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return zE.type}}]),u}(qE);Xo(KE,"removed","removed"),Xo(KE,"updated","updated"),$c([ev(Zh,["undefined",Xh("document metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object,Object]),Vc("design:returntype",Promise)],KE.prototype,"set",null),$c([ev("function",["undefined",Xh("document metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Function,Object]),Vc("design:returntype",Promise)],KE.prototype,"mutate",null),$c([ev(Zh,["undefined",Xh("document metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object,Object]),Vc("design:returntype",Promise)],KE.prototype,"update",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],KE.prototype,"setTtl",null);var $E=function(){function t(e){zo(this,t),this.descriptor=e}return $o(t,[{key:"url",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.lastEventId}},{key:"dateUpdated",get:function(){return this.descriptor.dateUpdated}},{key:"dateExpires",get:function(){return this.descriptor.dateExpires}},{key:"index",get:function(){return this.descriptor.index}},{key:"data",get:function(){return this.descriptor.data}},{key:"cacheKey",get:function(){return this.index}},{key:"update",value:function(t,e,n,r){return this.descriptor.lastEventId=t,this.descriptor.revision=e,this.descriptor.data=n,this.descriptor.dateUpdated=r,this}},{key:"updateDateExpires",value:function(t){this.descriptor.dateExpires=t}}]),t}(),VE=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;zo(this,t),this.items=e,this.source=n,this.prevPageItemId=r,this.nextPageItemId=i}var e,n;return $o(t,[{key:"nextPage",value:(n=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasNextPage){t.next=2;break}throw new Error("No next page");case 2:return t.abrupt("return",this.source({nextPageItemId:this.nextPageItemId}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"prevPage",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasPrevPage){t.next=2;break}throw new Error("No previous page");case 2:return t.abrupt("return",this.source({prevPageItemId:this.prevPageItemId}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"hasNextPage",get:function(){return null!==this.nextPageItemId}},{key:"hasPrevPage",get:function(){return null!==this.prevPageItemId}}]),t}();function GE(t){return function(t){if(Array.isArray(t))return AS(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||PS(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var HE=Tn,QE=gr,YE=J,JE=Fe,XE=Fn,ZE=a,tI=Fk,eI=ro,nI=Uk,rI=Bk,iI=M,oI=Wk,aI=[],uI=aI.sort,sI=ZE((function(){aI.sort(void 0)})),cI=ZE((function(){aI.sort(null)})),lI=eI("sort"),fI=!ZE((function(){if(iI)return iI<70;if(!(nI&&nI>3)){if(rI)return!0;if(oI)return oI<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)aI.push({k:e+r,v:n})}for(aI.sort((function(t,e){return e.v-t.v})),r=0;r<aI.length;r++)e=aI[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));function pI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dI(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function dI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}HE({target:"Array",proto:!0,forced:sI||!cI||!lI||!fI},{sort:function(t){void 0!==t&&QE(t);var e=YE(this);if(fI)return void 0===t?uI.call(e):uI.call(e,t);var n,r,i=[],o=JE(e.length);for(r=0;r<o;r++)r in e&&i.push(e[r]);for(i=tI(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:XE(e)>XE(n)?1:-1}}(t)),n=i.length,r=0;r<n;)e[r]=i[r++];for(;r<o;)delete e[r++];return e}});var hI=function(){function t(e,n){zo(this,t),this.balanceFactor=0,this.key=e,this.value=n,this.parent=null,this.left=null,this.right=null}return $o(t,[{key:"isRoot",get:function(){return null===this.parent}},{key:"isLeaf",get:function(){return null===this.left&&null===this.right}},{key:"isLeftChild",get:function(){return this.parent.left===this}},{key:"update",value:function(t){this.value=t}},{key:"replace",value:function(t,e){t&&(this.left===e?this.left=e:this.right===e&&(this.right=e))}}]),t}(),vI=function(t){function e(t,n){zo(this,e),this.isLessThan=t||function(t,e){return t<e},this.isEqual=n||function(t,e){return t===e},this.root=null,this.count=null}return $o(e,[{key:"size",get:function(){return this.count}},{key:"clear",value:function(){this.root=null,this.count=0}},{key:"set",value:function(t,e){var n=this.getNode(t);n?n.update(e):this.insert(t,e)}},{key:"insert",value:function(t,e){var n=new hI(t,e);if(this.count++,this.root){for(var r=this.root;;)if(this.isLessThan(t,r.key)){if(!r.left){r.left=n;break}r=r.left}else{if(!r.right){r.right=n;break}r=r.right}for(n.parent=r,r=n;r.parent;){var i=r.parent,o=i.balanceFactor;if(r.isLeftChild?i.balanceFactor++:i.balanceFactor--,Math.abs(i.balanceFactor)<Math.abs(o))break;if(i.balanceFactor<-1||i.balanceFactor>1){this.rebalance(i);break}r=i}}else this.root=n}},{key:"get",value:function(t){for(var e=this.root;e;){if(this.isEqual(t,e.key))return e.value;e=this.isLessThan(t,e.key)?e.left:e.right}return null}},{key:"delete",value:function(t){var e=this.getNode(t);if(!e||e.key!==t)return null;var n=e.parent,r=e.left,i=e.right;if(!!r!=!!i){var o=r||i;n||o?n&&!o?this.root=o:(n.replace(e,null),this.rebalance(n)):this.root=null}else{for(var a=e.left;a.right;)a=a.right;if(e.left===a)e.isRoot?(this.root=a,a.parent=null):(e.isLeftChild?e.parent.left=a:e.parent.right=a,a.parent=e.parent),a.right=e.right,a.right.parent=a,a.balanceFactor=e.balanceFactor,e={parent:a,isLeftChild:!0};else{var u=a.parent,s=a.left;u.right=s,s&&(s.parent=u),e.isRoot?(this.root=a,a.parent=null):(e.isLeftChild?e.parent.left=a:e.parent.right=a,a.parent=e.parent),a.right=e.right,a.right.parent=a,a.left=e.left,a.left.parent=a,a.balanceFactor=e.balanceFactor,e={parent:u,isLeftChild:!1}}}for(this.count--;e.parent;){var c=e.parent,l=c.balanceFactor;if(e.isLeftChild?c.balanceFactor-=1:c.balanceFactor+=1,Math.abs(c.balanceFactor)>Math.abs(l)){if(!(c.balanceFactor<-1||c.balanceFactor>1))break;if(this.rebalance(c),0!==c.parent.balanceFactor)break;e=c.parent}else e=c}return null}},{key:"getNode",value:function(t){for(var e=this.root;e;){if(this.isEqual(t,e.key))return e;e=this.isLessThan(t,e.key)?e.left:e.right}return null}},{key:"rebalance",value:function(t){t.balanceFactor<0?t.right.balanceFactor>0?(this.rotateRight(t.right),this.rotateLeft(t)):this.rotateLeft(t):t.balanceFactor>0&&(t.left.balanceFactor<0?(this.rotateLeft(t.left),this.rotateRight(t)):this.rotateRight(t))}},{key:"rotateLeft",value:function(t){var e=t.right;t.right=e.left,null!==e.left&&(e.left.parent=t),e.parent=t.parent,null===e.parent?this.root=e:t.isLeftChild?e.parent.left=e:e.parent.right=e,e.left=t,t.parent=e,t.balanceFactor=t.balanceFactor+1-Math.min(e.balanceFactor,0),e.balanceFactor=e.balanceFactor+1-Math.max(t.balanceFactor,0)}},{key:"rotateRight",value:function(t){var e=t.left;t.left=e.right,null!==e.right&&(e.right.parent=t),e.parent=t.parent,null===e.parent?this.root=e:t.isLeftChild?e.parent.left=e:e.parent.right=e,e.right=t,t.parent=e,t.balanceFactor=t.balanceFactor-1-Math.min(e.balanceFactor,0),e.balanceFactor=e.balanceFactor-1-Math.max(t.balanceFactor,0)}},{key:Symbol.iterator,value:zc.mark((function t(){var e,n,r;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=pI(this.getIterator()),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return r=n.value,t.next=7,r;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"getIterator",value:zc.mark((function t(){var e,n,r,i=arguments;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]?i[0]:null,n=this.root;case 2:if(!n){t.next=8;break}if(!this.isEqual(e,n.key)&&(null!==e||n.left)){t.next=5;break}return t.abrupt("break",8);case 5:n=this.isLessThan(e,n.key)||null===e?n.left:n.right,t.next=2;break;case 8:if(n){t.next=10;break}return t.abrupt("return",null);case 10:r=!0;case 11:if(!r){t.next=29;break}return t.next=14,[n.key,n.value];case 14:if(r=!1,!n.right){t.next=21;break}for(n=n.right;n.left;)n=n.left;r=!0,t.next=27;break;case 21:if(!n.parent){t.next=26;break}r=n.parent.left===n,n=n.parent,t.next=27;break;case 26:return t.abrupt("break",37);case 27:t.next=35;break;case 29:if(!n.parent){t.next=34;break}r=n.parent.left===n,n=n.parent,t.next=35;break;case 34:return t.abrupt("break",37);case 35:t.next=11;break;case 37:return t.abrupt("return",null);case 38:case"end":return t.stop()}}),t,this)}))},{key:"getReverseIterator",value:zc.mark((function t(){var e,n,r,i=arguments;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=i.length>0&&void 0!==i[0]?i[0]:null,n=this.root;case 2:if(!n){t.next=8;break}if(!this.isEqual(e,n.key)&&(null!==e||n.right)){t.next=5;break}return t.abrupt("break",8);case 5:n=this.isLessThan(e,n.key)&&null!==e?n.left:n.right,t.next=2;break;case 8:if(n){t.next=10;break}return t.abrupt("return",null);case 10:r=!0;case 11:if(!r){t.next=29;break}return t.next=14,[n.key,n.value];case 14:if(r=!1,!n.left){t.next=21;break}for(n=n.left;n.right;)n=n.right;r=!0,t.next=27;break;case 21:if(!n.parent){t.next=26;break}r=n.parent.right===n,n=n.parent,t.next=27;break;case 26:return t.abrupt("break",37);case 27:t.next=35;break;case 29:if(!n.parent){t.next=34;break}r=n.parent.right===n,n=n.parent,t.next=35;break;case 34:return t.abrupt("break",37);case 35:t.next=11;break;case 37:return t.abrupt("return",null);case 38:case"end":return t.stop()}}),t,this)}))}]),e}();function yI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return gI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gI(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function gI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var mI=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];zo(this,t),this._data=e,this.lastEventId=n||0,this.isLeftBound=r,this.isRightBound=i}return $o(t,[{key:"isValid",get:function(){return!0}},{key:"value",get:function(){return this._data}}]),t}(),bI=function(){function t(e){zo(this,t),this.lastEventId=e,this.isLeftBound=!1,this.isRightBound=!1}return $o(t,[{key:"isValid",get:function(){return!1}},{key:"value",get:function(){return null}}]),t}(),wI=function(){function t(){zo(this,t),Xo(this,"items",new vI),Xo(this,"beginKey",null),Xo(this,"endKey",null),this.items.clear()}return $o(t,[{key:"size",get:function(){return this.items.size}},{key:"collectionBegin",get:function(){return this.beginKey}},{key:"collectionEnd",get:function(){return this.endKey}},{key:"has",value:function(t){var e,n=this.items.get(t);return null!==(e=null==n?void 0:n.isValid)&&void 0!==e&&e}},{key:"exists",value:function(t){return!!this.items.get(t)}},{key:"getValue",value:function(t){var e,n=this.items.get(t);return null!==(e=null==n?void 0:n.value)&&void 0!==e?e:null}},{key:"get",value:function(t){return this.items.get(t)}},{key:"getNextItem",value:function(t,e,n){return null===t?this.getFirstItem(e):n?this.getValue(t):this.getAdjacentItem(t,e)}},{key:"getFirstItem",value:function(t){var e="asc"===t?this.beginKey:this.endKey;if(this.exists(e)){var n=this.items.get(e);return n.isValid?n.value:this.getAdjacentItem(e,t)}return null}},{key:"getAdjacentItem",value:function(t,e){var n,r=yI("asc"===e?this.items.getIterator(t):this.items.getReverseIterator(t));try{for(r.s();!(n=r.n()).done;){var i=jS(n.value,2),o=(i[0],i[1]);if("asc"===e?o.isRightBound:o.isLeftBound)break;if(o.isValid)return o.value}}catch(t){r.e(t)}finally{r.f()}return null}},{key:"store",value:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.items.get(t);return o&&o.lastEventId>n?o.value:(this.items.set(t,new mI(e,n,o?o.isLeftBound&&r:r,o?o.isRightBound&&i:i)),this.beginKey&&t<this.beginKey&&(this.beginKey=t),this.endKey&&this.endKey<t&&(this.endKey=t),e)}},{key:"populate",value:function(t,e,n){var r=this;if(t.length){var i=GE(t);if(i.sort((function(t,e){return t.cacheKey===e.cacheKey?0:t.cacheKey>e.cacheKey?1:-1})),i.forEach((function(t,e){r.store(t.cacheKey,t,t.lastEventId,0===e,e===i.length-1)})),e){var o=i[0].cacheKey;(!this.beginKey||o<this.beginKey)&&(this.beginKey=o)}if(n){var a=i[i.length-1].cacheKey;(!this.endKey||this.endKey<a)&&(this.endKey=a)}}}},{key:"delete",value:function(t,e){var n=this.items.get(t);(null===n||null===e||n.lastEventId<e)&&this.items.set(t,new bI(e))}},{key:"isKnown",value:function(t,e){var n=this.items.get(t);return n&&n.lastEventId>=e}},{key:"getIterator",value:zc.mark((function t(e){var n,r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e&&null!==this.beginKey&&(e=this.beginKey),null!==e){t.next=3;break}return t.abrupt("return");case 3:n=yI(this.items.getIterator(e)),t.prev=4,n.s();case 6:if((r=n.n()).done){t.next=16;break}if(i=jS(r.value,2),(o=i[1]).isValid){t.next=10;break}return t.abrupt("continue",14);case 10:return t.next=12,o;case 12:if(!o.isRightBound){t.next=14;break}return t.abrupt("break",16);case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),n.e(t.t0);case 21:return t.prev=21,n.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,this,[[4,18,21,24]])}))},{key:"getReverseIterator",value:zc.mark((function t(e){var n,r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e&&null!==this.endKey&&(e=this.endKey),null!==e){t.next=3;break}return t.abrupt("return");case 3:n=yI(this.items.getReverseIterator(e)),t.prev=4,n.s();case 6:if((r=n.n()).done){t.next=16;break}if(i=jS(r.value,2),(o=i[1]).isValid){t.next=10;break}return t.abrupt("continue",14);case 10:return t.next=12,o;case 12:if(!o.isLeftBound){t.next=14;break}return t.abrupt("break",16);case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),n.e(t.t0);case 21:return t.prev=21,n.f(),t.finish(21);case 24:case"end":return t.stop()}}),t,this,[[4,18,21,24]])}))},{key:"forEach",value:function(t){if(this.items){var e,n=yI(this.items);try{for(n.s();!(e=n.n()).done;){var r=jS(e.value,2),i=r[0],o=r[1];o.isValid&&t(i,o.value)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),kI={exports:{}};function xI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _I(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function _I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function EI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?SI(Object(n),!0).forEach((function(e){Xo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function II(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}!function(t,n){(function(){var r,i="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",u=16,s=32,c=64,l=128,f=256,p=1/0,d=9007199254740991,h=NaN,v=4294967295,y=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",s],["partialRight",c],["rearg",f]],g="[object Arguments]",m="[object Array]",b="[object Boolean]",w="[object Date]",k="[object Error]",x="[object Function]",_="[object GeneratorFunction]",S="[object Map]",E="[object Number]",I="[object Object]",T="[object Promise]",O="[object RegExp]",R="[object Set]",A="[object String]",P="[object Symbol]",j="[object WeakMap]",C="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",N="[object Float64Array]",F="[object Int8Array]",D="[object Int16Array]",U="[object Int32Array]",B="[object Uint8Array]",q="[object Uint8ClampedArray]",W="[object Uint16Array]",z="[object Uint32Array]",K=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,Q=RegExp(G.source),Y=RegExp(H.source),J=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),ot=/^\s+/,at=/\s/,ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ft=/[()=,{}\[\]\/\s]/,pt=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",St="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",It="A-Z\\xc0-\\xd6\\xd8-\\xde",Tt="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="['â]",At="[\\ud800-\\udfff]",Pt="["+Ot+"]",jt="["+_t+"]",Ct="\\d+",Lt="[\\u2700-\\u27bf]",Mt="["+Et+"]",Nt="[^\\ud800-\\udfff"+Ot+Ct+St+Et+It+"]",Ft="\\ud83c[\\udffb-\\udfff]",Dt="[^\\ud800-\\udfff]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",qt="["+It+"]",Wt="(?:"+Mt+"|"+Nt+")",zt="(?:"+qt+"|"+Nt+")",Kt="(?:['â](?:d|ll|m|re|s|t|ve))?",$t="(?:['â](?:D|LL|M|RE|S|T|VE))?",Vt="(?:"+jt+"|"+Ft+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Ht=Gt+Vt+("(?:\\u200d(?:"+[Dt,Ut,Bt].join("|")+")"+Gt+Vt+")*"),Qt="(?:"+[Lt,Ut,Bt].join("|")+")"+Ht,Yt="(?:"+[Dt+jt+"?",jt,Ut,Bt,At].join("|")+")",Jt=RegExp(Rt,"g"),Xt=RegExp(jt,"g"),Zt=RegExp(Ft+"(?="+Ft+")|"+Yt+Ht,"g"),te=RegExp([qt+"?"+Mt+"+"+Kt+"(?="+[Pt,qt,"$"].join("|")+")",zt+"+"+$t+"(?="+[Pt,qt+Wt,"$"].join("|")+")",qt+"?"+Wt+"+"+Kt,qt+"+"+$t,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ct,Qt].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+_t+Tt+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[M]=oe[N]=oe[F]=oe[D]=oe[U]=oe[B]=oe[q]=oe[W]=oe[z]=!0,oe[g]=oe[m]=oe[C]=oe[b]=oe[L]=oe[w]=oe[k]=oe[x]=oe[S]=oe[E]=oe[I]=oe[O]=oe[R]=oe[A]=oe[j]=!1;var ae={};ae[g]=ae[m]=ae[C]=ae[L]=ae[b]=ae[w]=ae[M]=ae[N]=ae[F]=ae[D]=ae[U]=ae[S]=ae[E]=ae[I]=ae[O]=ae[R]=ae[A]=ae[P]=ae[B]=ae[q]=ae[W]=ae[z]=!0,ae[k]=ae[x]=ae[j]=!1;var ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ce=parseInt,le="object"==Qo(e)&&e&&e.Object===Object&&e,fe="object"==("undefined"==typeof self?"undefined":Qo(self))&&self&&self.Object===Object&&self,pe=le||fe||Function("return this")(),de=n&&!n.nodeType&&n,he=de&&t&&!t.nodeType&&t,ve=he&&he.exports===de,ye=ve&&le.process,ge=function(){try{var t=he&&he.require&&he.require("util").types;return t||ye&&ye.binding&&ye.binding("util")}catch(t){}}(),me=ge&&ge.isArrayBuffer,be=ge&&ge.isDate,we=ge&&ge.isMap,ke=ge&&ge.isRegExp,xe=ge&&ge.isSet,_e=ge&&ge.isTypedArray;function Se(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ie(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Re(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ae(t,e){return!!(null==t?0:t.length)&&Be(t,e,0)>-1}function Pe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function je(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Le(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Me(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fe=Ke("length");function De(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Be(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,We,n)}function qe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function We(t){return t!=t}function ze(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:h}function Ke(t){return function(e){return null==e?r:e[t]}}function $e(t){return function(e){return null==t?r:t[e]}}function Ve(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ge(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function He(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return t?t.slice(0,hn(t)+1).replace(ot,""):t}function Ye(t){return function(e){return t(e)}}function Je(t,e){return je(e,(function(e){return t[e]}))}function Xe(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&Be(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&Be(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=$e({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"}),rn=$e({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+ue[t]}function an(t){return ee.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function sn(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var u=t[n];u!==e&&u!==a||(t[n]=a,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return an(t)?function(t){var e=Zt.lastIndex=0;for(;Zt.test(t);)++e;return e}(t):Fe(t)}function dn(t){return an(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function hn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var vn=$e({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function t(e){var n=(e=null==e?pe:yn.defaults(pe.Object(),e,yn.pick(pe,re))).Array,at=e.Date,_t=e.Error,St=e.Function,Et=e.Math,It=e.Object,Tt=e.RegExp,Ot=e.String,Rt=e.TypeError,At=n.prototype,Pt=St.prototype,jt=It.prototype,Ct=e["__core-js_shared__"],Lt=Pt.toString,Mt=jt.hasOwnProperty,Nt=0,Ft=function(){var t=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Dt=jt.toString,Ut=Lt.call(It),Bt=pe._,qt=Tt("^"+Lt.call(Mt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=ve?e.Buffer:r,zt=e.Symbol,Kt=e.Uint8Array,$t=Wt?Wt.allocUnsafe:r,Vt=sn(It.getPrototypeOf,It),Gt=It.create,Ht=jt.propertyIsEnumerable,Qt=At.splice,Yt=zt?zt.isConcatSpreadable:r,Zt=zt?zt.iterator:r,ee=zt?zt.toStringTag:r,ue=function(){try{var t=po(It,"defineProperty");return t({},"",{}),t}catch(t){}}(),le=e.clearTimeout!==pe.clearTimeout&&e.clearTimeout,fe=at&&at.now!==pe.Date.now&&at.now,de=e.setTimeout!==pe.setTimeout&&e.setTimeout,he=Et.ceil,ye=Et.floor,ge=It.getOwnPropertySymbols,Fe=Wt?Wt.isBuffer:r,$e=e.isFinite,gn=At.join,mn=sn(It.keys,It),bn=Et.max,wn=Et.min,kn=at.now,xn=e.parseInt,_n=Et.random,Sn=At.reverse,En=po(e,"DataView"),In=po(e,"Map"),Tn=po(e,"Promise"),On=po(e,"Set"),Rn=po(e,"WeakMap"),An=po(It,"create"),Pn=Rn&&new Rn,jn={},Cn=Bo(En),Ln=Bo(In),Mn=Bo(Tn),Nn=Bo(On),Fn=Bo(Rn),Dn=zt?zt.prototype:r,Un=Dn?Dn.valueOf:r,Bn=Dn?Dn.toString:r;function qn(t){if(iu(t)&&!Ga(t)&&!(t instanceof $n)){if(t instanceof Kn)return t;if(Mt.call(t,"__wrapped__"))return qo(t)}return new Kn(t)}var Wn=function(){function t(){}return function(e){if(!ru(e))return{};if(Gt)return Gt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function zn(){}function Kn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function $n(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Yn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Jn(t,e){var n=Ga(t),r=!n&&Va(t),i=!n&&!r&&Ja(t),o=!n&&!r&&!i&&pu(t),a=n||r||i||o,u=a?He(t.length,Ot):[],s=u.length;for(var c in t)!e&&!Mt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wo(c,s))||u.push(c);return u}function Xn(t){var e=t.length;return e?t[Qr(0,e-1)]:r}function Zn(t,e){return Fo(Ai(t),sr(e,0,t.length))}function tr(t){return Fo(Ai(t))}function er(t,e,n){(n!==r&&!za(t[e],n)||n===r&&!(e in t))&&ar(t,e,n)}function nr(t,e,n){var i=t[e];Mt.call(t,e)&&za(i,n)&&(n!==r||e in t)||ar(t,e,n)}function rr(t,e){for(var n=t.length;n--;)if(za(t[n][0],e))return n;return-1}function ir(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&Pi(e,Lu(e),t)}function ar(t,e,n){"__proto__"==e&&ue?ue(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ur(t,e){for(var i=-1,o=e.length,a=n(o),u=null==t;++i<o;)a[i]=u?r:Ru(t,e[i]);return a}function sr(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function cr(t,e,n,i,o,a){var u,s=1&e,c=2&e,l=4&e;if(n&&(u=o?n(t,i,o,a):n(t)),u!==r)return u;if(!ru(t))return t;var f=Ga(t);if(f){if(u=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return Ai(t,u)}else{var p=yo(t),d=p==x||p==_;if(Ja(t))return Si(t,s);if(p==I||p==g||d&&!o){if(u=c||d?{}:mo(t),!s)return c?function(t,e){return Pi(t,vo(t),e)}(t,function(t,e){return t&&Pi(e,Mu(e),t)}(u,t)):function(t,e){return Pi(t,ho(t),e)}(t,or(u,t))}else{if(!ae[p])return o?t:{};u=function(t,e,n){var r=t.constructor;switch(e){case C:return Ei(t);case b:case w:return new r(+t);case L:return function(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case N:case F:case D:case U:case B:case q:case W:case z:return Ii(t,n);case S:return new r;case E:case A:return new r(t);case O:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case R:return new r;case P:return i=t,Un?It(Un.call(i)):{}}var i}(t,p,s)}}a||(a=new Yn);var h=a.get(t);if(h)return h;a.set(t,u),cu(t)?t.forEach((function(r){u.add(cr(r,e,n,r,t,a))})):ou(t)&&t.forEach((function(r,i){u.set(i,cr(r,e,n,i,t,a))}));var v=f?r:(l?c?oo:io:c?Mu:Lu)(t);return Ie(v||t,(function(r,i){v&&(r=t[i=r]),nr(u,i,cr(r,e,n,i,t,a))})),u}function lr(t,e,n){var i=n.length;if(null==t)return!i;for(t=It(t);i--;){var o=n[i],a=e[o],u=t[o];if(u===r&&!(o in t)||!a(u))return!1}return!0}function fr(t,e,n){if("function"!=typeof t)throw new Rt(i);return Co((function(){t.apply(r,n)}),e)}function pr(t,e,n,r){var i=-1,o=Ae,a=!0,u=t.length,s=[],c=e.length;if(!u)return s;n&&(e=je(e,Ye(n))),r?(o=Pe,a=!1):e.length>=200&&(o=Xe,a=!1,e=new Qn(e));t:for(;++i<u;){var l=t[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var p=c;p--;)if(e[p]===f)continue t;s.push(l)}else o(e,f,r)||s.push(l)}return s}qn.templateSettings={escape:J,evaluate:X,interpolate:Z,variable:"",imports:{_:qn}},qn.prototype=zn.prototype,qn.prototype.constructor=qn,Kn.prototype=Wn(zn.prototype),Kn.prototype.constructor=Kn,$n.prototype=Wn(zn.prototype),$n.prototype.constructor=$n,Vn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Vn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===o?r:n}return Mt.call(e,t)?e[t]:r},Vn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==r:Mt.call(e,t)},Vn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=An&&e===r?o:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Qt.call(e,n,1),--this.size,!0)},Gn.prototype.get=function(t){var e=this.__data__,n=rr(e,t);return n<0?r:e[n][1]},Gn.prototype.has=function(t){return rr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Vn,map:new(In||Gn),string:new Vn}},Hn.prototype.delete=function(t){var e=lo(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return lo(this,t).get(t)},Hn.prototype.has=function(t){return lo(this,t).has(t)},Hn.prototype.set=function(t,e){var n=lo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(t){return this.__data__.set(t,o),this},Qn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Yn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Yn.prototype.get=function(t){return this.__data__.get(t)},Yn.prototype.has=function(t){return this.__data__.has(t)},Yn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!In||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var dr=Li(kr),hr=Li(xr,!0);function vr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function yr(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],u=e(a);if(null!=u&&(s===r?u==u&&!fu(u):n(u,s)))var s=u,c=a}return c}function gr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=bo),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?mr(u,e-1,n,r,i):Ce(i,u):r||(i[i.length]=u)}return i}var br=Mi(),wr=Mi(!0);function kr(t,e){return t&&br(t,e,Lu)}function xr(t,e){return t&&wr(t,e,Lu)}function _r(t,e){return Re(e,(function(e){return tu(t[e])}))}function Sr(t,e){for(var n=0,i=(e=wi(e,t)).length;null!=t&&n<i;)t=t[Uo(e[n++])];return n&&n==i?t:r}function Er(t,e,n){var r=e(t);return Ga(t)?r:Ce(r,n(t))}function Ir(t){return null==t?t===r?"[object Undefined]":"[object Null]":ee&&ee in It(t)?function(t){var e=Mt.call(t,ee),n=t[ee];try{t[ee]=r;var i=!0}catch(t){}var o=Dt.call(t);i&&(e?t[ee]=n:delete t[ee]);return o}(t):function(t){return Dt.call(t)}(t)}function Tr(t,e){return t>e}function Or(t,e){return null!=t&&Mt.call(t,e)}function Rr(t,e){return null!=t&&e in It(t)}function Ar(t,e,i){for(var o=i?Pe:Ae,a=t[0].length,u=t.length,s=u,c=n(u),l=1/0,f=[];s--;){var p=t[s];s&&e&&(p=je(p,Ye(e))),l=wn(p.length,l),c[s]=!i&&(e||a>=120&&p.length>=120)?new Qn(s&&p):r}p=t[0];var d=-1,h=c[0];t:for(;++d<a&&f.length<l;){var v=p[d],y=e?e(v):v;if(v=i||0!==v?v:0,!(h?Xe(h,y):o(f,y,i))){for(s=u;--s;){var g=c[s];if(!(g?Xe(g,y):o(t[s],y,i)))continue t}h&&h.push(y),f.push(v)}}return f}function Pr(t,e,n){var i=null==(t=Ro(t,e=wi(e,t)))?t:t[Uo(Zo(e))];return null==i?r:Se(i,t,n)}function jr(t){return iu(t)&&Ir(t)==g}function Cr(t,e,n,i,o){return t===e||(null==t||null==e||!iu(t)&&!iu(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var u=Ga(t),s=Ga(e),c=u?m:yo(t),l=s?m:yo(e),f=(c=c==g?I:c)==I,p=(l=l==g?I:l)==I,d=c==l;if(d&&Ja(t)){if(!Ja(e))return!1;u=!0,f=!1}if(d&&!f)return a||(a=new Yn),u||pu(t)?no(t,e,n,i,o,a):function(t,e,n,r,i,o,a){switch(n){case L:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!o(new Kt(t),new Kt(e)));case b:case w:case E:return za(+t,+e);case k:return t.name==e.name&&t.message==e.message;case O:case A:return t==e+"";case S:var u=un;case R:var s=1&r;if(u||(u=ln),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=no(u(t),u(e),r,i,o,a);return a.delete(t),l;case P:if(Un)return Un.call(t)==Un.call(e)}return!1}(t,e,c,n,i,o,a);if(!(1&n)){var h=f&&Mt.call(t,"__wrapped__"),v=p&&Mt.call(e,"__wrapped__");if(h||v){var y=h?t.value():t,x=v?e.value():e;return a||(a=new Yn),o(y,x,n,i,a)}}if(!d)return!1;return a||(a=new Yn),function(t,e,n,i,o,a){var u=1&n,s=io(t),c=s.length,l=io(e).length;if(c!=l&&!u)return!1;var f=c;for(;f--;){var p=s[f];if(!(u?p in e:Mt.call(e,p)))return!1}var d=a.get(t),h=a.get(e);if(d&&h)return d==e&&h==t;var v=!0;a.set(t,e),a.set(e,t);var y=u;for(;++f<c;){var g=t[p=s[f]],m=e[p];if(i)var b=u?i(m,g,p,e,t,a):i(g,m,p,t,e,a);if(!(b===r?g===m||o(g,m,n,i,a):b)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=t.constructor,k=e.constructor;w==k||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(v=!1)}return a.delete(t),a.delete(e),v}(t,e,n,i,o,a)}(t,e,n,i,Cr,o))}function Lr(t,e,n,i){var o=n.length,a=o,u=!i;if(null==t)return!a;for(t=It(t);o--;){var s=n[o];if(u&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<a;){var c=(s=n[o])[0],l=t[c],f=s[1];if(u&&s[2]){if(l===r&&!(c in t))return!1}else{var p=new Yn;if(i)var d=i(l,f,c,t,e,p);if(!(d===r?Cr(f,l,3,i,p):d))return!1}}return!0}function Mr(t){return!(!ru(t)||(e=t,Ft&&Ft in e))&&(tu(t)?qt:gt).test(Bo(t));var e}function Nr(t){return"function"==typeof t?t:null==t?as:"object"==Qo(t)?Ga(t)?Wr(t[0],t[1]):qr(t):vs(t)}function Fr(t){if(!Eo(t))return mn(t);var e=[];for(var n in It(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dr(t){if(!ru(t))return function(t){var e=[];if(null!=t)for(var n in It(t))e.push(n);return e}(t);var e=Eo(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}function Ur(t,e){return t<e}function Br(t,e){var r=-1,i=Qa(t)?n(t.length):[];return dr(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}function qr(t){var e=fo(t);return 1==e.length&&e[0][2]?To(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Wr(t,e){return xo(t)&&Io(e)?To(Uo(t),e):function(n){var i=Ru(n,t);return i===r&&i===e?Au(n,t):Cr(e,i,3)}}function zr(t,e,n,i,o){t!==e&&br(e,(function(a,u){if(o||(o=new Yn),ru(a))!function(t,e,n,i,o,a,u){var s=Po(t,n),c=Po(e,n),l=u.get(c);if(l)return void er(t,n,l);var f=a?a(s,c,n+"",t,e,u):r,p=f===r;if(p){var d=Ga(c),h=!d&&Ja(c),v=!d&&!h&&pu(c);f=c,d||h||v?Ga(s)?f=s:Ya(s)?f=Ai(s):h?(p=!1,f=Si(c,!0)):v?(p=!1,f=Ii(c,!0)):f=[]:uu(c)||Va(c)?(f=s,Va(s)?f=wu(s):ru(s)&&!tu(s)||(f=mo(c))):p=!1}p&&(u.set(c,f),o(f,c,i,a,u),u.delete(c));er(t,n,f)}(t,e,u,n,zr,i,o);else{var s=i?i(Po(t,u),a,u+"",t,e,o):r;s===r&&(s=a),er(t,u,s)}}),Mu)}function Kr(t,e){var n=t.length;if(n)return wo(e+=e<0?n:0,n)?t[e]:r}function $r(t,e,n){e=e.length?je(e,(function(t){return Ga(t)?function(e){return Sr(e,1===t.length?t[0]:t)}:t})):[as];var r=-1;e=je(e,Ye(co()));var i=Br(t,(function(t,n,i){var o=je(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;for(;++r<a;){var s=Ti(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Vr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Sr(t,a);n(u,a)&&ti(o,wi(a,t),u)}return o}function Gr(t,e,n,r){var i=r?qe:Be,o=-1,a=e.length,u=t;for(t===e&&(e=Ai(e)),n&&(u=je(t,Ye(n)));++o<a;)for(var s=0,c=e[o],l=n?n(c):c;(s=i(u,l,s,r))>-1;)u!==t&&Qt.call(u,s,1),Qt.call(t,s,1);return t}function Hr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;wo(i)?Qt.call(t,i,1):pi(t,i)}}return t}function Qr(t,e){return t+ye(_n()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=ye(e/2))&&(t+=t)}while(e);return n}function Jr(t,e){return Lo(Oo(t,e,as),t+"")}function Xr(t){return Xn(zu(t))}function Zr(t,e){var n=zu(t);return Fo(n,sr(e,0,n.length))}function ti(t,e,n,i){if(!ru(t))return t;for(var o=-1,a=(e=wi(e,t)).length,u=a-1,s=t;null!=s&&++o<a;){var c=Uo(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=u){var f=s[c];(l=i?i(f,c,s):r)===r&&(l=ru(f)?f:wo(e[o+1])?[]:{})}nr(s,c,l),s=s[c]}return t}var ei=Pn?function(t,e){return Pn.set(t,e),t}:as,ni=ue?function(t,e){return ue(t,"toString",{configurable:!0,enumerable:!1,value:rs(e),writable:!0})}:as;function ri(t){return Fo(zu(t))}function ii(t,e,r){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var a=n(o);++i<o;)a[i]=t[i+e];return a}function oi(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!fu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ui(t,e,as,n)}function ui(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var u=(e=n(e))!=e,s=null===e,c=fu(e),l=e===r;o<a;){var f=ye((o+a)/2),p=n(t[f]),d=p!==r,h=null===p,v=p==p,y=fu(p);if(u)var g=i||v;else g=l?v&&(i||d):s?v&&d&&(i||!h):c?v&&d&&!h&&(i||!y):!h&&!y&&(i?p<=e:p<e);g?o=f+1:a=f}return wn(a,4294967294)}function si(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],u=e?e(a):a;if(!n||!za(u,s)){var s=u;o[i++]=0===a?0:a}}return o}function ci(t){return"number"==typeof t?t:fu(t)?h:+t}function li(t){if("string"==typeof t)return t;if(Ga(t))return je(t,li)+"";if(fu(t))return Bn?Bn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fi(t,e,n){var r=-1,i=Ae,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=Pe;else if(o>=200){var c=e?null:Yi(t);if(c)return ln(c);a=!1,i=Xe,s=new Qn}else s=e?[]:u;t:for(;++r<o;){var l=t[r],f=e?e(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var p=s.length;p--;)if(s[p]===f)continue t;e&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u}function pi(t,e){return null==(t=Ro(t,e=wi(e,t)))||delete t[Uo(Zo(e))]}function di(t,e,n,r){return ti(t,e,n(Sr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function vi(t,e){var n=t;return n instanceof $n&&(n=n.value()),Le(e,(function(t,e){return e.func.apply(e.thisArg,Ce([t],e.args))}),n)}function yi(t,e,r){var i=t.length;if(i<2)return i?fi(t[0]):[];for(var o=-1,a=n(i);++o<i;)for(var u=t[o],s=-1;++s<i;)s!=o&&(a[o]=pr(a[o]||u,t[s],e,r));return fi(mr(a,1),e,r)}function gi(t,e,n){for(var i=-1,o=t.length,a=e.length,u={};++i<o;){var s=i<a?e[i]:r;n(u,t[i],s)}return u}function mi(t){return Ya(t)?t:[]}function bi(t){return"function"==typeof t?t:as}function wi(t,e){return Ga(t)?t:xo(t,e)?[t]:Do(ku(t))}var ki=Jr;function xi(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:ii(t,e,n)}var _i=le||function(t){return pe.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var n=t.length,r=$t?$t(n):new t.constructor(n);return t.copy(r),r}function Ei(t){var e=new t.constructor(t.byteLength);return new Kt(e).set(new Kt(t)),e}function Ii(t,e){var n=e?Ei(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ti(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=fu(t),u=e!==r,s=null===e,c=e==e,l=fu(e);if(!s&&!l&&!a&&t>e||a&&u&&c&&!s&&!l||i&&u&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||s&&n&&o||!u&&o||!c)return-1}return 0}function Oi(t,e,r,i){for(var o=-1,a=t.length,u=r.length,s=-1,c=e.length,l=bn(a-u,0),f=n(c+l),p=!i;++s<c;)f[s]=e[s];for(;++o<u;)(p||o<a)&&(f[r[o]]=t[o]);for(;l--;)f[s++]=t[o++];return f}function Ri(t,e,r,i){for(var o=-1,a=t.length,u=-1,s=r.length,c=-1,l=e.length,f=bn(a-s,0),p=n(f+l),d=!i;++o<f;)p[o]=t[o];for(var h=o;++c<l;)p[h+c]=e[c];for(;++u<s;)(d||o<a)&&(p[h+r[u]]=t[o++]);return p}function Ai(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function Pi(t,e,n,i){var o=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var s=e[a],c=i?i(n[s],t[s],s,n,t):r;c===r&&(c=t[s]),o?ar(n,s,c):nr(n,s,c)}return n}function ji(t,e){return function(n,r){var i=Ga(n)?Ee:ir,o=e?e():{};return i(n,t,co(r,2),o)}}function Ci(t){return Jr((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,u=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,u&&ko(n[0],n[1],u)&&(a=o<3?r:a,o=1),e=It(e);++i<o;){var s=n[i];s&&t(e,s,i,a)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Qa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=It(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Mi(t){return function(e,n,r){for(var i=-1,o=It(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}function Ni(t){return function(e){var n=an(e=ku(e))?dn(e):r,i=n?n[0]:e.charAt(0),o=n?xi(n,1).join(""):e.slice(1);return i[t]()+o}}function Fi(t){return function(e){return Le(ts(Vu(e).replace(Jt,"")),t,"")}}function Di(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Wn(t.prototype),r=t.apply(n,e);return ru(r)?r:n}}function Ui(t){return function(e,n,i){var o=It(e);if(!Qa(e)){var a=co(n,3);e=Lu(e),n=function(t){return a(o[t],t,o)}}var u=t(e,n,i);return u>-1?o[a?e[u]:u]:r}}function Bi(t){return ro((function(e){var n=e.length,o=n,a=Kn.prototype.thru;for(t&&e.reverse();o--;){var u=e[o];if("function"!=typeof u)throw new Rt(i);if(a&&!s&&"wrapper"==uo(u))var s=new Kn([],!0)}for(o=s?o:n;++o<n;){var c=uo(u=e[o]),l="wrapper"==c?ao(u):r;s=l&&_o(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[uo(l[0])].apply(s,l[3]):1==u.length&&_o(u)?s[c]():s.thru(u)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Ga(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function qi(t,e,i,o,a,u,s,c,f,p){var d=e&l,h=1&e,v=2&e,y=24&e,g=512&e,m=v?r:Di(t);return function r(){for(var l=arguments.length,b=n(l),w=l;w--;)b[w]=arguments[w];if(y)var k=so(r),x=en(b,k);if(o&&(b=Oi(b,o,a,y)),u&&(b=Ri(b,u,s,y)),l-=x,y&&l<p){var _=cn(b,k);return Hi(t,e,qi,r.placeholder,i,b,_,c,f,p-l)}var S=h?i:this,E=v?S[t]:t;return l=b.length,c?b=Ao(b,c):g&&l>1&&b.reverse(),d&&f<l&&(b.length=f),this&&this!==pe&&this instanceof r&&(E=m||Di(E)),E.apply(S,b)}}function Wi(t,e){return function(n,r){return function(t,e,n,r){return kr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function zi(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=li(n),i=li(i)):(n=ci(n),i=ci(i)),o=t(n,i)}return o}}function Ki(t){return ro((function(e){return e=je(e,Ye(co())),Jr((function(n){var r=this;return t(e,(function(t){return Se(t,r,n)}))}))}))}function $i(t,e){var n=(e=e===r?" ":li(e)).length;if(n<2)return n?Yr(e,t):e;var i=Yr(e,he(t/pn(e)));return an(e)?xi(dn(i),0,t).join(""):i.slice(0,t)}function Vi(t){return function(e,i,o){return o&&"number"!=typeof o&&ko(e,i,o)&&(i=o=r),e=yu(e),i===r?(i=e,e=0):i=yu(i),function(t,e,r,i){for(var o=-1,a=bn(he((e-t)/(r||1)),0),u=n(a);a--;)u[i?a:++o]=t,t+=r;return u}(e,i,o=o===r?e<i?1:-1:yu(o),t)}}function Gi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=bu(e),n=bu(n)),t(e,n)}}function Hi(t,e,n,i,o,a,u,l,f,p){var d=8&e;e|=d?s:c,4&(e&=~(d?c:s))||(e&=-4);var h=[t,e,o,d?a:r,d?u:r,d?r:a,d?r:u,l,f,p],v=n.apply(r,h);return _o(t)&&jo(v,h),v.placeholder=i,Mo(v,t,e)}function Qi(t){var e=Et[t];return function(t,n){if(t=bu(t),(n=null==n?0:wn(gu(n),292))&&$e(t)){var r=(ku(t)+"e").split("e");return+((r=(ku(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Yi=On&&1/ln(new On([,-0]))[1]==p?function(t){return new On(t)}:fs;function Ji(t){return function(e){var n=yo(e);return n==S?un(e):n==R?fn(e):function(t,e){return je(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,o,p,d,h,v,y){var g=2&e;if(!g&&"function"!=typeof t)throw new Rt(i);var m=p?p.length:0;if(m||(e&=-97,p=d=r),v=v===r?v:bn(gu(v),0),y=y===r?y:gu(y),m-=d?d.length:0,e&c){var b=p,w=d;p=d=r}var k=g?r:ao(t),x=[t,e,o,p,d,b,w,h,v,y];if(k&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,u=r==l&&8==n||r==l&&n==f&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!u)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var s=e[3];if(s){var c=t[3];t[3]=c?Oi(c,s,e[4]):s,t[4]=c?cn(t[3],a):e[4]}(s=e[5])&&(c=t[5],t[5]=c?Ri(c,s,e[6]):s,t[6]=c?cn(t[5],a):e[6]);(s=e[7])&&(t[7]=s);r&l&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(x,k),t=x[0],e=x[1],o=x[2],p=x[3],d=x[4],!(y=x[9]=x[9]===r?g?0:t.length:bn(x[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||e==u?function(t,e,i){var o=Di(t);return function a(){for(var u=arguments.length,s=n(u),c=u,l=so(a);c--;)s[c]=arguments[c];var f=u<3&&s[0]!==l&&s[u-1]!==l?[]:cn(s,l);return(u-=f.length)<i?Hi(t,e,qi,a.placeholder,r,s,f,r,r,i-u):Se(this&&this!==pe&&this instanceof a?o:t,this,s)}}(t,e,y):e!=s&&33!=e||d.length?qi.apply(r,x):function(t,e,r,i){var o=1&e,a=Di(t);return function e(){for(var u=-1,s=arguments.length,c=-1,l=i.length,f=n(l+s),p=this&&this!==pe&&this instanceof e?a:t;++c<l;)f[c]=i[c];for(;s--;)f[c++]=arguments[++u];return Se(p,o?r:this,f)}}(t,e,o,p);else var _=function(t,e,n){var r=1&e,i=Di(t);return function e(){return(this&&this!==pe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,o);return Mo((k?ei:jo)(_,x),t,e)}function Zi(t,e,n,i){return t===r||za(t,jt[n])&&!Mt.call(i,n)?e:t}function to(t,e,n,i,o,a){return ru(t)&&ru(e)&&(a.set(e,t),zr(t,e,r,to,a),a.delete(e)),t}function eo(t){return uu(t)?r:t}function no(t,e,n,i,o,a){var u=1&n,s=t.length,c=e.length;if(s!=c&&!(u&&c>s))return!1;var l=a.get(t),f=a.get(e);if(l&&f)return l==e&&f==t;var p=-1,d=!0,h=2&n?new Qn:r;for(a.set(t,e),a.set(e,t);++p<s;){var v=t[p],y=e[p];if(i)var g=u?i(y,v,p,e,t,a):i(v,y,p,t,e,a);if(g!==r){if(g)continue;d=!1;break}if(h){if(!Ne(e,(function(t,e){if(!Xe(h,e)&&(v===t||o(v,t,n,i,a)))return h.push(e)}))){d=!1;break}}else if(v!==y&&!o(v,y,n,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function ro(t){return Lo(Oo(t,r,Go),t+"")}function io(t){return Er(t,Lu,ho)}function oo(t){return Er(t,Mu,vo)}var ao=Pn?function(t){return Pn.get(t)}:fs;function uo(t){for(var e=t.name+"",n=jn[e],r=Mt.call(jn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function so(t){return(Mt.call(qn,"placeholder")?qn:t).placeholder}function co(){var t=qn.iteratee||us;return t=t===us?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function lo(t,e){var n=t.__data__;return function(t){var e=Qo(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function fo(t){for(var e=Lu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Io(i)]}return e}function po(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Mr(n)?n:r}var ho=ge?function(t){return null==t?[]:(t=It(t),Re(ge(t),(function(e){return Ht.call(t,e)})))}:ms,vo=ge?function(t){for(var e=[];t;)Ce(e,ho(t)),t=Vt(t);return e}:ms,yo=Ir;function go(t,e,n){for(var r=-1,i=(e=wi(e,t)).length,o=!1;++r<i;){var a=Uo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&nu(i)&&wo(a,i)&&(Ga(t)||Va(t))}function mo(t){return"function"!=typeof t.constructor||Eo(t)?{}:Wn(Vt(t))}function bo(t){return Ga(t)||Va(t)||!!(Yt&&t&&t[Yt])}function wo(t,e){var n=Qo(t);return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&bt.test(t))&&t>-1&&t%1==0&&t<e}function ko(t,e,n){if(!ru(n))return!1;var r=Qo(e);return!!("number"==r?Qa(n)&&wo(e,n.length):"string"==r&&e in n)&&za(n[e],t)}function xo(t,e){if(Ga(t))return!1;var n=Qo(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fu(t))||(et.test(t)||!tt.test(t)||null!=e&&t in It(e))}function _o(t){var e=uo(t),n=qn[e];if("function"!=typeof n||!(e in $n.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(En&&yo(new En(new ArrayBuffer(1)))!=L||In&&yo(new In)!=S||Tn&&yo(Tn.resolve())!=T||On&&yo(new On)!=R||Rn&&yo(new Rn)!=j)&&(yo=function(t){var e=Ir(t),n=e==I?t.constructor:r,i=n?Bo(n):"";if(i)switch(i){case Cn:return L;case Ln:return S;case Mn:return T;case Nn:return R;case Fn:return j}return e});var So=Ct?tu:bs;function Eo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jt)}function Io(t){return t==t&&!ru(t)}function To(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in It(n)))}}function Oo(t,e,i){return e=bn(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=bn(r.length-e,0),u=n(a);++o<a;)u[o]=r[e+o];o=-1;for(var s=n(e+1);++o<e;)s[o]=r[o];return s[e]=i(u),Se(t,this,s)}}function Ro(t,e){return e.length<2?t:Sr(t,ii(e,0,-1))}function Ao(t,e){for(var n=t.length,i=wn(e.length,n),o=Ai(t);i--;){var a=e[i];t[i]=wo(a,n)?o[a]:r}return t}function Po(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var jo=No(ei),Co=de||function(t,e){return pe.setTimeout(t,e)},Lo=No(ni);function Mo(t,e,n){var r=e+"";return Lo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ut,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ie(y,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(ct):[]}(r),n)))}function No(t){var e=0,n=0;return function(){var i=kn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Fo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Qr(n,o),u=t[a];t[a]=t[n],t[n]=u}return t.length=e,t}var Do=function(t){var e=Fa(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(pt,"$1"):n||t)})),e}));function Uo(t){if("string"==typeof t||fu(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function qo(t){if(t instanceof $n)return t.clone();var e=new Kn(t.__wrapped__,t.__chain__);return e.__actions__=Ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Wo=Jr((function(t,e){return Ya(t)?pr(t,mr(e,1,Ya,!0)):[]})),zo=Jr((function(t,e){var n=Zo(e);return Ya(n)&&(n=r),Ya(t)?pr(t,mr(e,1,Ya,!0),co(n,2)):[]})),Ko=Jr((function(t,e){var n=Zo(e);return Ya(n)&&(n=r),Ya(t)?pr(t,mr(e,1,Ya,!0),r,n):[]}));function $o(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gu(n);return i<0&&(i=bn(r+i,0)),Ue(t,co(e,3),i)}function Vo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=gu(n),o=n<0?bn(i+o,0):wn(o,i-1)),Ue(t,co(e,3),o,!0)}function Go(t){return(null==t?0:t.length)?mr(t,1):[]}function Ho(t){return t&&t.length?t[0]:r}var Yo=Jr((function(t){var e=je(t,mi);return e.length&&e[0]===t[0]?Ar(e):[]})),Jo=Jr((function(t){var e=Zo(t),n=je(t,mi);return e===Zo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ar(n,co(e,2)):[]})),Xo=Jr((function(t){var e=Zo(t),n=je(t,mi);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ar(n,r,e):[]}));function Zo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var ta=Jr(ea);function ea(t,e){return t&&t.length&&e&&e.length?Gr(t,e):t}var na=ro((function(t,e){var n=null==t?0:t.length,r=ur(t,e);return Hr(t,je(e,(function(t){return wo(t,n)?+t:t})).sort(Ti)),r}));function ra(t){return null==t?t:Sn.call(t)}var ia=Jr((function(t){return fi(mr(t,1,Ya,!0))})),oa=Jr((function(t){var e=Zo(t);return Ya(e)&&(e=r),fi(mr(t,1,Ya,!0),co(e,2))})),aa=Jr((function(t){var e=Zo(t);return e="function"==typeof e?e:r,fi(mr(t,1,Ya,!0),r,e)}));function ua(t){if(!t||!t.length)return[];var e=0;return t=Re(t,(function(t){if(Ya(t))return e=bn(t.length,e),!0})),He(e,(function(e){return je(t,Ke(e))}))}function sa(t,e){if(!t||!t.length)return[];var n=ua(t);return null==e?n:je(n,(function(t){return Se(e,r,t)}))}var ca=Jr((function(t,e){return Ya(t)?pr(t,e):[]})),la=Jr((function(t){return yi(Re(t,Ya))})),fa=Jr((function(t){var e=Zo(t);return Ya(e)&&(e=r),yi(Re(t,Ya),co(e,2))})),pa=Jr((function(t){var e=Zo(t);return e="function"==typeof e?e:r,yi(Re(t,Ya),r,e)})),da=Jr(ua);var ha=Jr((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,sa(t,n)}));function va(t){var e=qn(t);return e.__chain__=!0,e}function ya(t,e){return e(t)}var ga=ro((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ur(e,t)};return!(e>1||this.__actions__.length)&&i instanceof $n&&wo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ya,args:[o],thisArg:r}),new Kn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)}));var ma=ji((function(t,e,n){Mt.call(t,n)?++t[n]:ar(t,n,1)}));var ba=Ui($o),wa=Ui(Vo);function ka(t,e){return(Ga(t)?Ie:dr)(t,co(e,3))}function xa(t,e){return(Ga(t)?Te:hr)(t,co(e,3))}var _a=ji((function(t,e,n){Mt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var Sa=Jr((function(t,e,r){var i=-1,o="function"==typeof e,a=Qa(t)?n(t.length):[];return dr(t,(function(t){a[++i]=o?Se(e,t,r):Pr(t,e,r)})),a})),Ea=ji((function(t,e,n){ar(t,n,e)}));function Ia(t,e){return(Ga(t)?je:Br)(t,co(e,3))}var Ta=ji((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var Oa=Jr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ko(t,e[0],e[1])?e=[]:n>2&&ko(e[0],e[1],e[2])&&(e=[e[0]]),$r(t,mr(e,1),[])})),Ra=fe||function(){return pe.Date.now()};function Aa(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Xi(t,l,r,r,r,r,e)}function Pa(t,e){var n;if("function"!=typeof e)throw new Rt(i);return t=gu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ja=Jr((function(t,e,n){var r=1;if(n.length){var i=cn(n,so(ja));r|=s}return Xi(t,r,e,n,i)})),Ca=Jr((function(t,e,n){var r=3;if(n.length){var i=cn(n,so(Ca));r|=s}return Xi(e,r,t,n,i)}));function La(t,e,n){var o,a,u,s,c,l,f=0,p=!1,d=!1,h=!0;if("function"!=typeof t)throw new Rt(i);function v(e){var n=o,i=a;return o=a=r,f=e,s=t.apply(i,n)}function y(t){return f=t,c=Co(m,e),p?v(t):s}function g(t){var n=t-l;return l===r||n>=e||n<0||d&&t-f>=u}function m(){var t=Ra();if(g(t))return b(t);c=Co(m,function(t){var n=e-(t-l);return d?wn(n,u-(t-f)):n}(t))}function b(t){return c=r,h&&o?v(t):(o=a=r,s)}function w(){var t=Ra(),n=g(t);if(o=arguments,a=this,l=t,n){if(c===r)return y(l);if(d)return _i(c),c=Co(m,e),v(l)}return c===r&&(c=Co(m,e)),s}return e=bu(e)||0,ru(n)&&(p=!!n.leading,u=(d="maxWait"in n)?bn(bu(n.maxWait)||0,e):u,h="trailing"in n?!!n.trailing:h),w.cancel=function(){c!==r&&_i(c),f=0,o=l=a=c=r},w.flush=function(){return c===r?s:b(Ra())},w}var Ma=Jr((function(t,e){return fr(t,1,e)})),Na=Jr((function(t,e,n){return fr(t,bu(e)||0,n)}));function Fa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Rt(i);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Fa.Cache||Hn),n}function Da(t){if("function"!=typeof t)throw new Rt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Fa.Cache=Hn;var Ua=ki((function(t,e){var n=(e=1==e.length&&Ga(e[0])?je(e[0],Ye(co())):je(mr(e,1),Ye(co()))).length;return Jr((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Se(t,this,r)}))})),Ba=Jr((function(t,e){var n=cn(e,so(Ba));return Xi(t,s,r,e,n)})),qa=Jr((function(t,e){var n=cn(e,so(qa));return Xi(t,c,r,e,n)})),Wa=ro((function(t,e){return Xi(t,f,r,r,r,e)}));function za(t,e){return t===e||t!=t&&e!=e}var Ka=Gi(Tr),$a=Gi((function(t,e){return t>=e})),Va=jr(function(){return arguments}())?jr:function(t){return iu(t)&&Mt.call(t,"callee")&&!Ht.call(t,"callee")},Ga=n.isArray,Ha=me?Ye(me):function(t){return iu(t)&&Ir(t)==C};function Qa(t){return null!=t&&nu(t.length)&&!tu(t)}function Ya(t){return iu(t)&&Qa(t)}var Ja=Fe||bs,Xa=be?Ye(be):function(t){return iu(t)&&Ir(t)==w};function Za(t){if(!iu(t))return!1;var e=Ir(t);return e==k||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!uu(t)}function tu(t){if(!ru(t))return!1;var e=Ir(t);return e==x||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function eu(t){return"number"==typeof t&&t==gu(t)}function nu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function ru(t){var e=Qo(t);return null!=t&&("object"==e||"function"==e)}function iu(t){return null!=t&&"object"==Qo(t)}var ou=we?Ye(we):function(t){return iu(t)&&yo(t)==S};function au(t){return"number"==typeof t||iu(t)&&Ir(t)==E}function uu(t){if(!iu(t)||Ir(t)!=I)return!1;var e=Vt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==Ut}var su=ke?Ye(ke):function(t){return iu(t)&&Ir(t)==O};var cu=xe?Ye(xe):function(t){return iu(t)&&yo(t)==R};function lu(t){return"string"==typeof t||!Ga(t)&&iu(t)&&Ir(t)==A}function fu(t){return"symbol"==Qo(t)||iu(t)&&Ir(t)==P}var pu=_e?Ye(_e):function(t){return iu(t)&&nu(t.length)&&!!oe[Ir(t)]};var du=Gi(Ur),hu=Gi((function(t,e){return t<=e}));function vu(t){if(!t)return[];if(Qa(t))return lu(t)?dn(t):Ai(t);if(Zt&&t[Zt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Zt]());var e=yo(t);return(e==S?un:e==R?ln:zu)(t)}function yu(t){return t?(t=bu(t))===p||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gu(t){var e=yu(t),n=e%1;return e==e?n?e-n:e:0}function mu(t){return t?sr(gu(t),0,v):0}function bu(t){if("number"==typeof t)return t;if(fu(t))return h;if(ru(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ru(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var n=yt.test(t);return n||mt.test(t)?ce(t.slice(2),n?2:8):vt.test(t)?h:+t}function wu(t){return Pi(t,Mu(t))}function ku(t){return null==t?"":li(t)}var xu=Ci((function(t,e){if(Eo(e)||Qa(e))Pi(e,Lu(e),t);else for(var n in e)Mt.call(e,n)&&nr(t,n,e[n])})),_u=Ci((function(t,e){Pi(e,Mu(e),t)})),Su=Ci((function(t,e,n,r){Pi(e,Mu(e),t,r)})),Eu=Ci((function(t,e,n,r){Pi(e,Lu(e),t,r)})),Iu=ro(ur);var Tu=Jr((function(t,e){t=It(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&ko(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],u=Mu(a),s=-1,c=u.length;++s<c;){var l=u[s],f=t[l];(f===r||za(f,jt[l])&&!Mt.call(t,l))&&(t[l]=a[l])}return t})),Ou=Jr((function(t){return t.push(r,to),Se(Fu,r,t)}));function Ru(t,e,n){var i=null==t?r:Sr(t,e);return i===r?n:i}function Au(t,e){return null!=t&&go(t,e,Rr)}var Pu=Wi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),t[e]=n}),rs(as)),ju=Wi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Dt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),co),Cu=Jr(Pr);function Lu(t){return Qa(t)?Jn(t):Fr(t)}function Mu(t){return Qa(t)?Jn(t,!0):Dr(t)}var Nu=Ci((function(t,e,n){zr(t,e,n)})),Fu=Ci((function(t,e,n,r){zr(t,e,n,r)})),Du=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=je(e,(function(e){return e=wi(e,t),r||(r=e.length>1),e})),Pi(t,oo(t),n),r&&(n=cr(n,7,eo));for(var i=e.length;i--;)pi(n,e[i]);return n}));var Uu=ro((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return Au(t,n)}))}(t,e)}));function Bu(t,e){if(null==t)return{};var n=je(oo(t),(function(t){return[t]}));return e=co(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var qu=Ji(Lu),Wu=Ji(Mu);function zu(t){return null==t?[]:Je(t,Lu(t))}var Ku=Fi((function(t,e,n){return e=e.toLowerCase(),t+(n?$u(e):e)}));function $u(t){return Zu(ku(t).toLowerCase())}function Vu(t){return(t=ku(t))&&t.replace(wt,nn).replace(Xt,"")}var Gu=Fi((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Hu=Fi((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Qu=Ni("toLowerCase");var Yu=Fi((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ju=Fi((function(t,e,n){return t+(n?" ":"")+Zu(e)}));var Xu=Fi((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Zu=Ni("toUpperCase");function ts(t,e,n){return t=ku(t),(e=n?r:e)===r?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var es=Jr((function(t,e){try{return Se(t,r,e)}catch(t){return Za(t)?t:new _t(t)}})),ns=ro((function(t,e){return Ie(e,(function(e){e=Uo(e),ar(t,e,ja(t[e],t))})),t}));function rs(t){return function(){return t}}var is=Bi(),os=Bi(!0);function as(t){return t}function us(t){return Nr("function"==typeof t?t:cr(t,1))}var ss=Jr((function(t,e){return function(n){return Pr(n,t,e)}})),cs=Jr((function(t,e){return function(n){return Pr(t,n,e)}}));function ls(t,e,n){var r=Lu(e),i=_r(e,r);null!=n||ru(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,Lu(e)));var o=!(ru(n)&&"chain"in n&&!n.chain),a=tu(t);return Ie(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ce([this.value()],arguments))})})),t}function fs(){}var ps=Ki(je),ds=Ki(Oe),hs=Ki(Ne);function vs(t){return xo(t)?Ke(Uo(t)):function(t){return function(e){return Sr(e,t)}}(t)}var ys=Vi(),gs=Vi(!0);function ms(){return[]}function bs(){return!1}var ws=zi((function(t,e){return t+e}),0),ks=Qi("ceil"),xs=zi((function(t,e){return t/e}),1),_s=Qi("floor");var Ss,Es=zi((function(t,e){return t*e}),1),Is=Qi("round"),Ts=zi((function(t,e){return t-e}),0);return qn.after=function(t,e){if("function"!=typeof e)throw new Rt(i);return t=gu(t),function(){if(--t<1)return e.apply(this,arguments)}},qn.ary=Aa,qn.assign=xu,qn.assignIn=_u,qn.assignInWith=Su,qn.assignWith=Eu,qn.at=Iu,qn.before=Pa,qn.bind=ja,qn.bindAll=ns,qn.bindKey=Ca,qn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ga(t)?t:[t]},qn.chain=va,qn.chunk=function(t,e,i){e=(i?ko(t,e,i):e===r)?1:bn(gu(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,u=0,s=n(he(o/e));a<o;)s[u++]=ii(t,a,a+=e);return s},qn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},qn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ce(Ga(r)?Ai(r):[r],mr(e,1))},qn.cond=function(t){var e=null==t?0:t.length,n=co();return t=e?je(t,(function(t){if("function"!=typeof t[1])throw new Rt(i);return[n(t[0]),t[1]]})):[],Jr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Se(i[0],this,n))return Se(i[1],this,n)}}))},qn.conforms=function(t){return function(t){var e=Lu(t);return function(n){return lr(n,t,e)}}(cr(t,1))},qn.constant=rs,qn.countBy=ma,qn.create=function(t,e){var n=Wn(t);return null==e?n:or(n,e)},qn.curry=function t(e,n,i){var o=Xi(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},qn.curryRight=function t(e,n,i){var o=Xi(e,u,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},qn.debounce=La,qn.defaults=Tu,qn.defaultsDeep=Ou,qn.defer=Ma,qn.delay=Na,qn.difference=Wo,qn.differenceBy=zo,qn.differenceWith=Ko,qn.drop=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,(e=n||e===r?1:gu(e))<0?0:e,i):[]},qn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=n||e===r?1:gu(e)))<0?0:e):[]},qn.dropRightWhile=function(t,e){return t&&t.length?hi(t,co(e,3),!0,!0):[]},qn.dropWhile=function(t,e){return t&&t.length?hi(t,co(e,3),!0):[]},qn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&ko(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=gu(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:gu(i))<0&&(i+=o),i=n>i?0:mu(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},qn.filter=function(t,e){return(Ga(t)?Re:gr)(t,co(e,3))},qn.flatMap=function(t,e){return mr(Ia(t,e),1)},qn.flatMapDeep=function(t,e){return mr(Ia(t,e),p)},qn.flatMapDepth=function(t,e,n){return n=n===r?1:gu(n),mr(Ia(t,e),n)},qn.flatten=Go,qn.flattenDeep=function(t){return(null==t?0:t.length)?mr(t,p):[]},qn.flattenDepth=function(t,e){return(null==t?0:t.length)?mr(t,e=e===r?1:gu(e)):[]},qn.flip=function(t){return Xi(t,512)},qn.flow=is,qn.flowRight=os,qn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},qn.functions=function(t){return null==t?[]:_r(t,Lu(t))},qn.functionsIn=function(t){return null==t?[]:_r(t,Mu(t))},qn.groupBy=_a,qn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},qn.intersection=Yo,qn.intersectionBy=Jo,qn.intersectionWith=Xo,qn.invert=Pu,qn.invertBy=ju,qn.invokeMap=Sa,qn.iteratee=us,qn.keyBy=Ea,qn.keys=Lu,qn.keysIn=Mu,qn.map=Ia,qn.mapKeys=function(t,e){var n={};return e=co(e,3),kr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},qn.mapValues=function(t,e){var n={};return e=co(e,3),kr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},qn.matches=function(t){return qr(cr(t,1))},qn.matchesProperty=function(t,e){return Wr(t,cr(e,1))},qn.memoize=Fa,qn.merge=Nu,qn.mergeWith=Fu,qn.method=ss,qn.methodOf=cs,qn.mixin=ls,qn.negate=Da,qn.nthArg=function(t){return t=gu(t),Jr((function(e){return Kr(e,t)}))},qn.omit=Du,qn.omitBy=function(t,e){return Bu(t,Da(co(e)))},qn.once=function(t){return Pa(2,t)},qn.orderBy=function(t,e,n,i){return null==t?[]:(Ga(e)||(e=null==e?[]:[e]),Ga(n=i?r:n)||(n=null==n?[]:[n]),$r(t,e,n))},qn.over=ps,qn.overArgs=Ua,qn.overEvery=ds,qn.overSome=hs,qn.partial=Ba,qn.partialRight=qa,qn.partition=Ta,qn.pick=Uu,qn.pickBy=Bu,qn.property=vs,qn.propertyOf=function(t){return function(e){return null==t?r:Sr(t,e)}},qn.pull=ta,qn.pullAll=ea,qn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,co(n,2)):t},qn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gr(t,e,r,n):t},qn.pullAt=na,qn.range=ys,qn.rangeRight=gs,qn.rearg=Wa,qn.reject=function(t,e){return(Ga(t)?Re:gr)(t,Da(co(e,3)))},qn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=co(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Hr(t,i),n},qn.rest=function(t,e){if("function"!=typeof t)throw new Rt(i);return Jr(t,e=e===r?e:gu(e))},qn.reverse=ra,qn.sampleSize=function(t,e,n){return e=(n?ko(t,e,n):e===r)?1:gu(e),(Ga(t)?Zn:Zr)(t,e)},qn.set=function(t,e,n){return null==t?t:ti(t,e,n)},qn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ti(t,e,n,i)},qn.shuffle=function(t){return(Ga(t)?tr:ri)(t)},qn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ko(t,e,n)?(e=0,n=i):(e=null==e?0:gu(e),n=n===r?i:gu(n)),ii(t,e,n)):[]},qn.sortBy=Oa,qn.sortedUniq=function(t){return t&&t.length?si(t):[]},qn.sortedUniqBy=function(t,e){return t&&t.length?si(t,co(e,2)):[]},qn.split=function(t,e,n){return n&&"number"!=typeof n&&ko(t,e,n)&&(e=n=r),(n=n===r?v:n>>>0)?(t=ku(t))&&("string"==typeof e||null!=e&&!su(e))&&!(e=li(e))&&an(t)?xi(dn(t),0,n):t.split(e,n):[]},qn.spread=function(t,e){if("function"!=typeof t)throw new Rt(i);return e=null==e?0:bn(gu(e),0),Jr((function(n){var r=n[e],i=xi(n,0,e);return r&&Ce(i,r),Se(t,this,i)}))},qn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},qn.take=function(t,e,n){return t&&t.length?ii(t,0,(e=n||e===r?1:gu(e))<0?0:e):[]},qn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=n||e===r?1:gu(e)))<0?0:e,i):[]},qn.takeRightWhile=function(t,e){return t&&t.length?hi(t,co(e,3),!1,!0):[]},qn.takeWhile=function(t,e){return t&&t.length?hi(t,co(e,3)):[]},qn.tap=function(t,e){return e(t),t},qn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Rt(i);return ru(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),La(t,e,{leading:r,maxWait:e,trailing:o})},qn.thru=ya,qn.toArray=vu,qn.toPairs=qu,qn.toPairsIn=Wu,qn.toPath=function(t){return Ga(t)?je(t,Uo):fu(t)?[t]:Ai(Do(ku(t)))},qn.toPlainObject=wu,qn.transform=function(t,e,n){var r=Ga(t),i=r||Ja(t)||pu(t);if(e=co(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ru(t)&&tu(o)?Wn(Vt(t)):{}}return(i?Ie:kr)(t,(function(t,r,i){return e(n,t,r,i)})),n},qn.unary=function(t){return Aa(t,1)},qn.union=ia,qn.unionBy=oa,qn.unionWith=aa,qn.uniq=function(t){return t&&t.length?fi(t):[]},qn.uniqBy=function(t,e){return t&&t.length?fi(t,co(e,2)):[]},qn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?fi(t,r,e):[]},qn.unset=function(t,e){return null==t||pi(t,e)},qn.unzip=ua,qn.unzipWith=sa,qn.update=function(t,e,n){return null==t?t:di(t,e,bi(n))},qn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:di(t,e,bi(n),i)},qn.values=zu,qn.valuesIn=function(t){return null==t?[]:Je(t,Mu(t))},qn.without=ca,qn.words=ts,qn.wrap=function(t,e){return Ba(bi(e),t)},qn.xor=la,qn.xorBy=fa,qn.xorWith=pa,qn.zip=da,qn.zipObject=function(t,e){return gi(t||[],e||[],nr)},qn.zipObjectDeep=function(t,e){return gi(t||[],e||[],ti)},qn.zipWith=ha,qn.entries=qu,qn.entriesIn=Wu,qn.extend=_u,qn.extendWith=Su,ls(qn,qn),qn.add=ws,qn.attempt=es,qn.camelCase=Ku,qn.capitalize=$u,qn.ceil=ks,qn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=bu(n))==n?n:0),e!==r&&(e=(e=bu(e))==e?e:0),sr(bu(t),e,n)},qn.clone=function(t){return cr(t,4)},qn.cloneDeep=function(t){return cr(t,5)},qn.cloneDeepWith=function(t,e){return cr(t,5,e="function"==typeof e?e:r)},qn.cloneWith=function(t,e){return cr(t,4,e="function"==typeof e?e:r)},qn.conformsTo=function(t,e){return null==e||lr(t,e,Lu(e))},qn.deburr=Vu,qn.defaultTo=function(t,e){return null==t||t!=t?e:t},qn.divide=xs,qn.endsWith=function(t,e,n){t=ku(t),e=li(e);var i=t.length,o=n=n===r?i:sr(gu(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},qn.eq=za,qn.escape=function(t){return(t=ku(t))&&Y.test(t)?t.replace(H,rn):t},qn.escapeRegExp=function(t){return(t=ku(t))&&it.test(t)?t.replace(rt,"\\$&"):t},qn.every=function(t,e,n){var i=Ga(t)?Oe:vr;return n&&ko(t,e,n)&&(e=r),i(t,co(e,3))},qn.find=ba,qn.findIndex=$o,qn.findKey=function(t,e){return De(t,co(e,3),kr)},qn.findLast=wa,qn.findLastIndex=Vo,qn.findLastKey=function(t,e){return De(t,co(e,3),xr)},qn.floor=_s,qn.forEach=ka,qn.forEachRight=xa,qn.forIn=function(t,e){return null==t?t:br(t,co(e,3),Mu)},qn.forInRight=function(t,e){return null==t?t:wr(t,co(e,3),Mu)},qn.forOwn=function(t,e){return t&&kr(t,co(e,3))},qn.forOwnRight=function(t,e){return t&&xr(t,co(e,3))},qn.get=Ru,qn.gt=Ka,qn.gte=$a,qn.has=function(t,e){return null!=t&&go(t,e,Or)},qn.hasIn=Au,qn.head=Ho,qn.identity=as,qn.includes=function(t,e,n,r){t=Qa(t)?t:zu(t),n=n&&!r?gu(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),lu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Be(t,e,n)>-1},qn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:gu(n);return i<0&&(i=bn(r+i,0)),Be(t,e,i)},qn.inRange=function(t,e,n){return e=yu(e),n===r?(n=e,e=0):n=yu(n),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=bu(t),e,n)},qn.invoke=Cu,qn.isArguments=Va,qn.isArray=Ga,qn.isArrayBuffer=Ha,qn.isArrayLike=Qa,qn.isArrayLikeObject=Ya,qn.isBoolean=function(t){return!0===t||!1===t||iu(t)&&Ir(t)==b},qn.isBuffer=Ja,qn.isDate=Xa,qn.isElement=function(t){return iu(t)&&1===t.nodeType&&!uu(t)},qn.isEmpty=function(t){if(null==t)return!0;if(Qa(t)&&(Ga(t)||"string"==typeof t||"function"==typeof t.splice||Ja(t)||pu(t)||Va(t)))return!t.length;var e=yo(t);if(e==S||e==R)return!t.size;if(Eo(t))return!Fr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},qn.isEqual=function(t,e){return Cr(t,e)},qn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Cr(t,e,r,n):!!i},qn.isError=Za,qn.isFinite=function(t){return"number"==typeof t&&$e(t)},qn.isFunction=tu,qn.isInteger=eu,qn.isLength=nu,qn.isMap=ou,qn.isMatch=function(t,e){return t===e||Lr(t,e,fo(e))},qn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Lr(t,e,fo(e),n)},qn.isNaN=function(t){return au(t)&&t!=+t},qn.isNative=function(t){if(So(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},qn.isNil=function(t){return null==t},qn.isNull=function(t){return null===t},qn.isNumber=au,qn.isObject=ru,qn.isObjectLike=iu,qn.isPlainObject=uu,qn.isRegExp=su,qn.isSafeInteger=function(t){return eu(t)&&t>=-9007199254740991&&t<=d},qn.isSet=cu,qn.isString=lu,qn.isSymbol=fu,qn.isTypedArray=pu,qn.isUndefined=function(t){return t===r},qn.isWeakMap=function(t){return iu(t)&&yo(t)==j},qn.isWeakSet=function(t){return iu(t)&&"[object WeakSet]"==Ir(t)},qn.join=function(t,e){return null==t?"":gn.call(t,e)},qn.kebabCase=Gu,qn.last=Zo,qn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=gu(n))<0?bn(i+o,0):wn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ue(t,We,o,!0)},qn.lowerCase=Hu,qn.lowerFirst=Qu,qn.lt=du,qn.lte=hu,qn.max=function(t){return t&&t.length?yr(t,as,Tr):r},qn.maxBy=function(t,e){return t&&t.length?yr(t,co(e,2),Tr):r},qn.mean=function(t){return ze(t,as)},qn.meanBy=function(t,e){return ze(t,co(e,2))},qn.min=function(t){return t&&t.length?yr(t,as,Ur):r},qn.minBy=function(t,e){return t&&t.length?yr(t,co(e,2),Ur):r},qn.stubArray=ms,qn.stubFalse=bs,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=Es,qn.nth=function(t,e){return t&&t.length?Kr(t,gu(e)):r},qn.noConflict=function(){return pe._===this&&(pe._=Bt),this},qn.noop=fs,qn.now=Ra,qn.pad=function(t,e,n){t=ku(t);var r=(e=gu(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return $i(ye(i),n)+t+$i(he(i),n)},qn.padEnd=function(t,e,n){t=ku(t);var r=(e=gu(e))?pn(t):0;return e&&r<e?t+$i(e-r,n):t},qn.padStart=function(t,e,n){t=ku(t);var r=(e=gu(e))?pn(t):0;return e&&r<e?$i(e-r,n)+t:t},qn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),xn(ku(t).replace(ot,""),e||0)},qn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ko(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=yu(t),e===r?(e=t,t=0):e=yu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=_n();return wn(t+o*(e-t+se("1e-"+((o+"").length-1))),e)}return Qr(t,e)},qn.reduce=function(t,e,n){var r=Ga(t)?Le:Ve,i=arguments.length<3;return r(t,co(e,4),n,i,dr)},qn.reduceRight=function(t,e,n){var r=Ga(t)?Me:Ve,i=arguments.length<3;return r(t,co(e,4),n,i,hr)},qn.repeat=function(t,e,n){return e=(n?ko(t,e,n):e===r)?1:gu(e),Yr(ku(t),e)},qn.replace=function(){var t=arguments,e=ku(t[0]);return t.length<3?e:e.replace(t[1],t[2])},qn.result=function(t,e,n){var i=-1,o=(e=wi(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[Uo(e[i])];a===r&&(i=o,a=n),t=tu(a)?a.call(t):a}return t},qn.round=Is,qn.runInContext=t,qn.sample=function(t){return(Ga(t)?Xn:Xr)(t)},qn.size=function(t){if(null==t)return 0;if(Qa(t))return lu(t)?pn(t):t.length;var e=yo(t);return e==S||e==R?t.size:Fr(t).length},qn.snakeCase=Yu,qn.some=function(t,e,n){var i=Ga(t)?Ne:oi;return n&&ko(t,e,n)&&(e=r),i(t,co(e,3))},qn.sortedIndex=function(t,e){return ai(t,e)},qn.sortedIndexBy=function(t,e,n){return ui(t,e,co(n,2))},qn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&za(t[r],e))return r}return-1},qn.sortedLastIndex=function(t,e){return ai(t,e,!0)},qn.sortedLastIndexBy=function(t,e,n){return ui(t,e,co(n,2),!0)},qn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(za(t[n],e))return n}return-1},qn.startCase=Ju,qn.startsWith=function(t,e,n){return t=ku(t),n=null==n?0:sr(gu(n),0,t.length),e=li(e),t.slice(n,n+e.length)==e},qn.subtract=Ts,qn.sum=function(t){return t&&t.length?Ge(t,as):0},qn.sumBy=function(t,e){return t&&t.length?Ge(t,co(e,2)):0},qn.template=function(t,e,n){var i=qn.templateSettings;n&&ko(t,e,n)&&(e=r),t=ku(t),e=Su({},e,i,Zi);var o,a,u=Su({},e.imports,i.imports,Zi),s=Lu(u),c=Je(u,s),l=0,f=e.interpolate||kt,p="__p += '",d=Tt((e.escape||kt).source+"|"+f.source+"|"+(f===Z?dt:kt).source+"|"+(e.evaluate||kt).source+"|$","g"),h="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(d,(function(e,n,r,i,u,s){return r||(r=i),p+=t.slice(l,s).replace(xt,on),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e})),p+="';\n";var v=Mt.call(e,"variable")&&e.variable;if(v){if(ft.test(v))throw new _t("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(K,""):p).replace($,"$1").replace(V,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=es((function(){return St(s,h+"return "+p).apply(r,c)}));if(y.source=p,Za(y))throw y;return y},qn.times=function(t,e){if((t=gu(t))<1||t>d)return[];var n=v,r=wn(t,v);e=co(e),t-=v;for(var i=He(r,e);++n<t;)e(n);return i},qn.toFinite=yu,qn.toInteger=gu,qn.toLength=mu,qn.toLower=function(t){return ku(t).toLowerCase()},qn.toNumber=bu,qn.toSafeInteger=function(t){return t?sr(gu(t),-9007199254740991,d):0===t?t:0},qn.toString=ku,qn.toUpper=function(t){return ku(t).toUpperCase()},qn.trim=function(t,e,n){if((t=ku(t))&&(n||e===r))return Qe(t);if(!t||!(e=li(e)))return t;var i=dn(t),o=dn(e);return xi(i,Ze(i,o),tn(i,o)+1).join("")},qn.trimEnd=function(t,e,n){if((t=ku(t))&&(n||e===r))return t.slice(0,hn(t)+1);if(!t||!(e=li(e)))return t;var i=dn(t);return xi(i,0,tn(i,dn(e))+1).join("")},qn.trimStart=function(t,e,n){if((t=ku(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=li(e)))return t;var i=dn(t);return xi(i,Ze(i,dn(e))).join("")},qn.truncate=function(t,e){var n=30,i="...";if(ru(e)){var o="separator"in e?e.separator:o;n="length"in e?gu(e.length):n,i="omission"in e?li(e.omission):i}var a=(t=ku(t)).length;if(an(t)){var u=dn(t);a=u.length}if(n>=a)return t;var s=n-pn(i);if(s<1)return i;var c=u?xi(u,0,s).join(""):t.slice(0,s);if(o===r)return c+i;if(u&&(s+=c.length-s),su(o)){if(t.slice(s).search(o)){var l,f=c;for(o.global||(o=Tt(o.source,ku(ht.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var p=l.index;c=c.slice(0,p===r?s:p)}}else if(t.indexOf(li(o),s)!=s){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+i},qn.unescape=function(t){return(t=ku(t))&&Q.test(t)?t.replace(G,vn):t},qn.uniqueId=function(t){var e=++Nt;return ku(t)+e},qn.upperCase=Xu,qn.upperFirst=Zu,qn.each=ka,qn.eachRight=xa,qn.first=Ho,ls(qn,(Ss={},kr(qn,(function(t,e){Mt.call(qn.prototype,e)||(Ss[e]=t)})),Ss),{chain:!1}),qn.VERSION="4.17.21",Ie(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){qn[t].placeholder=qn})),Ie(["drop","take"],(function(t,e){$n.prototype[t]=function(n){n=n===r?1:bn(gu(n),0);var i=this.__filtered__&&!e?new $n(this):this.clone();return i.__filtered__?i.__takeCount__=wn(n,i.__takeCount__):i.__views__.push({size:wn(n,v),type:t+(i.__dir__<0?"Right":"")}),i},$n.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ie(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;$n.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:co(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ie(["head","last"],(function(t,e){var n="take"+(e?"Right":"");$n.prototype[t]=function(){return this[n](1).value()[0]}})),Ie(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");$n.prototype[t]=function(){return this.__filtered__?new $n(this):this[n](1)}})),$n.prototype.compact=function(){return this.filter(as)},$n.prototype.find=function(t){return this.filter(t).head()},$n.prototype.findLast=function(t){return this.reverse().find(t)},$n.prototype.invokeMap=Jr((function(t,e){return"function"==typeof t?new $n(this):this.map((function(n){return Pr(n,t,e)}))})),$n.prototype.reject=function(t){return this.filter(Da(co(t)))},$n.prototype.slice=function(t,e){t=gu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new $n(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=gu(e))<0?n.dropRight(-e):n.take(e-t)),n)},$n.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},$n.prototype.toArray=function(){return this.take(v)},kr($n.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=qn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(qn.prototype[e]=function(){var e=this.__wrapped__,u=i?[1]:arguments,s=e instanceof $n,c=u[0],l=s||Ga(e),f=function(t){var e=o.apply(qn,Ce([t],u));return i&&p?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(s=l=!1);var p=this.__chain__,d=!!this.__actions__.length,h=a&&!p,v=s&&!d;if(!a&&l){e=v?e:new $n(this);var y=t.apply(e,u);return y.__actions__.push({func:ya,args:[f],thisArg:r}),new Kn(y,p)}return h&&v?t.apply(this,u):(y=this.thru(f),h?i?y.value()[0]:y.value():y)})})),Ie(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);qn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ga(i)?i:[],t)}return this[n]((function(n){return e.apply(Ga(n)?n:[],t)}))}})),kr($n.prototype,(function(t,e){var n=qn[e];if(n){var r=n.name+"";Mt.call(jn,r)||(jn[r]=[]),jn[r].push({name:e,func:n})}})),jn[qi(r,2).name]=[{name:"wrapper",func:r}],$n.prototype.clone=function(){var t=new $n(this.__wrapped__);return t.__actions__=Ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ai(this.__views__),t},$n.prototype.reverse=function(){if(this.__filtered__){var t=new $n(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},$n.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ga(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,l=this.__iteratees__,f=l.length,p=0,d=wn(s,this.__takeCount__);if(!n||!r&&i==s&&d==s)return vi(t,this.__actions__);var h=[];t:for(;s--&&p<d;){for(var v=-1,y=t[c+=e];++v<f;){var g=l[v],m=g.iteratee,b=g.type,w=m(y);if(2==b)y=w;else if(!w){if(1==b)continue t;break t}}h[p++]=y}return h},qn.prototype.at=ga,qn.prototype.chain=function(){return va(this)},qn.prototype.commit=function(){return new Kn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===r&&(this.__values__=vu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},qn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var i=qo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},qn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof $n){var e=t;return this.__actions__.length&&(e=new $n(this)),(e=e.reverse()).__actions__.push({func:ya,args:[ra],thisArg:r}),new Kn(e,this.__chain__)}return this.thru(ra)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,Zt&&(qn.prototype[Zt]=function(){return this}),qn}();he?((he.exports=yn)._=yn,de._=yn):pe._=yn}).call(e)}(kI,kI.exports);var TI=function(t){Ho(m,t);var e,n,r,i,o,a,u,s,c,l,f,p,d,h,v,y,g=II(m);function m(t,e,n){var r;zo(this,m);return(r=g.call(this,t,n)).updateMergingQueue=new oE((function(t,e){return"number"==typeof e.ttl?{ttl:e.ttl}:t})),r.cache=new wI,r.descriptor=e,r.descriptor.date_updated=new Date(r.descriptor.date_updated),r}return $o(m,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"list"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"_addOrUpdateItemOnServer",value:(y=Wo(zc.mark((function t(e,n,r,i){var o,a;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={data:n},void 0!==i&&(o.ttl=i),t.next=4,this.services.network.post(e,o,r);case 4:return(a=t.sent).body.data=n,a.body.date_updated=new Date(a.body.date_updated),t.abrupt("return",a.body);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return y.apply(this,arguments)})},{key:"push",value:(v=Wo(zc.mark((function t(e,n){var r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(n||{}).ttl,t.next=3,this._addOrUpdateItemOnServer(this.links.items,e,void 0,r);case 3:return i=t.sent,o=Number(i.index),this._handleItemMutated(o,i.url,i.last_event_id,i.revision,e,i.date_updated,i.date_expires,!0,!1),t.abrupt("return",this.cache.getValue(o));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return v.apply(this,arguments)})},{key:"set",value:(h=Wo(zc.mark((function t(e,n,r){var i,o=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r||{},t.abrupt("return",this.updateMergingQueue.squashAndAdd(e,i,(function(t){return o._updateItemUnconditionally(e,n,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return h.apply(this,arguments)})},{key:"_updateItemUnconditionally",value:(d=Wo(zc.mark((function t(e,n,r){var i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return i=t.sent,t.next=5,this._addOrUpdateItemOnServer(i.url,n,void 0,r);case 5:return o=t.sent,this._handleItemMutated(e,o.url,o.last_event_id,o.revision,o.data,o.date_updated,o.date_expires,!1,!1),t.abrupt("return",this.cache.getValue(e));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return d.apply(this,arguments)})},{key:"_updateItemWithIfMatch",value:(p=Wo(zc.mark((function t(e,n,r){var i,o,a,u;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:if(i=t.sent,!(o=n(pS(i.data)))){t.next=25;break}return a=i.revision,t.prev=6,t.next=9,this._addOrUpdateItemOnServer(i.url,o,a,r);case 9:return u=t.sent,this._handleItemMutated(e,u.url,u.last_event_id,u.revision,u.data,u.date_updated,u.date_expires,!1,!1),t.abrupt("return",this.cache.getValue(e));case 14:if(t.prev=14,t.t0=t.catch(6),412!==t.t0.status){t.next=22;break}return t.next=19,this._getItemFromServer(e);case 19:return t.abrupt("return",this._updateItemWithIfMatch(e,n,r));case 22:throw t.t0;case 23:t.next=26;break;case 25:return t.abrupt("return",i);case 26:case"end":return t.stop()}}),t,this,[[6,14]])}))),function(t,e,n){return p.apply(this,arguments)})},{key:"mutate",value:(f=Wo(zc.mark((function t(e,n,r){var i,o=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r||{},t.abrupt("return",this.updateMergingQueue.add(e,i,(function(t){return o._updateItemWithIfMatch(e,n,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return f.apply(this,arguments)})},{key:"update",value:(l=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mutate(e,(function(t){return Object.assign(t,n)}),r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return l.apply(this,arguments)})},{key:"remove",value:(c=Wo(zc.mark((function t(e){var n,r,i;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return n=t.sent,r=pS(n.data),t.next=6,this.services.network.delete(n.url);case 6:i=t.sent,this._handleItemRemoved(e,i.body.last_event_id,r,new Date(i.body.date_updated),!1);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"get",value:function(){var t=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this.cache.get(e))){t.next=3;break}return t.abrupt("return",n.value);case 3:return t.abrupt("return",this._getItemFromServer(e));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getItemFromServer",value:(s=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queryItemsFromServer({index:e});case 2:if(!((n=t.sent).items.length<1)){t.next=7;break}throw new nS("No item with index ".concat(e," found"),404,54151);case 7:return t.abrupt("return",n.items[0]);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"queryItems",value:function(){var t=Wo(zc.mark((function t(e){var n,r,i,o,a,u,s,c,l,f,p,d,h,v,y,g,m,b,w,k,x,_,S,E,I,T;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.index){t.next=5;break}if(!(l=this.cache.get(e.index))){t.next=4;break}return t.abrupt("return",this.makePaginator(l.isValid?[l.value]:[],e,!1,!1));case 4:return t.abrupt("return",this._querySingleItemFromServer(e.index));case 5:f=!!e.nextPageItemId||!!e.prevPageItemId,p=EI({},e),f&&(e.from=null!==(d=null!==(h=e.nextPageItemId)&&void 0!==h?h:e.prevPageItemId)&&void 0!==d?d:e.from),v=!!e.prevPageItemId,y="desc"===e.order?v?this.cache.getIterator(null!==(n=null!==(r=e.prevPageItemId)&&void 0!==r?r:e.from)&&void 0!==n?n:null):this.cache.getReverseIterator(null!==(i=null!==(o=e.nextPageItemId)&&void 0!==o?o:e.from)&&void 0!==i?i:null):v?this.cache.getReverseIterator(null!==(a=null!==(u=e.prevPageItemId)&&void 0!==u?u:e.from)&&void 0!==a?a:null):this.cache.getIterator(null!==(s=null!==(c=e.nextPageItemId)&&void 0!==c?c:e.from)&&void 0!==s?s:null),g=[],m=f?e.limit+1:e.limit,b=xI(y),t.prev=13,b.s();case 15:if((w=b.n()).done){t.next=25;break}if(k=w.value,!f||k.value.index!=e.from){t.next=19;break}return t.abrupt("continue",23);case 19:if(g.push(k.value),!(g.length>=e.limit)){t.next=23;break}return v&&kI.exports.reverse(g),t.abrupt("return",this.makePaginator(g,e,this._prevPageAllowed(g,e.order),this._nextPageAllowed(g,e.order)));case 23:t.next=15;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(13),b.e(t.t0);case 30:return t.prev=30,b.f(),t.finish(30);case 33:if(g.length>0&&(e.from=kI.exports.last(g).index),x=Math.max(m-g.length,10),v&&(e.order="desc"===e.order?"asc":"desc"),!(e.from!==("desc"===p.order?v?this.cache.collectionEnd:this.cache.collectionBegin:v?this.cache.collectionBegin:this.cache.collectionEnd))){t.next=65;break}return t.next=40,this._queryItemsFromServer(EI(EI({},e),{},{limit:x}));case 40:_=t.sent,S=_.items,this.cache.populate(S,!_.hasPrevPage,!_.hasNextPage),E=xI(S),t.prev=44,E.s();case 46:if((I=E.n()).done){t.next=55;break}if(T=I.value,!(g.length>0||f)||T.index!=e.from){t.next=50;break}return t.abrupt("continue",53);case 50:if(v?g.unshift(T):g.push(T),!(g.length>=e.limit)){t.next=53;break}return t.abrupt("break",55);case 53:t.next=46;break;case 55:t.next=60;break;case 57:t.prev=57,t.t1=t.catch(44),E.e(t.t1);case 60:return t.prev=60,E.f(),t.finish(60);case 63:t.next=66;break;case 65:v&&kI.exports.reverse(g);case 66:return t.abrupt("return",this.makePaginator(g,p,this._prevPageAllowed(g,p.order),this._nextPageAllowed(g,p.order)));case 67:case"end":return t.stop()}}),t,this,[[13,27,30,33],[44,57,60,63]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_prevPageAllowed",value:function(t,e){return t.length>0&&kI.exports.head(t).index!==("desc"===e?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(t,e){return t.length>0&&kI.exports.last(t).index!==("desc"===e?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(t,e,n,r){var i=this;e.nextPageItemId=e.prevPageItemId=null;var o=n&&this._prevPageAllowed(t,e.order),a=r&&this._nextPageAllowed(t,e.order);return new VE(t,(function(t){return i.queryItems(EI(EI({},e),t))}),o?kI.exports.head(t).index:null,a?kI.exports.last(t).index:null)}},{key:"_querySingleItemFromServer",value:(u=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queryItemsFromServer({index:e});case 2:return 0===(n=t.sent).items.length&&this.cache.delete(e,null),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"_queryItemsFromServer",value:(a=Wo(zc.mark((function t(e){var n,r,i,o,a,u,s=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new J_(this.links.items).queryParam("HideExpired",!0).queryParam("Index",e.index).queryParam("PageToken",e.pageToken).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Order",e.order).build(),t.next=3,this.services.network.get(i);case 3:return o=t.sent,a=(null!==(n=null===(r=o.body)||void 0===r?void 0:r.items)&&void 0!==n?n:[]).map((function(t){return t.date_updated=new Date(t.date_updated),s._handleItemMutated(t.index,t.url,t.last_event_id,t.revision,t.data,t.date_updated,t.date_expires,!1,!0),s.cache.getValue(t.index)})),u=o.body.meta,t.abrupt("return",this.makePaginator(a,e,!!u.previous_token,!!u.next_token));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getItems",value:(o=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dS((e=e||{}).pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getContext",value:(i=Wo(zc.mark((function t(){var e;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context){t.next=5;break}return t.next=3,this.services.network.get(this.links.context);case 3:e=t.sent,this._updateContextIfRequired(e.body.data,e.body.last_event_id);case 5:return t.abrupt("return",this.context);case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"setTtl",value:(r=Wo(zc.mark((function t(e){var n,r;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={ttl:e},t.next=4,this.services.network.post(this.uri,n);case 4:r=t.sent,this.descriptor.date_expires=r.body.date_expires,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),404===t.t0.status&&this.onRemoved(!1),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return r.apply(this,arguments)})},{key:"setItemTtl",value:(n=Wo(zc.mark((function t(e,n){var r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return r=t.sent,i={ttl:n},t.next=6,this.services.network.post(r.url,i);case 6:o=t.sent,r.updateDateExpires(o.body.date_expires);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeList",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:t})}},{key:"shouldIgnoreEvent",value:function(t,e){return this.cache.isKnown(t,e)}},{key:"_update",value:function(t,e){var n=Number(t.item_index);switch(t.date_created=new Date(t.date_created),t.type){case"list_item_added":case"list_item_updated":this._handleItemMutated(n,t.item_url,t.id,t.item_revision,t.item_data,t.date_created,t.date_expires,"list_item_added"===t.type,!0);break;case"list_item_removed":this._handleItemRemoved(n,t.id,t.item_data,t.date_created,!0);break;case"list_context_updated":this._handleContextUpdate(t.context_data,t.id,t.date_created);break;case"list_removed":this.onRemoved(!1)}e&&this._advanceLastEventId(t.id,t.list_revision)}},{key:"_advanceLastEventId",value:function(t,e){this.lastEventId<t&&(this.descriptor.last_event_id=t,e&&(this.descriptor.revision=e))}},{key:"_updateRootDateUpdated",value:function(t){(!this.descriptor.date_updated||t.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=t,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:t}))}},{key:"_handleItemMutated",value:function(t,e,n,r,i,o,a,u,s){if(this.shouldIgnoreEvent(t,n))mS("Item ".concat(t," update skipped, current: ").concat(this.lastEventId,", remote: ").concat(n));else{this._updateRootDateUpdated(o);var c=this.cache.getValue(t);if(!c){var l=new $E({index:t,url:e,lastEventId:n,revision:r,data:i,dateUpdated:o,dateExpires:a});return this.cache.store(t,l,n),void this.emitItemMutationEvent(l,s,u)}var f=pS(c.data);c.update(n,r,i,o),this.cache.store(t,c,n),void 0!==a&&c.updateDateExpires(a),this.emitItemMutationEvent(c,s,!1,f)}}},{key:"emitItemMutationEvent",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=n?"itemAdded":"itemUpdated",o={item:t,isLocal:!e};n||(o.previousItemData=r),this.broadcastEventToListeners(i,o)}},{key:"_handleItemRemoved",value:function(t,e,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(t,e),this.broadcastEventToListeners("itemRemoved",{index:t,isLocal:!i,previousItemData:n})}},{key:"_handleContextUpdate",value:function(t,e,n){this._updateRootDateUpdated(n),this._updateContextIfRequired(t,e)&&this.broadcastEventToListeners("contextUpdated",{context:t,isLocal:!1})}},{key:"_updateContextIfRequired",value:function(t,e){return!this.contextEventId||e>this.contextEventId?(this.context=t,this.contextEventId=e,!0):(mS("Context update skipped, current:",this.lastEventId,", remote:",e),!1)}}],[{key:"type",get:function(){return"list"}}]),m}(rE),OI=function(t){Ho(d,t);var e,n,r,i,o,a,u,s,c,l,f,p=II(d);function d(t){var e;return zo(this,d),(e=p.call(this)).syncListImpl=t,e.syncListImpl.attach(Vo(e)),e}return $o(d,[{key:"uri",get:function(){return this.syncListImpl.uri}},{key:"revision",get:function(){return this.syncListImpl.revision}},{key:"lastEventId",get:function(){return this.syncListImpl.lastEventId}},{key:"links",get:function(){return this.syncListImpl.links}},{key:"dateExpires",get:function(){return this.syncListImpl.dateExpires}},{key:"type",get:function(){return TI.type}},{key:"sid",get:function(){return this.syncListImpl.sid}},{key:"uniqueName",get:function(){return this.syncListImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncListImpl.dateUpdated}},{key:"push",value:(f=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.push(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)})},{key:"set",value:(l=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.set(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return l.apply(this,arguments)})},{key:"mutate",value:(c=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.mutate(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return c.apply(this,arguments)})},{key:"update",value:(s=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.update(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return s.apply(this,arguments)})},{key:"remove",value:(u=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.remove(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"get",value:(a=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.get(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"getContext",value:(o=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.getContext());case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getItems",value:(i=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.getItems(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"setTtl",value:(r=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.setTtl(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setItemTtl",value:(n=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.setItemTtl(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeList",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncListImpl.removeList());case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"close",value:function(){tE(Jo(d.prototype),"close",this).call(this),this.syncListImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return TI.type}}]),d}(qE);Xo(OI,"itemAdded","itemAdded"),Xo(OI,"itemUpdated","itemUpdated"),Xo(OI,"itemRemoved","itemRemoved"),Xo(OI,"removed","removed"),$c([ev(Zh,["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object,Object]),Vc("design:returntype",Promise)],OI.prototype,"push",null),$c([ev(Jh,Zh,["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Number,Object,Object]),Vc("design:returntype",Promise)],OI.prototype,"set",null),$c([ev(Jh,"function",["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Number,Function,Object]),Vc("design:returntype",Promise)],OI.prototype,"mutate",null),$c([ev(Jh,Zh,["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Number,Object,Object]),Vc("design:returntype",Promise)],OI.prototype,"update",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],OI.prototype,"remove",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],OI.prototype,"get",null),$c([ev(["undefined",Xh("query options",{from:[Jh,"undefined"],pageSize:[Hh((function(t){return[hS(t),"a positive integer"]})),"undefined"],order:[Hh((function(t){return["asc"===t||"desc"===t,"either 'asc' or 'desc'"]})),"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],OI.prototype,"getItems",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],OI.prototype,"setTtl",null),$c([ev(Jh,Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number,Number]),Vc("design:returntype",Promise)],OI.prototype,"setItemTtl",null);var RI=function(){function t(e){zo(this,t),this.descriptor=e}return $o(t,[{key:"uri",get:function(){return this.descriptor.url}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"key",get:function(){return this.descriptor.key}},{key:"data",get:function(){return this.descriptor.data}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"cacheKey",get:function(){return this.key}},{key:"update",value:function(t,e,n,r){return this.descriptor.last_event_id=t,this.descriptor.revision=e,this.descriptor.data=n,this.descriptor.date_updated=r,this}},{key:"updateDateExpires",value:function(t){this.descriptor.date_expires=t}}]),t}();function AI(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return PI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PI(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function PI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function CI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jI(Object(n),!0).forEach((function(e){Xo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function LI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}var MI=function(t){Ho(y,t);var e,n,r,i,o,a,u,s,c,l,f,p,d,h,v=LI(y);function y(t,e,n){var r;zo(this,y);return(r=v.call(this,t,n)).updateMergingQueue=new oE((function(t,e){return"number"==typeof e.ttl?{ttl:e.ttl}:t})),r.cache=new wI,r.descriptor=e,r.descriptor.date_updated=new Date(r.descriptor.date_updated),e.items&&e.items.forEach((function(t){t.date_updated=new Date(t.date_updated),r.cache.store(t.key,new RI(t),t.last_event_id)})),r}return $o(y,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"revision",get:function(){return this.descriptor.revision}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"map"}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"dateUpdated",get:function(){return this.descriptor.date_updated}},{key:"set",value:(h=Wo(zc.mark((function t(e,n,r){var i,o=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r||{},t.abrupt("return",this.updateMergingQueue.squashAndAdd(e,i,(function(t){return o._putItemUnconditionally(e,n,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return h.apply(this,arguments)})},{key:"get",value:function(){var t=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}throw new nS("SyncMapItem key may not be empty",400,54209);case 2:if(!this.cache.has(e)){t.next=6;break}return t.abrupt("return",this.cache.getValue(e));case 6:return t.abrupt("return",this._getItemFromServer(e));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_getItemFromServer",value:(d=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queryItemsFromServer({key:e});case 2:if(!((n=t.sent).items.length<1)){t.next=7;break}throw new nS("The specified Map Item does not exist",404,54201);case 7:return t.abrupt("return",n.items[0]);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"mutate",value:(p=Wo(zc.mark((function t(e,n,r){var i,o=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r||{},t.abrupt("return",this.updateMergingQueue.add(e,i,(function(t){return o._putItemWithIfMatch(e,n,t.ttl)})));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return p.apply(this,arguments)})},{key:"update",value:(f=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mutate(e,(function(t){return Object.assign(t,n)}),r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return f.apply(this,arguments)})},{key:"_putItemUnconditionally",value:(l=Wo(zc.mark((function t(e,n,r){var i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._putItemToServer(e,n,void 0,r);case 2:return i=t.sent,o=i.item,this._handleItemMutated(o.key,o.url,o.last_event_id,o.revision,o.data,o.date_updated,o.date_expires,i.added,!1),t.abrupt("return",this.cache.getValue(o.key));case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return l.apply(this,arguments)})},{key:"_putItemWithIfMatch",value:(c=Wo(zc.mark((function t(e,n,r){var i,o,a,u,s;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e).catch((function(t){if(404===t.status)return new RI({key:e,data:{},last_event_id:-1,revision:"-1",url:null,date_updated:null,date_expires:null});throw t}));case 2:if(i=t.sent,!(o=n(pS(i.data)))){t.next=26;break}return a=i.revision,t.prev=6,t.next=9,this._putItemToServer(e,o,a,r);case 9:return u=t.sent,s=u.item,this._handleItemMutated(s.key,s.url,s.last_event_id,s.revision,s.data,s.date_updated,s.date_expires,u.added,!1),t.abrupt("return",this.cache.getValue(s.key));case 15:if(t.prev=15,t.t0=t.catch(6),412!==t.t0.status){t.next=23;break}return t.next=20,this._getItemFromServer(e);case 20:return t.abrupt("return",this._putItemWithIfMatch(e,n,r));case 23:throw t.t0;case 24:t.next=27;break;case 26:return t.abrupt("return",i);case 27:case"end":return t.stop()}}),t,this,[[6,15]])}))),function(t,e,n){return c.apply(this,arguments)})},{key:"_putItemToServer",value:(s=Wo(zc.mark((function t(e,n,r,i){var o,a,u,s,c;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new J_(this.links.items).pathSegment(e).build(),a={data:n},void 0!==i&&(a.ttl=i),t.prev=3,t.next=6,this.services.network.put(o,a,r);case 6:return u=t.sent,(s=u.body).data=n,s.date_updated=new Date(s.date_updated),c=201===u.status.code,t.abrupt("return",{added:c,item:s});case 14:throw t.prev=14,t.t0=t.catch(3),404===t.t0.status&&this.onRemoved(!1),t.t0;case 18:case"end":return t.stop()}}),t,this,[[3,14]])}))),function(t,e,n,r){return s.apply(this,arguments)})},{key:"remove",value:(u=Wo(zc.mark((function t(e){var n,r,i;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return n=t.sent,r=pS(n.data),t.next=6,this.services.network.delete(n.uri);case 6:i=t.sent,this._handleItemRemoved(e,i.body.last_event_id,r,new Date(i.body.date_updated),!1);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"queryItems",value:function(){var t=Wo(zc.mark((function t(e){var n,r,i,o,a,u,s,c,l,f,p,d,h,v,y,g,m,b,w,k,x,_,S,E,I,T;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.key){t.next=5;break}if(!(l=this.cache.get(e.key))){t.next=4;break}return t.abrupt("return",this.makePaginator(l.isValid?[l.value]:[],e,!1,!1));case 4:return t.abrupt("return",this._querySingleItemFromServer(e.key));case 5:f=!!e.nextPageItemId||!!e.prevPageItemId,p=CI({},e),f&&(e.from=null!==(d=null!==(h=e.nextPageItemId)&&void 0!==h?h:e.prevPageItemId)&&void 0!==d?d:e.from),v=!!e.prevPageItemId,y="desc"===e.order?v?this.cache.getIterator(null!==(n=null!==(r=e.prevPageItemId)&&void 0!==r?r:e.from)&&void 0!==n?n:null):this.cache.getReverseIterator(null!==(i=null!==(o=e.nextPageItemId)&&void 0!==o?o:e.from)&&void 0!==i?i:null):v?this.cache.getReverseIterator(null!==(a=null!==(u=e.prevPageItemId)&&void 0!==u?u:e.from)&&void 0!==a?a:null):this.cache.getIterator(null!==(s=null!==(c=e.nextPageItemId)&&void 0!==c?c:e.from)&&void 0!==s?s:null),g=[],m=f?e.limit+1:e.limit,b=AI(y),t.prev=13,b.s();case 15:if((w=b.n()).done){t.next=25;break}if(k=w.value,!f||k.value.key!=e.from){t.next=19;break}return t.abrupt("continue",23);case 19:if(g.push(k.value),!(g.length>=e.limit)){t.next=23;break}return v&&kI.exports.reverse(g),t.abrupt("return",this.makePaginator(g,e,this._prevPageAllowed(g,e.order),this._nextPageAllowed(g,e.order)));case 23:t.next=15;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t.catch(13),b.e(t.t0);case 30:return t.prev=30,b.f(),t.finish(30);case 33:if(g.length>0&&(e.from=kI.exports.last(g).key),x=Math.max(m-g.length,10),v&&(e.order="desc"===e.order?"asc":"desc"),!(e.from!==("desc"===p.order?v?this.cache.collectionEnd:this.cache.collectionBegin:v?this.cache.collectionBegin:this.cache.collectionEnd))){t.next=65;break}return t.next=40,this._queryItemsFromServer(CI(CI({},e),{},{limit:x}));case 40:_=t.sent,S=_.items,this.cache.populate(S,!_.hasPrevPage,!_.hasNextPage),E=AI(S),t.prev=44,E.s();case 46:if((I=E.n()).done){t.next=55;break}if(T=I.value,!(g.length>0||f)||T.key!=e.from){t.next=50;break}return t.abrupt("continue",53);case 50:if(v?g.unshift(T):g.push(T),!(g.length>=e.limit)){t.next=53;break}return t.abrupt("break",55);case 53:t.next=46;break;case 55:t.next=60;break;case 57:t.prev=57,t.t1=t.catch(44),E.e(t.t1);case 60:return t.prev=60,E.f(),t.finish(60);case 63:t.next=66;break;case 65:v&&kI.exports.reverse(g);case 66:return t.abrupt("return",this.makePaginator(g,p,this._prevPageAllowed(g,p.order),this._nextPageAllowed(g,p.order)));case 67:case"end":return t.stop()}}),t,this,[[13,27,30,33],[44,57,60,63]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_prevPageAllowed",value:function(t,e){return t.length>0&&kI.exports.head(t).key!==("desc"===e?this.cache.collectionEnd:this.cache.collectionBegin)}},{key:"_nextPageAllowed",value:function(t,e){return t.length>0&&kI.exports.last(t).key!==("desc"===e?this.cache.collectionBegin:this.cache.collectionEnd)}},{key:"makePaginator",value:function(t,e,n,r){var i=this;e.nextPageItemId=e.prevPageItemId=null;var o=n&&this._prevPageAllowed(t,e.order),a=r&&this._nextPageAllowed(t,e.order);return new VE(t,(function(t){return i.queryItems(CI(CI({},e),t))}),o?kI.exports.head(t).key:null,a?kI.exports.last(t).key:null)}},{key:"_querySingleItemFromServer",value:(a=Wo(zc.mark((function t(e){var n;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._queryItemsFromServer({key:e});case 2:return 0===(n=t.sent).items.length&&this.cache.delete(e,null),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_queryItemsFromServer",value:(o=Wo(zc.mark((function t(e){var n,r,i,o,a,u,s=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new J_(this.links.items).queryParam("HideExpired",!0).queryParam("Key",e.key).queryParam("PageToken",e.pageToken).queryParam("From",e.from).queryParam("PageSize",e.limit).queryParam("Order",e.order).build(),t.next=3,this.services.network.get(i);case 3:return o=t.sent,a=(null!==(n=null===(r=o.body)||void 0===r?void 0:r.items)&&void 0!==n?n:[]).map((function(t){return t.date_updated=new Date(t.date_updated),s._handleItemMutated(t.key,t.url,t.last_event_id,t.revision,t.data,t.date_updated,t.date_expires,!1,!0),s.cache.getValue(t.key)})),u=o.body.meta,t.abrupt("return",this.makePaginator(a,e,!!u.previous_token,!!u.next_token));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getItems",value:(i=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return dS((e=e||{}).pageSize),e.limit=e.pageSize||e.limit||50,e.order=e.order||"asc",t.abrupt("return",this.queryItems(e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"shouldIgnoreEvent",value:function(t,e){return this.cache.isKnown(t,e)}},{key:"_update",value:function(t,e){switch(t.date_created=new Date(t.date_created),t.type){case"map_item_added":case"map_item_updated":this._handleItemMutated(t.item_key,t.item_url,t.id,t.item_revision,t.item_data,t.date_created,t.date_expires,"map_item_added"===t.type,!0);break;case"map_item_removed":this._handleItemRemoved(t.item_key,t.id,t.item_data,t.date_created,!0);break;case"map_removed":this.onRemoved(!1)}e&&this._advanceLastEventId(t.id,t.map_revision)}},{key:"_advanceLastEventId",value:function(t,e){this.lastEventId<t&&(this.descriptor.last_event_id=t,e&&(this.descriptor.revision=e))}},{key:"_updateRootDateUpdated",value:function(t){(!this.descriptor.date_updated||t.getTime()>this.descriptor.date_updated.getTime())&&(this.descriptor.date_updated=t,this.services.storage.update(this.type,this.sid,this.uniqueName,{date_updated:t}))}},{key:"_handleItemMutated",value:function(t,e,n,r,i,o,a,u,s){if(this.shouldIgnoreEvent(t,n))mS("SyncMapItem ",t," update skipped, current:",this.lastEventId,", remote:",n);else{this._updateRootDateUpdated(o);var c=this.cache.getValue(t);if(!c){var l=new RI({key:t,url:e,last_event_id:n,revision:r,data:i,date_updated:o,date_expires:a});return this.cache.store(t,l,n),void this.emitItemMutationEvent(l,s,u)}var f=pS(c.data);c.update(n,r,i,o),this.cache.store(t,c,n),void 0!==a&&c.updateDateExpires(a),this.emitItemMutationEvent(c,s,!1,f)}}},{key:"emitItemMutationEvent",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=n?"itemAdded":"itemUpdated",o={item:t,isLocal:!e};n||(o.previousItemData=r),this.broadcastEventToListeners(i,o)}},{key:"_handleItemRemoved",value:function(t,e,n,r,i){this._updateRootDateUpdated(r),this.cache.delete(t,e),this.broadcastEventToListeners("itemRemoved",{key:t,isLocal:!i,previousItemData:n})}},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:t})}},{key:"setTtl",value:(r=Wo(zc.mark((function t(e){var n,r;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={ttl:e},t.next=4,this.services.network.post(this.uri,n);case 4:r=t.sent,this.descriptor.date_expires=r.body.date_expires,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),404===t.t0.status&&this.onRemoved(!1),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return r.apply(this,arguments)})},{key:"setItemTtl",value:(n=Wo(zc.mark((function t(e,n){var r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(e);case 2:return r=t.sent,i={ttl:n},t.next=6,this.services.network.post(r.uri,i);case 6:o=t.sent,r.updateDateExpires(o.body.date_expires);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeMap",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"type",get:function(){return"map"}}]),y}(rE),NI=function(t){Ho(f,t);var e,n,r,i,o,a,u,s,c,l=LI(f);function f(t){var e;return zo(this,f),(e=l.call(this)).syncMapImpl=t,e.syncMapImpl.attach(Vo(e)),e}return $o(f,[{key:"uri",get:function(){return this.syncMapImpl.uri}},{key:"links",get:function(){return this.syncMapImpl.links}},{key:"revision",get:function(){return this.syncMapImpl.revision}},{key:"lastEventId",get:function(){return this.syncMapImpl.lastEventId}},{key:"dateExpires",get:function(){return this.syncMapImpl.dateExpires}},{key:"type",get:function(){return MI.type}},{key:"sid",get:function(){return this.syncMapImpl.sid}},{key:"uniqueName",get:function(){return this.syncMapImpl.uniqueName}},{key:"dateUpdated",get:function(){return this.syncMapImpl.dateUpdated}},{key:"set",value:(c=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.set(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return c.apply(this,arguments)})},{key:"get",value:(s=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.get(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"mutate",value:(u=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.mutate(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return u.apply(this,arguments)})},{key:"update",value:(a=Wo(zc.mark((function t(e,n,r){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.update(e,n,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)})},{key:"remove",value:(o=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.remove(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getItems",value:(i=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.getItems(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"setTtl",value:(r=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.setTtl(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setItemTtl",value:(n=Wo(zc.mark((function t(e,n){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncMapImpl.setItemTtl(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeMap",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.next=3,this.syncMapImpl.removeMap();case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"close",value:function(){tE(Jo(f.prototype),"close",this).call(this),this.syncMapImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return MI.type}}]),f}(qE);function FI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}Xo(NI,"itemAdded","itemAdded"),Xo(NI,"itemUpdated","itemUpdated"),Xo(NI,"itemRemoved","itemRemoved"),Xo(NI,"removed","removed"),$c([ev("string",Zh,["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[String,Object,Object]),Vc("design:returntype",Promise)],NI.prototype,"set",null),$c([ev("string"),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",Promise)],NI.prototype,"get",null),$c([ev("string","function",["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[String,Function,Object]),Vc("design:returntype",Promise)],NI.prototype,"mutate",null),$c([ev("string",Zh,["undefined",Xh("item metadata",{ttl:[Jh,"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[String,Object,Object]),Vc("design:returntype",Promise)],NI.prototype,"update",null),$c([ev("string"),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",Promise)],NI.prototype,"remove",null),$c([ev(["undefined",Xh("query options",{from:["string","undefined"],pageSize:[Hh((function(t){return[hS(t),"a positive integer"]})),"undefined"],order:[Hh((function(t){return["asc"===t||"desc"===t,"either 'asc' or 'desc'"]})),"undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],NI.prototype,"getItems",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],NI.prototype,"setTtl",null),$c([ev("string",Jh),Vc("design:type",Function),Vc("design:paramtypes",[String,Number]),Vc("design:returntype",Promise)],NI.prototype,"setItemTtl",null);var DI=function(t){Ho(o,t);var e,n,r,i=FI(o);function o(t,e,n){var r;return zo(this,o),(r=i.call(this,t,n)).descriptor=e,r}return $o(o,[{key:"uri",get:function(){return this.descriptor.url}},{key:"links",get:function(){return this.descriptor.links}},{key:"dateExpires",get:function(){return this.descriptor.date_expires}},{key:"type",get:function(){return"stream"}},{key:"lastEventId",get:function(){return null}},{key:"indexName",get:function(){}},{key:"queryString",get:function(){}},{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return this.descriptor.unique_name||null}},{key:"publishMessage",value:(r=Wo(zc.mark((function t(e){var n,r,i,o;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={data:e},t.next=3,this.services.network.post(this.links.messages,n);case 3:return r=t.sent,i=r.body,o=this._handleMessagePublished(i.sid,e,!1),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setTtl",value:(n=Wo(zc.mark((function t(e){var n,r;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={ttl:e},t.next=4,this.services.network.post(this.uri,n);case 4:r=t.sent,this.descriptor.date_expires=r.body.date_expires,t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(0),404===t.t0.status&&this.onRemoved(!1),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return n.apply(this,arguments)})},{key:"removeStream",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.network.delete(this.uri);case 2:this.onRemoved(!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_update",value:function(t){switch(t.type){case"stream_message_published":this._handleMessagePublished(t.message_sid,t.message_data,!0);break;case"stream_removed":this.onRemoved(!1)}}},{key:"_handleMessagePublished",value:function(t,e,n){var r={sid:t,data:e};return this.broadcastEventToListeners("messagePublished",{message:r,isLocal:!n}),r}},{key:"onRemoved",value:function(t){this._unsubscribe(),this.removalHandler(this.type,this.sid,this.uniqueName),this.broadcastEventToListeners("removed",{isLocal:t})}}],[{key:"type",get:function(){return"stream"}}]),o}(rE);$c([ev(Zh),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],DI.prototype,"publishMessage",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],DI.prototype,"setTtl",null);var UI=function(t){Ho(o,t);var e,n,r,i=FI(o);function o(t){var e;return zo(this,o),(e=i.call(this)).syncStreamImpl=t,e.syncStreamImpl.attach(Vo(e)),e}return $o(o,[{key:"uri",get:function(){return this.syncStreamImpl.uri}},{key:"links",get:function(){return this.syncStreamImpl.links}},{key:"dateExpires",get:function(){return this.syncStreamImpl.dateExpires}},{key:"type",get:function(){return DI.type}},{key:"lastEventId",get:function(){return null}},{key:"sid",get:function(){return this.syncStreamImpl.sid}},{key:"uniqueName",get:function(){return this.syncStreamImpl.uniqueName}},{key:"publishMessage",value:(r=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncStreamImpl.publishMessage(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setTtl",value:(n=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncStreamImpl.setTtl(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"removeStream",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ensureNotClosed(),t.abrupt("return",this.syncStreamImpl.removeStream());case 2:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"close",value:function(){tE(Jo(o.prototype),"close",this).call(this),this.syncStreamImpl.detach(this.listenerUuid)}}],[{key:"type",get:function(){return DI.type}}]),o}(qE);Xo(UI,"messagePublished","messagePublished"),Xo(UI,"removed","removed"),$c([ev(Zh),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],UI.prototype,"publishMessage",null),$c([ev(Jh),Vc("design:type",Function),Vc("design:paramtypes",[Number]),Vc("design:returntype",Promise)],UI.prototype,"setTtl",null);var BI=$o((function t(e){zo(this,t),this.sdk="js",this.sdkVer=e,this.os=I_.exports.os.family,this.osVer=I_.exports.os.version,this.pl=I_.exports.name,this.plVer=I_.exports.version})),qI=function(){function t(){zo(this,t),this.names=new Map,this.entities=new Map}return $o(t,[{key:"store",value:function(t){var e=this.entities.get(t.sid);return e||(this.entities.set(t.sid,t),t.uniqueName&&this.names.set(t.type+"::"+t.uniqueName,t.sid),t)}},{key:"getResolved",value:function(t,e){var n=this.names.get(e+"::"+t);return n?this.entities.get(n):null}},{key:"get",value:function(t,e){return this.entities.get(t)||this.getResolved(t,e)||null}},{key:"remove",value:function(t){var e=this.entities.get(t);e&&(this.entities.delete(t),e.uniqueName&&this.names.delete(e.type+"::"+e.uniqueName))}}]),t}();function WI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}var zI=function(){function t(e,n,r){zo(this,t),this.key=e,this.value=n,this.lastEventId=r}return $o(t,[{key:"cacheKey",get:function(){return this.key}}]),t}(),KI=function(t){Ho(n,t);var e=WI(n);function n(t,r,i,o){var a;return zo(this,n),(a=e.call(this,r,i)).descriptor=t,a.cache=new wI,o&&o.forEach((function(t){var e=new zI(t.key,t.data,t.revision);a.cache.store(t.key,e,t.revision)})),a}return $o(n,[{key:"sid",get:function(){return this.descriptor.sid}},{key:"uniqueName",get:function(){return null}},{key:"type",get:function(){return n.type}},{key:"lastEventId",get:function(){return this.descriptor.last_event_id}},{key:"indexName",get:function(){return this.descriptor.indexName}},{key:"queryString",get:function(){return this.descriptor.queryExpression}},{key:"queryUri",get:function(){return this.descriptor.queryUri}},{key:"liveQueryDescriptor",get:function(){return this.descriptor}},{key:"onRemoved",value:function(){}},{key:"getItems",value:function(){var t={};return this.cache.forEach((function(e,n){t[e]=n.value})),t}},{key:"_update",value:function(t,e){switch(t.type){case"live_query_item_updated":this.handleItemMutated(t.item_key,t.item_data,t.item_revision);break;case"live_query_item_removed":this.handleItemRemoved(t.item_key,t.item_revision);break;case"live_query_updated":this.handleBatchUpdate(t.items)}e&&this._advanceLastEventId(t.last_event_id)}},{key:"handleItemMutated",value:function(t,e,n){if(this.shouldIgnoreEvent(t,n))mS("Item ".concat(t," update skipped, revision: ").concat(n));else{var r=new zI(t,e,n);this.cache.store(t,r,n),this.broadcastEventToListeners("itemUpdated",r)}}},{key:"handleItemRemoved",value:function(t,e){this.shouldIgnoreEvent(t,e)?mS("Item ".concat(t," delete skipped, revision: ").concat(e)):(this.cache.delete(t,e),this.broadcastEventToListeners("itemRemoved",{key:t}))}},{key:"handleBatchUpdate",value:function(t){var e=this,n={};for(var r in null!=t&&t.forEach((function(t){n[t.key]={data:t.data,revision:t.revision}})),this.cache.forEach((function(t,r){var i=n[t];null!=i?e.handleItemMutated(t,i.data,i.revision):e.handleItemRemoved(t,null),delete n[t]})),n)this.handleItemMutated(r,n[r].data,n[r].revision)}},{key:"shouldIgnoreEvent",value:function(t,e){return null!=t&&null!=e&&this.cache.isKnown(t,e)}},{key:"_advanceLastEventId",value:function(t,e){this.lastEventId<t&&(this.descriptor.last_event_id=t)}}],[{key:"type",get:function(){return"live_query"}}]),n}(rE);function $I(t){return VI.apply(this,arguments)}function VI(){return VI=Wo(zc.mark((function t(e){var n,r,i,o,a,u;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.network,r=e.queryString,i=e.uri,o=e.type,null!=r){t.next=3;break}throw new nS("Invalid query",400,54507);case 3:return a={query_string:r},o===GI.type&&(a.type=o),t.next=7,n.post(i,a,void 0,!0);case 7:return u=t.sent,t.abrupt("return",u.body);case 9:case"end":return t.stop()}}),t)}))),VI.apply(this,arguments)}var GI=function(t){Ho(n,t);var e=WI(n);function n(t){var r;return zo(this,n),(r=e.call(this)).liveQueryImpl=t,r.liveQueryImpl.attach(Vo(r)),r}return $o(n,[{key:"type",get:function(){return KI.type}},{key:"lastEventId",get:function(){return this.liveQueryImpl.lastEventId}},{key:"sid",get:function(){return this.liveQueryImpl.sid}},{key:"close",value:function(){tE(Jo(n.prototype),"close",this).call(this),this.liveQueryImpl.detach(this.listenerUuid)}},{key:"getItems",value:function(){return this.ensureNotClosed(),this.liveQueryImpl.getItems()}}],[{key:"type",get:function(){return KI.type}}]),n}(qE);Xo(GI,"itemUpdated","itemUpdated"),Xo(GI,"itemRemoved","itemRemoved");var HI=function(t){Ho(i,t);var e,n,r=WI(i);function i(t){var e;return zo(this,i),Xo(Vo(e=r.call(this)),"queryExpression",null),Xo(Vo(e),"items",{}),Object.assign(Vo(e),t),e.updateIndexName(t.indexName),e}return $o(i,[{key:"type",get:function(){return i.type}},{key:"search",value:(n=Wo(zc.mark((function t(e){var n,r=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.items={},t.prev=1,t.next=4,$I({network:this.network,uri:this.queryUri,queryString:e});case 4:n=t.sent,this.queryExpression=e,n.items&&n.items.forEach((function(t){r.items[t.key]=t.data})),this.emit("searchResult",this.getItems()),t.next=15;break;case 10:throw t.prev=10,t.t0=t.catch(1),kS("Error '".concat(t.t0.message,"' while executing query '").concat(e,"'")),this.queryExpression=null,t.t0;case 15:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(t){return n.apply(this,arguments)})},{key:"subscribe",value:(e=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.queryExpression){t.next=2;break}return t.abrupt("return",Promise.reject(new nS("Invalid query",400,54507)));case 2:return t.abrupt("return",this.liveQueryCreator(this.indexName,this.queryExpression));case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getItems",value:function(){return this.items}},{key:"updateIndexName",value:function(t){this.indexName=t,this.queryUri=this.generateQueryUri(this.indexName)}},{key:"generateQueryUri",value:function(t){return new J_(this.insightsUri).pathSegment(t).pathSegment("Items").build()}}],[{key:"type",get:function(){return"instant_query"}}]),i}(UE);Xo(HI,"searchResult","searchResult"),$c([ev("string"),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",Promise)],HI.prototype,"search",null),$c([tv(Yh),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",void 0)],HI.prototype,"updateIndexName",null);function QI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jo(t);if(e){var i=Jo(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Yo(this,n)}}function YI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function JI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?YI(Object(n),!0).forEach((function(e){Xo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var XI="data_sync",ZI="3.3.7";function tT(t){if(t){if("string"==typeof t)return{id:t,mode:"open_or_create"};var e=t.mode||(t.id?"open_or_create":"create_new");return JI(JI({},t),{},{mode:e})}return{mode:"create_new"}}var eT="com.twilio.rtd.cds.document",nT="com.twilio.rtd.cds.list",rT="com.twilio.rtd.cds.map",iT="twilio.sync.event",Client=function(t){Ho(Client,t);var e,n,r,i,o,a,u,s,c,l,f,p,d,h,v,y=QI(Client);function Client(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(zo(this,Client),n=y.call(this),!t)throw new Error("Sync library needs a valid Twilio token to be passed");r.hasOwnProperty("logLevel")?gS(r.logLevel):gS("silent");var i=r.productId=r.productId||XI;r.clientMetadata=r.clientMetadata||{},r.clientMetadata.hasOwnProperty("type")||(r.clientMetadata.type="sync"),r.clientMetadata.hasOwnProperty("sdk")||(r.clientMetadata.sdk="JS",r.clientMetadata.sdkv=ZI);var o=!r.twilsockClient;if(!r.initRegistrations){var a=new nv.InitRegistration(i);Client.populateInitRegistrations(a),r.initRegistrations=[a]}var u=r.twilsockClient=null!==(e=r.twilsockClient)&&void 0!==e?e:new nv.Twilsock(t,i,r);u.on("tokenAboutToExpire",(function(){return n.emit("tokenAboutToExpire")})),u.on("tokenExpired",(function(){return n.emit("tokenExpired")})),u.on("connectionError",(function(t){return n.emit("connectionError",t)})),u.on("stateChanged",(function(t){n.emit("connectionStateChanged",t),n.services.subscriptions.onConnectionStateChanged("connected"===t)})),u.on("message",(function(t,e){return n._routeMessage(t,e)}));var s=new RS(r),c=new JS(new BI(ZI),s,u),l=new XS(s);return n.services={config:s,twilsock:u,network:c,storage:l,router:Vo(n),subscriptions:null},n.services.subscriptions=new GS(n.services),n.entities=new qI,o&&u.connect(),n}return $o(Client,[{key:"_routeMessage",value:function(t,e){switch(mS("Notification type:",t,"content:",e),t){case eT:case nT:case rT:this.services.subscriptions.acceptMessage(e,!1);break;case iT:this.services.subscriptions.acceptMessage(e,!0)}}},{key:"_subscribe",value:function(t,e){this.services.subscriptions.add(t,e)}},{key:"_unsubscribe",value:function(t){this.services.subscriptions.remove(t)}},{key:"connectionState",get:function(){return this.services.twilsock.state}},{key:"ensureReady",value:(v=Wo(zc.mark((function t(){var e;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.services.config.sessionStorageEnabled){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.services.twilsock.storageId();case 5:e=t.sent,this.services.storage.updateStorageId(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),wS("Failed to initialize storage",t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return v.apply(this,arguments)})},{key:"storeRootInSessionCache",value:function(t,e,n){if(this.services.config.sessionStorageEnabled&&e){var r=pS(n);t!==OI.type&&t!==NI.type||(r.last_event_id=null,delete r.items),this.services.storage.store(t,e,r)}}},{key:"readRootFromSessionCache",value:function(t,e){return this.services.config.sessionStorageEnabled&&e?this.services.storage.read(t,e):null}},{key:"_get",value:(h=Wo(zc.mark((function t(e,n){var r,i,o,a=arguments;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>2&&void 0!==a[2]&&a[2],n){t.next=3;break}throw new nS("Cannot get entity without id",404);case 3:return i=new J_(e).pathSegment(n).queryParam("Include",r?"items":void 0).build(),t.next=6,this.services.network.get(i);case 6:return o=t.sent,t.abrupt("return",o.body);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"_createDocument",value:function(t,e,n){var r={unique_name:t,data:e||{}};return void 0!==n&&(r.ttl=n),this.services.network.post(this.services.config.documentsUri,r).then((function(t){return t.body.data=r.data,t.body}))}},{key:"_getDocument",value:(d=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(KE.type,e)||this._get(this.services.config.documentsUri,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"_createList",value:function(t,e,n,r){var i={unique_name:t,purpose:e,context:n};return void 0!==r&&(i.ttl=r),this.services.network.post(this.services.config.listsUri,i).then((function(t){return t.body}))}},{key:"_getList",value:(p=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(OI.type,e)||this._get(this.services.config.listsUri,e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"_createMap",value:function(t,e){var n={unique_name:t};return void 0!==e&&(n.ttl=e),this.services.network.post(this.services.config.mapsUri,n).then((function(t){return t.body}))}},{key:"_getMap",value:(f=Wo(zc.mark((function t(e){var n,r=arguments;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],t.abrupt("return",this.readRootFromSessionCache(NI.type,e)||this._get(this.services.config.mapsUri,e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"_getStream",value:(l=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.readRootFromSessionCache(UI.type,e)||this._get(this.services.config.streamsUri,e,!1));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"_createStream",value:(c=Wo(zc.mark((function t(e,n){var r,i;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={unique_name:e},void 0!==n&&(r.ttl=n),t.next=4,this.services.network.post(this.services.config.streamsUri,r);case 4:return i=t.sent,t.abrupt("return",i.body);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"_getLiveQuery",value:function(t){return this.readRootFromSessionCache(GI.type,t)}},{key:"getCached",value:function(t,e){return t&&this.entities.get(t,e)||null}},{key:"removeFromCacheAndSession",value:function(t,e,n){this.entities.remove(e),this.services.config.sessionStorageEnabled&&this.services.storage.remove(t,e,n)}},{key:"document",value:(s=Wo(zc.mark((function t(e){var n,r,i,o,a=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if("create_new"!==(n=tT(e)).mode){t.next=9;break}return t.next=6,this._createDocument(n.id,n.data,n.ttl);case 6:case 17:case 29:r=t.sent,t.next=39;break;case 9:if(!(i=this.getCached(n.id,KE.type))){t.next=14;break}return t.abrupt("return",new KE(i));case 14:return t.prev=14,t.next=17,this._getDocument(n.id);case 20:if(t.prev=20,t.t0=t.catch(14),404===t.t0.status&&"open_existing"!==n.mode){t.next=26;break}throw t.t0;case 26:return t.prev=26,t.next=29,this._createDocument(n.id,n.data,n.ttl);case 32:if(t.prev=32,t.t1=t.catch(26),409!==t.t1.status){t.next=38;break}return t.abrupt("return",this.document(e));case 38:throw t.t1;case 39:return this.storeRootInSessionCache(KE.type,n.id,r),o=new zE(this.services,r,(function(t,e,n){return a.removeFromCacheAndSession(t,e,n)})),o=this.entities.store(o),t.abrupt("return",new KE(o));case 43:case"end":return t.stop()}}),t,this,[[14,20],[26,32]])}))),function(t){return s.apply(this,arguments)})},{key:"map",value:(u=Wo(zc.mark((function t(e){var n,r,i,o,a=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if("create_new"!==(n=tT(e)).mode){t.next=9;break}return t.next=6,this._createMap(n.id,n.ttl);case 6:case 17:case 29:r=t.sent,t.next=39;break;case 9:if(!(i=this.getCached(n.id,NI.type))){t.next=14;break}return t.abrupt("return",new NI(i));case 14:return t.prev=14,t.next=17,this._getMap(n.id,n.includeItems);case 20:if(t.prev=20,t.t0=t.catch(14),404===t.t0.status&&"open_existing"!==n.mode){t.next=26;break}throw t.t0;case 26:return t.prev=26,t.next=29,this._createMap(n.id,n.ttl);case 32:if(t.prev=32,t.t1=t.catch(26),409!==t.t1.status){t.next=38;break}return t.abrupt("return",this.map(e));case 38:throw t.t1;case 39:return this.storeRootInSessionCache(NI.type,n.id,r),o=new MI(this.services,r,(function(t,e,n){return a.removeFromCacheAndSession(t,e,n)})),o=this.entities.store(o),t.abrupt("return",new NI(o));case 43:case"end":return t.stop()}}),t,this,[[14,20],[26,32]])}))),function(t){return u.apply(this,arguments)})},{key:"list",value:(a=Wo(zc.mark((function t(e){var n,r,i,o,a=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if("create_new"!==(n=tT(e)).mode){t.next=9;break}return t.next=6,this._createList(n.id,n.purpose,n.context,n.ttl);case 6:case 17:case 29:r=t.sent,t.next=39;break;case 9:if(!(i=this.getCached(n.id,OI.type))){t.next=14;break}return t.abrupt("return",new OI(i));case 14:return t.prev=14,t.next=17,this._getList(n.id);case 20:if(t.prev=20,t.t0=t.catch(14),404===t.t0.status&&"open_existing"!==n.mode){t.next=26;break}throw t.t0;case 26:return t.prev=26,t.next=29,this._createList(n.id,n.purpose,n.context,n.ttl);case 32:if(t.prev=32,t.t1=t.catch(26),409!==t.t1.status){t.next=38;break}return t.abrupt("return",this.list(e));case 38:throw t.t1;case 39:return this.storeRootInSessionCache(OI.type,n.id,r),o=new TI(this.services,r,(function(t,e,n){return a.removeFromCacheAndSession(t,e,n)})),o=this.entities.store(o),t.abrupt("return",new OI(o));case 43:case"end":return t.stop()}}),t,this,[[14,20],[26,32]])}))),function(t){return a.apply(this,arguments)})},{key:"stream",value:(o=Wo(zc.mark((function t(e){var n,r,i,o,a,u=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:if("create_new"!==(n=tT(e)).mode){t.next=9;break}return t.next=6,this._createStream(n.id,n.ttl);case 6:case 17:case 29:r=t.sent,t.next=39;break;case 9:if(!(i=this.getCached(n.id,UI.type))){t.next=14;break}return t.abrupt("return",new UI(i));case 14:return t.prev=14,t.next=17,this._getStream(n.id);case 20:if(t.prev=20,t.t0=t.catch(14),404===t.t0.status&&"open_existing"!==n.mode){t.next=26;break}throw t.t0;case 26:return t.prev=26,t.next=29,this._createStream(n.id,n.ttl);case 32:if(t.prev=32,t.t1=t.catch(26),409!==t.t1.status){t.next=38;break}return t.abrupt("return",this.stream(e));case 38:throw t.t1;case 39:return this.storeRootInSessionCache(UI.type,n.id,r),o=function(t,e,n){return u.removeFromCacheAndSession(t,e,n)},a=new DI(this.services,r,o),a=this.entities.store(a),t.abrupt("return",new UI(a));case 44:case"end":return t.stop()}}),t,this,[[14,20],[26,32]])}))),function(t){return o.apply(this,arguments)})},{key:"shutdown",value:(i=Wo(zc.mark((function t(){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.services.subscriptions.shutdown();case 2:return t.next=4,this.services.twilsock.disconnect();case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"updateToken",value:(r=Wo(zc.mark((function t(e){return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.services.twilsock.updateToken(e).catch((function(t){var e,n=null==t||null===(e=t.reply)||void 0===e?void 0:e.status;if(401===(null==n?void 0:n.code)&&"UNAUTHORIZED"===(null==n?void 0:n.status))throw new nS("Updated token was rejected by server",400,51130);throw t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"liveQuery",value:(n=Wo(zc.mark((function t(e,n){var r,i,o,a,u,s=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:return r=new J_(this.services.config.insightsUri).pathSegment(e).pathSegment("Items").build(),t.next=5,$I({network:this.services.network,uri:r,queryString:n,type:GI.type});case 5:return i=t.sent,(o=this.getCached(i.query_id,GI.type))||((a=this._getLiveQuery(i.query_id))||(a={indexName:e,queryExpression:n,sid:i.query_id,queryUri:r,last_event_id:i.last_event_id}),u=function(t,e,n){return s.removeFromCacheAndSession(t,e,n)},o=new KI(a,this.services,u,i.items)),this.storeRootInSessionCache(GI.type,i.query_id,o.liveQueryDescriptor),o=this.entities.store(o),t.abrupt("return",new GI(o));case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"instantQuery",value:(e=Wo(zc.mark((function t(e){var n,r=this;return zc.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureReady();case 2:return n=function(t,e){return r.liveQuery(t,e)},t.abrupt("return",new HI({indexName:e,network:this.services.network,insightsUri:this.services.config.insightsUri,liveQueryCreator:n}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}],[{key:"populateInitRegistrations",value:function(t){t.populateInitRegistrations([iT,eT,nT,rT])}},{key:"version",get:function(){return ZI}}]),Client}(UE);return Xo(Client,"connectionStateChanged","connectionStateChanged"),Xo(Client,"connectionError","connectionError"),Xo(Client,"tokenAboutToExpire","tokenAboutToExpire"),Xo(Client,"tokenExpired","tokenExpired"),$c([ev(["undefined","string",Xh("open document options",{id:["string","undefined"],mode:[Qh("open_or_create","open_existing","create_new"),"undefined"],ttl:[Jh,"undefined"],data:[Zh,"undefined",Qh(null)]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],Client.prototype,"document",null),$c([ev(["undefined","string",Xh("open map options",{id:["string","undefined"],mode:[Qh("open_or_create","open_existing","create_new"),"undefined"],ttl:[Jh,"undefined"],data:[Zh,"undefined",Qh(null)],includeItems:["boolean","undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],Client.prototype,"map",null),$c([ev(["undefined","string",Xh("open list options",{id:["string","undefined"],mode:[Qh("open_or_create","open_existing","create_new"),"undefined"],ttl:[Jh,"undefined"],data:[Zh,"undefined",Qh(null)],purpose:["string","undefined"],context:[Zh,"undefined"],includeItems:["boolean","undefined"]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],Client.prototype,"list",null),$c([ev(["undefined","string",Xh("open stream options",{id:["string","undefined"],mode:[Qh("open_or_create","open_existing","create_new"),"undefined"],ttl:[Jh,"undefined"],data:[Zh,"undefined",Qh(null)]})]),Vc("design:type",Function),Vc("design:paramtypes",[Object]),Vc("design:returntype",Promise)],Client.prototype,"stream",null),$c([ev(Yh),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",Promise)],Client.prototype,"updateToken",null),$c([ev(Yh,"string"),Vc("design:type",Function),Vc("design:paramtypes",[String,String]),Vc("design:returntype",Promise)],Client.prototype,"liveQuery",null),$c([ev(Yh),Vc("design:type",Function),Vc("design:paramtypes",[String]),Vc("design:returntype",Promise)],Client.prototype,"instantQuery",null),t.Client=Client,t.InsightsItem=zI,t.InstantQuery=HI,t.LiveQuery=GI,t.Paginator=VE,t.SyncClient=Client,t.SyncDocument=KE,t.SyncList=OI,t.SyncListItem=$E,t.SyncMap=NI,t.SyncMapItem=RI,t.SyncStream=UI,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
