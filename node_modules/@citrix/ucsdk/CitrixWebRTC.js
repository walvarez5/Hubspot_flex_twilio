//===============================================
// By using these Developer Materials, you accept and agree to comply with
// the terms of the Cloud Software Group Developer Terms of Use found here
// (https://www.cloud.com/legal)
//===============================================



var $jscomp={scope:{},getGlobal:function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global?global:f}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return"jscomp_symbol_"+f+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();if(f[$jscomp.global.Symbol.iterator])return f[$jscomp.global.Symbol.iterator]();var k=0;return{next:function(){return k==f.length?{done:!0}:{done:!1,value:f[k++]}}}};
$jscomp.arrayFromIterator=function(f){for(var k,q=[];!(k=f.next()).done;)q.push(k.value);return q};$jscomp.arrayFromIterable=function(f){return f instanceof Array?f:$jscomp.arrayFromIterator($jscomp.makeIterator(f))};
$jscomp.inherits=function(f,k){function q(){}q.prototype=k.prototype;f.prototype=new q;f.prototype.constructor=f;for(var b in k)if($jscomp.global.Object.defineProperties){var a=$jscomp.global.Object.getOwnPropertyDescriptor(k,b);a&&$jscomp.global.Object.defineProperty(f,b,a)}else f[b]=k[b]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(f,k){f instanceof String&&(f=String(f));var q=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b={},a=(b.next=function(){if(q<f.length){var b=q++;return{value:k(b,f[b]),done:!1}}a.next=$jscomp.array.done_;return $jscomp.array.done_()},b[Symbol.iterator]=function(){return a},b);return a};
$jscomp.array.findInternal_=function(f,k,q){f instanceof String&&(f=String(f));for(var b=f.length,a=0;a<b;a++){var d=f[a];if(k.call(q,d,a,f))return{i:a,v:d}}return{i:-1,v:void 0}};
$jscomp.array.from=function(f,k,q){k=void 0===k?function(a){return a}:k;var b=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(f[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();f=f[Symbol.iterator]();for(var a;!(a=f.next()).done;)b.push(k.call(q,a.value))}else{a=f.length;for(var d=0;d<a;d++)b.push(k.call(q,f[d]))}return b};$jscomp.array.of=function(f){for(var k=[],q=0;q<arguments.length;++q)k[q-0]=arguments[q];return $jscomp.array.from(k)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(f,k){return[f,k]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(f){return f})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(f,k){return k})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(f,k,q){var b=this.length;f=Number(f);k=Number(k);q=Number(null!=q?q:b);if(f<k)for(q=Math.min(q,b);k<q;)k in this?this[f++]=this[k++]:(delete this[f++],k++);else for(q=Math.min(q,b+k-f),f+=q-k;q>k;)--q in this?this[--f]=this[q]:delete this[f];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(f,k,q){null!=q&&f.length||(q=this.length||0);q=Number(q);for(k=Number((void 0===k?0:k)||0);k<q;k++)this[k]=f;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(f,k){return $jscomp.array.findInternal_(this,f,k).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(f,k){return $jscomp.array.findInternal_(this,f,k).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(f){f=void 0===f?[]:f;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var k=f.next();!k.done;k=f.next())k=k.value,this.set(k[0],k[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var f=$jscomp.global.Map;if(!f||!f.prototype.entries||!Object.seal)return!1;try{var k=Object.seal({x:4}),q=new f($jscomp.makeIterator([[k,"s"]]));if("s"!=q.get(k)||1!=q.size||q.get({x:4})||q.set({x:4},"t")!=q||2!=q.size)return!1;var b=q.entries(),a=b.next();if(a.done||a.value[0]!=k||"s"!=a.value[1])return!1;a=b.next();return a.done||4!=a.value[0].x||"t"!=a.value[1]||!b.next().done?!1:!0}catch(d){return!1}};
$jscomp.Map.createHead_=function(){var f={};return f.previous=f.next=f.head=f};$jscomp.Map.getId_=function(f){if(!(f instanceof Object))return String(f);$jscomp.Map.key_ in f||f instanceof Object&&Object.isExtensible&&Object.isExtensible(f)&&$jscomp.Map.defineProperty_(f,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in f?f[$jscomp.Map.key_]:" "+f};
$jscomp.Map.prototype.set=function(f,k){var q=this.maybeGetEntry_(f),b=q.id,a=q.list,q=q.entry;a||(a=this.data_[b]=[]);q?q.value=k:(q={next:this.head_,previous:this.head_.previous,head:this.head_,key:f,value:k},a.push(q),this.head_.previous.next=q,this.head_.previous=q,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(f){var k=this.maybeGetEntry_(f);f=k.id;var q=k.list,b=k.index;return(k=k.entry)&&q?(q.splice(b,1),q.length||delete this.data_[f],k.previous.next=k.next,k.next.previous=k.previous,k.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(f){return!!this.maybeGetEntry_(f).entry};
$jscomp.Map.prototype.get=function(f){return(f=this.maybeGetEntry_(f).entry)&&f.value};$jscomp.Map.prototype.maybeGetEntry_=function(f){var k=$jscomp.Map.getId_(f),q=this.data_[k];if(q)for(var b=0;b<q.length;b++){var a=q[b];if(f!==f&&a.key!==a.key||f===a.key)return{id:k,list:q,index:b,entry:a}}return{id:k,list:q,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(f){return[f.key,f.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(f){return f.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(f){return f.value})};$jscomp.Map.prototype.forEach=function(f,k){for(var q=$jscomp.makeIterator(this.entries()),b=q.next();!b.done;b=q.next())b=b.value,f.call(k,b[1],b[0],this)};
$jscomp.Map.prototype.iter_=function(f){var k=this,q=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b={};return b.next=function(){if(q){for(;q.head!=k.head_;)q=q.previous;for(;q.next!=q.head;)return q=q.next,{done:!1,value:f(q)};q=null}return{done:!0,value:void 0}},b[Symbol.iterator]=function(){return this},b};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(f,k,q){Object.defineProperty(f,k,{value:String(q)})}:function(f,k,q){f[k]=String(q)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(f){f=Number(f)>>>0;if(0===f)return 32;var k=0;0===(f&4294901760)&&(f<<=16,k+=16);0===(f&4278190080)&&(f<<=8,k+=8);0===(f&4026531840)&&(f<<=4,k+=4);0===(f&3221225472)&&(f<<=2,k+=2);0===(f&2147483648)&&k++;return k};$jscomp.math.imul=function(f,k){f=Number(f);k=Number(k);var q=f&65535,b=k&65535;return q*b+((f>>>16&65535)*b+q*(k>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(f){f=Number(f);return 0===f||isNaN(f)?f:0<f?1:-1};
$jscomp.math.log10=function(f){return Math.log(f)/Math.LN10};$jscomp.math.log2=function(f){return Math.log(f)/Math.LN2};$jscomp.math.log1p=function(f){f=Number(f);if(.25>f&&-.25<f){for(var k=f,q=1,b=f,a=0,d=1;a!=b;)k*=f,d*=-1,b=(a=b)+d*k/++q;return b}return Math.log(1+f)};$jscomp.math.expm1=function(f){f=Number(f);if(.25>f&&-.25<f){for(var k=f,q=1,b=f,a=0;a!=b;)k*=f/++q,b=(a=b)+k;return b}return Math.exp(f)-1};$jscomp.math.cosh=function(f){f=Number(f);return(Math.exp(f)+Math.exp(-f))/2};
$jscomp.math.sinh=function(f){f=Number(f);return 0===f?f:(Math.exp(f)-Math.exp(-f))/2};$jscomp.math.tanh=function(f){f=Number(f);if(0===f)return f;var k=Math.exp(2*-Math.abs(f)),k=(1-k)/(1+k);return 0>f?-k:k};$jscomp.math.acosh=function(f){f=Number(f);return Math.log(f+Math.sqrt(f*f-1))};$jscomp.math.asinh=function(f){f=Number(f);if(0===f)return f;var k=Math.log(Math.abs(f)+Math.sqrt(f*f+1));return 0>f?-k:k};
$jscomp.math.atanh=function(f){f=Number(f);return($jscomp.math.log1p(f)-$jscomp.math.log1p(-f))/2};
$jscomp.math.hypot=function(f,k,q){for(var b=[],a=2;a<arguments.length;++a)b[a-2]=arguments[a];f=Number(f);k=Number(k);for(var d=Math.max(Math.abs(f),Math.abs(k)),V=$jscomp.makeIterator(b),a=V.next();!a.done;a=V.next())d=Math.max(d,Math.abs(a.value));if(1E100<d||1E-100>d){f/=d;k/=d;V=f*f+k*k;b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next())a=a.value,a=Number(a)/d,V+=a*a;return Math.sqrt(V)*d}d=f*f+k*k;b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next())a=a.value,a=Number(a),d+=
a*a;return Math.sqrt(d)};$jscomp.math.trunc=function(f){f=Number(f);if(isNaN(f)||Infinity===f||-Infinity===f||0===f)return f;var k=Math.floor(Math.abs(f));return 0>f?-k:k};$jscomp.math.cbrt=function(f){if(0===f)return f;f=Number(f);var k=Math.pow(Math.abs(f),1/3);return 0>f?-k:k};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(f){return"number"!==typeof f?!1:!isNaN(f)&&Infinity!==f&&-Infinity!==f};
$jscomp.number.isInteger=function(f){return $jscomp.number.isFinite(f)?f===Math.floor(f):!1};$jscomp.number.isNaN=function(f){return"number"===typeof f&&isNaN(f)};$jscomp.number.isSafeInteger=function(f){return $jscomp.number.isInteger(f)&&Math.abs(f)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(f,k){for(var q=[],b=1;b<arguments.length;++b)q[b-1]=arguments[b];q=$jscomp.makeIterator(q);for(b=q.next();!b.done;b=q.next())if(b=b.value)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(f[a]=b[a]);return f};$jscomp.object.is=function(f,k){return f===k?0!==f||1/f===1/k:f!==f&&k!==k};$jscomp.Set=function(f){f=void 0===f?[]:f;this.map_=new $jscomp.Map;if(f){f=$jscomp.makeIterator(f);for(var k=f.next();!k.done;k=f.next())this.add(k.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var f=$jscomp.global.Set;if(!f||!f.prototype.entries||!Object.seal)return!1;var k=Object.seal({x:4}),f=new f($jscomp.makeIterator([k]));if(f.has(k)||1!=f.size||f.add(k)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var f=f.entries(),q=f.next();if(q.done||q.value[0]!=k||q.value[1]!=k)return!1;q=f.next();return q.done||q.value[0]==k||4!=q.value[0].x||q.value[1]!=q.value[0]?!1:f.next().done};
$jscomp.Set.prototype.add=function(f){this.map_.set(f,f);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(f){f=this.map_["delete"](f);this.size=this.map_.size;return f};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(f){return this.map_.has(f)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(f,k){var q=this;this.map_.forEach(function(b){return f.call(k,b,b,q)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(f,k){if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(f){for(var k=[],q=0;q<arguments.length;++q)k[q-0]=arguments[q];for(var q="",k=$jscomp.makeIterator(k),b=k.next();!b.done;b=k.next()){b=b.value;b=+b;if(0>b||1114111<b||b!==Math.floor(b))throw new RangeError("invalid_code_point "+b);65535>=b?q+=String.fromCharCode(b):(b-=65536,q+=String.fromCharCode(b>>>10&1023|55296),q+=String.fromCharCode(b&1023|56320))}return q};
$jscomp.string.repeat=function(f){var k=this.toString();if(0>f||1342177279<f)throw new RangeError("Invalid count value");f|=0;for(var q="";f;)if(f&1&&(q+=k),f>>>=1)k+=k;return q};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(f){var k=this.toString(),q=k.length;f=Number(f)||0;if(0<=f&&f<q){f|=0;var b=k.charCodeAt(f);if(55296>b||56319<b||f+1===q)return b;f=k.charCodeAt(f+1);return 56320>f||57343<f?b:1024*(b-55296)+f+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(f,k){k=void 0===k?0:k;$jscomp.string.noRegExp_(f,"includes");return-1!==this.toString().indexOf(f,k)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(f,k){k=void 0===k?0:k;$jscomp.string.noRegExp_(f,"startsWith");var q=this.toString();f+="";for(var b=q.length,a=f.length,d=Math.max(0,Math.min(k|0,q.length)),V=0;V<a&&d<b;)if(q[d++]!=f[V++])return!1;return V>=a};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(f,k){$jscomp.string.noRegExp_(f,"endsWith");var q=this.toString();f+="";void 0===k&&(k=q.length);for(var b=Math.max(0,Math.min(k|0,q.length)),a=f.length;0<a&&0<b;)if(q[--b]!=f[--a])return!1;return 0>=a};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(f,k){"object"===typeof exports&&"object"===typeof module?module.exports=k():"function"===typeof define&&define.amd?define([],k):"object"===typeof exports?exports.CitrixWebRTC=k():f.CitrixWebRTC=k()})(self,function(){return function(){function f(b){var a=q[b];if(void 0!==a)return a.exports;a=q[b]={exports:{}};k[b].call(a.exports,a,a.exports,f);return a.exports}var k={945:function(b,a,d){var f=this&&this.__extends||function(){var a=function(e,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,e){a.__proto__=e}||function(a,e){for(var c in e)e.hasOwnProperty(c)&&(a[c]=e[c])};return a(e,b)};return function(e,b){function d(){this.constructor=e}a(e,b);e.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)}}();Object.defineProperty(a,"__esModule",{value:!0});a.AudioElement=void 0;var k=d(658),p=d(550),g=d(851),e=d(946),t;(function(a){a.Init="Init";a.PlayStarted="PlayStarted";a.PauseCalled="PauseCalled"})(t||(t={}));b=function(a){function b(){var e=a.call(this,
null,p.class_id_t.AudioElement,0,k.ProxyMode.Local)||this;e.sinkId_="";e.srcObject_=null;e.loop_=!1;e.notiState=t.Init;return e}f(b,a);b.prototype.setSinkId=function(a){var b=this;g.logger.info(this.user_friendly_id()+".setSinkId: set sinkId to "+a);return new Promise(function(h,c){b.waitUntilConnected("AudioElement.sinkId").then(function(){var c=b.remoteInvoke(!0,p.method_id_AudioElement_t.sinkId,a);e.getRedirector().getFeatureValue(p.FEATURE_ms_teams_pstn)||(b.sinkId_=a,h());return c}).then(function(){g.logger.info(b.user_friendly_id()+
".setSinkId: success! resolving...");b.sinkId_=a;h()})["catch"](function(a){a=b.logRemoteInvokeError(a,".sinkId setter: failed to connect!");c(a)})})};Object.defineProperty(b.prototype,"sinkId",{get:function(){return this.sinkId_},set:function(a){this.setSinkId(a)},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"srcObject",{get:function(){return this.srcObject_},set:function(a){var e=this;g.logger.info(this.user_friendly_id()+".srcObject: set srcObject to "+JSON.stringify(a));a!==
this.srcObject_&&(this.srcObject_=a,this.waitUntilConnected("AudioElement.srcObject").then(function(){return a.syncBarrier()}).then(function(a){g.logger.info(e.user_friendly_id()+".srcObject: set srcObject to s "+JSON.stringify(a));return e.remoteInvoke(!0,p.method_id_AudioElement_t.srcObject,null!==a&&void 0!==a?a.id:"null")}).then(function(){g.logger.info(e.user_friendly_id()+".srcObject setter: remote success!")})["catch"](function(a){e.logRemoteInvokeError(a,".srcObject setter: failed to connect!")}))},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"src",{get:function(){return this.src_},set:function(a){var e=this;g.logger.info(this.user_friendly_id()+".src: set src to "+a);this.src_=a;this.waitUntilConnected("AudioElement.src").then(function(){e.remoteInvoke(!0,p.method_id_AudioElement_t.src,a)})["catch"](function(a){e.logRemoteInvokeError(a,".src setter: failed to connect!")})},enumerable:!1,configurable:!0});b.prototype.play=function(){var a=this;g.logger.info(this.user_friendly_id()+
".play() called.");this.toggleAudio(!0);return new Promise(function(e,b){a.waitUntilConnected("AudioElement.play").then(function(){return a.remoteInvoke(!1,p.method_id_AudioElement_t.play)}).then(function(){e()})["catch"](function(c){a.logRemoteInvokeError(c,".play: failed to connect!");b(c)})})};b.prototype.playEx=function(a,e,b){var c=this;g.logger.info(this.user_friendly_id()+".playEx() src:"+a+" sinkId:"+e+" loop:"+b);this.notiState=t.PlayStarted;this.waitUntilConnected("AudioElement.playEx").then(function(){var a=
[];e&&a.push(c.setSinkId(e));void 0!==b&&null!==b&&(c.loop_=b,a.push(c.remoteInvoke(!0,p.method_id_AudioElement_t.loop,b)));return Promise.all(a)}).then(function(){c.src_=a;return c.remoteInvoke(!0,p.method_id_AudioElement_t.src,a)}).then(function(){return c.play()}).then(function(){if(c.notiState==t.PauseCalled)return g.logger.info(c.user_friendly_id()+".playEx() run deferred pause"),c.doPauseAndDispose()}).then(function(){c.notiState=t.Init;g.logger.info(c.user_friendly_id()+".playEx() done")})["catch"](function(a){c.notiState=
t.Init;c.logRemoteInvokeError(a,".playEx() failed!")})};b.prototype.pause=function(){var a=this;g.logger.info(this.user_friendly_id()+".pause() called.");this.toggleAudio(!1);return new Promise(function(e,b){a.waitUntilConnected("AudioElement.pause").then(function(){return a.remoteInvoke(!1,p.method_id_AudioElement_t.pause)}).then(function(){e()})["catch"](function(c){a.logRemoteInvokeError(c,".pause: failed!");b()})})};b.prototype.doPauseAndDispose=function(){var a=this;g.logger.info(this.user_friendly_id()+
".doPauseAndDispose() called.");this.toggleAudio(!1);return new Promise(function(e,b){a.waitUntilConnected("AudioElement.doPauseAndDispose").then(function(){return a.remoteInvoke(!1,p.method_id_AudioElement_t.pause,[])}).then(function(){g.logger.info(a.user_friendly_id()+".doPauseAndDispose() resolving...");e();a.dispose()})["catch"](function(c){a.logRemoteInvokeError(c,".doPauseAndDispose: failed to connect!")})})};b.prototype.pauseAndDispose=function(){g.logger.info(this.user_friendly_id()+".pauseAndDispose() notiState: "+
this.notiState);this.notiState==t.PlayStarted?this.notiState=t.PauseCalled:this.doPauseAndDispose()};b.prototype.toggleAudio=function(a){this.srcObject_&&(g.logger.info(this.user_friendly_id()+".toggleAudio() toggle audio tracks:"+a),this.srcObject_.toggleAudio(a))};Object.defineProperty(b.prototype,"loop",{get:function(){return this.loop_},set:function(a){var e=this;g.logger.info(this.user_friendly_id()+".loop: set loop to "+a);this.loop_=a;this.waitUntilConnected("AudioElement.loop").then(function(){e.remoteInvoke(!0,
p.method_id_AudioElement_t.loop,a)})["catch"](function(a){e.logRemoteInvokeError(a,".loop setter: failed to connect!")})},enumerable:!1,configurable:!0});b.prototype.dispose=function(){g.logger.info(this.user_friendly_id()+".dispose()");this.src_=this.sinkId_="";this.srcObject_=null;this.loop_=!1;this.release()};return b}(k.ProxyObject);a.AudioElement=b},239:function(b,a,d){a.E=void 0;var f=d(945),k=d(851),p=function(){function a(){this.sinkId=void 0;this.src="";this.loop=void 0;this.element=null}
a.prototype.getSrc=function(){return this.src};a.prototype.setSinkId=function(a){this.sinkId=a};a.prototype.getLoop=function(){return!0===this.loop};a.prototype.setLoop=function(a){this.loop=a};a.prototype.play=function(a){this.element=new f.AudioElement;this.src=a;this.element.playEx(this.src,this.sinkId,this.loop)};a.prototype.pause=function(){this.element&&(this.element.pauseAndDispose(),this.element=null)};a.prototype.release=function(){this.element&&(this.element.dispose(),this.element=null)};
return a}();b=function(){function a(){this.audioIdMap=null;this.audioIdMap=new Map}a.prototype.getNotificationInfo=function(a){if(this.audioIdMap.has(a))return this.audioIdMap.get(a);var b=new p;this.audioIdMap.set(a,b);return b};a.prototype.playNotifyAudio=function(a,b){b&&(k.logger.info("AudioNotification.playNotifyAudio, Remote to Thin Client audioId:"+a+" src:"+b),this.getNotificationInfo(a).play(b))};a.prototype.pauseNotifyAudio=function(a,b){if(this.audioIdMap.has(a)){var d=this.audioIdMap.get(a);
b&&b!=d.getSrc()&&k.logger.warning("AudioNotification.pauseNotifyAudio warning: for audioId:"+a+", different param src:"+b+" from org src:"+d.getSrc());d.pause()}else k.logger.warning("AudioNotification.pauseNotifyAudio no audioId:"+a+" src:"+b)};a.prototype.setSinkId=function(a,b){if(null!=b&&b.startsWith("speaker:")){k.logger.info("AudioNotification.setSinkId before parsing audioId:"+a+" sinkId:"+b);var d=b.slice(8);k.logger.info("AudioNotification.setSinkId after parsing audioId:"+a+" speakersinkId:"+
d);b=d}this.getNotificationInfo(a).setSinkId(b)};a.prototype.getLoop=function(a){return this.getNotificationInfo(a).getLoop()};a.prototype.setLoop=function(a,b){this.getNotificationInfo(a).setLoop(b)};a.prototype.release=function(){this.audioIdMap.forEach(function(a,b,d){a.release()});this.audioIdMap.clear()};return a}();a.E=b},610:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.deferred_action=void 0;var f=d(851);b=function(){function a(b,d,e){this.resolve=b;this.reject=d;this.name_=
e}Object.defineProperty(a.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0});a.prototype.post=function(a){1==a?(f.logger.info('deferred_action.post(): resolving "'+this.name_+'"'),this.resolve()):(f.logger.info('deferred_action.post(): rejecting "'+this.name_+'"'),this.reject())};a.prototype.postWithResult=function(a,b){1==a?(f.logger.info('deferred_action.post(): resolving "'+this.name_+'"'),this.resolve(b)):(f.logger.info('deferred_action.post(): rejecting "'+this.name_+
'"'),this.reject())};a.prototype.postResolve=function(a){this.resolve(a)};a.prototype.postReject=function(a){void 0==a?this.reject():this.reject(a)};return a}();a.deferred_action=b},613:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])};return a(b,e)};return function(b,e){function d(){this.constructor=b}a(b,e);b.prototype=null===
e?Object.create(e):(d.prototype=e.prototype,new d)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e="function"===typeof Symbol&&a[Symbol.iterator];if(!e)return a;var d=e.call(a),w,h=[],c;try{for(;(void 0===b||0<b--)&&!(w=d.next()).done;)h.push(w.value)}catch(u){c={error:u}}finally{try{w&&!w.done&&(e=d["return"])&&e.call(d)}finally{if(c)throw c.error;}}return h};Object.defineProperty(a,"__esModule",{value:!0});a.E911Service=void 0;
var p=d(550),g=d(658),e=d(851);b=function(a){function b(){var e=a.call(this,null,p.class_id_t.E911Service,0,g.ProxyMode.Local)||this;e.preE911Info_=null;return e}f(b,a);b.prototype.isSameInfo=function(a){if(null==this.preE911Info_&&null!=a||null!=this.preE911Info_&&null==a||this.preE911Info_.bssid!=a.bssid||this.preE911Info_.ipv4!=a.ipv4||this.preE911Info_.subnetLengthIpv4!=a.subnetLengthIpv4||this.preE911Info_.ipv6!=a.ipv6||this.preE911Info_.subnetLengthIpv6!=a.subnetLengthIpv6||this.preE911Info_.mac!=
a.mac||1E-4<=Math.abs(this.preE911Info_.latitude-a.latitude)||1E-4<=Math.abs(this.preE911Info_.longitude-a.longitude)||!Array.isArray(this.preE911Info_.e911)||!Array.isArray(a.e911)||this.preE911Info_.e911.length!=a.e911.length)return!1;for(var b=0;b<a.e911.length;b++)if(this.preE911Info_.e911[b].chassisId!=a.e911[b].chassisId||this.preE911Info_.e911[b].portId!=a.e911[b].portId)return!1;return!0};Object.defineProperty(b.prototype,"onupdate",{get:function(){return this.onupdate_},set:function(a){var b=
this;this.onupdate_=a;this.waitUntilConnected(this.user_friendly_id()+".onupdate").then(function(){var a=b.registerCallbacks(!1,b.isNullCallback(b.onupdate_),p.method_id_E911Service_t.onupdate);a.then(function(a){a=k(a.params);var c=a[0];a.slice(1);null!==b.preE911Info_&&b.isSameInfo(c)||(e.logger.info(b.user_friendly_id()+".onupdate",JSON.stringify(c)),b.onupdate_&&b.onupdate_(c),b.preE911Info_=c)});return b.remoteInvoke(!0,p.method_id_E911Service_t.onupdate,a.success)})["catch"](function(){return e.logger.error(b.user_friendly_id()+
".onupdate, could not set listener")})},enumerable:!1,configurable:!0});b.prototype.getE911Info=function(){var a=this;return new Promise(function(b,d){a.waitUntilConnected(a.user_friendly_id()+".getE911Info").then(function(){return a.remoteInvoke(!1,p.method_id_E911Service_t.getE911Info)}).then(function(d){e.logger.info(a.user_friendly_id()+".getE911Info",JSON.stringify(a.param0(d)));b(a.param0(d))})["catch"](function(){e.logger.error(a.user_friendly_id()+".getE911Info promise rejected");d()})})};
b.prototype.updateE911Info=function(){var a=this;this.getE911Info().then(function(b){return a.onupdate&&a.onupdate(b)})["catch"](function(){return e.logger.error("Fail to get e911 information!")})};return b}(g.ProxyObject);a.E911Service=b},9:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return a(b,e)};return function(b,e){function d(){this.constructor=
b}a(b,e);b.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e="function"===typeof Symbol&&a[Symbol.iterator];if(!e)return a;var d=e.call(a),c,u=[],v;try{for(;(void 0===b||0<b--)&&!(c=d.next()).done;)u.push(c.value)}catch(z){v={error:z}}finally{try{c&&!c.done&&(e=d["return"])&&e.call(d)}finally{if(v)throw v.error;}}return u},p=this&&this.__values||function(a){$jscomp.initSymbol();
$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,e=b&&a[b],d=0;if(e)return e.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.EngineControl=a.VersionType=void 0;var g=d(550),e=d(946),t=d(658),x=d(851);(function(a){a[a.Webrpc=0]="Webrpc";a[a.WebrtcCodecs=
1]="WebrtcCodecs";a[a.Receiver=2]="Receiver";a[a.Vda=3]="Vda";a[a.Endpoint=4]="Endpoint";a[a.TypeScript=5]="TypeScript";a[a.HdxRtcEngine=6]="HdxRtcEngine";a[a.Max=7]="Max"})(a.VersionType||(a.VersionType={}));b=function(a){function b(e){var d=a.call(this,null,g.class_id_t.EngineControl,0,t.ProxyMode.Local)||this;d.clientInfo_="";d.clientInfo_=e;return d}f(b,a);b.prototype.bind=function(){x.logger.info(this.user_friendly_id()+".bind() called.");this.reconstructor(null,g.class_id_t.EngineControl,0)};
b.prototype.syncBarrier=function(){var a=this;x.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){a.syncBarrierDeep(b,c)&&a.waitUntilConnected("EngineControl.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,g.method_id_EngineControl_t.version,{major:0,minor:0,revision:0,build:0}),a.remoteInvoke(!1,g.method_id_EngineControl_t.feature_flags,[])])}).then(function(c){var b,d;c=k(c.map(function(c){return a.param0(c)}),2);a.version_=c[0];a.features_=
c[1];x.logger.info(a.user_friendly_id()+" features: "+JSON.stringify(a.features_));e.getRedirector().setFeatures(a.features_);a.remoteInvoke(!1,g.method_id_EngineControl_t.set_client_info,(a.clientInfo_||"Unknown")+"; vdiShim/"+g.HDXMS_VERSION,e.getRedirector().sessionClientId)["catch"](function(){return x.logger.error(a.user_friendly_id()+" could not set client info")});c=[];try{for(var h=p(a.features_),l=h.next();!l.done;l=h.next()){var C=l.value;"ms_teams_desktop_sharing"===C.name&&C.value?c.push(a.remoteInvoke(!1,
g.method_id_EngineControl_t.version_info,[])):"ms_teams_osinfo"===C.name&&C.value?c.push(a.remoteInvoke(!1,g.method_id_EngineControl_t.osinfo,{family:"",version:"",architecture:"",distro:"",edition:""})):"ms_teams_endpoint_id"===C.name&&C.value?c.push(a.remoteInvoke(!1,g.method_id_EngineControl_t.endpoint_id,{machine_id:"",user_id:""})):"ms_teams_hardware_info"===C.name&&C.value&&c.push(a.remoteInvoke(!1,g.method_id_EngineControl_t.hardware_info))}}catch(r){b={error:r}}finally{try{l&&!l.done&&(d=
h["return"])&&d.call(h)}finally{if(b)throw b.error;}}if(0<c.length)return Promise.all(c)}).then(function(c){var b,e;if(void 0===c)x.logger.info(a.user_friendly_id()+"release-1905 client.");else{x.logger.info(a.user_friendly_id()+"release-1906 or later client: received detailed client version list.");try{for(var d=p(c),l=d.next();!l.done;l=d.next()){var h=l.value;h.hdr.proc.iid==g.class_id_t.EngineControl&&h.hdr.proc.methodid==g.method_id_EngineControl_t.version_info?a.versions_=a.param0(h):h.hdr.proc.iid==
g.class_id_t.EngineControl&&h.hdr.proc.methodid==g.method_id_EngineControl_t.osinfo?a.osinfo_=a.param0(h):h.hdr.proc.iid==g.class_id_t.EngineControl&&h.hdr.proc.methodid==g.method_id_EngineControl_t.endpoint_id?a.endpointid_=a.param0(h):h.hdr.proc.iid==g.class_id_t.EngineControl&&h.hdr.proc.methodid==g.method_id_EngineControl_t.hardware_info&&(a.hardwareinfo_=a.param0(h))}}catch(r){b={error:r}}finally{try{l&&!l.done&&(e=d["return"])&&e.call(d)}finally{if(b)throw b.error;}}}a.syncBarrierResolve(a)})["catch"](function(c){c=
a.logRemoteInvokeError(c,"failure to retrieve version/feature related client info.");a.syncBarrierReject(c)})})};return b}(t.ProxyObject);a.EngineControl=b},368:function(b,a,d){var f=this&&this.__extends||function(){var a=function(c,b){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return a(c,b)};return function(c,b){function e(){this.constructor=c}a(c,b);c.prototype=null===b?Object.create(b):(e.prototype=
b.prototype,new e)}}(),k=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&Symbol.iterator,b=c&&a[c],e=0;if(b)return b.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.Frames=a.FrameTracker=void 0;var p=
d(851),g=d(946),e=d(121),t=d(679),x=function(){return function(a,c){this.handle=a;this.color=c}}(),m;(function(a){a[a.unknown=0]="unknown";a[a.capable=1]="capable";a[a.configured=2]="configured"})(m||(m={}));var n=function(a){function c(){var c=a.call(this)||this;c.name="overlay";c.color_clipping_=m.unknown;e.protocol_handler_manager.addProtocolHandler(c);return c}f(c,a);c.prototype.is_color_clipping_enabled=function(){return this.color_clipping_==m.configured};c.prototype.disable_color_clipping=
function(){this.color_clipping_=m.unknown;p.logger.info(this.user_friendly_id()+": disabled color clipping!")};c.prototype.init=function(a){};c.prototype.deinit=function(){this.clearRequests();this.clearCallbacks()};c.prototype.on_message=function(a){var c,b,e=this;p.logger.trace("HDXMS: Overlay <<< "+JSON.stringify(a));if("capabilities"==a.command){a=a.caps;try{for(var l=k(a),d=l.next();!d.done;d=l.next())"clipping"==d.value&&(this.color_clipping_=m.capable,p.logger.info(this.user_friendly_id()+
": agent is capable to do color clipping!"))}catch(r){c={error:r}}finally{try{d&&!d.done&&(b=l["return"])&&b.call(l)}finally{if(c)throw c.error;}}new Promise(function(a,c){e.processRequest(a,c);var b=[];e.color_clipping_==m.capable?(b.push("clipping"),p.logger.info(e.user_friendly_id()+": sending config request with clipping!")):p.logger.info(e.user_friendly_id()+": sending config request without clipping!");g.getRedirector().WSSendObject({v:"overlay",command:"configure",caps:b})})}else"clipping"==
a.command?(a=new x(a.windowHandle,a.color),(c=this.getCallback(a.handle))?c.resolve(a):p.logger.info("didn't find callback: ignore clipping event for windowHandle:"+a.handle)):(c=this.processResponse(),void 0!=c?(p.logger.info(this.user_friendly_id()+" msg:"+JSON.stringify(a)),1==a.status?"track_window"==a.command?c.resolve(a.windowId):"untrack_window"==a.command?c.resolve(a.windowHandle):"configure"==a.command?(this.color_clipping_==m.capable&&(this.color_clipping_=m.configured,p.logger.info(this.user_friendly_id()+
": color clipping is fully configured!")),c.resolve({})):c.reject({}):(0==a.status&&"configure"==a.command&&this.color_clipping_==m.capable&&(this.color_clipping_=m.unknown,p.logger.info(this.user_friendly_id()+": failed to configure color clipping, falling back to legacy clipping!")),p.logger.info(this.user_friendly_id()+"failure/unknown response for message: "+a.command),c.reject({}))):p.logger.info("spurious response for message: "+a.command))};c.prototype.registerWindowWithServiceLegacy=function(){var a=
this;return new Promise(function(c,b){var e=g.getRedirector();p.logger.info(a.user_friendly_id()+".registerWindowWithService: legacy case");var l=window.getWindowHandleAsHex.bind(window);if(void 0===l||null===l)p.logger.error(a.user_friendly_id()+".registerWindowWithService: getWindowHandle method is undefined or null"),b({});Promise.all([l(),e.startRedirection(!1,"registerWindowWithService")]).then(function(b){p.logger.info(a.user_friendly_id()+".registerWindowWithService: set window handle: "+b[0]);
e.WSSendObject({v:"overlay",command:"window",windowHandle:b[0]});c(b[0])})})};c.prototype.registerWindowWithService=function(a){var c=this;return new Promise(function(b,e){var l=g.getRedirector();p.logger.info(c.user_friendly_id()+".registerWindowWithService: new MW case");l.startRedirection(!1,"registerWindowWithService").then(function(){c.processRequest(b,e);l.WSSendObject({v:"overlay",command:"track_window",windowHandle:a})})})};c.prototype.unregisterWindowWithService=function(a){var c=this;p.logger.info(this.user_friendly_id()+
".unregisterWindowWithService(handle: "+a+")");return new Promise(function(b,e){void 0==a?e({}):(c.processRequest(b,e),g.getRedirector().WSSendObject({v:"overlay",command:"untrack_window",windowHandle:a}))})};c.prototype.replyClippingStatus=function(a,c,b){var e=this;p.logger.info(this.user_friendly_id()+".replyClippingStatus(handle: "+a+", color:"+c+", status:"+b+")");return new Promise(function(l,d){void 0==a?d():g.getRedirector().WSSendObject({v:"overlay",command:"clipping",windowHandle:a,color:c,
status:b}).then(function(){p.logger.info(e.user_friendly_id()+".replyClippingStatus(): status sent success!");l()})["catch"](function(){p.logger.info(e.user_friendly_id()+".replyClippingStatus(): status sent failure!");d()})})};return c}(e.protocol_base),w=function(){function a(c){var b=this;this.running_=!1;this.elements_=[];this.clipRects=new Set;this.legacy_=!1;this.videos_=[];this.connected_=!1;this.yClientAreaOffset_=this.xClientAreaOffset_=0;this.wheelEventHandler=function(a){setTimeout(function(){b.updateAll()},
10)};this.scrollEventHandler=function(a){b.updateAll()};this.keyupEventHandler=function(a){"Tab"!=a.code&&"ArrowUp"!=a.code&&"ArrowDown"!=a.code&&"ArrowLeft"!=a.code&&"ArrowRight"!=a.code&&"PageUp"!=a.code&&"PageDown"!=a.code&&"Home"!=a.code&&"End"!=a.code||b.updateAll()};this.resizeEventHandler=function(a){p.logger.info("onWindowResize... update video elements position");b.updateAll()};p.logger.info("FrameTracker.constructor: (handle: "+c+")");this.handle_=c;this.handle_||(this.legacy_=!0);this.connectToService();
this.observer_=new MutationObserver(function(a){b.updateAll()})}a.prototype.user_friendly_id=function(){return this.constructor.name};a.prototype.is_color_clipping_enabled=function(){return a.Protocol.is_color_clipping_enabled()};a.prototype.connectToService=function(){var c=this;(this.legacy_?a.Protocol.registerWindowWithServiceLegacy():a.Protocol.registerWindowWithService(this.handle_)).then(function(a){p.logger.info("FrameTracker: connected to service. (windowId="+a+")");c.connected_=!0;"number"==
typeof a?c.windowId_=a:"string"==typeof a&&(c.handle_=a);c.is_color_clipping_enabled()&&(c.oncolorclipping=function(){p.logger.debug("FrameTracker: .onclipping event received! handle_:"+c.handle_+" legacy_:"+c.legacy_)});c.videos_.forEach(function(a){a.sinkId=JSON.stringify(c.windowId_)});c.videos_=[]})["catch"](function(a){p.logger.error("registerWindowWithService failed! "+a)})};Object.defineProperty(a.prototype,"oncolorclipping",{set:function(c){var b=this;this.oncolorclipping_=c;a.Protocol.registerCallback(this.handle_).then(function(c){p.logger.info(b.user_friendly_id()+
".oncolorclipping_ callback received!");if(b.handle_==c.handle){if("FFFFFFFF"==c.color.toUpperCase()?(a.Protocol.disable_color_clipping(),p.logger.info(b.user_friendly_id()+".oncolorclipping_ replying with failure!"),a.Protocol.replyClippingStatus(c.handle,c.color,!1)):(b.color_="#"+c.color,b.elements_.forEach(function(a,c){a.target.style.backgroundColor=b.color_}),p.logger.info(b.user_friendly_id()+".oncolorclipping_ replying with success!"),a.Protocol.replyClippingStatus(c.handle,c.color,!0)),b.oncolorclipping_)b.oncolorclipping_()}else p.logger.warning(b.user_friendly_id()+
".oncolorclipping_ handle mismatch, replying with failure!"),a.Protocol.replyClippingStatus(c.handle,c.color,!1)})},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"handle",{get:function(){return this.handle_},enumerable:!1,configurable:!0});a.prototype.getWindowFromElement=function(a){return a.ownerDocument.defaultView};a.prototype.rectanglesIntersect=function(a,b){return a.x<b.x+b.width&&a.x+a.width>b.x&&a.y<b.y+b.height&&a.y+a.height>b.y?!0:!1};a.prototype.intersectingRect=function(a,
b){var e=Math.max(a.left,b.left),d=Math.max(a.top,b.top);return new DOMRect(e,d,Math.min(a.right,b.right)-e,Math.min(a.bottom,b.bottom)-d)};a.prototype.pedigreeCount=function(a,b){for(var e=0,d=a.parentElement;null!=d&&d!=b;)e++,d=d.parentElement;return{isAncestor:null!=d,pedigree:e}};a.prototype.selectTopmost=function(a,b){var e=this.getBoundingClientRect(a),d=this.getBoundingClientRect(b),e=this.intersectingRect(e,d),d=a.ownerDocument.elementFromPoint(e.left+e.width/2,e.top+e.height/2);if(d==a)return a;
if(d==b)return b;e=this.pedigreeCount(a,d);d=this.pedigreeCount(b,d);if(e.isAncestor&&d.isAncestor){if(e.pedigree<d.pedigree)return a;if(d.pedigree<e.pedigree)return b}else{if(e.isAncestor)return a;if(d.isAncestor)return b}};a.prototype.checkOverlappingVideos=function(a){var b=this;if(this.is_color_clipping_enabled())p.logger.debug("color based clipping is active!");else{var e=this.getBoundingClientRect(a.target);a.overlaps.forEach(function(b){a.target.remoteVideoElement.removeClipRect(b.rect)});
a.overlaps=[];this.elements_.forEach(function(d){if(d!=a){var h=d.overlaps.map(function(a){return a.element}).indexOf(a.target);-1!=h&&(h=d.overlaps.splice(h,1)[0],d.target.remoteVideoElement.removeClipRect(h.rect));h=b.getBoundingClientRect(d.target);if(b.rectanglesIntersect(e,h)){var l=b.selectTopmost(a.target,d.target);l==a.target?(d.overlaps.push({element:a.target,rect:e}),d.target.remoteVideoElement.addClipRect(e)):l==d.target&&(a.overlaps.push({element:d.target,rect:h}),a.target.remoteVideoElement.addClipRect(h))}}})}};
a.prototype.updateAll=function(){var a=this;this.elements_.forEach(function(b){var e=a.getBoundingClientRect(b.target);if(void 0!==e){var d=b.clientRect;if(void 0===d||d.x!==e.x||d.y!==e.y||d.width!==e.width||d.height!==e.height)b.clientRect=e,b.callback(e),a.checkOverlappingVideos(b)}})};a.prototype.track=function(a,b){var e=this,d=this.getBoundingClientRect(a);p.logger.info("Track (handle: "+this.handle_+") element frame",a,JSON.stringify(d));this.elements_.push({target:a,clientRect:void 0,callback:b,
overlaps:[]});if(this.is_color_clipping_enabled())a.style.backgroundColor=this.color_,p.logger.info("color based clipping is active!");else try{p.logger.info("Initializing occlusion for new videoElement"),this.clipRects.forEach(function(b){e.applyOcclusion(a,JSON.parse(b))})}catch(h){p.logger.error("addOcclusionInit failed! "+h)}this.running_||(p.logger.info("Start FrameTracker observer..."),this.observer_.observe(a.ownerDocument.body,{attributes:!0,childList:!0,subtree:!0}),d=this.getWindowFromElement(a),
d.addEventListener("wheel",this.wheelEventHandler),d.addEventListener("scroll",this.scrollEventHandler),d.addEventListener("keyup",this.keyupEventHandler),d.addEventListener("resize",this.resizeEventHandler),this.running_=!0);this.updateAll()};a.prototype.untrack=function(a){p.logger.info("Untrack (handle: "+this.handle_+") element frame:"+a);var b=-1;this.elements_.forEach(function(e,d){e.target===a&&(b=d)});if(0<=b&&(this.elements_.splice(b,1),0===this.elements_.length)){p.logger.info("Stop FrameTracker observer...");
this.observer_.disconnect();var e=this.getWindowFromElement(a);e.removeEventListener("wheel",this.wheelEventHandler);e.removeEventListener("scroll",this.scrollEventHandler);e.removeEventListener("keyup",this.keyupEventHandler);e.removeEventListener("resize",this.resizeEventHandler);this.running_=!1}};a.prototype.applyOcclusion=function(a,b){if(this.is_color_clipping_enabled())p.logger.debug("color based clipping is active!");else{var e=this.getBoundingClientRect(a);this.rectanglesIntersect(b,e)&&
void 0!==a.remoteVideoElement&&a.remoteVideoElement.addClipRect(b)}};a.prototype.addOcclusion=function(a){var b=this;this.is_color_clipping_enabled()?p.logger.debug("color based clipping is active!"):(p.logger.info("Adding occlusion "+JSON.stringify(a)+"\nTracking '"+this.elements_.length+"' elements."),this.clipRects.add(JSON.stringify(a)),this.elements_.forEach(function(e){b.applyOcclusion(e.target,a)}))};a.prototype.removeOcclusion=function(a){this.is_color_clipping_enabled()?p.logger.debug("color based clipping is active!"):
(p.logger.info("Removing occlusion "+JSON.stringify(a)+"\nTracking '"+this.elements_.length+"' elements."),this.clipRects["delete"](JSON.stringify(a)),this.elements_.forEach(function(b){void 0!==b.target.remoteVideoElement&&b.target.remoteVideoElement.removeClipRect(a)}))};a.prototype.setClientAreaOffset=function(a,b){this.xClientAreaOffset_=a;this.yClientAreaOffset_=b};a.prototype.getBoundingClientRect=function(a){a=a.getBoundingClientRect();a.x+=this.xClientAreaOffset_;a.y+=this.yClientAreaOffset_;
return a};a.prototype.newVideoElement=function(c){var b=this;p.logger.info("FrameTracker.newVideoElement: (id: "+c.id+")");if(void 0!==c.remoteVideoElement)p.logger.warning("Video element is already configured!!!");else{c.id||(c.id="ctx-vid-"+a.videoElementIDs++);var e=new t.VideoElement(c.id,this.getWindowFromElement(c));e.style=c.style;this.connected_?(p.logger.info("FrameTracker.newVideoElement: initializing video element with sink id "+this.windowId_),e.sinkId=JSON.stringify(this.windowId_)):
(p.logger.info("FrameTracker.newVideoElement: video element awaiting stable window state"),this.videos_.push(e));e.onloadedmetadata=function(){c.dispatchEvent(new Event("loadedmetadata"))};e.ontimeupdate=function(){c.dispatchEvent(new Event("timeupdate"))};e.onconnectionstatechange=function(){"connected"==e.connectionState?b.track(c,function(a){e.setFrame(a)}):b.untrack(c)};delete c.remoteVideoElement;Object.defineProperty(c,"remoteVideoElement",{writable:!0,configurable:!0,value:null});c.remoteVideoElement=
e;delete c.srcObject;Object.defineProperty(c,"srcObject",{configurable:!0,get:function(){return e.srcObject},set:function(a){p.logger.info("VDI Shim set video element srcObject "+a);e.srcObject=a}});delete c.videoWidth;Object.defineProperty(c,"videoWidth",{configurable:!0,get:function(){return e.videoWidth}});delete c.videoHeight;Object.defineProperty(c,"videoHeight",{configurable:!0,get:function(){return e.videoHeight}})}};a.prototype.disposeVideoElement=function(a){p.logger.info("FrameTracker.disposeVideoElement: (id: "+
a.id+")");var b=a.remoteVideoElement;if(void 0!=b){var e=this.videos_.findIndex(function(a){return a.Id==b.Id});-1<e&&this.videos_.splice(e,1);b.dispose();a.remoteVideoElement=void 0}};a.videoElementIDs=0;a.Protocol=new n;return a}();a.FrameTracker=w;b=function(){function a(c){this.frames_=[];c&&this.frames_.push(new w(void 0))}a.prototype.newFrame=function(a){p.logger.info("Frames.newFrame: (handle: "+a+")");var b=this.findFrame(a);void 0==b&&(b=new w(a),this.frames_.push(b));return b};a.prototype.disposeFrame=
function(a){p.logger.info("Frames.disposeFrame: (handle: "+a+")");var b=this.frames_.findIndex(function(b){return b.handle==a});-1<b&&(w.Protocol.unregisterWindowWithService(a).then(function(a){p.logger.info("Untrack window (handle: "+a+") successful")}),this.frames_.splice(b,1))};a.prototype.findFrame=function(a){p.logger.debug("Frames.findFrame: (handle: "+a+")");return void 0!=a?this.frames_.find(function(b){return b.handle==a}):this.frames_[0]};a.prototype.reconnect=function(){p.logger.info("Frames.reconnect()");
this.frames_.forEach(function(a){a.connectToService()})};return a}();a.Frames=b},247:function(b,a){var d=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,d=b&&a[b],x=0;if(d)return d.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&x>=a.length&&(a=void 0);return{value:a&&a[x++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,
"__esModule",{value:!0});a.getGC=a.GC=void 0;var f=function(){function a(b){this.parent_=this.object_=null;this.children_=[];this.object_=b}a.prototype.addChild=function(a){a.parent_!=this&&(a.parent_=this,this.children_.push(a))};a.prototype.removeChild=function(a){var b=this.children_.indexOf(a);this.children_.splice(b,1);a.parent_=null};return a}(),k=function(){function a(){this.root_=new f(null)}a.prototype.trackObject=function(a,b){void 0===b&&(b=null);if(null===this.findNode(a,this.root_)){var d=
this.findNode(b,this.root_),g=new f(a);d?d.addChild(g):this.root_.addChild(g)}};a.prototype.releaseObject=function(a){a=this.findNode(a,this.root_);if(null===a||a===this.root_)return!1;this.destroyNodeObjectRecurse(a);a.parent_.removeChild(a);return!0};a.prototype.destroyNodeObjectRecurse=function(a){var b,g;try{for(var m=d(a.children_),n=m.next();!n.done;n=m.next())this.destroyNodeObjectRecurse(n.value)}catch(w){b={error:w}}finally{try{n&&!n.done&&(g=m["return"])&&g.call(m)}finally{if(b)throw b.error;
}}a.object_.destroy()};a.prototype.setParent=function(a,b){var d=this.findNode(a,this.root_);if(null===d)return!1;var g=this.findNode(b,this.root_);if(null===g)return!1;if(d.parent_===g)return!0;d.parent_.removeChild(d);g.addChild(d);return!0};a.prototype.reset=function(){this.root_.children_=[]};a.prototype.findNode=function(a,b){var g,m;if(b.object_===a)return b;var n=null;try{for(var w=d(b.children_),h=w.next();!h.done&&(n=this.findNode(a,h.value),null===n);h=w.next());}catch(c){g={error:c}}finally{try{h&&
!h.done&&(m=w["return"])&&m.call(w)}finally{if(g)throw g.error;}}return n};return a}();a.GC=k;var p=new k;a.getGC=function(){return p}},946:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,
new e)}}(),k=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],e=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.getRedirector=a.HdxMediaStream=a.RedirectionStatus=
a.WebrpcStatusCode=void 0;var p=d(610),g=d(851),e=d(550),t=d(545),x=d(394),m=d(691),n=d(121),w=function(a){function b(c,e,d,r,h,n,w,z){void 0===z&&(z=void 0);c=a.call(this,c,e,h,z)||this;c.iid=d;c.oid=r;c.oneShot=n;c.mid=w;return c}f(b,a);return b}(n.completion_base),h;(function(a){a[a.rpc_status_success=0]="rpc_status_success";a[a.rpc_status_unspecified_error=1]="rpc_status_unspecified_error";a[a.rpc_status_unexpected=2]="rpc_status_unexpected";a[a.rpc_status_index_out_of_bounds=3]="rpc_status_index_out_of_bounds";
a[a.rpc_status_missing_parameter=4]="rpc_status_missing_parameter";a[a.rpc_status_missing_return_value=5]="rpc_status_missing_return_value";a[a.rpc_status_invalid_object=6]="rpc_status_invalid_object";a[a.rpc_status_user_exception=7]="rpc_status_user_exception";a[a.rpc_status_system_error=8]="rpc_status_system_error"})(h=a.WebrpcStatusCode||(a.WebrpcStatusCode={}));var c;(function(a){a[a.NotRedirected=0]="NotRedirected";a[a.Connecting=1]="Connecting";a[a.Binding=2]="Binding";a[a.Redirected=3]="Redirected"})(c=
a.RedirectionStatus||(a.RedirectionStatus={}));b=function(){function a(){this.sessionId_="";this.pingactive=this.deiniting_=!1;this.status=c.NotRedirected;this.reqs=[];this.cbs=[];this.deferredActions=[];this.telemetry_=new x.Telemetry;this.screenshare_=new m.ScreenShareUtil;this.stateChangeNotifcations=[];this.vdafeatures_=[]}Object.defineProperty(a.prototype,"telemetry",{get:function(){return this.telemetry_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"screenshare",{get:function(){return this.screenshare_},
enumerable:!1,configurable:!0});a.prototype.setRemoteSessionInfoCb=function(a){this.remoteSessionInfoCb=a};a.prototype.setFeatures=function(a){this.features=a;this.screenshare.onInitComplete();n.protocol_handler_manager.oninit(a,this.vdafeatures_)};a.prototype.getFeatureValue=function(a){if(this.features){var b=this.features.find(function(b){return b.name===a});return void 0!==b?b.value:!1}return!1};a.prototype.getVDAFeatureValue=function(a){return void 0!==this.vdafeatures_.find(function(b){return b===
a})?!0:!1};a.prototype.onRedirectionComplete=function(){for(;this.deferredActions&&0<this.deferredActions.length;)this.deferredActions.shift().post(this.status==c.Redirected)};a.prototype.connectToService=function(){g.logger.info("Redirection status: Connecting...");this.status=c.Connecting;return new Promise(function(a,b){var c=new WebSocket("wss://127.0.0.1:9002");c.onopen=function(){a(c)};c.onerror=function(a){g.logger.error("websocket connection error: "+a.type);b(a)}})};a.prototype.waitUntilRedirected=
function(a){var b=this;return new Promise(function(e,d){b.status==c.Redirected?e():0>=a?(g.logger.error("waitUntilRedirected() timed out!"),d()):setTimeout(function(){g.logger.info("waitUntilRedirected() timeout. count="+a);b.status!=c.Redirected?b.waitUntilRedirected(--a).then(function(){e()})["catch"](function(){g.logger.error("waitUntilRedirected() failure!");d()}):e()},2E3)})};a.prototype.handleRemoteSessionInfo=function(){var a=this;g.logger.debug("handleRemoteSessionInfo called.");var b=this;
b.remoteSessionInfoCb?b.remoteSessionInfoCb().then(function(e){g.logger.info("remoteSessionInfo success! info:"+JSON.stringify(e));g.logger.info("Redirection status: Redirected");b.status=c.Redirected;b.pingConnectionEnd();(e=window.onVdiClientConnected)&&e();a.telemetry.SendTelemetryInit();b.onRedirectionComplete()})["catch"](function(){g.logger.error("remoteSessionInfo failure!");b.suspendRedirection(!0);b.onRedirectionComplete()}):(g.logger.error("remoteSessionInfoCb is invalid!"),b.suspendRedirection(!0),
b.onRedirectionComplete())};a.prototype.startRedirection=function(a,b){var e=this,d=window.onVdiClientDisconnected;return new Promise(function(r,h){e.status!=c.Redirected?(g.logger.info("Attempting to start redirection: "+b),!1===a?e.deferredActions.push(new p.deferred_action(r,h,b)):e.connectToService().then(function(a){g.logger.info("Redirection status: Binding...");e.status=c.Binding;e.websocket=a;e.websocket.onmessage=function(a){e.onWSMessage(a)};e.websocket.onclose=function(a){e.onWSClose(a)};
r();e.handleRemoteSessionInfo()})["catch"](function(a){g.logger.error("Unable to connect to websocket service! "+a);h();e.suspendRedirection(!0);e.onRedirectionComplete();d&&d(!0)})):(g.logger.info("Redirection already started."),r())})};a.prototype.terminateOptimization=function(){this.websocket&&this.websocket.close(1E3,"normal disconnecting!")};a.prototype.suspendRedirection=function(a){var b=this;g.logger.info("Suspending redirection.");n.protocol_handler_manager.ondeinit();var e=window.onVdiClientDisconnected;
try{e&&e(!1)}catch(d){g.logger.error("suspendRedirection(): exception during vdiClientDisconnect: "+d.message)}g.logger.info("Redirection status: NotRedirected");var h=this.status;this.status=c.NotRedirected;var r=!1,e=window.getCitrixMSTeamsRedir,w=window.getCitrixWebrtcRedir,u;e?u=e:w&&(u=w,this.deiniting_&&(window.onVdiClientDisconnected=void 0,this.deiniting_=!1));u&&u().then(function(e){"1"==e&&(r=!0,g.logger.info("Reg key exists while disconnecting"));a&&h===c.Redirected&&1==r&&(g.logger.warning("Calling ping not normal disconnect"),
b.pingConnectionBegin(!1))})["catch"](function(){g.logger.error("Failure to Read MS Teams redir Reg Key, not retrying...")});this.dispatchStateChangeNotifications()};a.prototype.onWSOpen=function(){};a.prototype.onWSClose=function(a){g.logger.info("disconnected from websocket service. "+JSON.stringify(a));try{a&&1E3==a.code?this.suspendRedirection(!1):this.suspendRedirection(!0)}catch(b){g.logger.error("suspendRedirection(): exception closing WebSocket: "+b.message)}};a.prototype.onWSError=function(){try{this.suspendRedirection(!0)}catch(a){g.logger.error("suspendRedirection(): exception on WebSocket error: "+
a.message)}};a.prototype.WSSendObjectWrapper=function(a,b,c,d){var r,h,n=!0;b!=e.class_id_t.EngineControl||c!=e.method_id_EngineControl_t.ctor&&c!=e.method_id_EngineControl_t.version&&c!=e.method_id_EngineControl_t.feature_flags||(n=!1);var w=!0;if(n&&(w=!1,void 0!=this.features))try{for(var u=k(this.features),m=u.next();!m.done;m=u.next()){var t=m.value;if(!0===t.value&&t.name==a){w=!0;break}}}catch(x){r={error:x}}finally{try{m&&!m.done&&(h=u["return"])&&h.call(u)}finally{if(r)throw r.error;}}if(1==
w)return this.WSSendObject(d);a="Cannot invoke method that is not supported by webrpc: iid("+b+") mid("+c+")";g.logger.error(a);return Promise.reject(a)};a.prototype.WSSendObject=function(a){var b=this;return new Promise(function(c,d){if("webrtc"==a.v){var r=a.hdr.proc.iid,h=a.hdr.proc.methodid,n=a.objref.oid;a.hdr.destroy||(r=new w(c,d,r,n,0,!0,h),b.reqs.push(r));r=JSON.stringify(a);g.logger.trace("WSSendObject: >>> "+e.WebrpcClassLibInfoUtil.composeClassInfoData(a)+" "+r);try{b.websocket.readyState==
WebSocket.OPEN?b.websocket.send(r):(g.logger.info("WSSendObject(): warning: web socket is not open, dropping the message!"),c({}))}catch(u){g.logger.error("WSSendObject(): exception: "+u.message),d(u.message)}}else if("overlay"==a.v){r=JSON.stringify(a);g.logger.trace("HDXMS: SendOverlayData: >>> "+r+"'");try{b.websocket.readyState==WebSocket.OPEN?b.websocket.send(r):g.logger.info("WSSendObject(): warning: web socket is not open, dropping the message!"),c({})}catch(u){g.logger.error("WSSendObject(): exception: "+
u.message),d(u.message)}}else if("telemetry"==a.v){r=JSON.stringify(a);g.logger.trace("HDXMS: SendTelemetryData: >>> "+r+"'");try{b.websocket.readyState==WebSocket.OPEN?b.websocket.send(r):g.logger.info("WSSendObject(): warning: web socket is not open, dropping the message!"),c({})}catch(u){g.logger.error("WSSendObject(): exception: "+u.message),d(u.message)}}else if("appsharing"==a.v){r=JSON.stringify(a);g.logger.trace("HDXMS: SendScreenSharingData: >>> "+r+"'");try{b.websocket.readyState==WebSocket.OPEN?
b.websocket.send(r):g.logger.info("WSSendObject(): warning: web socket is not open, dropping the message!"),c({})}catch(u){g.logger.error("WSSendObject(): exception: "+u.message),d(u.message)}}else if("logging"==a.v){r=JSON.stringify(a);try{b.websocket&&b.websocket.readyState==WebSocket.OPEN&&b.websocket.send(r),c({})}catch(u){d(u.message)}}else g.logger.error("HDXMS: WSSendObject: Unknown protocol: '"+JSON.stringify(a)+"'")})};a.prototype.webrpcStatusCodeToName=function(a){switch(a){case h.rpc_status_success:a=
"rpc_status_success";break;case h.rpc_status_unspecified_error:a="rpc_status_unspecified_error";break;case h.rpc_status_unexpected:a="rpc_status_unexpected";break;case h.rpc_status_index_out_of_bounds:a="rpc_status_index_out_of_bounds";break;case h.rpc_status_missing_parameter:a="rpc_status_missing_parameter";break;case h.rpc_status_missing_return_value:a="rpc_status_missing_return_value";break;case h.rpc_status_invalid_object:a="rpc_status_invalid_object";break;case h.rpc_status_user_exception:a=
"rpc_status_user_exception";break;case h.rpc_status_system_error:a="rpc_status_system_error";break;default:a="unknown"}return a};a.prototype.parceWebrpcError=function(a,b){void 0===a&&(a=b&&0<b.length?b[0].category||b[0].code||b[0].message?h.rpc_status_system_error:h.rpc_status_user_exception:h.rpc_status_unspecified_error);var c;switch(a){case h.rpc_status_unspecified_error:case h.rpc_status_unexpected:case h.rpc_status_index_out_of_bounds:case h.rpc_status_missing_parameter:case h.rpc_status_missing_return_value:case h.rpc_status_invalid_object:c=
new DOMException(this.webrpcStatusCodeToName(a),this.webrpcStatusCodeToName(a));break;case h.rpc_status_user_exception:c=b&&0<b.length?new DOMException(b[0],this.webrpcStatusCodeToName(a)):new DOMException(this.webrpcStatusCodeToName(a),this.webrpcStatusCodeToName(a));break;case h.rpc_status_system_error:if(b&&0<b.length){c=Object.create(DOMException);var e={value:null,writable:!0,enumerable:!1,Configurable:!0};e.value=b[0].category;Object.defineProperty(c,"name",e);e.value=b[0].code;Object.defineProperty(c,
"code",e);e.value=b[0].message;Object.defineProperty(c,"message",e)}else c=new DOMException(this.webrpcStatusCodeToName(a),this.webrpcStatusCodeToName(a))}return c};a.prototype.onWSMessage=function(a){var b,c;a=a.data;var d;try{d=JSON.parse(a)}catch(h){g.logger.error("onWSMessage: invalid JSON! err: "+h+", data: "+a);return}if("webrtc"==d.v){g.logger.trace("onWSMessage: <<< "+e.WebrpcClassLibInfoUtil.composeClassInfoData(d)+" "+a);var r=d.hdr.proc.iid,w=d.hdr.proc.methodid,u=d.objref.oid;b=d.status;
if(d.hdr.msg_type==t.WsJsonUtil.getMsgType(t.ws_msg_type_t.reply))c=this.reqs.findIndex(function(a){return a.iid==r&&a.oid==u&&a.mid==w}),0<=c?0==b?this.reqs.splice(c,1).shift().resolve(d):(d=this.parceWebrpcError(b,d.params),this.reqs.splice(c,1).shift().reject(d)):g.logger.warning("HDXMS didnt find this one. (reqs)"+JSON.stringify(this.reqs));else if(d.hdr.msg_type==t.WsJsonUtil.getMsgType(t.ws_msg_type_t.event_req)){var x=d.func.id;c=this.cbs.findIndex(function(a){return a.iid==r&&a.oid==u&&a.cbid==
x>>16});0<=c?(0==(x&65535)?this.cbs[c].resolve(d):(d=this.parceWebrpcError(b,d.params),this.cbs[c].reject(d)),1==this.cbs[c].oneShot&&(this.cbs[c].completion_cb?this.cbs[c].completion_cb(this.cbs[c].cbid,this.cbs[c].mid):g.logger.warning("HDXMS didnt find completion_cb for oneShot callback, something went wrong!!!! cbid="+this.cbs[c].cbid+" (iid, mid)=("+this.cbs[c].iid,","+this.cbs[c].mid+")"))):g.logger.warning("HDXMS didnt find this one. (cbs)"+JSON.stringify(this.cbs))}else g.logger.warning("HDXMS Received bogus message: '"+
a+"'")}else if("telemetry"==d.v)0==d.status&&(c=d.hdr.command,2==(c&2147483647)&&(b=d.hdr.id,this.telemetry.onInitialized(b),g.logger.info("Telemetry init response received")));else if("features"==d.v){a=d.features;if("feature-support"==d.command){g.logger.info("features capabilities received, features:"+a);this.vdafeatures_=a;try{for(var f=k(a),v=f.next();!v.done;v=f.next())if(v.value===e.FEATURE_vda_app_sharing)this.screenshare.onInitialized(!0)}catch(h){b={error:h}}finally{try{v&&!v.done&&(c=f["return"])&&
c.call(f)}finally{if(b)throw b.error;}}}this.clientViewportMode_=d.client_viewport_mode;g.logger.info("features client_viewport_mode value: "+this.clientViewportMode_);this.sessionId_=d.client_session_id}else if("appsharing"==d.v)b=d.status,0==b?(c=d.hdr.command,b=d.hdr.id,(c&2147483647)==m.sshare_cmd.GetSources?(g.logger.info("appsharing GetSources response received"),d=d.data,this.screenshare.onGetSources(b,d)):(c&2147483647)==m.sshare_cmd.SetActive?(g.logger.info("appsharing SetActive response received"),
d=d.data,this.screenshare.onSetActive(b,d)):(c&2147483647)==m.sshare_cmd.TopologyChanged?(g.logger.info("appsharing Window topology changed cmd received"),this.screenshare.onToplogyChanged()):(g.logger.error("appsharing invalid command reply:"+c),this.screenshare.onError(b))):(g.logger.error("invalid status reply:"+b),b=d.hdr.id,this.screenshare.onError(b));else if(b=n.protocol_handler_manager.findHandler(d.v),void 0!=b)b.on_message(d);else g.logger.warning("HDXMS: onWSMessage: Unknown protocol: "+
a+"'")};a.prototype.clearReqs=function(){g.logger.info("clearReqs()");this.reqs.forEach(function(a,b){a.reject()});this.reqs=[]};a.prototype.registerHandler=function(a,b,c,e){a=new w(e.resolve.bind(e),e.reject.bind(e),a,b,e.id,e.oneShot,c,e.completion_cb);this.cbs.push(a)};a.prototype.unregisterHandler=function(a,b,c){var e=this.cbs.findIndex(function(e){return e.iid==a&&e.oid==b&&e.cbid==c});0<=e?this.cbs.splice(e,1):g.logger.warning("HDXMS Didnt find this callback in the list! list: "+JSON.stringify(this.cbs))};
a.prototype.isRedirected=function(){return this.status===c.Redirected||this.status===c.Binding||this.status===c.Connecting};a.prototype.isConnected=function(){return this.status==c.Redirected};a.prototype.isPingActive=function(){return this.pingactive};a.prototype.pingConnectionBegin=function(a){g.logger.info("Started timer");this.pingactive=!0;var b=window.onVdiClientDisconnectedTimer;1==a?(g.logger.info("checking if we are connected..."),b()):this.conntimer=setTimeout(function(){g.logger.info("checking if we are connected...");
b&&b()},15E3)};a.prototype.pingConnectionEnd=function(){this.pingactive=!1;clearTimeout(this.conntimer)};a.prototype.SendTelemetryData_Speaker=function(a){this.telemetry.SendTelemetryData(x.tel_cmd.Data,x.tel_key_SpeakerDeviceUsed,a,0)};a.prototype.registerStateChangeNotification=function(a){this.stateChangeNotifcations.push(a)};a.prototype.unregisterStateChangeNotification=function(a){this.stateChangeNotifcations=this.stateChangeNotifcations.filter(function(b){return b!=a})};a.prototype.dispatchStateChangeNotifications=
function(){this.stateChangeNotifcations.forEach(function(a){a()})};a.prototype.vdabufferNoLimit=function(){var a,b,c=!1;try{for(var d=k(this.vdafeatures_),r=d.next();!r.done;r=d.next())if(r.value===e.FEATURE_vda_service_no_buffer_limit){c=!0;break}}catch(h){a={error:h}}finally{try{r&&!r.done&&(b=d["return"])&&b.call(d)}finally{if(a)throw a.error;}}return c};Object.defineProperty(a.prototype,"clientViewportMode",{get:function(){return this.clientViewportMode_||"unknown"},enumerable:!1,configurable:!0});
Object.defineProperty(a.prototype,"sessionClientId",{get:function(){return this.sessionId_||""},enumerable:!1,configurable:!0});a.prototype.setDeiniting=function(){this.deiniting_=!0};return a}();a.HdxMediaStream=b;var u=new b;a.getRedirector=function(){return u}},985:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,
e)};return function(b,e){function d(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e="function"===typeof Symbol&&a[Symbol.iterator];if(!e)return a;var d=e.call(a),h,c=[],u;try{for(;(void 0===b||0<b--)&&!(h=d.next()).done;)c.push(h.value)}catch(g){u={error:g}}finally{try{h&&!h.done&&(e=d["return"])&&e.call(d)}finally{if(u)throw u.error;
}}return c},p=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(k(arguments[b]));return a};Object.defineProperty(a,"__esModule",{value:!0});a.IceCandidatePair=a.IceCandidate=void 0;var g=d(658),e=d(550),t=d(851);b=function(a){function b(d,w,h){for(var c=[],u=3;u<arguments.length;u++)c[u-3]=arguments[u];return a.apply(this,p([d,e.class_id_t.RTCIceCandidate,w,h,null,[]],c))||this}f(b,a);Object.defineProperty(b.prototype,"candidate",{get:function(){return this.candidate_},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"sdpMid",{get:function(){return this.sdpMid_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"sdpMLineIndex",{get:function(){return this.sdpMLineIndex_},enumerable:!1,configurable:!0});b.prototype.syncBarrier=function(){var a=this;t.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.syncBarrierDeep(b,d)&&a.waitUntilConnected("IceCandidate.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,
e.method_id_RTCIceCandidate_t.candidate,""),a.remoteInvoke(!1,e.method_id_RTCIceCandidate_t.sdpMid,""),a.remoteInvoke(!1,e.method_id_RTCIceCandidate_t.sdpMLineIndex,0)])}).then(function(b){b=k(b.map(function(b){return a.param0(b)}),3);a.candidate_=b[0];a.sdpMid_=b[1];a.sdpMLineIndex_=b[2];a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier failed!");a.syncBarrierReject(b)})})};return b}(g.ProxyObject);a.IceCandidate=b;b=function(a){function b(d,w){return a.call(this,
d,e.class_id_t.RTCIceCandidatePair,w,g.ProxyMode.Remote)||this}f(b,a);Object.defineProperty(b.prototype,"local",{get:function(){return this.local_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"remote",{get:function(){return this.remote_},enumerable:!1,configurable:!0});b.prototype.syncBarrier=function(){var a=this;t.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.syncBarrierDeep(b,d)&&a.waitUntilConnected("IceCandidatePair.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,
e.method_id_RTCIceCandidatePair_t.local,{}),a.remoteInvoke(!1,e.method_id_RTCIceCandidatePair_t.remote,{})])}).then(function(b){b=k(b.map(function(b){return a.param0(b)}),2);a.local_=b[0];a.remote_=b[1];a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier failed!");a.syncBarrierReject(b)})})};return b}(g.ProxyObject);a.IceCandidatePair=b},851:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.logger=a.Logger=void 0;var f=d(550),k=d(93),p=d(698),g=
k.LogLevel.Info;b=function(){function a(b){var e=this;void 0===b&&(b="[HdxWebRTC.js]");this.enabled_=!0;this.mslogger_=void 0;this.level_=g;this.enable_timestamp_=this.configuration_received_=!1;this.deferredLogs_=[];this.buffer_size_max_=10;this.intervalID_=0;this.flush=function(){0<e.deferredLogs_.length&&(e.protocol_.log(e.deferredLogs_),e.deferredLogs_=[])};this.tag_=b;f.BUILD_TYPE_SDK&&(this.enable_timestamp_=!0);this.protocol_=new p.LoggingProtocol(function(a){e.info(e.user_friendly_id()+" - Received Capabilities Cmd with caps = "+
JSON.stringify(a));e.protocol_.configure(e.appInfo_).then(function(a){var b=a.level,d=a.delay;a=a.buffer_size_max;e.info(e.user_friendly_id()+"- Configure Response received with level = "+b+", delay = "+d+", buffer_size_max = "+a);e.configuration_received_=!0;e.level_=b;e.deferredLogs_=e.deferredLogs_.filter(function(a){return a.level>=e.level_});e.delay_=d;e.buffer_size_max_=a;e.intervalID_=setInterval(e.flush,1E3*e.delay_)})["catch"](function(a){e.error(a)})},function(){clearInterval(e.intervalID_);
e.deferredLogs_=[];e.level_=g})}a.prototype.setInstanceId=function(a){this.instanceId_=a};a.prototype.user_friendly_id=function(){return this.constructor.name+"["+this.instanceId_+"]"};a.prototype.log=function(a){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];if(this.enabled_&&!(a<this.level_)){var b=this.tag_+" "+b,d=new Date,e=d.getTime(),d=d.toISOString();this.protocol_.isEnabled()&&(this.deferredLogs_.push({level:a,msg:"["+e+"] "+d+" "+k.LogLevel[a].toUpperCase()+" "+b}),this.configuration_received_&&
this.deferredLogs_.length>this.buffer_size_max_&&this.flush());this.enable_timestamp_&&(b="["+e+"] "+d+" "+b);void 0!==this.mslogger_?this.mslogger_.info(b):console.log(b)}};a.prototype.setMSLogger=function(a,b){this.mslogger_=a;void 0!=b&&(this.enable_timestamp_=b)};Object.defineProperty(a.prototype,"appInfo",{set:function(a){this.appInfo_=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"level",{set:function(a){this.level_=a},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,
"enable",{set:function(a){this.enabled_=a},enumerable:!1,configurable:!0});a.prototype.trace=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log(k.LogLevel.Trace,a)};a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log(k.LogLevel.Debug,a)};a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log(k.LogLevel.Info,a)};a.prototype.warning=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];
this.log(k.LogLevel.Warning,a)};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log(k.LogLevel.Error,a)};a.prototype.cleanup=function(){this.flush()};return a}();a.Logger=b;a.logger=new b},93:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.LogLevel=void 0;var d=a.LogLevel||(a.LogLevel={});d[d.Trace=0]="Trace";d[d.Debug=1]="Debug";d[d.Info=2]="Info";d[d.Warning=3]="Warning";d[d.Error=4]="Error"},698:function(b,a,d){var f=this&&this.__extends||
function(){var a=function(b,d){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])};return a(b,d)};return function(b,d){function g(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(a,"__esModule",{value:!0});a.LoggingProtocol=void 0;var k=d(946),p=d(121),g;(function(a){a[a.UNINITIALIZED=0]="UNINITIALIZED";a[a.ENABLED=1]="ENABLED";
a[a.DISABLED=2]="DISABLED"})(g||(g={}));b=function(a){function b(d,m){var n=a.call(this)||this;n.name="logging";n.state_=g.UNINITIALIZED;n.handleFailedHandshake=function(){n.state_===g.UNINITIALIZED&&n.disable()};p.protocol_handler_manager.addProtocolHandler(n);n.onCapsReceivedCb=d;n.onDisableCb=m;return n}f(b,a);b.prototype.disable=function(){this.state_=g.DISABLED;this.onDisableCb()};b.prototype.init=function(a,b){var e=this;void 0===b.find(function(a){return a===e.name})&&this.disable()};b.prototype.deinit=
function(){this.clearRequests();this.clearCallbacks()};b.prototype.on_message=function(a){if("capabilities"===a.command)k.getRedirector().WSSendObject({v:this.name,command:"capabilities",caps:[]}),this.onCapsReceivedCb(a.caps);else if("configure"===a.command){var b=this.processResponseEx(Number(a.req_id));void 0!==b?!0===a.status?(this.state_=g.ENABLED,b.resolve({level:a.level,delay:a.delay,buffer_size_max:a.buffer_size_max})):(this.disable(),b.reject("failed to configure logging protocol on agent!")):
this.disable()}else"shutdown"===a.command&&this.disable()};b.prototype.isEnabled=function(){return this.state_===g.UNINITIALIZED||this.state_===g.ENABLED};b.prototype.configure=function(a){var b=this;return new Promise(function(e,d){var h=b.processRequestEx(e,d);k.getRedirector().WSSendObject({v:b.name,command:"configure",req_id:String(h),client_info:a.clientInfo,vendor_name:a.vendorName});setTimeout(b.handleFailedHandshake,6E4)})};b.prototype.log=function(a){k.getRedirector().WSSendObject({v:this.name,
command:"log",data:a})};return b}(p.protocol_base);a.LoggingProtocol=b},293:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.number_allocator=void 0;var f=d(851);b=function(){function a(b,d,e){this.min_=b<a.BOUND_LOW||b>a.BOUND_HIGH?a.DEF_MIN:b;this.max_=d<a.BOUND_LOW||d>a.BOUND_HIGH?a.DEF_MAX:d;this.interval_=e<a.BOUND_LOW||e>a.BOUND_HIGH?a.DEF_INTERVAL:e;this.numbers_=new Map;this.numbers_.set(this.min_,this.max_)}Object.defineProperty(a.prototype,"max",{get:function(){return this.max_},
enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"min",{get:function(){return this.min_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"interval",{get:function(){return this.interval_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"numbers",{get:function(){return this.numbers_},enumerable:!1,configurable:!0});a.prototype.allocate=function(){var a=-1;if(0<this.numbers_.size){var b=Array.from(this.numbers_.keys()).sort(function(a,b){return a-
b})[0],e=this.numbers_.get(b);f.logger.debug("low="+b+" this.min="+this.min_+" this.interval="+this.interval_);a=this.min_+(b-this.min_)*this.interval_;this.numbers_["delete"](b);b+=1;b<e&&this.numbers_.set(b,e)}return a};a.prototype.deallocate=function(a){var b=Array.from(this.numbers_.keys()).sort(function(a,b){return a-b});a=(a-this.min_)/this.interval_;for(var e=!1,d=0;d<b.length&&(b[d]==a+1?(this.numbers_.set(a,this.numbers_.get(b[d])),this.numbers_["delete"](b[d]),e=!0):this.numbers_.get(b[d])==
a&&(this.numbers_.set(b[d],a+1),d+1<b.length&&b[d+1]==a+1&&(this.numbers_.set(b[d],this.numbers_.get(b[d+1])),this.numbers_["delete"](b[d+1])),e=!0),!e);d++);e||this.numbers_.set(a,a+1)};a.BOUND_LOW=0;a.BOUND_HIGH=4294967295;a.DEF_MIN=0;a.DEF_MAX=1024;a.DEF_INTERVAL=1;return a}();a.number_allocator=b},360:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__awaiter||function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,N){function r(a){try{A(e.next(a))}catch(b){N(b)}}function l(a){try{A(e["throw"](a))}catch(b){N(b)}}function A(a){a.done?c(a.value):d(a.value).then(r,l)}A((e=e.apply(a,b||[])).next())})},p=this&&this.__generator||
function(a,b){function c(a){return function(b){return e([a,b])}}function e(c){if(r)throw new TypeError("Generator is already executing.");for(;d;)try{if(r=1,l&&(h=c[0]&2?l["return"]:c[0]?l["throw"]||((h=l["return"])&&h.call(l),0):l.next)&&!(h=h.call(l,c[1])).done)return h;if(l=0,h)c=[c[0]&2,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return d.label++,{value:c[1],done:!1};case 5:d.label++;l=c[1];c=[0];continue;case 7:c=d.ops.pop();d.trys.pop();continue;default:if(!(h=d.trys,h=0<h.length&&
h[h.length-1])&&(6===c[0]||2===c[0])){d=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))d.label=c[1];else if(6===c[0]&&d.label<h[1])d.label=h[1],h=c;else if(h&&d.label<h[2])d.label=h[2],d.ops.push(c);else{h[2]&&d.ops.pop();d.trys.pop();continue}}c=b.call(a,d)}catch(N){c=[6,N],l=0}finally{r=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var d={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,l,h,G;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();
return G={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G},g=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],e=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");
},e=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,r=[],h;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)r.push(d.value)}catch(l){h={error:l}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(h)throw h.error;}}return r},t=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(e(arguments[b]));return a};Object.defineProperty(a,
"__esModule",{value:!0});a.PeerConnection=a.SessionDescription=a.SessionDescriptionInit=a.RtcConfiguration=a.RtcIceServer=a.IceCandidateEvent=void 0;var x=d(946),m=d(144),n=d(589),w=d(658),h=d(610),c=d(985),u=d(377),v=d(650),z=d(24),y=d(550),l=d(851),C=d(517),r=d(394),D=function(a){function b(c,e,d){c=a.call(this,c,y.class_id_t.RTCIceCandidateEvent,e,w.ProxyMode.Remote)||this;c.target=d;c.type="icecandidate";return c}f(b,a);Object.defineProperty(b.prototype,"candidate",{get:function(){return this.candidate_},
enumerable:!1,configurable:!0});b.prototype.syncBarrier=function(){var a=this;l.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,e){a.syncBarrierDeep(b,e)&&a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return a.remoteInvoke(!1,y.method_id_RTCIceCandidateEvent_t.candidate,{oid:0})}).then(function(b){b=a.param0(b);return!1===b.is_null?(new c.IceCandidate(a,b.oid,w.ProxyMode.Remote)).syncBarrier():Promise.resolve(null)}).then(function(b){l.logger.info(a.user_friendly_id()+
".onicecandidate: icecandidate available!");a.candidate_=b;a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".onicecandidate() failed!");a.syncBarrierReject(b)})})};return b}(w.ProxyObject);a.IceCandidateEvent=D;var K=function(){function a(b,c){this.state_="new";this.candidates_=[];this.gatheringstateupdatecb_=void 0;this.pc_=b;this.gatheringstateupdatecb_=c}a.prototype.pushState=function(a){l.logger.info(this.pc_.user_friendly_id()+".onicegatheringstatechange: new state is "+
a);this.state_=a;"gathering"==this.state_?(this.candidates_=[],this.postUpdate()):this.processRemaining()};a.prototype.addIceCandidate=function(a){var b=this;this.candidates_.push(a);var c=[];c.push(a.syncBarrier());c.push(this.pc_.updateSdpDescription(!0));Promise.all(c).then(function(a){l.logger.info(b.pc_.user_friendly_id()+".onicecandidate: icecandidate available!");b.postIceCandidate(a[0])})};a.prototype.postIceCandidate=function(a){l.logger.info(this.pc_.user_friendly_id()+".onicecandidate: posting ice candidate now!");
if(null!=this.pc_.onicecandidate)this.pc_.onicecandidate(a);else l.logger.warning(this.pc_.user_friendly_id()+"onicecandidate is NULL!!!");this.candidates_.shift();this.processRemaining()};a.prototype.postUpdate=function(){l.logger.info(this.pc_.user_friendly_id()+".onicegatheringstatechange: posting event now!");var a=new E("onicegatheringstatechange",this.pc_);this.gatheringstateupdatecb_&&this.gatheringstateupdatecb_(this.state_);this.pc_.onicegatheringstatechange(a)};a.prototype.processRemaining=
function(){0==this.candidates_.length&&"complete"==this.state_?null!=this.pc_.onicecandidate&&(this.pc_.onicecandidate({candidate:null,target:this}),this.postUpdate()):l.logger.info(this.pc_.user_friendly_id()+".onicecandidate: candidates remaining=["+this.candidates_.map(function(a){return a.object_id()})+"], state="+this.state_)};return a}(),M=function(){function a(){}a.toRtcIceServer=function(a,b){var c={urls:[],credential:"",username:""};a&&(a.urls?Array.isArray(a.urls)?c.urls=a.urls:c.urls.push(a.urls):
l.logger.warning("RtcIceServer.toRtcIceServer().urls property is missing! this is required property!"),a.credential&&(a.credential.hasOwnProperty("accessToken")?c.credential=a.credential.accessToken:c.credential=a.credential),a.username&&(c.username=a.username));if(1==b)for(var e in a)"urls"!=e&&"credential"!=e&&"username"!=e&&l.logger.warning("RtcIceServer.toRtcIceServer() unsupported property:"+e);return c};return a}();a.RtcIceServer=M;var U=function(){function a(){}a.toRtcConfiguration=function(a,
b){var c,e;1==b&&l.logger.info("RtcConfiguration.toRtcConfiguration() in RTCConfiguration config:"+JSON.stringify(a));var d={};if(a){if(a.iceServers){d.iceServers=[];try{for(var B=g(a.iceServers),r=B.next();!r.done;r=B.next())d.iceServers.push(M.toRtcIceServer(r.value,b))}catch(A){c={error:A}}finally{try{r&&!r.done&&(e=B["return"])&&e.call(B)}finally{if(c)throw c.error;}}}a.iceTransportPolicy&&(d.iceTransportPolicy=a.iceTransportPolicy);a.bundlePolicy&&(d.bundlePolicy=a.bundlePolicy);a.rtcpMuxPolicy&&
(d.rtcpMuxPolicy=a.rtcpMuxPolicy);a.iceTransports&&(d.iceTransports=a.iceTransports);a.sdpSemantics&&(d.sdpSemantics=a.sdpSemantics);a.enableDtlsSrtp&&(d.enableDtlsSrtp=a.enableDtlsSrtp);a.enableDscp&&(d.enableDscp=a.enableDscp)}if(1==b){for(var h in a)"iceServers"!=h&&"iceTransportPolicy"!=h&&"bundlePolicy"!=h&&"rtcpMuxPolicy"!=h&&"iceTransports"!=h&&"sdpSemantics"!=h&&"enableDtlsSrtp"!=h&&"enableDscp"!=h&&l.logger.warning("RtcConfiguration.toRtcConfiguration() warning: unsupported property:"+h);
l.logger.info("RtcConfiguration.toRtcConfiguration() converted RtcConfiguration config:"+JSON.stringify(d))}return d};return a}();a.RtcConfiguration=U;var q=function(){return function(a,b){this.sdp=b;this.type=a}}();a.SessionDescriptionInit=q;var H=function(a){function b(c,e,d){for(var r=[],F=3;F<arguments.length;F++)r[F-3]=arguments[F];return a.apply(this,t([c,y.class_id_t.RTCSessionDescription,e,d,null,[]],r))||this}f(b,a);b.prototype.toJSON=function(){return{type:this.type_,sdp:this.sdp_}};Object.defineProperty(b.prototype,
"sdp",{get:function(){return this.sdp_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"type",{get:function(){return this.type_},enumerable:!1,configurable:!0});b.prototype.syncBarrier=function(){var a=this;l.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){a.syncBarrierDeep(b,c)&&a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,y.method_id_RTCSessionDescription_t.type,0),
a.remoteInvoke(!1,y.method_id_RTCSessionDescription_t.sdp,"")])}).then(function(b){a.type_=a.convertType(a.param0(b[0]));a.sdp_=a.param0(b[1]);a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};b.prototype.convertType=function(a){return 0==a?"offer":1==a?"pranswer":2==a?"answer":"rollback"};b.convertC2H=function(a){return"offer"==a?0:"pranswer"==a?1:"answer"==a?2:3};return b}(w.ProxyObject);a.SessionDescription=H;var E=function(){return function(a,
b){this.type=a;this.target=b}}(),J=function(){return function(){}}(),G=function(){function a(b,c){this.local=b;this.remote=c}Object.defineProperty(a.prototype,"active",{get:function(){var a=!1;if(1==this.local||1==this.remote)a=!0;return a},enumerable:!1,configurable:!0});return a}();b=function(a){function b(c){var e=a.call(this,null,y.class_id_t.RTCPeerConnection,0,w.ProxyMode.Local,null,[],b.ensure_config_defined(c,!1),{})||this;e.timeerstarted_=!1;e.firsttimeremoteoffer_=!1;e.firststable_=!1;e.firsttimelocaloffer_=
!1;e.audiocall_=new G(!1,!1);e.videocall_=new G(!1,!1);e.screensharingcall_=new G(!1,!1);e.conferencecall_=!1;e.incomingcall_=!1;e.outgoingcall_=!1;e.usingasynconly_=!1;e.rtcconfig_=b.ensure_config_defined(c,!0);l.logger.info(e.user_friendly_id()+".constructor sdpSemantics="+e.rtcconfig_.sdpSemantics);if(!y.BUILD_TYPE_SDK&&e.isUnified()&&!x.getRedirector().getFeatureValue(y.FEATURE_ms_teams_webrtc_1dot0))throw new DOMException("CWA client does not support unified sdpSemantic","createPeerConnection");
e.pendingtransceiver_=0;e.pendingtrack_=0;e.deferredOfferAnswers=[];e.localStreams=[];e.remoteStreams=[];e.onaddstream_=null;e.signalingState_="stable";e.iceConnectionState_="new";e.iceGatheringState_="new";e.iceQ_=new K(e,function(a){e.onicegatheringstateupdate(a)});e.receivers_=[];e.senders_=[];e.transceivers_=[];e.registerStateChangeNotification(e.onStateChange);e.localdatachannel_=null;e.remotedatachannel_=null;return e}f(b,a);b.ensure_config_defined=function(a,b){return U.toRtcConfiguration(a,
b)};b.prototype.dumpSdp=function(a){l.logger.debug(this.user_friendly_id()+".dumpSdp");a&&l.logger.debug(this.user_friendly_id()+" type: "+a.type+", sdp: "+a.sdp)};Object.defineProperty(b.prototype,"localDescription",{get:function(){l.logger.trace(this.user_friendly_id()+".get_localDescription() called.");return this.localDescription_},set:function(a){l.logger.debug(this.user_friendly_id()+".set_localDescription() called.");this.localDescription_=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"remoteDescription",{get:function(){l.logger.trace(this.user_friendly_id()+".get_remoteDescription() called.");return this.remoteDescription_},set:function(a){l.logger.debug(this.user_friendly_id()+".get_remoteDescription() called.");this.remoteDescription_=a},enumerable:!1,configurable:!0});b.prototype.isUnified=function(){return"unified"==this.rtcconfig_.sdpSemantics||"unified-plan"==this.rtcconfig_.sdpSemantics};b.prototype.onStateChange=function(){var a=new E("iceconnectionstatechange",this);
if(this.oniceconnectionstatechange_)this.oniceconnectionstatechange_(a)};b.prototype.addIceCandidate=function(a){var b=this;l.logger.debug(this.user_friendly_id()+".addIceCandidate() called.");this.waitUntilConnected(this.user_friendly_id()+".addIceCandidate").then(function(){var e={candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex};if(void 0==e.candidate||null==e.candidate)e.candidate="";void 0==e.sdpMid&&(e.sdpMid=null);void 0==e.sdpMLineIndex&&(e.sdpMLineIndex=null);return(new c.IceCandidate(b,
0,w.ProxyMode.Local,e)).syncBarrier()}).then(function(a){return b.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.addIceCandidate,[a],{})}).then(function(){l.logger.debug(b.user_friendly_id()+".addIceCandidate() success.");return b.updateSdpDescription(!1)}).then(function(){l.logger.info(b.user_friendly_id()+".addIceCandidate() - sync remote sdp success.")})["catch"](function(a){b.logRemoteInvokeError(a,".addIceCandidate() failed!")})};Object.defineProperty(b.prototype,"onicecandidate",{get:function(){return this.onicecandidate_},
set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onicecandidate() called.");this.onicecandidate_=a;this.waitUntilConnected(this.user_friendly_id()+".onicecandidate").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onicecandidate);c.then(function(a){l.logger.info(b.user_friendly_id()+".onicecandidate callback received!!!");a=new D(b,b.param0(a).oid,b);null!=b.iceQ_&&b.iceQ_.addIceCandidate(a)});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onicecandidate,
c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onicecandidate() failed!")})},enumerable:!1,configurable:!0});b.prototype.convertIceConnectionState=function(a){return 0==a?"new":1==a?"checking":2==a?"connected":3==a?"completed":4==a?"failed":5==a?"disconnected":"closed"};b.prototype.convertConnectionState=function(a){if(0!=a){if(1==a)return"connecting";if(2==a)return"connected";if(3==a)return"disconnected";if(4==a)return"failed";if(5==a)return"closed"}return"new"};Object.defineProperty(b.prototype,
"onconnectionstatechange",{get:function(){return this.onconnectionstatechange_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onconnectionstatechange() called.");this.onconnectionstatechange_=a;this.waitUntilConnected(this.user_friendly_id()+".onconnectionstatechange").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onconnectionstatechange);c.then(function(a){l.logger.info(b.user_friendly_id()+".onconnectionstatechange(): success callback received!!!");
b.connectionState_=b.convertConnectionState(b.param0(a));l.logger.info(b.user_friendly_id()+" connectionState=:"+b.connectionState_);a=new E("connectionstatechange",b);if(b.onconnectionstatechange_)b.onconnectionstatechange_(a)});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onconnectionstatechange,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onconnectionstatechange() failed!")})},enumerable:!1,configurable:!0});b.prototype.get_connectionState=function(){l.logger.trace(this.user_friendly_id()+
".get_connectionState() called, value = "+this.connectionState_);return this.isRedirected()?this.connectionState_:"failed"};Object.defineProperty(b.prototype,"oniceconnectionstatechange",{get:function(){return this.oniceconnectionstatechange_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_oniceconnectionstatechange() called.");this.oniceconnectionstatechange_=a;this.waitUntilConnected(this.user_friendly_id()+".oniceconnectionstatechange").then(function(){var c=b.registerCallbacks(!1,
b.isNullCallback(a),y.method_id_RTCPeerConnection_t.oniceconnectionstatechange);c.then(function(a){l.logger.info(b.user_friendly_id()+".oniceconnectionstatechange(): success callback received!!!");b.iceConnectionState_=b.convertIceConnectionState(b.param0(a));a=new E("iceconnectionstatechange",b);if(b.oniceconnectionstatechange_)b.oniceconnectionstatechange_(a)});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.oniceconnectionstatechange,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,
".set_oniceconnectionstatechange() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"iceConnectionState",{get:function(){l.logger.trace(this.user_friendly_id()+".get_iceConnectionState() called, value = "+this.iceConnectionState_);return this.isRedirected()?this.iceConnectionState_:"failed"},enumerable:!1,configurable:!0});b.prototype.convertIceGatheringState=function(a){return 0==a?"new":1==a?"gathering":"complete"};b.prototype.onicegatheringstateupdate=function(a){l.logger.info(this.user_friendly_id()+
".onicegatheringstateupdate() current:"+this.iceGatheringState_+" updating to:"+a);this.iceGatheringState_=a;l.logger.info(this.user_friendly_id()+".onicegatheringstateupdate() after update: iceGatheringState_:"+this.iceGatheringState_)};Object.defineProperty(b.prototype,"onicegatheringstatechange",{get:function(){return this.onicegatheringstatechange_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onicegatheringstatechange() called.");this.onicegatheringstatechange_=a;this.waitUntilConnected(this.user_friendly_id()+
".onicegatheringstatechange").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onicegatheringstatechange);c.then(function(a){l.logger.info(b.user_friendly_id()+".onicegatheringstatechange(): callback received!!!");a=b.convertIceGatheringState(b.param0(a));null!=b.iceQ_&&b.iceQ_.pushState(a)});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onicegatheringstatechange,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onicegatheringstatechange() failed!")})},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"iceGatheringState",{get:function(){l.logger.debug(this.user_friendly_id()+".get_iceGatheringState() called, value = "+this.iceGatheringState_);return this.iceGatheringState_},enumerable:!1,configurable:!0});b.prototype.convertSignalState=function(a){return 0==a?"stable":1==a?"have-local-offer":2==a?"have-local-pranswer":3==a?"have-remote-offer":4==a?"have-remote-pranswer":"closed"};b.prototype.TelemtryReadings_=function(){var a,b,
c,e,d,B,h,A,l=this;"have-local-offer"==this.signalingState_&&0==this.firsttimelocaloffer_&&0==this.firsttimeremoteoffer_&&(this.outgoingcallstart_=(new Date).getTime(),0==this.outgoingcall_&&(this.SendTelemetryData(r.tel_key_PerfCallState,r.tel_CallState.active,1),this.SendTelemetryData(r.tel_key_PerfCallDirection,r.tel_CallDirection.outgoing,1),this.outgoingcall_=!0),this.firsttimelocaloffer_=!0);"have-remote-offer"==this.signalingState_&&0==this.firsttimeremoteoffer_&&0==this.firsttimelocaloffer_&&
(this.incomingcallstart_=(new Date).getTime(),0==this.incomingcall_&&(this.SendTelemetryData(r.tel_key_PerfCallState,r.tel_CallState.active,1),this.SendTelemetryData(r.tel_key_PerfCallDirection,r.tel_CallDirection.incoming,1),this.incomingcall_=!0),this.firsttimeremoteoffer_=!0);"stable"==this.signalingState_&&0==this.firststable_&&(this.callstartTime_=(new Date).getTime(),this.firststable_=this.timeerstarted_=!0);if("stable"==this.signalingState_){try{for(var F=g(this.localStreams),G=F.next();!G.done;G=
F.next()){var u=G.value;1<=u.getAudioTracks().length&&0==this.audiocall_.local&&(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.audio,1),this.audiocall_.local=!0);var w=u.getVideoTracks();if(1<=w.length)try{for(var D=(c=void 0,g(w)),C=D.next();!C.done;C=D.next()){var n=C.value;1==n.getSettings().deviceId.includes("display")?0==this.screensharingcall_.local&&(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.dshare,1),this.screensharingcall_.local=!0):0==this.videocall_.local&&
(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.video,1),this.videocall_.local=!0)}}catch(y){c={error:y}}finally{try{C&&!C.done&&(e=D["return"])&&e.call(D)}finally{if(c)throw c.error;}}}}catch(y){a={error:y}}finally{try{G&&!G.done&&(b=F["return"])&&b.call(F)}finally{if(a)throw a.error;}}try{for(var f=g(this.remoteStreams),m=f.next();!m.done;m=f.next()){n=m.value;1<=n.getAudioTracks().length&&0==this.audiocall_.remote&&(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.audio,
1),this.audiocall_.remote=!0);var v=n.getVideoTracks();if(1<=v.length)try{for(var z=(h=void 0,g(v)),t=z.next();!t.done;t=z.next())1==t.value.id.includes("applicationsharingVideo")?0==this.screensharingcall_.remote&&(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.dshare,1),this.screensharingcall_.remote=!0):0==this.videocall_.remote&&(this.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.video,1),this.videocall_.remote=!0)}catch(y){h={error:y}}finally{try{t&&!t.done&&(A=z["return"])&&
A.call(z)}finally{if(h)throw h.error;}}}}catch(y){d={error:y}}finally{try{m&&!m.done&&(B=f["return"])&&B.call(f)}finally{if(d)throw d.error;}}this.getReceiversAsync().then(function(a){2<a.length&&0==l.conferencecall_&&(l.SendTelemetryData(r.tel_key_PerfCallType,r.tel_CallType.multi,1),l.conferencecall_=!0)})}};Object.defineProperty(b.prototype,"onsignalingstatechange",{set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onsignalingstatechange() called.");this.onsignalingstatechange_=
a;this.waitUntilConnected(this.user_friendly_id()+".onsignalingstatechanged").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onsignalingstatechange);c.then(function(a){l.logger.info(b.user_friendly_id()+".onsignalingstatechange(): callback received!!!");b.signalingState_=b.convertSignalState(b.param0(a));a=new E("onsignalingstatechange",b);if(b.onsignalingstatechange_)b.onsignalingstatechange_(a);b.TelemtryReadings_()});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onsignalingstatechange,
c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onsignalingstatechange() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onsignalingstatechanged",{get:function(){return this.onsignalingstatechange_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ontrack",{get:function(){return this.ontrack_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_ontrack() called.");this.ontrack_=a;this.waitUntilConnected(this.user_friendly_id()+
".ontrack").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.ontrack);c.then(function(a){return k(b,void 0,void 0,function(){var b,c,e,d,B,r,N,h,T,F,G,D,C,y=this;return p(this,function(Q){l.logger.info(this.user_friendly_id()+".ontrack(): callback received!!!");b=new J;c=[];e=this.param0(a);void 0!=e.track&&!1===e.track.is_null&&(l.logger.info(this.user_friendly_id()+" adding a RemoteMediaTrack with oid:"+e.track.oid),d=new m.RemoteMediaTrack(this,e.track.oid),
c.push(d.syncBarrier()));b.track=d;void 0!=e.receiver&&!1===e.receiver.is_null&&(B=this.receivers_.find(function(a){return a.object_id()===e.receiver.oid}),void 0===B&&(l.logger.info(this.user_friendly_id()+" adding a RtpReceiver with oid:"+e.receiver.oid),B=new n.RtpReceiver(this,e.receiver.oid,w.ProxyMode.Remote,this.isUnified(),d)),c.push(B.syncBarrier()));b.receiver=B;v.RemoteSession.isFeatureWebrtc1dot0Supported()&&void 0!=e.transceiver&&!1===e.transceiver.is_null&&(r=this.transceivers_.find(function(a){return a.object_id()===
e.transceiver.oid}),void 0===r&&(l.logger.info(this.user_friendly_id()+" adding a RtpTransceiver with oid:"+e.transceiver.oid),r=new u.RtpTransceiver(this,e.transceiver.oid,w.ProxyMode.Remote,this.isUnified(),u.RtcRtpTransceiverDirection.inactive,B),this.transceivers_.push(r)),c.push(r.syncBarrier()));b.transceiver=r;b.streams=[];if(void 0!=e.streams){N=function(a){var e=h.remoteStreams.find(function(b){return!1===a.is_null&&b.object_id()===a.oid});void 0===e&&(l.logger.info(h.user_friendly_id()+
" adding a RemoteStream with oid:"+a.oid),e=new m.RemoteStream(h,a.oid,w.ProxyMode.Remote),h.remoteStreams.push(e));c.push(e.syncBarrier());b.streams.push(e)};h=this;try{for(T=g(e.streams),F=T.next();!F.done;F=T.next())G=F.value,N(G)}catch(f){D={error:f}}finally{try{F&&!F.done&&(C=T["return"])&&C.call(T)}finally{if(D)throw D.error;}}}l.logger.info(this.user_friendly_id()+".ontrack(): .prop.syncBarrier start");Promise.all(c).then(function(){var a,c;l.logger.info(y.user_friendly_id()+".ontrack(): notified!!! with evt: "+
b);try{for(var e=g(b.streams),d=e.next();!d.done;d=e.next())d.value.toggleAudio(!1)}catch(A){a={error:A}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(a)throw a.error;}}if(y.ontrack_)y.ontrack_(b)})["catch"](function(a){y.logRemoteInvokeError(a,".ontrack(): .prop.syncBarrier failed.")});return[2]})})});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.ontrack,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_ontrack(): failed.")})},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"signalingState",{get:function(){l.logger.debug(this.user_friendly_id()+".get_signalingState() called, value = "+this.signalingState_);return this.signalingState_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onnegotiationneeded",{get:function(){return this.onnegotiationneeded_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onnegotiationneeded() called.");this.onnegotiationneeded_=a;this.waitUntilConnected(this.user_friendly_id()+
".onnegotiationneeded").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onnegotiationneeded);c.then(function(){l.logger.info(b.user_friendly_id()+".onnegotiationneeded(): callback received!!!");var a=new E("negotiationneeded",b);if(b.onnegotiationneeded_)b.onnegotiationneeded_(a)});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onnegotiationneeded,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onnegotiationneeded(): failed.")})},
enumerable:!1,configurable:!0});b.prototype.dumpConstraints=function(a){l.logger.debug(this.user_friendly_id()+" constraints: "+a);void 0!==a&&0!==Object.keys(a).length||l.logger.warning(this.user_friendly_id()+" constraints either undefined or empty!");a&&(l.logger.debug(this.user_friendly_id()+"  -- video: "+a.offerToReceiveVideo),l.logger.debug(this.user_friendly_id()+"  -- audio: "+a.offerToReceiveAudio),l.logger.debug(this.user_friendly_id()+"  -- iceRestart: "+a.iceRestart),l.logger.debug(this.user_friendly_id()+
"  -- voiceActivityDetection: "+a.voiceActivityDetection))};b.prototype.fix_constraints=function(a){this.dumpConstraints(a);var b={};this.isUnified()||(b={audio:!0,video:!0});if(a){if(void 0!==a.video||void 0!==a.offerToReceiveVideo)b.video=a.offerToReceiveVideo;if(void 0!==a.audio||void 0!==a.offerToReceiveAudio)b.audio=a.offerToReceiveAudio;void 0!==a.iceRestart&&(b.iceRestart=a.iceRestart);void 0!==a.voiceActivityDetection&&(b.voiceActivityDetection=a.voiceActivityDetection)}return b};b.prototype.createOffer=
function(a,b,c){l.logger.info(this.user_friendly_id()+".createOffer() called.",JSON.stringify(a));return this.isUnified()?void 0==a?this.createOffer_v2():a?this.createOffer_v2(a):this.createOffer_v1(a,b,c):this.createOffer_v1(a,b,c)};b.prototype.createOffer_v2=function(a){var b=this;l.logger.info(this.user_friendly_id()+".createOffer_v2() called.",JSON.stringify(a));return new Promise(function(c,e){b.createOffer_v1(function(a){l.logger.info(b.user_friendly_id()+".createOffer_v2(): got sdp!!!",JSON.stringify(a));
a=new q(a.type,a.sdp);c(a)},function(a){void 0!=a&&(a=b.logRemoteInvokeError(a,".createOffer_v2() failed."),e(a))},a)})};b.prototype.createOffer_v1=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".createOffer_v1().",JSON.stringify(c));var d=[this.waitUntilConnected(this.user_friendly_id()+".createOffer_v1"),this.waitTransceiverAndTrackReady(this.user_friendly_id()+".createOffer_v1")];Promise.all(d).then(function(){var a=e.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.createOffer);
e.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.createOffer,a.success,a.fail,e.fix_constraints(c));return a.prom()}).then(function(a){l.logger.info(e.user_friendly_id()+".createOffer_v1(): success callback received!!!");return(new H(e,e.param0(a).oid,w.ProxyMode.Remote)).syncBarrier()}).then(function(b){a&&a(b)})["catch"](function(a){void 0!=a&&(a=e.logRemoteInvokeError(a,".createOffer_v1() failed."),b&&b(a))})};b.prototype.createAnswer=function(a,b,c){l.logger.info(this.user_friendly_id()+".createAnswer() called.",
JSON.stringify(a));return this.isUnified()?void 0==a?this.createAnswer_v2():a?this.createAnswer_v2(a):this.createAnswer_v1(a,b,c):this.createAnswer_v1(a,b,c)};b.prototype.createAnswer_v2=function(a){var b=this;l.logger.info(this.user_friendly_id()+".createAnswer_v2() called.",JSON.stringify(a));return new Promise(function(c,e){b.createAnswer_v1(function(a){l.logger.info(b.user_friendly_id()+".createAnswer_v2(): got sdp!!!",JSON.stringify(a));a=new q(a.type,a.sdp);c(a)},function(a){void 0!=a&&(a=b.logRemoteInvokeError(a,
".createAnswer_v2() failed."),e(a))},a)})};b.prototype.createAnswer_v1=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".createAnswer_v1() called.",JSON.stringify(c));var d=[this.waitUntilConnected(this.user_friendly_id()+".createAnswer_v1"),this.waitTransceiverAndTrackReady(this.user_friendly_id()+".createAnswer_v1")];Promise.all(d).then(function(){var a=e.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.createAnswer);e.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.createAnswer,
a.success,a.fail,e.fix_constraints(c),{});return a.prom()}).then(function(a){l.logger.info(e.user_friendly_id()+".createAnswer_v1(): success callback received!!!");return(new H(e,e.param0(a).oid,w.ProxyMode.Remote)).syncBarrier()}).then(function(b){a&&a(b)})["catch"](function(a){a=e.logRemoteInvokeError(a,".createAnswer_v1() failed.");b&&b(a.message)})};b.prototype.updateSdpDescription=function(a){l.logger.info(this.user_friendly_id()+".updateSdpDescription() called.");var b=this;return new Promise(function(c,
e){var d=[];1==a?d.push(b.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.localDescription,{oid:0})):d.push(b.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.remoteDescription,{oid:0}));Promise.all(d).then(function(a){l.logger.info(b.user_friendly_id()+".updateSdpDescription() resolved.");return(new H(b,b.param0(a[0]).oid,w.ProxyMode.Remote)).syncBarrier()}).then(function(e){1==a?b.localDescription_=e:b.remoteDescription_=e;l.logger.info(b.user_friendly_id()+".updateSdpDescription() updated sdp");
c()})["catch"](function(a){b.logRemoteInvokeError(a,"sdp.syncBarrier() failed!");e()})})};b.prototype.sdpToString=function(a){var b,c,e="";a=a?a.split(/\r?\n/):[];try{for(var d=g(a),B=d.next();!B.done;B=d.next()){var r=B.value;-1!=r.indexOf("m=",0)?e+=r+"\\r\\n":-1!=r.indexOf("o=-",0)?e+=r+"\\r\\n":-1!=r.indexOf("a=ssrc",0)&&(e+=r+"\\r\\n")}}catch(A){b={error:A}}finally{try{B&&!B.done&&(c=d["return"])&&c.call(d)}finally{if(b)throw b.error;}}return e};b.prototype.setLocalDescription=function(a,b,c){l.logger.info(this.user_friendly_id()+
".setLocalDescription() called.",this.sdpToString(a.sdp));if(a instanceof q)return this.setLocalDescription_v2(a);if(a instanceof RTCSessionDescription&&b)return this.setLocalDescription_v1(a,b,c);b=void 0;a?b=new q(a.type,a.sdp):(l.logger.info(this.user_friendly_id()+".setLocalDescription() empty param1, setting sdp type to rollback"),a=void 0,a="have-remote-offer"==this.signalingState_?"answer":"have-local-pranswer"==this.signalingState_||"have-remote-pranswer"==this.signalingState_?"pranswer":
"offer",b=new q(a,""));return this.setLocalDescription_v2(b)};b.prototype.setLocalDescription_v2=function(a){var b=this;l.logger.info(this.user_friendly_id()+".setLocalDescription_v2() called.");return new Promise(function(c,e){b.waitUntilConnected(b.user_friendly_id()+".setLocalDescription_v2").then(function(){return(new H(b,0,w.ProxyMode.Local,{type:H.convertC2H(a.type),sdp:a.sdp})).syncBarrier()}).then(function(d){var B=b.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.setLocalDescription_v2),
r={type:H.convertC2H(a.type),sdp:a.sdp};b.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.setLocalDescription_v2,r,B.success,B.fail);B.prom().then(function(){b.localDescription_=d;l.logger.info(b.user_friendly_id()+".setLocalDescription_v2(): success callback received!!! updated localDescription_");Promise.all([]).then(function(){l.logger.info(b.user_friendly_id()+".setLocalDescription_v2() success.");c()})["catch"](function(a){a=b.logRemoteInvokeError(a,".prop.setLocalDescription_v2() failed!");
e(a)})})["catch"](function(a){a=b.logRemoteInvokeError(a,"setLocalDescription_v2() error callback received!");e(a)})})["catch"](function(a){a=b.logRemoteInvokeError(a,".setLocalDescription_v2() failed.");e(a)})})};b.prototype.setLocalDescription_v1=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".setLocalDescription_v1() called.");this.waitUntilConnected(this.user_friendly_id()+".setLocalDescription_v1").then(function(){return(new H(e,0,w.ProxyMode.Local,{type:H.convertC2H(a.type),
sdp:a.sdp})).syncBarrier()}).then(function(a){var d=e.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.setLocalDescription);e.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.setLocalDescription,[a],d.success,d.fail);d.prom().then(function(){e.localDescription_=a;l.logger.info(e.user_friendly_id()+".setLocalDescription_v1(): success callback received!!! updated localDescription_");Promise.all([]).then(function(){l.logger.info(e.user_friendly_id()+".setLocalDescription_v1() success.");b&&b()})["catch"](function(a){a=
e.logRemoteInvokeError(a,".prop.setLocalDescription_v1() failed.");c&&c(a.message)})})["catch"](function(a){a=e.logRemoteInvokeError(a,".setLocalDescription_v1() error callback received.");c&&c(a.message)})})["catch"](function(a){a=e.logRemoteInvokeError(a,".setLocalDescription_v1() failed.");c&&c(a.message)})};b.prototype.setRemoteDescription=function(a,b,c){l.logger.info(this.user_friendly_id()+".setRemoteDescription() called.",this.sdpToString(a.sdp));if(a instanceof q)return this.setRemoteDescription_v2(a);
if(a instanceof RTCSessionDescription&&b)return this.setRemoteDescription_v1(a,b,c);b=void 0;a?b=new q(a.type,a.sdp):(l.logger.info(this.user_friendly_id()+".setRemoteDescription() empty param1, setting sdp type to rollback"),a=void 0,a="have-remote-offer"==this.signalingState_?"answer":"have-local-pranswer"==this.signalingState_||"have-remote-pranswer"==this.signalingState_?"pranswer":"offer",b=new q(a,""));return this.setRemoteDescription_v2(b)};b.prototype.setRemoteDescription_v2=function(a){var b=
this;l.logger.info(this.user_friendly_id()+".setRemoteDescription_v2() called.");return new Promise(function(c,e){b.waitUntilConnected(b.user_friendly_id()+".setRemoteDescription_v2").then(function(){var d=new H(b,0,w.ProxyMode.Local,{type:H.convertC2H(a.type),sdp:a.sdp}),B=[];B.push(d.syncBarrier());var d=b.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.setRemoteDescription_v2),r={type:H.convertC2H(a.type),sdp:a.sdp};b.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.setRemoteDescription_v2,
r,d.success,d.fail);B.push(d.prom());Promise.all(B).then(function(a){l.logger.info(b.user_friendly_id()+".setRemoteDescription_v2(): remote success.");b.remoteDescription_=a[0];B=[];b.usingasynconly_||(b.isUnified()?B.push(b.getTransceiversAsync()):B.push(b.getSendersAsync()));Promise.all(B).then(function(a){l.logger.info(b.user_friendly_id()+".setRemoteDescription_v2(): final success.");c()})["catch"](function(a){a=b.logRemoteInvokeError(a,".prop.setRemoteDescription_v2() final failed.");e(a)})})["catch"](function(a){a=
b.logRemoteInvokeError(a,".prop.setRemoteDescription_v2() remote failed.");e(a)})})["catch"](function(a){a=b.logRemoteInvokeError(a,".setRemoteDescription_v2() failed.");e(a)})})};b.prototype.setRemoteDescription_v1=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".setRemoteDescription_v1() called.");this.waitUntilConnected(this.user_friendly_id()+".setRemoteDescription_v1").then(function(){return(new H(e,0,w.ProxyMode.Local,{type:H.convertC2H(a.type),sdp:a.sdp})).syncBarrier()}).then(function(a){var d=
e.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.setRemoteDescription);e.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.setRemoteDescription,[a],d.success,d.fail);d.prom().then(function(){e.remoteDescription_=a;l.logger.info(e.user_friendly_id()+".setRemoteDescription_v1(): success callback received!!! updated remoteDescription_");var d=[];e.usingasynconly_||(e.isUnified()?d.push(e.getTransceiversAsync()):d.push(e.getSendersAsync()));Promise.all(d).then(function(){l.logger.info(e.user_friendly_id()+
".setRemoteDescription_v1(): success.");b&&b()})["catch"](function(a){a=e.logRemoteInvokeError(a,".prop.setRemoteDescription_v1() failed.");c&&c(a.message)})})})["catch"](function(a){a=e.logRemoteInvokeError(a,".setRemoteDescription_v1() failed.");c&&c(a.message)})};b.prototype.getLocalStreams=function(){var a,b;l.logger.debug("PeerConnection.getLocalStreams() called. [oid="+this.object_id()+"]");try{for(var c=g(this.localStreams),e=c.next();!e.done;e=c.next())l.logger.debug(JSON.stringify(e.value))}catch(d){a=
{error:d}}finally{try{e&&!e.done&&(b=c["return"])&&b.call(c)}finally{if(a)throw a.error;}}return this.localStreams};b.prototype.getRemoteStreams=function(){var a,b;l.logger.debug(this.user_friendly_id()+".getRemoteStreams() called.");try{for(var c=g(this.remoteStreams),e=c.next();!e.done;e=c.next())l.logger.debug(JSON.stringify(e.value))}catch(d){a={error:d}}finally{try{e&&!e.done&&(b=c["return"])&&b.call(c)}finally{if(a)throw a.error;}}return this.remoteStreams};b.prototype.addTrack=function(a,b){return this.addTrackInternal(a,
b,!1)};b.prototype.addTrackAsync=function(a,b){return this.addTrackInternal(a,b,!0)};b.prototype.addTrackInternal=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".addTrackInternal() called. track.id = "+a.id+", streams = "+JSON.stringify(b)+", isAsync = "+c);this.incrementPendingTrackCount();var d=[];if(b)if(b instanceof m.RemoteStream)d.push(b.id),this.localStreams.push(b);else for(var B=0;B<b.length;B++)d.push(b[B].id),this.localStreams.push(b[B]);else l.logger.info(this.user_friendly_id()+
".addTrackInternal() empty streams passed in, continue with empty array");var r=new n.RtpSender(this,0,w.ProxyMode.Pseudo,this.isUnified());this.senders_.push(r);b=new Promise(function(b,c){e.waitUntilConnected(e.user_friendly_id()+".addTrackInternal").then(function(){return e.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.addTrack,[a],d)}).then(function(a){l.logger.info(e.user_friendly_id()+".addTrackInternal() success with oid: "+e.param0(a).oid);r.bind(e,e.param0(a).oid);r.syncBarrier().then(function(){l.logger.info(e.user_friendly_id()+
"sender.syncBarrier(): success");!e.usingasynconly_&&e.isUnified()?e.getTransceiversAsync().then(function(){e.decrementPendingTrackCount();b(r)})["catch"](function(a){e.logRemoteInvokeError(a,".addTrackInternal() getTransceiversAsync() failed!");e.decrementPendingTrackCount();c()}):(e.decrementPendingTrackCount(),b(r))})["catch"](function(a){e.logRemoteInvokeError(a,"sender.syncBarrier() failed!");e.decrementPendingTrackCount();c()})})["catch"](function(a){e.logRemoteInvokeError(a,"addTrack() failed!");
e.decrementPendingTrackCount();c()})});if(c)return b;l.logger.debug(this.user_friendly_id()+".addTrack() returning: "+r);return r};b.prototype.removeTrack=function(a){l.logger.info(this.user_friendly_id()+".removeTrack() called.");this.removeTrackAsync(a)};b.prototype.removeTrackAsync=function(a){var b=this;l.logger.info(this.user_friendly_id()+".removeTrackAsync() called.");this.incrementPendingTrackCount();for(var c=0;c<this.senders_.length;c++)this.senders_[c]==a&&this.senders_.splice(c,1);return new Promise(function(c,
e){b.waitUntilConnected(b.user_friendly_id()+".removeTrackAsync").then(function(){return b.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.removeTrack,[a])}).then(function(){l.logger.info(b.user_friendly_id()+".removeTrackAsync() success.");!b.usingasynconly_&&b.isUnified()?b.getTransceiversAsync().then(function(){b.decrementPendingTrackCount();c()})["catch"](function(a){b.logRemoteInvokeError(a,"removeTrackAsync() getTransceiversAsync() failed!");b.decrementPendingTrackCount();e(a)}):(b.decrementPendingTrackCount(),
c())})["catch"](function(a){b.logRemoteInvokeError(a,"removeTrackAsync() failed!");b.decrementPendingTrackCount();e(a)})})};b.prototype.addStream=function(a){var b=this;l.logger.info(this.user_friendly_id()+".addStream() called: "+JSON.stringify(a));this.localStreams.push(a);this.waitUntilConnected(this.user_friendly_id()+".addStream").then(function(){return b.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.addStream,[a],{})}).then(function(){l.logger.info(b.user_friendly_id()+".addStream() success.")})["catch"](function(a){b.logRemoteInvokeError(a,
"addStream() failed.")})};b.prototype.removeStream=function(a){var b=this;l.logger.info(this.user_friendly_id()+".removeStream() called: "+JSON.stringify(a));for(var c=0;c<this.localStreams.length;c++)this.localStreams[c]==a&&this.localStreams.splice(c,1);this.waitUntilConnected(this.user_friendly_id()+".removeStream").then(function(){return b.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.removeStream,[a])}).then(function(){l.logger.info(b.user_friendly_id()+".removeStream() success.")})["catch"](function(a){b.logRemoteInvokeError(a,
"removeStream() failed.")})};Object.defineProperty(b.prototype,"onaddstream",{get:function(){return this.onaddstream_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onaddstream() called.");this.onaddstream_=a;this.waitUntilConnected(this.user_friendly_id()+".onaddstream").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onaddstream);c.then(function(a){(new m.RemoteStreamEvent(b,b.param0(a).oid)).syncBarrier().then(function(a){l.logger.info(b.user_friendly_id()+
".onaddstream callback received!");void 0===b.remoteStreams.find(function(b){return void 0!=a.stream&&b.object_id()===a.stream.object_id()})&&b.remoteStreams.push(a.stream);b.onaddstream_&&(l.logger.info(b.user_friendly_id()+".onaddstream notified!!! "+a.stream.id),b.onaddstream_(a))})});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onaddstream,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,"set_onaddstream() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"onremovestream",{get:function(){return this.onremovestream_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_onremovestream() called.");this.onremovestream_=a;this.waitUntilConnected(this.user_friendly_id()+".onremovestream").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.onremovestream);c.then(function(a){(new m.RemoteStreamEvent(b,b.param0(a).oid)).syncBarrier().then(function(a){l.logger.info(b.user_friendly_id()+".onremovestream callback received! "+
a.stream.id);var c=b.remoteStreams.findIndex(function(b){return b.id==a.stream.id});0<=c&&b.remoteStreams.splice(c,1);if(b.onremovestream_)b.onremovestream_(a)})});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.onremovestream,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,"set_onremovestream() failed!")})},enumerable:!1,configurable:!0});b.prototype.getStats=function(a,b){void 0===b&&(b=!1);var c=this;return new Promise(function(e,d){c.isRedirected()?"function"!==typeof a&&null!=
a?(l.logger.error(this.user_friendly_id()+".getStats callback is of unsupported type "+typeof a),e()):c.waitUntilConnected(c.user_friendly_id()+".getStats").then(function(){var d=c.registerCallbacks(!0,!1,y.method_id_RTCPeerConnection_t.getStats);d.then(function(c){void 0===c.params||0===c.params.length||0===c.params[0].length?e():a?(a(C.StatsReport.fromJSON(JSON.parse(c.params[0]))),e()):b?e(new C.CitrixRTCStatsReport(JSON.parse(c.params[0]))):e(JSON.parse(c.params[0]))});return a?c.remoteInvoke(!1,
y.method_id_RTCPeerConnection_t.getStats,d.success):c.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.getStats_v2,d.success)})["catch"](function(a){c&&(a=c.logRemoteInvokeError(a,".getStats() failed!"),d(a))}):("function"===typeof a&&a({}),e())})};b.prototype.SendTelemetryData=function(a,b,c){x.getRedirector().telemetry.SendTelemetryData(r.tel_cmd.Data,a,b,c)};b.prototype.MillisecondstoDisplayformat_=function(a){var b,c;c=Math.floor(a/1E3);b=Math.floor(c/60);a=Math.floor(b/60);l.logger.debug(Math.floor(a/
24)+":"+a%24+":"+b%60+":"+c%60)};b.prototype.CalculateCallDurationandType_=function(){if(1==this.timeerstarted_){this.timeerstarted_=!1;this.callendTime_=(new Date).getTime();var a=this.callendTime_-this.callstartTime_;this.MillisecondstoDisplayformat_(a);a=Math.round(a/1E3);l.logger.info("Call Duration "+a);1==this.conferencecall_?this.SendTelemetryData(r.tel_key_ConferenceCallDuration,a,1):(1==this.audiocall_.active&&this.SendTelemetryData(r.tel_key_AudioCallDuration,a,1),1==this.videocall_.active&&
this.SendTelemetryData(r.tel_key_VideoCallDuration,a,1),1==this.screensharingcall_.active&&this.SendTelemetryData(r.tel_key_ScreensharingCallDuration,a,1));var b;1==this.firsttimelocaloffer_&&(b=this.callstartTime_-this.outgoingcallstart_);1==this.firsttimeremoteoffer_&&(b=this.callstartTime_-this.incomingcallstart_);this.MillisecondstoDisplayformat_(b);b=Math.round(b/1E3);l.logger.info("Call Establish Time "+b);1==this.incomingcall_?this.SendTelemetryData(r.tel_key_CallEstIncoming,b,1):1==this.outgoingcall_&&
this.SendTelemetryData(r.tel_key_CallEstOutgoing,b,1);this.SendTelemetryData(r.tel_key_PerfCallState,r.tel_CallState.idle,1)}};b.prototype.close=function(){var a=this;l.logger.info(this.user_friendly_id()+".close() called.");this.CalculateCallDurationandType_();this.unregisterStateChangeNotification(this.onStateChange);this.iceQ_=this.onnegotiationneeded=this.onsignalingstatechange=this.onicegatheringstatechange=this.oniceconnectionstatechange=this.onicecandidate=this.onaddstream=null;this.waitUntilConnected(this.user_friendly_id()+
".close").then(function(){return a.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.close)}).then(function(){a.release();l.logger.info(a.user_friendly_id()+".close() success.")})["catch"](function(b){a.logRemoteInvokeError(b,".close() failed.");a.release()})};b.prototype.createDTMFSender=function(a){l.logger.info(this.user_friendly_id()+".createDTMFSender() called.");var b,c=this.senders_;if(void 0===c||0===c.length)c=this.getSenders();void 0!=c&&(c=c.find(function(b){return b.track.id===a.id}),void 0!=
c&&(l.logger.info(this.user_friendly_id()+" returning RtpSender with oid:"+c.object_id()),b=c.dtmf));return b};Object.defineProperty(b.prototype,"usingAsyncOnly",{get:function(){return this.usingasynconly_},set:function(a){l.logger.info(this.user_friendly_id()+".usingAsyncOnly() called with async:"+a);void 0!=a&&null!=a&&(this.usingasynconly_=a)},enumerable:!1,configurable:!0});b.prototype.getSendersAsync=function(){l.logger.info(this.user_friendly_id()+".getSendersAsync() called.");return this.getSendersAsyncInternal()};
b.prototype.getSenders=function(){l.logger.info(this.user_friendly_id()+".getSenders() called. ");if(this.usingasynconly_)throw l.logger.error(this.user_friendly_id()+".getSenders(): throwing exception: not allowed when usingAsyncOnly is true!!!"),new DOMException(".getSenders() not allowed when usingAsyncOnly is true!!!");this.getSendersAsyncInternal();l.logger.info(this.user_friendly_id()+".getSenders() returning:"+this.senders_.length+" items");return this.senders_};b.prototype.getSendersAsyncInternal=
function(){var a=this;l.logger.info(this.user_friendly_id()+".getSendersAsyncInternal() called. "+this.senders_);return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".getSendersAsyncInternal").then(function(){l.logger.info(a.user_friendly_id()+".getSendersAsyncInternal invoking remote");return a.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.getSenders)}).then(function(c){l.logger.info(a.user_friendly_id()+".getSendersAsyncInternal remote success");var e=[],d=[];c.params[0].forEach(function(b){var c=
a.senders_.find(function(a){return a.object_id()===b.oid});void 0===c&&(l.logger.info(a.user_friendly_id()+" adding a RtpSender with oid:"+b.oid),c=new n.RtpSender(a,b.oid,w.ProxyMode.Remote,a.isUnified()));d.push(c.syncBarrier());e.push(c)});Promise.all(d).then(function(){a.senders_=e;l.logger.info(a.user_friendly_id()+".getSendersAsyncInternal: returning senders with ids ["+a.senders_.map(function(a){return a.object_id()})+"]");b(a.senders_)})["catch"](function(c){a.logRemoteInvokeError(c,".prop.getSendersAsyncInternal() failed.");
a.senders_=[];b(a.senders_)})})["catch"](function(c){a.logRemoteInvokeError(c,".getSendersAsyncInternal() failed.");a.senders_=[];b(a.senders_)})})};b.prototype.getReceiversAsync=function(){l.logger.info(this.user_friendly_id()+".getReceiversAsync() called.");return this.getReceiversAsyncInternal()};b.prototype.getReceivers=function(){l.logger.info(this.user_friendly_id()+".getReceivers() called. ");if(this.usingasynconly_)throw l.logger.error(this.user_friendly_id()+".getReceivers(): throwing exception: not allowed when usingAsyncOnly is true!!!"),
new DOMException(".getReceivers() not allowed when usingAsyncOnly is true!!!");this.getReceiversAsyncInternal();l.logger.info(this.user_friendly_id()+".getReceivers() returning:"+this.receivers_.length+" items");return this.receivers_};b.prototype.getReceiversAsyncInternal=function(){var a=this;l.logger.info(this.user_friendly_id()+".getReceiversAsyncInternal() called. "+this.receivers_);return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".getReceiversAsyncInternal").then(function(){return a.remoteInvoke(!1,
y.method_id_RTCPeerConnection_t.getReceivers)}).then(function(c){l.logger.info(a.user_friendly_id()+".getReceiversAsyncInternal: remote success.");var e=[],d=[];c.params[0].forEach(function(b){var c=a.receivers_.find(function(a){return a.object_id()===b.oid});void 0===c&&(l.logger.info(a.user_friendly_id()+" adding a RtpReceiver with oid:"+b.oid),c=new n.RtpReceiver(a,b.oid,w.ProxyMode.Remote,a.isUnified()));d.push(c.syncBarrier());e.push(c)});Promise.all(d).then(function(){a.receivers_=e;l.logger.info(a.user_friendly_id()+
".getReceiversAsyncInternal: returning receiver with ids ["+a.receivers_.map(function(a){return a.object_id()})+"]");b(a.receivers_)})["catch"](function(c){a.logRemoteInvokeError(c,".prop.getReceiversAsyncInternal() failed!");a.receivers_=[];b(a.receivers_)})})["catch"](function(c){a.logRemoteInvokeError(c,".getReceiversAsyncInternal() failed!");a.receivers_=[];b(a.receivers_)})})};b.prototype.addTransceiver=function(a,b){l.logger.info(this.user_friendly_id()+".addTransceiver() called: "+JSON.stringify(a)+
" init="+JSON.stringify(b));return this.addTransceiverInternal(a,b,!1)};b.prototype.addTransceiverAsync=function(a,b){l.logger.info(this.user_friendly_id()+".addTransceiverAsync() called: "+JSON.stringify(a)+" init="+JSON.stringify(b));return this.addTransceiverInternal(a,b,!0)};b.prototype.addTransceiverInternal=function(a,b,c){var e=this;l.logger.info(this.user_friendly_id()+".addTransceiverInternal() called: "+JSON.stringify(a)+" init="+JSON.stringify(b));this.incrementPendingTransceiverCount();
var d=u.RtcRtpTransceiverDirection.sendrecv,B=void 0;b&&(B=u.RtcRtpTransceiverInit.toRtcRtpTransceiverInit(b),B.direction&&(d=B.direction));var r=b;v.RemoteSession.isFeatureCallConstraintsSupported()&&(r=B);var A=new u.RtpTransceiver(this,0,w.ProxyMode.Pseudo,this.isUnified(),d);this.transceivers_.push(A);b=new Promise(function(b,c){e.waitUntilConnected(e.user_friendly_id()+".addTransceiverInternal").then(function(){return"string"===typeof a?e.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.addTransceiverWithKind,
a,r):e.remoteInvokeEx(!1,y.method_id_RTCPeerConnection_t.addTransceiverWithTrack,[a],r)}).then(function(a){l.logger.info(e.user_friendly_id()+".addTransceiverInternal() success with oid: "+e.param0(a).oid);A.bind(e,e.param0(a).oid);A.syncBarrier().then(function(){l.logger.info(e.user_friendly_id()+".addTransceiverInternal(): success");e.decrementPendingTransceiverCount();b(A)})["catch"](function(a){e.logRemoteInvokeError(a,".prop.addTransceiverInternal() failed!");e.decrementPendingTransceiverCount();
c()})})["catch"](function(a){e.logRemoteInvokeError(a,"addTransceiverInternal() failed!");e.decrementPendingTransceiverCount();c()})});l.logger.debug(this.user_friendly_id()+".addTransceiverInternal() returning:");return c?b:A};b.prototype.incrementPendingTransceiverCount=function(){++this.pendingtransceiver_};b.prototype.decrementPendingTransceiverCount=function(){0<this.pendingtransceiver_&&--this.pendingtransceiver_};b.prototype.incrementPendingTrackCount=function(){++this.pendingtrack_};b.prototype.decrementPendingTrackCount=
function(){0<this.pendingtrack_&&--this.pendingtrack_};b.prototype.waitTransceiverAndTrackReady=function(a){var b=this;return new Promise(function(c,e){l.logger.trace(b.user_friendly_id()+".waitTransceiverAndTrackReady(): pendingtransceiver_="+b.pendingtransceiver_+", pendingtrack_="+b.pendingtrack_);if(0==b.pendingtransceiver_&&0==b.pendingtrack_){for(;b.deferredOfferAnswers&&0<b.deferredOfferAnswers.length;)b.deferredOfferAnswers.shift().post(!0);c()}else b.deferredOfferAnswers.push(new h.deferred_action(c,
e,a)),b.checkTransceiverAndTrack(600,25)})};b.prototype.checkTransceiverAndTrack=function(a,b){var c=this;if(0>=a)for(l.logger.warning(".checkTransceiverAndTrack() timeout, disposing pending offer/answer requests!!!");this.deferredOfferAnswers&&0<this.deferredOfferAnswers.length;)this.deferredOfferAnswers.shift().post(!1);else setTimeout(function(a){if(0==c.pendingtransceiver_&&0==c.pendingtrack_)for(;c.deferredOfferAnswers&&0<c.deferredOfferAnswers.length;)c.deferredOfferAnswers.shift().post(!0);
else l.logger.debug('.checkTransceiverAndTrack(): count= "'+a),c.checkTransceiverAndTrack(--a,b)},b,a)};b.prototype.getTransceivers=function(){l.logger.info(this.user_friendly_id()+".getTransceivers() called. ");if(this.usingasynconly_)throw l.logger.error(this.user_friendly_id()+".getTransceivers(): throwing exception: not allowed when usingAsyncOnly is true!!!"),new DOMException(".getTransceivers() not allowed when usingAsyncOnly is true!!!");this.getTransceiversAsync();l.logger.info(this.user_friendly_id()+
".getTransceivers: returning transceivers with ids ["+this.transceivers_.map(function(a){return a.object_id()})+"]");return this.transceivers_};b.prototype.getTransceiversAsync=function(){var a=this;l.logger.info(this.user_friendly_id()+".getTransceiversAsync() called. ");return new Promise(function(b,c){if(!a.isUnified())return l.logger.info(a.user_friendly_id()+".getTransceiversAsync() called in non-Unified. "),Promise.resolve(a.transceivers_);a.waitUntilConnected(a.user_friendly_id()+".getTransceiversAsync").then(function(){return a.remoteInvoke(!1,
y.method_id_RTCPeerConnection_t.getTransceivers)}).then(function(c){l.logger.info(a.user_friendly_id()+".getTransceiversAsync() remote success.");var e=[],d=[];c.params[0].forEach(function(b){var c=a.transceivers_.find(function(a){return a.object_id()===b.oid});void 0===c&&(l.logger.info(a.user_friendly_id()+" adding a RtpTransceiver with oid:"+b.oid),c=new u.RtpTransceiver(a,b.oid,w.ProxyMode.Remote,a.isUnified()));d.push(c.syncBarrier());e.push(c)});Promise.all(d).then(function(){a.transceivers_=
e;l.logger.info(a.user_friendly_id()+".prop.getTransceiversAsync: returning transceiver with ids ["+a.transceivers_.map(function(a){return a.object_id()})+"]");b(a.transceivers_)})["catch"](function(c){a.logRemoteInvokeError(c,".prop.getTransceiversAsync() failed!");a.transceivers_=[];b(a.transceivers_)})})["catch"](function(c){a.logRemoteInvokeError(c,".getTransceiversAsync() failed!");a.transceivers_=[];b(a.transceivers_)})})};Object.defineProperty(b.prototype,"sctp",{get:function(){return this.sctp_},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ondatachannel",{get:function(){return this.ondatachannel_},set:function(a){var b=this;l.logger.info(this.user_friendly_id()+".set_ondatachannel() called.");this.ondatachannel_=a;this.waitUntilConnected(this.user_friendly_id()+".ondatachannel").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),y.method_id_RTCPeerConnection_t.ondatachannel);c.then(function(a){l.logger.info(b.user_friendly_id()+".ondatachannel callback received!!!");
if(null===b.remotedatachannel_||b.remotedatachannel_.object_id()!=b.param0(a).oid)b.remotedatachannel_=new z.RtcDataChannel(b,b.param0(a).oid,w.ProxyMode.Remote),b.remotedatachannel_.syncBarrier().then(function(){l.logger.info(b.user_friendly_id()+"remotedatachannel_.syncBarrier(): success");var a=new Event("ondatachannel");a.channel=b.remotedatachannel_;if(b.localdatachannel_&&!b.localdatachannel_.isdestroyed())b.localdatachannel_.syncBarrier().then(function(){l.logger.info(b.user_friendly_id()+
"ondatachannel(): notifying...");if(b.ondatachannel_)b.ondatachannel_(a)})["catch"](function(){l.logger.error(b.user_friendly_id()+"localdatachannel_.syncBarrier(): failed!")});else if(l.logger.info(b.user_friendly_id()+"ondatachannel(): notifying... (local channel is invalid)"),b.ondatachannel_)b.ondatachannel_(a)})["catch"](function(){l.logger.error(b.user_friendly_id()+"remotedatachannel_.syncBarrier(): failed!")})});return b.remoteInvoke(!0,y.method_id_RTCPeerConnection_t.ondatachannel,c.success)})["catch"](function(){l.logger.error(b.user_friendly_id()+
".ondatachannel() failed.")})},enumerable:!1,configurable:!0});b.prototype.fixDataChannelConfig=function(a){l.logger.info(this.user_friendly_id()+".fixDataChannelConfig() called: "+a);void 0==a&&(a={});void 0==a.negotiated&&void 0==a.id&&(a.negotiated=!1,a.id=-1);return a};b.prototype.createDataChannel=function(a,b){var c=this;l.logger.info(this.user_friendly_id()+".createDataChannel() called. label:"+a);this.localdatachannel_=new z.RtcDataChannel(this,0,w.ProxyMode.Pseudo);this.waitUntilConnected(this.user_friendly_id()+
".createDataChannel").then(function(){return c.remoteInvoke(!1,y.method_id_RTCPeerConnection_t.createDataChannel,a,c.fixDataChannelConfig(b))}).then(function(a){l.logger.info(c.user_friendly_id()+".createDataChannel() success with oid: "+c.param0(a).oid);c.localdatachannel_.bind(c,c.param0(a).oid);c.localdatachannel_.syncBarrier().then(function(){l.logger.info(c.user_friendly_id()+"channel.syncBarrier(): success")})["catch"](function(){l.logger.error(c.user_friendly_id()+"channel.syncBarrier(): failed!")})})["catch"](function(a){a=
c.param0(a);l.logger.error(c.user_friendly_id()+".createDataChannel() failed with error: "+a)});l.logger.info(this.user_friendly_id()+".createDataChannel() returning: "+this.localdatachannel_);return this.localdatachannel_};return b}(w.ProxyObject);a.PeerConnection=b},121:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.protocol_handler_manager=a.protocol_base=a.callback_base=a.completion_base=void 0;var f=d(851),k=d(293),p=function(){return function(a,b,d,g,n){this.resolve=a;this.reject=
b;this.reqid=n;this.cbid=d;this.completion_cb=g}}();a.completion_base=p;var g=function(){function a(b){this.id=b}a.prototype.resolve=function(a){f.logger.trace("callback.resolve() called. [id="+this.id+"]");null!=this.handler&&this.handler(a)};a.prototype.reject=function(a){null!=this.err_handler&&this.err_handler(a)};a.prototype.then=function(a){this.handler=a};a.prototype.prom=function(){var a=this;return new Promise(function(b,e){a.handler=b;a.err_handler=e})};return a}();a.callback_base=g;b=function(){function a(){this.reqs_=
[];this.ID_MAX=4294967296;this.cbid_allocator_=new k.number_allocator(0,this.ID_MAX,1);this.reqid_allocator_=new k.number_allocator(0,this.ID_MAX,1);this.reqs_w_id_=new Map;this.cbs_=new Map;this.cbidmap_=new Map}a.prototype.user_friendly_id=function(){return this.constructor.name};a.prototype.processRequestEx=function(a,b,e){void 0===e&&(e=-1);var d=this.reqid_allocator_.allocate();a=new p(a,b,void 0,null,d);this.reqs_w_id_.set(d,a);0<=e&&this.startCommandTimoutTimer(a,e);return d};a.prototype.processResponseEx=
function(a){var b;this.reqid_allocator_.deallocate(a);this.reqs_w_id_.has(a)?(b=this.reqs_w_id_.get(a),this.reqs_w_id_["delete"](a)):f.logger.warning(this.user_friendly_id()+".processResponse(). reqid="+a+" Cant find request!!!!");b&&this.stopCommandTimoutTimer(b);return b};a.prototype.startCommandTimoutTimer=function(a,b){var e=this,d=setTimeout(function(){a.timerId=void 0;e.processResponseEx(a.reqid);a.reject()},b);a.timerId=d};a.prototype.stopCommandTimoutTimer=function(a){a.timerId&&(clearTimeout(a.timerId),
a.timerId=void 0)};a.prototype.processRequest=function(a,b){var e=new p(a,b);this.reqs_.push(e)};a.prototype.processResponse=function(){return this.reqs_.shift()};a.prototype.clearRequests=function(){var a=this;this.reqs_w_id_.forEach(function(b,e){b.reject();a.cbid_allocator_.deallocate(e)});this.reqs_w_id_.clear();this.reqs_.forEach(function(a,b){a.reject()});this.reqs_=[]};a.prototype.registerCallback=function(a){var b=this,e=this.cbid_allocator_.allocate();a&&this.unregisterCallback(a);this.cbidmap_.set(a,
e);a=new g(e);0>e&&f.logger.warning(this.user_friendly_id()+".registerCallback(). !!!! ran out of cbid !!!!");f.logger.debug(this.user_friendly_id()+".registerCallback(). cbid="+e);a.completion_cb=function(a){b.unregisterCallback(a)};var d=new p(a.resolve.bind(a),a.reject.bind(a),a.id,a.completion_cb);this.cbs_.set(e,d);return a};a.prototype.unregisterCallback=function(a){var b;"string"==typeof a&&this.cbidmap_.has(a)?(b=this.cbidmap_.get(a),this.cbidmap_["delete"](a)):"number"==typeof a&&(b=a);this.cbs_.has(b)&&
(this.cbid_allocator_.deallocate(b),this.cbs_["delete"](b))};a.prototype.clearCallbacks=function(){var a=this;f.logger.info(this.user_friendly_id()+".clearCallbacks().");this.cbs_.forEach(function(b,e){b.reject();a.cbid_allocator_.deallocate(e)});this.cbs_.clear();this.cbidmap_.clear()};a.prototype.getCallback=function(a){if("string"==typeof a&&this.cbidmap_.has(a))a=this.cbidmap_.get(a);else if("number"!=typeof a){f.logger.warning(this.user_friendly_id()+".getCallback(). !!!! invalid cbid !!!!");
return}return this.cbs_.get(a)};return a}();a.protocol_base=b;b=function(){function a(){}a.findHandler=function(b){return a.handlers_.find(function(a){return a.name==b})};a.addProtocolHandler=function(b){void 0==a.handlers_.find(function(a){return a.name==b.name})&&a.handlers_.push(b)};a.oninit=function(b,d){a.handlers_.forEach(function(a,e){a.init(b,d)})};a.ondeinit=function(){a.handlers_.forEach(function(a,b){a.deinit()})};a.removeAllHandlers=function(){a.handlers_.splice(0,a.handlers_.length)};
a.removeProtocolHandler=function(b){var d=a.handlers_.findIndex(function(a){return a.name==b});0<=d&&a.handlers_.splice(d,1)};a.handlers_=[];return a}();a.protocol_handler_manager=b},658:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===
c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,h=[],u;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)h.push(d.value)}catch(w){u={error:w}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(u)throw u.error;}}return h},p=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=
a.concat(k(arguments[b]));return a},g=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],e=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.ProxyObject=a.ProxyMode=
a.ProxyReadyState=a.callback=a.rpc_callback=void 0;var e=d(946),t=d(851),x=d(545),m=d(247),n=d(550),w=d(293);b=d(121);var h=d(610),c=function(){return function(a,b){this.id=a;this.is_null=b}}();a.rpc_callback=c;var u=function(a){function b(e,d,h){var l=a.call(this,e)||this;l.success=new c(e<<16,d);l.fail=new c(e<<16|1,d);l.oneShot=h;return l}f(b,a);return b}(b.callback_base);a.callback=u;var v;(function(a){a[a.NotConfigured=0]="NotConfigured";a[a.Configured=1]="Configured";a[a.Error=2]="Error";a[a.Destroyed=
3]="Destroyed"})(v=a.ProxyReadyState||(a.ProxyReadyState={}));var z;(function(a){a[a.Local=0]="Local";a[a.Remote=1]="Remote";a[a.Pseudo=2]="Pseudo"})(z=a.ProxyMode||(a.ProxyMode={}));d=function(){function a(b,c,d,h,u,w){var g=this;void 0===u&&(u=null);void 0===w&&(w=[]);for(var f=[],k=6;k<arguments.length;k++)f[k-6]=arguments[k];this.hdxms=e.getRedirector();this.minimalLogging=!1;this.iid=c;this.oid=d;this.mode=h;this.proxystate=v.NotConfigured;this.deferredActions=[];this.pendingSyncBarriers=[];
this.cbs=new Map;if(h===z.Local){k=!1;this.iid===n.class_id_t.EngineControl&&(k=!0);var q=this;this.hdxms.startRedirection(k,this.user_friendly_id()).then(function(){g.oid=a.nextId++;t.logger.info(g.user_friendly_id()+" assigned local oid:"+g.oid);return new Promise(function(a,b){q.waitUntilConnectedEx(q.user_friendly_id()+".ctor()",w).then(function(){var a=q.oidsFromProxyOjbects(w).concat(f),b=n.WebrpcClassLibInfoUtil.getMethodFeatureByid(c,0);t.logger.info(q.user_friendly_id()+".ctor() all parameter rpc objects are ready, feature is "+
JSON.stringify(b));return q.hdxms.WSSendObjectWrapper(b,c,0,x.WsJsonUtil.createMessageByid.apply(x.WsJsonUtil,p([!1,!1,x.ws_msg_type_t.req,c,0,q.oid],a)))}).then(function(b){t.logger.info(q.user_friendly_id()+".ctor() success.");a(b)})["catch"](function(a){t.logger.error(q.user_friendly_id()+".ctor() failed."+JSON.stringify(a));b()})})}).then(function(a){t.logger.trace("ProxyObject: setting state to configured. (iid: "+g.iid+" oid: "+g.oid+")");var c=g.oid;q.proxystate=v.Configured;q.oid=g.param0(a);
t.logger.info(g.user_friendly_id()+" assigned remote oid for local oid:"+c);q.onConnected();u&&u();m.getGC().trackObject(g,b)})["catch"](function(){q.proxystate=v.Error;q.onConnected()})}else h===z.Remote&&(this.proxystate=v.Configured,m.getGC().trackObject(this,b))}a.prototype.syncBarrierDeep=function(a,b){var c=!0;0<this.pendingSyncBarriers.length&&(c=!1);this.pendingSyncBarriers.push(new h.deferred_action(a,b,this.user_friendly_id()+".syncBarrier"));t.logger.info(this.user_friendly_id()+".syncBarrierDeep() queing request for:"+
this.oid+", rv:"+c+", items:"+this.pendingSyncBarriers.length);return c};a.prototype.syncBarrierResolve=function(a){for(t.logger.info(this.user_friendly_id()+".syncBarrierResolve() items:"+this.pendingSyncBarriers.length);this.pendingSyncBarriers&&0<this.pendingSyncBarriers.length;)t.logger.info(this.user_friendly_id()+".syncBarrierResolve() items:"+this.pendingSyncBarriers.length+" resolving request for:"+this.oid),this.pendingSyncBarriers.shift().postResolve(a)};a.prototype.syncBarrierReject=function(a){for(t.logger.info(this.user_friendly_id()+
".syncBarrierReject() items:"+this.pendingSyncBarriers.length);this.pendingSyncBarriers&&0<this.pendingSyncBarriers.length;)t.logger.info(this.user_friendly_id()+".syncBarrierReject() rejecting request for:"+this.oid),this.pendingSyncBarriers.shift().postReject(a)};Object.defineProperty(a.prototype,"proxyreadystate",{get:function(){return this.proxystate},set:function(a){this.proxystate=a},enumerable:!1,configurable:!0});a.prototype.bind=function(a,b){t.logger.trace("ProxyObject: binding object. (iid: "+
this.iid+" oid: "+b+" mode: "+this.mode+")");if(this.mode===z.Pseudo){this.proxystate=v.Configured;var c=this.oid;this.oid=b;t.logger.info(this.user_friendly_id()+" assigned remote oid:"+b+" for local oid:"+c);this.onConnected();m.getGC().trackObject(this,a);this.mode=z.Remote}else this.mode===z.Remote?t.logger.info("ProxyObject: binding already complete."):t.logger.error("ProxyObject: binding failure. incorrect mode!")};a.prototype.reconstructor=function(a,b,c){for(var e=this,d=[],h=3;h<arguments.length;h++)d[h-
3]=arguments[h];this.proxystate=v.NotConfigured;this.deferredActions=[];h=n.WebrpcClassLibInfoUtil.getMethodFeatureByid(b,0);this.hdxms.WSSendObjectWrapper(h,b,0,x.WsJsonUtil.createMessageByid.apply(x.WsJsonUtil,p([!1,!1,x.ws_msg_type_t.req,b,0,this.oid],d))).then(function(b){t.logger.trace("ProxyObject: setting state to configured. (iid: "+e.iid+" oid: "+e.oid+")");var c=e.oid;e.proxystate=v.Configured;e.oid=e.param0(b);t.logger.info(e.user_friendly_id()+" assigned remote oid for local oid:"+c);
e.onConnected();m.getGC().trackObject(e,a)})["catch"](function(){e.proxystate=v.Error;e.onConnected()})};a.prototype.setParent=function(a){m.getGC().setParent(this,a)};a.prototype.release=function(){this.minimalLogging||t.logger.info(this.user_friendly_id()+".release() called.");m.getGC().releaseObject(this)};a.prototype.destroy=function(){this.minimalLogging||t.logger.info(this.user_friendly_id()+".destroy() called.");this.proxystate=v.Destroyed;var a=n.WebrpcClassLibInfoUtil.getMethodFeatureByid(this.iid,
0);this.hdxms.WSSendObjectWrapper(a,this.iid,0,x.WsJsonUtil.createMessageByid(!1,!0,x.ws_msg_type_t.req,this.iid,0,this.oid));this.clearCallbacks()};a.prototype.isdestroyed=function(){return this.proxystate==v.Destroyed};a.prototype.onConnected=function(){for(;this.deferredActions&&0<this.deferredActions.length;)this.deferredActions.shift().post(this.proxystate==v.Configured)};a.prototype.isPseudo=function(){return this.mode==z.Pseudo};a.prototype.checkState=function(a,b,c){var e=this;0>=a?(t.logger.error("ProxyObject.checkState() timeout waiting for connection response! failed. (iid: "+
e.iid+" oid: "+e.oid+" name: "+c+")"),e.onConnected()):setTimeout(function(a,c){if(e.proxystate==v.Configured)e.onConnected();else if(e.proxystate==v.Error)e.onConnected();else if(e.proxystate==v.Destroyed)e.onConnected();else e.checkState(--a,b,c)},b,a,c)};a.prototype.waitUntilConnected=function(a){var b=this;return new Promise(function(c,e){b?(t.logger.trace("ProxyObject.waitUntilConnected(): readyState="+b.proxystate+". (iid: "+b.iid+" oid: "+b.oid+")"),b.proxystate==v.Destroyed?(b.onConnected(),
t.logger.trace("rejecting already destroyed Object:"+b.user_friendly_id()),e("Object already destroyed :"+b.user_friendly_id())):b.proxystate==v.Configured?(b.onConnected(),c()):b.proxystate==v.Error?(t.logger.trace("ProxyObject.waitUntilConnected(): readyState="+b.proxystate+". (iid: "+b.iid+" oid: "+b.oid+")"),b.onConnected(),e()):(t.logger.info('ProxyObject.waitUntilConnected(): deferring action "'+a+'". (iid: '+b.iid+" oid: "+b.oid+")"),b.deferredActions.push(new h.deferred_action(c,e,a)),b.checkState(600,
25,a))):e("Invalid Object")})};a.prototype.remoteInvoke=function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];return this.remoteInvokeWithInterfaceId.apply(this,p([this.iid,a,b],c))};a.prototype.remoteInvokeWithInterfaceId=function(a,b,c){for(var e=[],d=3;d<arguments.length;d++)e[d-3]=arguments[d];if(this.proxystate==v.Destroyed)return t.logger.trace("rejecting already destroyed Object:"+this.user_friendly_id()),Promise.reject("Cannot invoke destroyed object :"+this.user_friendly_id());
if(this.proxystate==v.Error)return t.logger.trace("rejecting already error state Object:"+this.user_friendly_id()),Promise.reject("Cannot invoke object in Error state:"+this.user_friendly_id());d=n.WebrpcClassLibInfoUtil.getMethodFeatureByid(a,c);return this.hdxms.WSSendObjectWrapper(d,a,c,x.WsJsonUtil.createMessageByid.apply(x.WsJsonUtil,p([b,!1,x.ws_msg_type_t.req,a,c,this.oid],e)))};a.prototype.waitUntilConnectedEx=function(a,b){var c=this;return new Promise(function(e,d){var h,u,w,n;if(c){var f=
[];try{for(var v=g(b),G=v.next();!G.done;G=v.next()){var B=G.value;if(B instanceof Array)try{for(var F=(w=void 0,g(B)),N=F.next();!N.done;N=F.next()){var z=N.value;f.push(z.waitUntilConnected(a+"."+z.user_friendly_id()))}}catch(m){w={error:m}}finally{try{N&&!N.done&&(n=F["return"])&&n.call(F)}finally{if(w)throw w.error;}}else f.push(B.waitUntilConnected(a+"."+B.user_friendly_id()))}}catch(m){h={error:m}}finally{try{G&&!G.done&&(u=v["return"])&&u.call(v)}finally{if(h)throw h.error;}}Promise.all(f).then(function(){t.logger.info(c.user_friendly_id()+
".waitUntilConnectedEx() success.");e()})["catch"](function(a){c.logRemoteInvokeError(a,".waitUntilConnectedEx(): failed.");d()})}else d("Invalid Object")})};a.prototype.oidsFromProxyOjbects=function(a){var b,c,e,d,h=[];try{for(var u=g(a),w=u.next();!w.done;w=u.next()){var n=w.value;if(n instanceof Array){a=[];try{for(var f=(e=void 0,g(n)),v=f.next();!v.done;v=f.next())a.push({oid:v.value.object_id()})}catch(G){e={error:G}}finally{try{v&&!v.done&&(d=f["return"])&&d.call(f)}finally{if(e)throw e.error;
}}h.push(a)}else h.push({oid:n.object_id()})}}catch(G){b={error:G}}finally{try{w&&!w.done&&(c=u["return"])&&c.call(u)}finally{if(b)throw b.error;}}return h};a.prototype.remoteInvokeEx=function(a,b,c){for(var e=[],d=3;d<arguments.length;d++)e[d-3]=arguments[d];if(this.proxystate==v.Destroyed)return t.logger.trace("rejecting already destroyed Object:"+this.user_friendly_id()),Promise.reject("Cannot invoke destroyed object :"+this.user_friendly_id());if(this.proxystate==v.Error)return t.logger.trace("rejecting already error state Object:"+
this.user_friendly_id()),Promise.reject("Cannot invoke object in Error state:"+this.user_friendly_id());var h=this;return new Promise(function(d,u){h.waitUntilConnectedEx(h.user_friendly_id()+".remoteInvokeEx",c).then(function(){t.logger.info(h.user_friendly_id()+".remoteInvokeEx() all parameter rpc objects are ready.");var d=h.oidsFromProxyOjbects(c).concat(e),u=n.WebrpcClassLibInfoUtil.getMethodFeatureByid(h.iid,b);return h.hdxms.WSSendObjectWrapper(u,h.iid,b,x.WsJsonUtil.createMessageByid.apply(x.WsJsonUtil,
p([a,!1,x.ws_msg_type_t.req,h.iid,b,h.oid],d)))}).then(function(a){t.logger.info(h.user_friendly_id()+".remoteInvokeEx() success.");d(a)})["catch"](function(){t.logger.error(h.user_friendly_id()+".remoteInvokeEx() failed.");u()})})};a.prototype.logRemoteInvokeError=function(a,b){var c="",e=a;e?c=b+" with error: "+JSON.stringify(e.message):(c=this.param0(a),e=0!==Object.keys(c).length?new DOMException(b+" with error: "+JSON.stringify(c),this.user_friendly_id()):new DOMException(b,this.user_friendly_id()),
c=e.message);this.isdestroyed()||t.logger.error(this.user_friendly_id()+c);return e};a.prototype.allocate_cbid=function(){return a.cbid_allocator_.allocate()};a.prototype.deallocate_cbid=function(b){a.cbid_allocator_.deallocate(b)};a.prototype.registerCallbacks=function(a,b,c){var e=this,d=this.allocate_cbid();a=new u(d,b,a);0>d&&t.logger.warning(this.user_friendly_id()+".registerCallbacks(). !!!! ran out of cbid !!!!");b||(this.cbs.set(d,c),a.completion_cb=function(a,b){e.unregisterCallbacks(a)},
this.hdxms.registerHandler(this.iid,this.oid,c,a));return a};a.prototype.unregisterCallbacks=function(a){this.cbs.has(a)?(this.hdxms.unregisterHandler(this.iid,this.oid,a),this.deallocate_cbid(a),this.cbs["delete"](a)):t.logger.warning(this.user_friendly_id()+".unregisterCallbacks(). mid="+this.cbs.get(a)+" cbid="+a+" Cant find callback handler registration!!!!")};a.prototype.clearCallbacks=function(){var a,b;this.minimalLogging||t.logger.info(this.user_friendly_id()+".clearCallbacks().");try{for(var c=
g(Array.from(this.cbs.keys())),e=c.next();!e.done;e=c.next()){var d=e.value;this.hdxms.unregisterHandler(this.iid,this.oid,d);this.deallocate_cbid(d)}}catch(h){a={error:h}}finally{try{e&&!e.done&&(b=c["return"])&&b.call(c)}finally{if(a)throw a.error;}}this.cbs.clear()};a.prototype.object_id=function(){return this.oid};a.prototype.param0=function(a){var b={};a&&a.params&&(b=a.params[0]);return b};a.prototype.isNullCallback=function(a){return void 0==a||null==a};a.prototype.user_friendly_id=function(){var a=
this.constructor.name;0<=this.iid&&(a=n.class_id_t[this.iid]);return a+"["+this.oid+"]"};a.prototype.isRedirected=function(){return this.hdxms.isRedirected()};a.prototype.isValid=function(){return!(this.proxystate===v.Error||this.proxystate===v.Destroyed)};a.prototype.registerStateChangeNotification=function(a){this.hdxms.registerStateChangeNotification(a)};a.prototype.unregisterStateChangeNotification=function(a){this.hdxms.unregisterStateChangeNotification(a)};Object.defineProperty(a.prototype,
"useMinimalLogging",{get:function(){return this.minimalLogging},set:function(a){this.minimalLogging=a},enumerable:!1,configurable:!0});a.nextId=0;a.CBID_MAX=65536;a.cbid_allocator_=new w.number_allocator(0,a.CBID_MAX,1);return a}();a.ProxyObject=d},144:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,
c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__awaiter||function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,B){function h(a){try{u(e.next(a))}catch(b){B(b)}}function r(a){try{u(e["throw"](a))}catch(b){B(b)}}function u(a){a.done?c(a.value):d(a.value).then(h,r)}u((e=e.apply(a,b||[])).next())})},p=this&&this.__generator||function(a,b){function c(a){return function(b){return e([a,
b])}}function e(c){if(h)throw new TypeError("Generator is already executing.");for(;d;)try{if(h=1,r&&(u=c[0]&2?r["return"]:c[0]?r["throw"]||((u=r["return"])&&u.call(r),0):r.next)&&!(u=u.call(r,c[1])).done)return u;if(r=0,u)c=[c[0]&2,u.value];switch(c[0]){case 0:case 1:u=c;break;case 4:return d.label++,{value:c[1],done:!1};case 5:d.label++;r=c[1];c=[0];continue;case 7:c=d.ops.pop();d.trys.pop();continue;default:if(!(u=d.trys,u=0<u.length&&u[u.length-1])&&(6===c[0]||2===c[0])){d=0;continue}if(3===c[0]&&
(!u||c[1]>u[0]&&c[1]<u[3]))d.label=c[1];else if(6===c[0]&&d.label<u[1])d.label=u[1],u=c;else if(u&&d.label<u[2])d.label=u[2],d.ops.push(c);else{u[2]&&d.ops.pop();d.trys.pop();continue}}c=b.call(a,d)}catch(B){c=[6,B],r=0}finally{h=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var d={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},h,r,u,w;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();return w={next:c(0),"throw":c(1),"return":c(2)},
"function"===typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w},g=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,h=[],r;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)h.push(d.value)}catch(u){r={error:u}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(r)throw r.error;}}return h},e=this&&this.__values||function(a){$jscomp.initSymbol();
$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],e=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.NavigatorUserMedia=a.RemoteMediaStreamConstraints=a.RemoteMediaTrackConstraints=a.RemoteMediaTrackConstraintSet=
a.RemoteDevices=a.RemoteDeviceInfo=a.DeviceInfo=a.RemoteStreamEvent=a.RemoteStream=a.RemoteMediaTrack=a.enumeratedDevices=void 0;var t=d(550),x=d(658),m=d(610),n=d(851),w=d(946),h=d(394),c=d(259),u=d(650),v=d(973),z;a.enumeratedDevices=z;var y=function(){return function(a,b){this.type=a;this.target=b}}(),l=function(){function a(){this.is_local_clone=!1;this.clone_id=this.clone_count=0}a.prototype.clone=function(){this.clone_count++;var b=new a;b.is_local_clone=!0;b.clone_id=this.clone_count;return b};
a.prototype.synchronize=function(a){return k(this,void 0,void 0,function(){return p(this,function(b){return this.is_local_clone?[2,a.asyncClone()]:[2,Promise.resolve(a)]})})};return a}(),C=function(a){function b(c,e,d){void 0===d&&(d=x.ProxyMode.Remote);c=a.call(this,c,t.class_id_t.MediaStreamTrack,e,d)||this;c.enabled_=!0;c.muted=!1;c.readyState_="live";c.refCount_=0;c.refCount_++;c.clone_state=new l;return c}f(b,a);b.createPseudo=function(a,c,e,d){a=new b(a,-1,x.ProxyMode.Pseudo);a.id=c;a.kind=
e;a.label=d;return a};b.prototype.dumpInfo=function(){n.logger.debug(this.user_friendly_id()+".dumpInfo() [id="+this.id+"] kind="+this.kind+" label="+this.label+" refcount="+this.refcount+" enabled="+this.enabled+" readyState="+this.readyState)};Object.defineProperty(b.prototype,"refcount",{get:function(){return this.refCount_},enumerable:!1,configurable:!0});b.prototype.addRef=function(){this.refCount_++;n.logger.debug(this.user_friendly_id()+".addRef() called. [id="+this.id+"] refcount="+this.refCount_)};
Object.defineProperty(b.prototype,"onended",{get:function(){n.logger.debug(this.user_friendly_id()+".get_onended() called. [id="+this.id+"]");return this.onended_},set:function(a){var b=this;n.logger.info(this.user_friendly_id()+".set_onended() called. [id="+this.id+"]");this.onended_=a;this.waitUntilConnected("MediaStreamTrack.onended").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),t.method_id_MediaStreamTrack_t.onended);c.then(function(a){n.logger.info(b.user_friendly_id()+"onended event received!!!");
a=new y("ended",b);b.readyState_="ended";b.onended_(a)});return b.remoteInvoke(!0,t.method_id_MediaStreamTrack_t.onended,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".onended failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onmute",{get:function(){n.logger.info(this.user_friendly_id()+".get_onmute() called. [id="+this.id+"]");return this.onmute_},set:function(a){var b=this;n.logger.info(this.user_friendly_id()+".set_onmute() called. [id="+this.id+"]");
this.onmute_=a;this.waitUntilConnected("MediaStreamTrack.onmute").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),t.method_id_MediaStreamTrack_t.onmute);c.then(function(a){n.logger.info(b.user_friendly_id()+"onmute event received!!!");a=new y("mute",b);b.muted=!0;b.onmute_(a)});return b.remoteInvoke(!0,t.method_id_MediaStreamTrack_t.onmute,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".onmute failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"onunmute",{get:function(){n.logger.debug(this.user_friendly_id()+".get_onunmute() called. [id="+this.id+"]");return this.onunmute_},set:function(a){var b=this;n.logger.info(this.user_friendly_id()+".set_onunmute() called. [id="+this.id+"]");this.onunmute_=a;this.waitUntilConnected("MediaStreamTrack.onunmute").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),t.method_id_MediaStreamTrack_t.onunmute);c.then(function(a){n.logger.info("onunmute event received!!!");a=new y("unmute",b);
b.muted=!1;b.onunmute_(a)});return b.remoteInvoke(!0,t.method_id_MediaStreamTrack_t.onunmute,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".onunmute failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onstop",{set:function(a){this.onstop_=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"enabled",{get:function(){n.logger.debug(this.user_friendly_id()+".get_enabled() called. [id="+this.id+", value="+this.enabled_+"]");return this.enabled_},
set:function(a){var b=this;n.logger.info(this.user_friendly_id()+".set_enabled() called. [id="+this.id+", value="+a+"]");this.waitUntilConnected("MediaStreamTrack.set_enabled").then(function(){b.remoteInvoke(!0,t.method_id_MediaStreamTrack_t.enabled,a).then(function(){b.enabled_=a})["catch"](function(a){b.logRemoteInvokeError(a,".enabled failed!")})})["catch"](function(a){b.logRemoteInvokeError(a,".enabled failed! remote object is not ready yet, try again later!")})},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"readyState",{get:function(){n.logger.debug(this.user_friendly_id()+".get_readyState() called. [id="+this.id+"]");return this.readyState_},enumerable:!1,configurable:!0});b.prototype.asyncClone=function(){return k(this,void 0,void 0,function(){var a,c,e;return p(this,function(d){switch(d.label){case 0:return[4,this.waitUntilConnected("RemoteMediaTrack.asyncClone")];case 1:return d.sent(),[4,this.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.clone)];case 2:return a=
d.sent(),c=this.param0(a),e=new b(this,c.oid),[2,e.syncBarrier()]}})})};b.prototype.deepClone=function(a){var c=this;n.logger.info(this.user_friendly_id()+".deepClone() called. [id="+this.id+"]");if(u.RemoteSession.isFeatureTrackCloneWithIdSupported()){var e=new b(null,0,x.ProxyMode.Pseudo),d=new l;e.id=a?a:this.id+"."+d.clone_id.toString();e.label=this.label;e.kind=this.kind;e.enabled_=this.enabled_;e.muted=this.muted;e.readyState_=this.readyState_;e.trackSettings_=this.trackSettings_;e.clone_state=
d;e.constraints_=this.constraints_;e.capabilities_=this.capabilities_;e.onended=this.onended;e.onmute=this.onmute;e.onunmute=this.onunmute;e.onstop=this.onstop;this.waitUntilConnected("RemoteMediaTrack.deepClone").then(function(){return c.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.clone,e.id)}).then(function(a){n.logger.info(c.user_friendly_id()+".deepClone() success with oid: "+c.param0(a).oid);e.bind(null,c.param0(a).oid);e.syncBarrier().then(function(){n.logger.info(c.user_friendly_id()+"track.syncBarrier(): success")})["catch"](function(a){c.logRemoteInvokeError(a,
"track.syncBarrier() failed!")})})["catch"](function(a){c.logRemoteInvokeError(a,".deepClone() failed!")});return e}n.logger.warning(this.user_friendly_id()+".deepClone() is not supported!")};b.prototype.localClone=function(){n.logger.info(this.user_friendly_id()+".localClone() called. [id="+this.id+"]");var a=this.clone_state.clone(),c=new b(this,this.object_id());c.id=this.id+"."+a.clone_id.toString();c.label=this.label;c.kind=this.kind;c.enabled_=this.enabled_;c.muted=this.muted;c.readyState_=
this.readyState_;c.trackSettings_=this.trackSettings_;c.clone_state=a;c.constraints_=this.constraints_;c.capabilities_=this.capabilities_;return c};b.prototype.clone=function(){n.logger.info(this.user_friendly_id()+".clone() called. [id="+this.id+"]");return u.RemoteSession.isFeatureTrackCloneWithIdSupported()?this.deepClone():this.localClone()};b.prototype.stop=function(){var a=this;n.logger.info(this.user_friendly_id()+".stop() called. [id="+this.id+"] refcount="+this.refCount_);this.readyState_=
"ended";if(0<this.refCount_&&(this.refCount_--,0===this.refCount_&&(n.logger.info(this.user_friendly_id()+".stop() called. [id="+this.id+"] remote invoking..."),this.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.stop)["catch"](function(b){a.logRemoteInvokeError(b,".stop failed!")}),"video"==this.kind&&"remoteapp-track"==this.label&&v.ScreenSharing.screenSharingInstance().stopAppshare(),null!==this.onstop_&&void 0!=this.onstop_)))this.onstop_()};b.prototype.getCapabilities=function(){return this.capabilities_};
b.prototype.getConstraints=function(){return this.constraints_};b.prototype.getSettings=function(){return"audio"==this.kind?function(a){return{deviceId:a.deviceId,echoCancellation:a.echoCancellation}}(this.trackSettings_):function(a){return{aspectRatio:a.aspectRatio,deviceId:a.deviceId,frameRate:a.frameRate,height:a.height,width:a.width}}(this.trackSettings_)};b.prototype.getChannelCount=function(){return 2};b.prototype.applyConstraints=function(a){var b=this;n.logger.info(this.user_friendly_id()+
".applyConstraints() called.");return new Promise(function(c,e){b.waitUntilConnected("MediaStreamTrack.applyConstraints").then(function(){return Promise.all([b.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.applyConstraints,a),b.syncBarrier()])})["catch"](function(a){b.logRemoteInvokeError(a,"applyConstraints failed!");e({name:"OverconstrainedError",message:"Failed to apply constraints."})}).then(function(){b.constraints_=a;return b.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.getConstraints)}).then(function(a){b.constraints_=
b.param0(a)})["catch"](function(a){b.logRemoteInvokeError(a,".syncBarrier() remote client does not support getConstraints method. Ignore it")}).then(function(){return c()})})};b.convertReadyState=function(a){return 0==a?"live":"ended"};b.prototype.copyFrom=function(a){this.kind=a.kind;this.id=a.id;this.label=a.label;this.enabled_=a.enabled_;this.muted=a.muted;this.trackSettings_=a.trackSettings_;this.capabilities_=a.capabilities_;this.readyState_=a.readyState_;n.logger.debug("\n            "+this.user_friendly_id()+
" copy tracks property from new track:\n            kind="+a.kind+" id="+a.id+" label="+a.label+" enabled="+a.enabled+" muted="+a.muted+" readyState="+a.readyState+"\n        ")};b.prototype.syncBarrier=function(){var a=this;n.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(c,e){a.syncBarrierDeep(c,e)&&a.waitUntilConnected("MediaStreamTrack.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.kind,""),a.remoteInvoke(!1,
t.method_id_MediaStreamTrack_t.id,""),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.label,""),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.enabled,!1),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.muted,!1),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.readyState,0),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.getSettings),a.remoteInvoke(!1,t.method_id_MediaStreamTrack_t.getCapabilities)])}).then(function(c){var e=0;c=g(c.map(function(b){return a.param0(b)}),8);a.kind=c[0];a.id=c[1];
a.label=c[2];a.enabled_=c[3];a.muted=c[4];e=c[5];a.trackSettings_=c[6];a.capabilities_=c[7];a.readyState_=b.convertReadyState(e);a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};b.prototype.dispose=function(){n.logger.info(this.user_friendly_id()+".dispose() called. [id="+this.id+"]");this.stop();0===this.refCount_&&this.release()};return b}(x.ProxyObject);a.RemoteMediaTrack=C;var r=function(){return function(){}}(),D=
function(a){function b(c,e,d,h,r){void 0===d&&(d=x.ProxyMode.Local);void 0===h&&(h=[]);var w=this;n.logger.info("RemoteStream.ctor() streamid="+r+" num tracks="+h.length);d==x.ProxyMode.Remote||r||(r=b.uuidv4());w=r&&u.RemoteSession.isFeatureTrackCloneWithIdSupported()?a.call(this,c,t.class_id_t.MediaStream,e,d,null,[h],r)||this:a.call(this,c,t.class_id_t.MediaStream,e,d,null,[h])||this;w.id=r;w.tracks_=h;w.clone_state=new l;w.active_=!0;w.tracks_.forEach(function(a){a.setParent(w)});return w}f(b,
a);b.uuidv4=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})};b.generateIdWithPrefix=function(a){var b=this.uuidv4(),c=b.indexOf("-");0<c&&(b=b.substring(0,c));return a+b};b.createPseudo=function(a,c,e){return new b(a,-1,x.ProxyMode.Pseudo,e,c)};b.prototype.dumpInfo=function(){var a,b;n.logger.debug(this.user_friendly_id()+".dumpInfo() [id="+this.id+"] active="+this.active_+" num tracks="+
this.tracks_.length);try{for(var c=e(this.tracks_),d=c.next();!d.done;d=c.next()){var h=d.value;h&&h.dumpInfo()}}catch(r){a={error:r}}finally{try{d&&!d.done&&(b=c["return"])&&b.call(c)}finally{if(a)throw a.error;}}};b.prototype.toggleAudio=function(a){var b,c;n.logger.info(this.user_friendly_id()+".toggleAudio() called: "+a);var d=this.getAudioTracks();try{for(var h=e(d),r=h.next();!r.done;r=h.next())r.value.enabled=a}catch(u){b={error:u}}finally{try{r&&!r.done&&(c=h["return"])&&c.call(h)}finally{if(b)throw b.error;
}}};b.prototype.toJSON=function(){var a=new r;a.id=this.id;a.active=this.active_;a.oid=this.object_id();return"RemoteStream:"+JSON.stringify(a)};Object.defineProperty(b.prototype,"active",{get:function(){var a=this;n.logger.info(this.user_friendly_id()+".get active() called. [id="+this.id+"] active="+this.active_);w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_stream_active_status)?this.waitUntilConnected("MediaStream.active").then(function(){n.logger.debug(a.user_friendly_id()+".get active() remote invoking");
return a.remoteInvoke(!1,t.method_id_MediaStream_t.active,!1)}).then(function(b){a.active_=a.param0(b);n.logger.info(a.user_friendly_id()+".get active() success, active="+a.active_)})["catch"](function(b){a.active_=!0;a.logRemoteInvokeError(b,".get active() failed! active="+a.active_)}):this.active_=!0;return this.active_},enumerable:!1,configurable:!0});b.prototype.getAudioTracks=function(){var a,b;n.logger.debug(this.user_friendly_id()+".getAudioTracks() called. [id="+this.id+"]");var c=[];try{for(var d=
e(this.tracks_),h=d.next();!h.done;h=d.next()){var r=h.value;"audio"==r.kind&&c.push(r)}}catch(u){a={error:u}}finally{try{h&&!h.done&&(b=d["return"])&&b.call(d)}finally{if(a)throw a.error;}}return c};b.prototype.getVideoTracks=function(){var a,b;n.logger.debug(this.user_friendly_id()+".getVideoTracks() called. [id="+this.id+"]");var c=[];try{for(var d=e(this.tracks_),h=d.next();!h.done;h=d.next()){var r=h.value;"video"==r.kind&&c.push(r)}}catch(u){a={error:u}}finally{try{h&&!h.done&&(b=d["return"])&&
b.call(d)}finally{if(a)throw a.error;}}return c};b.prototype.getTracks=function(){n.logger.debug(this.user_friendly_id()+".getTracks() called. [id="+this.id+"]");return this.tracks_};b.prototype.getTrackById=function(a){var b,c;n.logger.debug(this.user_friendly_id()+".getTrackById() called. [id="+this.id+"]");try{for(var d=e(this.tracks_),h=d.next();!h.done;h=d.next()){var r=h.value;if(r.id==a)return r}}catch(u){b={error:u}}finally{try{h&&!h.done&&(c=d["return"])&&c.call(d)}finally{if(b)throw b.error;
}}};b.prototype.addTrack=function(a){var b=this;n.logger.info(this.user_friendly_id()+".addTrack() called. [id="+this.id+"]");this.tracks_.push(a);a&&a.dumpInfo();var c=this;this.waitUntilConnected("MediaStream.addTrack").then(function(){n.logger.info(c.user_friendly_id()+".addTrack remote invoking");return c.remoteInvokeEx(!1,t.method_id_MediaStream_t.addTrack,[a])}).then(function(){n.logger.info(c.user_friendly_id()+".addTrack success")})["catch"](function(a){b.logRemoteInvokeError(a,".addTrack failed!")})};
b.prototype.removeTrack=function(a){var b=this;n.logger.info(this.user_friendly_id()+".removeTrack() called. [id="+this.id+"]");var c=this.tracks_.indexOf(a);this.tracks_.splice(c,1);var e=this;this.waitUntilConnected("MediaStream.removeTrack").then(function(){n.logger.info(e.user_friendly_id()+".removeTrack remote invoking");return e.remoteInvokeEx(!1,t.method_id_MediaStream_t.removeTrack,[a])}).then(function(){n.logger.info(e.user_friendly_id()+".removeTrack success")})["catch"](function(a){b.logRemoteInvokeError(a,
".removeTrack failed!")})};b.prototype.asyncClone=function(){return k(this,void 0,void 0,function(){var a,c,e;return p(this,function(d){switch(d.label){case 0:return n.logger.info(this.user_friendly_id()+".asyncClone() called. [id="+this.id+"]"),[4,this.waitUntilConnected("asyncClone")];case 1:return d.sent(),[4,this.remoteInvoke(!1,t.method_id_MediaStream_t.clone)];case 2:return a=d.sent(),n.logger.info(a),c=this.param0(a),e=new b(this,c.oid,x.ProxyMode.Remote),[2,e.syncBarrier()]}})})};b.prototype.deepClone=
function(a){var c=this;n.logger.info(this.user_friendly_id()+".deepClone() called. [id="+this.id+"]");if(u.RemoteSession.isFeatureTrackCloneWithIdSupported()){var e=[];this.tracks_.forEach(function(a){e.push(a.deepClone())});var d=new l;a=a?a:this.id+"."+d.clone_id.toString();var h=new b(null,0,x.ProxyMode.Local,e,a);h.id=a;h.active_=this.active_;h.clone_state=d;h.tracks_=e;h.waitUntilConnected("RemoteStream.deepClone").then(function(){h.syncBarrier().then(function(){n.logger.info(c.user_friendly_id()+
"stream.syncBarrier(): success")})["catch"](function(a){c.logRemoteInvokeError(a,"stream.syncBarrier() failed!")})})["catch"](function(a){c.logRemoteInvokeError(a,".deepClone() failed!")});return h}n.logger.warning(this.user_friendly_id()+".deepClone() is not supported!")};b.prototype.localClone=function(){n.logger.info(this.user_friendly_id()+".localClone() called. [id="+this.id+"]");var a=this.clone_state.clone(),c=new b(this,this.object_id(),x.ProxyMode.Remote);c.id=this.id+"."+a.clone_id.toString();
c.active_=this.active_;this.tracks_.forEach(function(a){a.addRef()});c.tracks_=this.tracks_;c.clone_state=a;return c};b.prototype.clone=function(){n.logger.info(this.user_friendly_id()+".clone() called. [id="+this.id+"]");return u.RemoteSession.isFeatureTrackCloneWithIdSupported()?this.deepClone():this.localClone()};b.prototype.onTrackStop=function(){n.logger.info(this.user_friendly_id()+".onTrackStop id="+this.id);0===this.tracks_.filter(function(a){return"live"===a.readyState}).length&&this.release()};
b.prototype.updateTracks=function(a){var b=this,c=[],e=this.tracks_.filter(function(a){return a.isPseudo()});n.logger.debug(this.user_friendly_id()+".updateTracks new_tracks="+a+" current pseudoTracks="+e);a.forEach(function(a){var d=e.findIndex(function(b){return b.id===a.id});0<=d&&(n.logger.info("\n                    "+b.user_friendly_id()+" bind pseudo track track-id:"+e[d].id+" \n                    to track with track-id:"+a.id+" and object-id:"+a.object_id()+"\n                "),e[d].bind(b,
a.object_id()),e[d].copyFrom(a),a=e.splice(d,1).shift());t.BUILD_TYPE_SDK||(a.onstop=b.onTrackStop.bind(b));c.push(a)});this.tracks_=c};b.prototype.syncBarrier=function(){var a=this;n.logger.info(this.user_friendly_id()+".syncBarrier() called. [id="+this.id+"]");return new Promise(function(b,c){a.syncBarrierDeep(b,c)&&a.waitUntilConnected("MediaStream.syncBarrier").then(function(){var b=[];b.push(a.remoteInvoke(!1,t.method_id_MediaStream_t.id,""));w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_stream_active_status)&&
b.push(a.remoteInvoke(!1,t.method_id_MediaStream_t.active,!0));b.push(a.remoteInvoke(!1,t.method_id_MediaStream_t.getTracks));return Promise.all(b)}).then(function(b){var c,d;n.logger.info(a.user_friendly_id()+".syncBarrier() remote success");w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_stream_active_status)?(b=g(b.map(function(b){return a.param0(b)}),3),a.id=b[0],a.active_=b[1],b=b[2]):(b=g(b.map(function(b){return a.param0(b)}),2),a.id=b[0],b=b[1],a.active_=!0);var h=[],r=function(b){var c=
a.tracks_.find(function(a){return a.object_id()===b.oid});void 0===c&&(n.logger.info(a.user_friendly_id()+" adding a RemoteMediaTrack with oid:"+b.oid),c=new C(a,b.oid));h.push(c.syncBarrier())};try{for(var u=e(b),A=u.next();!A.done;A=u.next())r(A.value)}catch(l){c={error:l}}finally{try{A&&!A.done&&(d=u["return"])&&d.call(u)}finally{if(c)throw c.error;}}return Promise.all(h)}).then(function(b){a.updateTracks(b);a.syncBarrierResolve(a)})["catch"](function(b){a.logRemoteInvokeError(b,".syncBarrier failed!");
a.syncBarrierReject()})})};b.prototype.dispose=function(){n.logger.info(this.user_friendly_id()+".dispose() called. [id="+this.id+"]");this.tracks_.forEach(function(a){a.dispose()});this.release()};return b}(x.ProxyObject);a.RemoteStream=D;b=function(a){function b(c,e){return a.call(this,c,t.class_id_t.MediaStreamEvent,e,x.ProxyMode.Remote)||this}f(b,a);b.prototype.syncBarrier=function(){var a=this;n.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){a.syncBarrierDeep(b,
c)&&a.waitUntilConnected("MediaStreamEvent.syncBarrier").then(function(){return a.remoteInvoke(!1,t.method_id_MediaStreamEvent_t.stream,{oid:0})}).then(function(b){return(new D(a,b.params[0].oid,x.ProxyMode.Remote)).syncBarrier()}).then(function(b){a.stream=b;a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};return b}(x.ProxyObject);a.RemoteStreamEvent=b;var K=function(){return function(a,b,c,e){this.deviceId=a;this.groupId=
b;this.kind=c;this.label=e}}();a.DeviceInfo=K;var M=function(a){function b(c){return a.call(this,null,t.class_id_t.MediaDeviceInfo,c,x.ProxyMode.Remote)||this}f(b,a);b.convertKind=function(a){return 0==a?"audioinput":1==a?"audiooutput":"videoinput"};b.prototype.syncBarrier=function(){var a=this;n.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(c,e){a.syncBarrierDeep(c,e)&&a.waitUntilConnected("RemoteDeviceInfo.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,
t.method_id_MediaDeviceInfo_t.deviceId,""),a.remoteInvoke(!1,t.method_id_MediaDeviceInfo_t.kind,0),a.remoteInvoke(!1,t.method_id_MediaDeviceInfo_t.label,""),a.remoteInvoke(!1,t.method_id_MediaDeviceInfo_t.groupId,"")])}).then(function(c){a.kind=b.convertKind(a.param0(c.splice(1,1)[0]));c=g(c.map(function(b){return a.param0(b)}),3);a.deviceId=c[0];a.label=c[1];a.groupId=c[2];a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};
return b}(x.ProxyObject);a.RemoteDeviceInfo=M;b=function(b){function c(){var a=b.call(this,null,t.class_id_t.MediaDevices,0,x.ProxyMode.Local,function(){a.setDeviceChangeCallback()})||this;a.devices_=[];a.enumerateMarker="enumerateDevicesPrivate";a.enumerateRemoteMarker="enumeratedDevicesPrivate-Remote";a.shareSystemAudio_=!1;a.pendingEnumerateDevice_=[];a.panelid_=-1;return a}f(c,b);Object.defineProperty(c.prototype,"panelid",{set:function(a){this.panelid_=a},enumerable:!1,configurable:!0});c.prototype.clearPanelId=
function(){this.panelid_=-1};c.prototype.enumerateDevices=function(){var a=this;return 0<this.devices_.length&&0==this.pendingEnumerateDevice_.length?new Promise(function(b,c){n.logger.info(a.user_friendly_id()+".enumerateDevices: returning cached devices");b(a.devices_)}):this.enumerateDevicesPrivate(!1)};c.prototype.enumerateDevicesPrivate=function(a){return w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_enumerate_devices_v2)?this.enumerateDevicesPrivateV2(a):this.enumerateDevicesPrivateV1(a)};
c.prototype.postEnumerateDevicesResult=function(){var a,b,c=!0,d=0;try{for(var h=e(this.pendingEnumerateDevice_),r=h.next();!r.done;r=h.next()){var u=r.value;if(0==c&&u.name==this.enumerateRemoteMarker)break;u.postWithResult(!0,this.devices_);d++;c=!1}}catch(w){a={error:w}}finally{try{r&&!r.done&&(b=h["return"])&&b.call(h)}finally{if(a)throw a.error;}}0<d&&this.pendingEnumerateDevice_.splice(0,d)};c.prototype.enumerateDevicesPrivateV2=function(b){var c=this;n.logger.info(this.user_friendly_id()+".enumerateDevicesPrivateV2() called. refresh:"+
b+" pending:"+this.pendingEnumerateDevice_.length);return new Promise(function(e,d){1==b||0==c.pendingEnumerateDevice_.length?(c.pendingEnumerateDevice_.push(new m.deferred_action(e,d,c.enumerateRemoteMarker)),c.waitUntilConnected("RemoteDevices.enumerateDevicesPrivateV2").then(function(){n.logger.info(c.user_friendly_id()+".enumerateDevicesPrivateV2() remote invoking...");return c.remoteInvoke(!1,t.method_id_MediaDevices_t.enumerateDevicesV2)}).then(function(b){var e=[];b.params[0].forEach(function(a){a=
new K(a.deviceId,a.groupId,M.convertKind(a.kind),a.label);e.push(a)});c.devices_=e;a.enumeratedDevices=z=e;n.logger.info(c.user_friendly_id()+".enumerateDevicesPrivateV2: resolving enumerated devices: "+JSON.stringify(c.devices_));c.postEnumerateDevicesResult()})["catch"](function(b){c.devices_=[];a.enumeratedDevices=z=[];c.logRemoteInvokeError(b,".enumerateDevicesPrivateV2() failed, resolving with empty list.");c.postEnumerateDevicesResult()})):(c.pendingEnumerateDevice_.push(new m.deferred_action(e,
d,c.enumerateMarker)),n.logger.info(c.user_friendly_id()+".enumerateDevicesPrivateV2() not remoting this call..."))})};c.prototype.enumerateDevicesPrivateV1=function(b){var c=this;n.logger.info(this.user_friendly_id()+".enumerateDevicesPrivateV1() called. refresh:"+b+" pending:"+this.pendingEnumerateDevice_.length);return new Promise(function(e,d){1==b||0==c.pendingEnumerateDevice_.length?(c.pendingEnumerateDevice_.push(new m.deferred_action(e,d,c.enumerateRemoteMarker)),c.waitUntilConnected("RemoteDevices.enumerateDevicesPrivateV1").then(function(){n.logger.info(c.user_friendly_id()+
".enumerateDevicesPrivateV1() remote invoking...");return c.remoteInvoke(!1,t.method_id_MediaDevices_t.enumerateDevices)}).then(function(a){var b=[];a.params[0].forEach(function(a){a=new M(a.oid);b.push(a.syncBarrier())});return Promise.all(b)}).then(function(b){var e=[];b.forEach(function(a){var b=new K(a.deviceId,a.groupId,a.kind,a.label);e.push(b);a.release()});c.devices_=e;a.enumeratedDevices=z=e;n.logger.info(c.user_friendly_id()+".enumerateDevicesPrivateV1: resolving enumerated devices: "+JSON.stringify(c.devices_));
c.postEnumerateDevicesResult()})["catch"](function(b){a.enumeratedDevices=z=[];c.devices_=[];c.logRemoteInvokeError(b,".enumerateDevicesPrivateV1() failed, resolving with empty list.");c.postEnumerateDevicesResult()})):(c.pendingEnumerateDevice_.push(new m.deferred_action(e,d,c.enumerateMarker)),n.logger.info(c.user_friendly_id()+".enumerateDevicesPrivateV1() not remoting this call..."))})};c.prototype.getDisplayMedia=function(a){var b=this;return new Promise(function(c,e){b.waitUntilConnected("RemoteDevices.getDisplayMedia").then(function(){return v.ScreenSharing.screenSharingInstance().setActiveSource(b.panelid_,
u.RemoteSession.isFeaturAppshareSupported())}).then(function(c){void 0!==a.video&&null!==a.video&&void 0!==c&&(a.video.deviceId=c);w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_share_system_audio)&&(void 0!==a.audio&&"boolean"!==typeof a.audio?n.logger.warning("Non-boolean audio constraints"):a.audio=a.audio||b.shareSystemAudio_);c=b.prepareDisplayConstraints(a);c=H.toRemoteMediaStreamConstraints(c,!0);return b.remoteInvoke(!1,t.method_id_MediaDevices_t.getDisplayMedia,c)}).then(function(a){return(new D(null,
a.params[0].oid,x.ProxyMode.Remote)).syncBarrier()}).then(function(a){c(a)})["catch"](function(a){v.ScreenSharing.screenSharingInstance().isAppshareActive()&&v.ScreenSharing.screenSharingInstance().stopAppshare();a=b.logRemoteInvokeError(a,".getDisplayMedia() failed!");e(a)})})};c.prototype.setDeviceChangeCallback=function(){var a=this;n.logger.info(this.user_friendly_id()+".set_DeviceChangeCallback() called.");this.waitUntilConnected("MediaDevices.ondevicechange").then(function(){var b=a.registerCallbacks(!1,
!1,t.method_id_MediaDevices_t.ondevicechange);b.then(function(){n.logger.info(a.user_friendly_id()+".ondevicechange(): callback received!!!");a.enumerateDevicesPrivate(!0).then(function(){navigator.mediaDevices.dispatchEvent(new CustomEvent("devicechange"))})["catch"](function(){navigator.mediaDevices.dispatchEvent(new CustomEvent("devicechange"))})});return a.remoteInvoke(!0,t.method_id_MediaDevices_t.ondevicechange,b.success)})["catch"](function(b){a.logRemoteInvokeError(b,".set_ondevicechange() failed!")})};
c.prototype.prepareDisplayConstraints=function(a){if(w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_common_media_constraints))return a;var b={frameRate:15,width:{max:1920},height:{max:1080}};if(void 0!==a.video&&null!==a.video){var c=a.video;void 0!==c.frameRate&&void 0!==c.width&&void 0!==c.height&&(b.frameRate=c.frameRate,b.width.max=c.width.max||c.width,b.height.max=c.height.max||c.height)}return a.audio?{video:b,audio:a.audio}:{video:b}};return c}(x.ProxyObject);a.RemoteDevices=b;var q=
function(){function a(){}a.toRemoteMediaTrackConstraintSet=function(a){var b=void 0;c.Util.hasValue(a)&&(b={},c.Util.hasValue(a.width)&&(b.width=a.width),c.Util.hasValue(a.height)&&(b.height=a.height),c.Util.hasValue(a.aspectRatio)&&(b.aspectRatio=a.aspectRatio),c.Util.hasValue(a.frameRate)&&(b.frameRate=a.frameRate),c.Util.hasValue(a.facingMode)&&(b.facingMode=a.facingMode),c.Util.hasValue(a.sampleRate)&&(b.sampleRate=a.sampleRate),c.Util.hasValue(a.sampleSize)&&(b.sampleSize=a.sampleSize),c.Util.hasValue(a.volume)&&
(b.volume=a.volume),c.Util.hasValue(a.echoCancellation)&&(b.echoCancellation=a.echoCancellation),c.Util.hasValue(a.autoGainControl)&&(b.autoGainControl=a.autoGainControl),c.Util.hasValue(a.noiseSuppression)&&(b.noiseSuppression=a.noiseSuppression),c.Util.hasValue(a.latency)&&(b.latency=a.latency),c.Util.hasValue(a.channelCount)&&(b.channelCount=a.channelCount),c.Util.hasValue(a.deviceId)&&(b.deviceId=a.deviceId),c.Util.hasValue(a.groupId)&&(b.groupId=a.groupId),c.Util.hasValue(a.maxFrameRate)&&(b.maxFrameRate=
a.maxFrameRate),c.Util.hasValue(a.maxHeight)&&(b.maxHeight=a.maxHeight),c.Util.hasValue(a.maxWidth)&&(b.maxWidth=a.maxWidth),c.Util.hasValue(a.minHeight)&&(b.minHeight=a.minHeight),c.Util.hasValue(a.minWidth)&&(b.minWidth=a.minWidth),c.Util.hasValue(a.sourceId)&&(b.sourceId=a.sourceId));return b};return a}();a.RemoteMediaTrackConstraintSet=q;var I=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);b.defMandatory=function(a){var b=a;c.Util.hasValue(a)?(c.Util.hasValue(a.maxFrameRate)||
(b.maxFrameRate=30),c.Util.hasValue(a.minWidth)||(b.minWidth=360),c.Util.hasValue(a.maxWidth)||(b.maxWidth=1920),c.Util.hasValue(a.minHeight)||(b.minHeight=180),c.Util.hasValue(a.maxHeight)||(b.maxHeight=1080)):b={maxFrameRate:30,minWidth:360,maxWidth:1920,minHeight:180,maxHeight:1080};return b};b.toRemoteMediaTrackConstraints=function(a){var b=void 0;c.Util.hasValue(a)&&(b=q.toRemoteMediaTrackConstraintSet(a),b.advanced=[],c.Util.hasValue(a.advanced)&&a.advanced.forEach(function(a){a=q.toRemoteMediaTrackConstraintSet(a);
b.advanced.push(a)}),c.Util.hasValue(a.mandatory)&&(b.mandatory="boolean"!=typeof a.mandatory?q.toRemoteMediaTrackConstraintSet(a.mandatory):a.mandatory));return b};return b}(q);a.RemoteMediaTrackConstraints=I;var H=function(){function a(){}a.getDefaultAudioDeviceId=function(){if(void 0!==z){var a=z.find(function(a){return"audioinput"===a.kind&&"default"===a.deviceId});if(void 0!==a)return a.deviceId}return""};a.getDefaultVideoDeviceId=function(){if(void 0!==z){var a=z.find(function(a){return"videoinput"===
a.kind});if(void 0!==a)return a.deviceId}return""};a.toRemoteMediaStreamConstraints=function(b,e){void 0===e&&(e=!1);n.logger.info("RemoteMediaStreamConstraints.toRemoteMediaStreamConstraints() in constraints:"+JSON.stringify(b));var d={};c.Util.hasValue(b)&&(c.Util.hasValue(b.audio)&&("boolean"!=typeof b.audio?(d.audio=I.toRemoteMediaTrackConstraints(b.audio),0!=Object.keys(d.audio).length&&c.Util.hasValue(d.audio)||(d.audio={dummy:1}),t.BUILD_TYPE_SDK&&0==e&&a.isConstraintsAudioDeviceIdEmpty(b)&&
(d.audio.deviceId=a.getDefaultAudioDeviceId(),n.logger.info("RemoteMediaStreamConstraints.toRemoteMediaStreamConstraints() set default audio deviceId:'"+d.audio.deviceId+"'"))):d.audio=b.audio),c.Util.hasValue(b.peerIdentity)&&(d.peerIdentity=b.peerIdentity),c.Util.hasValue(b.video)&&("boolean"!=typeof b.video?(d.video=I.toRemoteMediaTrackConstraints(b.video),0==e&&"boolean"!=typeof d.video.mandatory&&(d.video.mandatory=I.defMandatory(d.video.mandatory),t.BUILD_TYPE_SDK&&a.isConstraintsVideoSourceIdEmpty(b)&&
(d.video.mandatory.sourceId=a.getDefaultVideoDeviceId(),n.logger.info("RemoteMediaStreamConstraints.toRemoteMediaStreamConstraints() set default video sourceId:'"+d.video.mandatory.sourceId+"'")))):(d.video=b.video,1==b.video&&0==e&&t.BUILD_TYPE_SDK&&a.isConstraintsVideoSourceIdEmpty(b)&&(d.video={},d.video.mandatory=I.defMandatory(void 0),d.video.mandatory.sourceId=a.getDefaultVideoDeviceId(),n.logger.info("RemoteMediaStreamConstraints.toRemoteMediaStreamConstraints() set default video sourceId:'"+
d.video.mandatory.sourceId+"'")))));n.logger.info("RemoteMediaStreamConstraints.toRemoteMediaStreamConstraints() out constraints:"+JSON.stringify(d));return d};a.isConstraintsAudioDeviceIdEmpty=function(a){var b=!1;c.Util.hasValue(a)&&c.Util.hasValue(a.audio)&&("boolean"==typeof a.audio?1==a.audio&&(b=!0):(a=a.audio,!a||!1!==c.Util.hasValue(a.deviceId)&&""!==a.deviceId||(b=!0)));return b};a.isConstraintsVideoSourceIdEmpty=function(a){var b=!1;if(c.Util.hasValue(a)&&c.Util.hasValue(a.video))if("boolean"==
typeof a.video)1==a.video&&(b=!0);else if(a=a.video)(a=a.mandatory)&&!1!==c.Util.hasValue(a.sourceId)&&""!==a.sourceId||(b=!0);return b};return a}();a.RemoteMediaStreamConstraints=H;var E=function(){function a(){this.video=this.audio=a.EmptyCapabilities}a.EmptyCapabilities={codecs:[],headerExtensions:[]};return a}();b=function(a){function b(){return a.call(this,null,t.class_id_t.NavigatorUserMedia,0,x.ProxyMode.Local)||this}f(b,a);b.getCapabilities=function(a){n.logger.info("NavigatorUserMedia.getCapabilities for type="+
a+" capabilities="+JSON.stringify(b.capabilities[a]));return b.capabilities[a]};b.resetCapabilities=function(){b.capabilities=new E};b.prototype.getCapabilities=function(){var a=this;n.logger.info(this.user_friendly_id()+".getCapabilities...");return new Promise(function(c,e){a.waitUntilConnected("NavigatorUserMedia.getCapabilities").then(function(){return Promise.all([a.remoteInvoke(!1,t.method_id_NavigatorUserMedia_t.getCapabilities,"audio"),a.remoteInvoke(!1,t.method_id_NavigatorUserMedia_t.getCapabilities,
"video")])}).then(function(e){b.capabilities.audio=a.param0(e[0]);b.capabilities.video=a.param0(e[1]);n.logger.info(a.user_friendly_id()+".getCapabilities capabilities="+JSON.stringify(b.capabilities));c(b.capabilities)})["catch"](function(b){e(a.logRemoteInvokeError(b,".getCapabilities failed!"))})})};b.prototype.setCodecCapabilities=function(a){var b=this;n.logger.info(this.user_friendly_id()+".setCodecCapabilities : set codecCapabilities to "+JSON.stringify(a));return new Promise(function(c,e){b.waitUntilConnected("NavigatorUserMedia.setCodecCapabilities").then(function(){return b.remoteInvoke(!1,
t.method_id_NavigatorUserMedia_t.setCodecCapabilities,a)}).then(function(){n.logger.info(b.user_friendly_id()+".setCodecCapabilities() success.");c(!0);b.getCapabilities()})["catch"](function(a){a=b.logRemoteInvokeError(a,".setCodecCapabilities() failed!");e(a)})})};b.prototype.webkitGetUserMedia=function(a,b,c){return this.getUserMedia(a,b,c)};b.prototype.LogTelemetryDevice_=function(a){try{if("undefined"!==typeof a.audio){var b=a.audio.deviceId,c;z.forEach(function(a){b==a.deviceId&&(c=a.label)});
n.logger.debug(c);this.SendTelemetryData(h.tel_key_AudioDeviceUsed,c,0)}if("undefined"!==typeof a.video){var e=a.video.mandatory,d;e&&z.forEach(function(a){e.sourceId==a.deviceId&&(d=a.label)});n.logger.debug(d);this.SendTelemetryData(h.tel_key_VideoDeviceUsed,d,0)}}catch(r){n.logger.error(r)}};b.prototype.getUserMedia=function(a,b,c){n.logger.info(this.user_friendly_id()+".getUserMedia() called: "+JSON.stringify(a));return b&&c?this.getUserMedia_v1(a,b,c):this.getUserMedia_v2(a)};b.prototype.getUserMedia_v2=
function(a){var b=this;n.logger.info(this.user_friendly_id()+".getUserMedia_v2() called: "+JSON.stringify(a));return new Promise(function(c,e){b.getUserMediaPrivate(a,function(a){n.logger.info(b.user_friendly_id()+"getUserMedia_v2: resolving stream");c(a)},function(a){n.logger.error(b.user_friendly_id()+"getUserMedia_v2: rejecting stream");e(a)})})};b.prototype.getUserMedia_v1=function(a,b,c){n.logger.info(this.user_friendly_id()+".getUserMedia_v1() called: "+JSON.stringify(a));return this.getUserMediaPrivate(a,
b,c)};b.prototype.getUserMediaPrivate=function(a,b,c){var e=this;this.waitUntilConnected("NavigatorUserMedia.getUserMediaPrivate").then(function(){var b=e.registerCallbacks(!0,!1,t.method_id_NavigatorUserMedia_t.getUserMedia),c=H.toRemoteMediaStreamConstraints(a);e.remoteInvoke(!1,t.method_id_NavigatorUserMedia_t.getUserMedia,c,b.success,b.fail);return b.prom()}).then(function(a){n.logger.info(e.user_friendly_id()+".getUserMediaPrivate: received success callback!");return(new D(null,e.param0(a).oid,
x.ProxyMode.Remote)).syncBarrier()}).then(function(d){n.logger.info(e.user_friendly_id()+".getUserMediaPrivate: MediaStream ready to deliver",JSON.stringify(d));0==d.getTracks().length?(n.logger.warning(e.user_friendly_id()+".getUserMediaPrivate: reporting no tracks as error."),c({constraintName:"",name:"OverconstrainedError",message:""})):(e.LogTelemetryDevice_(a),b(d))})["catch"](function(a){e.logRemoteInvokeError(a,".getUserMediaPrivate() failed!");w.getRedirector().getFeatureValue(t.FEATURE_ms_teams_1912)?
e.param0&&a?c(e.param0(a)):c({constraintName:"",name:"OverconstrainedError",message:""}):c({constraintName:"",name:"OverconstrainedError",message:""})})};b.prototype.SendTelemetryData=function(a,b,c){w.getRedirector().telemetry.SendTelemetryData(h.tel_cmd.Data,a,b,c)};b.capabilities=new E;return b}(x.ProxyObject);a.NavigatorUserMedia=b},650:function(b,a,d){var f=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&
Symbol.iterator,c=b&&a[b],e=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&e>=a.length&&(a=void 0);return{value:a&&a[e++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.RemoteSession=a.SessionInfo=a.RemoteType=void 0;var k=d(946),p=d(550),g=d(9),e=d(851),t=d(550),x=d(394),m;(function(a){a[a.Unknown=0]="Unknown";a[a.Windows=1]="Windows";a[a.Linux=2]="Linux"})(m=a.RemoteType||
(a.RemoteType={}));var n=function(){return function(){}}();a.SessionInfo=n;b=function(){function a(b,c){var d=this;this.isremote_=!1;this.isremote_=!0;this.type_=m.Windows;this.address_="0.0.0.0";this.sessioninfo_=null;k.getRedirector().setRemoteSessionInfoCb(function(){return d.remoteSessionInfo()});this.enginecontrol_=new g.EngineControl(b+"::"+c);e.logger.appInfo={clientInfo:b,vendorName:c}}a.prototype.release=function(){k.getRedirector().setRemoteSessionInfoCb(null)};a.prototype.user_friendly_id=
function(){return"[RemoteSession]"};a.prototype.getFeatureFlags=function(){var a={};null!==this.enginecontrol_&&null!==this.enginecontrol_.features_&&void 0!==this.enginecontrol_.features_&&this.enginecontrol_.features_.forEach(function(b){a[b.name]=b.value});return a};a.prototype.isFeatureSupported=function(a){if("video"===a)return!0;if("givecontrol"===a&&this.sessioninfo_.clientPlatform.includes("Linux")||!(a in t.featureNameMap))return!1;for(var b=t.featureNameMap[a],e=this.getFeatureFlags(),d=
0;d<b.length;d++)if(!(b[d]in e)||!0!==e[b[d]])return!1;return a in t.vdaFeatureNameMap?t.vdaFeatureNameMap[a].map(function(a){return k.getRedirector().getVDAFeatureValue(a)}).reduce(function(a,b){return a&&b},!0):!0};a.isFeaturePstnSupported=function(){return a.pstn_};a.isFeatureDtmfSupported=function(){return a.dtmfswitch_};a.isFeaturAppshareSupported=function(){return a.appshare_};a.isFeatureWebrtc1dot0Supported=function(){return a.webrtc1dot0_};a.isFeatureDataChannelSupported=function(){return a.datachannel_};
a.isFeatureVdNoBufferLimitSupported=function(){return a.vdnobuflimit_};a.isFeatureCallConstraintsSupported=function(){return a.callconstraints_};a.isFeatureTrackCloneWithIdSupported=function(){return a.trackclonewithid_};a.isFeatureSenderStatsFixSupported=function(){return a.senderstatsfix_};a.isFeatureGTCSupported=function(){return a.gtc_};a.prototype.getSessionInfo=function(){e.logger.debug(this.user_friendly_id()+".getSessionInfo() called.");return null!=this.sessioninfo_?Promise.resolve(this.sessioninfo_):
Promise.reject()};a.prototype.remoteSessionInfo=function(){var b=this,c=this;e.logger.info(c.user_friendly_id()+".remoteSessionInfo() called.");return new Promise(function(d,v){c.enginecontrol_.syncBarrier().then(function(v){var m,l;e.logger.info(c.user_friendly_id()+"enginecontrol info received!");c.sessioninfo_=new n;c.sessioninfo_.type_script=p.HDXMS_VERSION;c.sessioninfo_.webrpc=v.version_.major.toString()+"."+v.version_.minor.toString()+"."+v.version_.revision.toString()+"."+v.version_.build.toString();
if(void 0!=v.versions_&&null!=v.versions_){c.SendTelemetryData(x.tel_key_VerTypeScript,p.HDXMS_VERSION,0);var C=0;try{for(var r=f(v.versions_),D=r.next();!D.done;D=r.next()){var t=D.value,k=t.major.toString()+"."+t.minor.toString()+"."+t.revision.toString()+"."+t.build.toString();switch(C){case g.VersionType.Webrpc:c.sessioninfo_.webrpc=k;c.SendTelemetryData(x.tel_key_VerWebrpc,k,0);break;case g.VersionType.WebrtcCodecs:c.sessioninfo_.webrtc_codecs=k;c.SendTelemetryData(x.tel_key_VerWebrtcCodecs,
k,0);break;case g.VersionType.Receiver:c.sessioninfo_.receiver=k;c.SendTelemetryData(x.tel_key_VerReceiver,k,0);break;case g.VersionType.Vda:c.sessioninfo_.vda=k;c.SendTelemetryData(x.tel_key_VerVda,k,0);break;case g.VersionType.Endpoint:c.sessioninfo_.endpoint=k;c.SendTelemetryData(x.tel_key_VerEndpoint,k,0);break;case g.VersionType.HdxRtcEngine:c.sessioninfo_.hdxrtcengine=k;c.SendTelemetryData(x.tel_key_VerHdxRtcEngine,k,0);break;default:e.logger.warning(c.user_friendly_id()+"Unknown version type!")}C++}}catch(q){m=
{error:q}}finally{try{D&&!D.done&&(l=r["return"])&&l.call(r)}finally{if(m)throw m.error;}}}void 0!=v.osinfo_&&null!=v.osinfo_&&(c.sessioninfo_.osinfo=v.osinfo_,v.osinfo_.family.includes("Darwin")&&["Mac OS X","macOS","OS X"].some(function(a){return v.osinfo_.edition.startsWith(a)})?c.sessioninfo_.clientPlatform="Mac":c.sessioninfo_.clientPlatform=v.osinfo_.family,c.SendTelemetryData(x.tel_key_OSFamily,v.osinfo_.family,0),c.SendTelemetryData(x.tel_key_OSVersion,v.osinfo_.version,0),c.SendTelemetryData(x.tel_key_OSArchitecture,
v.osinfo_.architecture,0),c.SendTelemetryData(x.tel_key_OSDistro,v.osinfo_.distro,0),c.SendTelemetryData(x.tel_key_OSEdition,v.osinfo_.edition,0));void 0!=v.endpointid_&&null!=v.endpointid_&&(c.sessioninfo_.endpointId=v.endpointid_.machine_id);void 0!=v.hardwareinfo_&&null!=v.hardwareinfo_&&(c.sessioninfo_.hardware_info=v.hardwareinfo_,c.SendTelemetryData(x.tel_key_CPUModel,v.hardwareinfo_.cpu_info.cpumodel,0),c.SendTelemetryData(x.tel_key_CPUProcessors,v.hardwareinfo_.cpu_info.numberofprocessors,
0),c.SendTelemetryData(x.tel_key_CPUGpuinfo,JSON.stringify(v.hardwareinfo_.gpu_info.gpus),0),c.SendTelemetryData(x.tel_key_CPUTotalmemory,v.hardwareinfo_.memory_info.totalmemory,0));a.pstn_=b.isFeatureSupported(p.Features.FEATURE_public_pstn);a.dtmfswitch_=b.isFeatureSupported(p.Features.FEATURE_public_dtmf);a.appshare_=b.isFeatureSupported(p.Features.FEATURE_public_app_sharing);a.webrtc1dot0_=b.isFeatureSupported(p.Features.FEATURE_public_webrtc1dot0);a.datachannel_=b.isFeatureSupported(p.Features.FEATURE_public_data_channel);
a.vdnobuflimit_=b.isFeatureSupported(p.Features.FEATURE_public_vdnobuflimit);a.callconstraints_=b.isFeatureSupported(p.Features.FEATURE_public_stream_resolution);a.trackclonewithid_=b.isFeatureSupported(p.Features.FEATURE_public_track_clone_with_id);a.senderstatsfix_=b.isFeatureSupported(p.Features.FEATURE_public_sender_stats_fix);a.gtc_=b.isFeatureSupported(p.Features.FEATURE_public_gtc);d(c.sessioninfo_);c.enginecontrol_.release()})["catch"](function(){k.getRedirector().isPingActive()?c.retrySessionInfo():
(v(),c.enginecontrol_.release(),c.enginecontrol_=null)})})};a.prototype.retrySessionInfo=function(){var a=this;setTimeout(function(){e.logger.info("checking if we are connected...");a.enginecontrol_.bind();k.getRedirector().handleRemoteSessionInfo()},15E3)};a.prototype.SendTelemetryData=function(a,b,e){k.getRedirector().telemetry.SendTelemetryData(x.tel_cmd.Data,a,b,e)};a.pstn_=!1;a.dtmfswitch_=!1;a.appshare_=!1;a.webrtc1dot0_=!1;a.datachannel_=!1;a.vdnobuflimit_=!1;a.callconstraints_=!1;a.trackclonewithid_=
!1;a.senderstatsfix_=!1;a.gtc_=!1;return a}();a.RemoteSession=b},24:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();
$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,g=[],f;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)g.push(d.value)}catch(l){f={error:l}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(f)throw f.error;}}return g};Object.defineProperty(a,"__esModule",{value:!0});a.RtcDataChannel=a.RTCSctpTransport=void 0;var p=d(658),g=d(550),e=d(851),t=d(589),x=d(259),m;(function(a){a[a["new"]=0]="new";a[a.connecting=1]="connecting";
a[a.connected=2]="connected";a[a.closed=3]="closed";a[a.max=4]="max"})(m||(m={}));b=function(a){function b(c,d){var h=a.call(this,c,g.class_id_t.RTCSctpTransport,d,p.ProxyMode.Remote)||this;e.logger.info(h.user_friendly_id()+".constructor");return h}f(b,a);b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.syncBarrierDeep(b,d)&&a.waitUntilConnected("RTCSctpTransport.syncBarrier").then(function(){e.logger.info(a.user_friendly_id()+
".syncBarrierBase success.");return Promise.all([a.remoteInvoke(!1,g.method_id_RTCSctpTransport_t.transport,{oid:0}),a.remoteInvoke(!1,g.method_id_RTCSctpTransport_t.state,0),a.remoteInvoke(!1,g.method_id_RTCSctpTransport_t.maxMessageSize,0),a.remoteInvoke(!1,g.method_id_RTCSctpTransport_t.maxChannels,0)])}).then(function(b){var d;d=k(b.map(function(b){return a.param0(b)}),4);b=d[0];a.sctpstate_=d[1];a.maxMessageSize_=d[2];a.maxChannels_=d[3];d=a.transport_;void 0==b||!1!==b.is_null||null!==a.transport_&&
a.transport_.object_id()==b.oid||(d=new t.DtlsTransport(a,b.oid));d.syncBarrier().then(function(b){e.logger.info(a.user_friendly_id()+"transport.syncBarrier(): success");a.transport_=b;a.syncBarrierResolve(a)})["catch"](function(){e.logger.error(a.user_friendly_id()+"transport.syncBarrier(): failed!");a.transport_=null;a.syncBarrierResolve(a)})})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};Object.defineProperty(b.prototype,"transport",{get:function(){e.logger.debug(this.user_friendly_id()+
".get_transport() called: "+this.transport_);return this.transport_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){e.logger.debug(this.user_friendly_id()+".get_state() called: "+this.sctpstate_);return this.sctpstate_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"maxMessageSize",{get:function(){e.logger.debug(this.user_friendly_id()+".get_maxMessageSize() called: "+this.maxMessageSize_);return this.maxMessageSize_},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"maxChannels",{get:function(){e.logger.debug(this.user_friendly_id()+".get_maxChannels() called: "+this.maxChannels_);return this.maxChannels_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onstatechange",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onstatechange() called: "+this.onstatechange_);return this.onstatechange_},set:function(a){var d=this;e.logger.info(this.user_friendly_id()+".set_onstatechange() called.");this.onstatechange_=
a;this.waitUntilConnected(this.user_friendly_id()+".onstatechange").then(function(){var f=d.registerCallbacks(!1,d.isNullCallback(a),g.method_id_RTCSctpTransport_t.onstatechange);f.then(function(a){d.sctpstate_=b.convertState(d.param0(a));e.logger.info(d.user_friendly_id()+".onstatechange callback received!!! sctpstate_: "+d.sctpstate_);a=new Event("onstatechange");d.onstatechange_(a)});return d.remoteInvoke(!0,g.method_id_RTCSctpTransport_t.onstatechange,f.success)})["catch"](function(){e.logger.error(d.user_friendly_id()+
".onstatechange() failed.")})},enumerable:!1,configurable:!0});b.convertState=function(a){return a==m["new"]?"closed":a==m.connecting?"connecting":a==m.connected?"connected":"closed"};return b}(p.ProxyObject);a.RTCSctpTransport=b;var n;(function(a){a[a.connecting=0]="connecting";a[a.open=1]="open";a[a.closing=2]="closing";a[a.closed=3]="closed"})(n||(n={}));b=function(a){function b(c,d,h){c=a.call(this,c,g.class_id_t.RTCDataChannel,d,h)||this;c.binaryType_="blob";e.logger.info(c.user_friendly_id()+
".constructor");return c}f(b,a);b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.syncBarrierDeep(b,d)&&a.waitUntilConnected("RtcDataChannel.syncBarrier").then(function(){e.logger.info(a.user_friendly_id()+".syncBarrier remote invoking.");return Promise.all([a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.label,""),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.ordered,!0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.maxPacketLifeTime,
0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.maxRetransmits,0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.protocol,""),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.negotiated,!1),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.id,0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.readyState,0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.bufferedAmount,0),a.remoteInvoke(!1,g.method_id_RTCDataChannel_t.bufferedAmountLowThreshold,0)])}).then(function(b){e.logger.info(a.user_friendly_id()+
".syncBarrier success.");var d;b=k(b.map(function(b){return a.param0(b)}),10);a.label_=b[0];a.ordered_=b[1];a.maxPacketLifeTime_=b[2];a.maxRetransmits_=b[3];a.protocol_=b[4];a.negotiated_=b[5];a.id_=b[6];d=b[7];a.bufferedAmount_=b[8];a.bufferedAmountLowThreshold_=b[9];a.readyState_=a.toRTCDataChannelState(d);a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};Object.defineProperty(b.prototype,"label",{get:function(){e.logger.debug(this.user_friendly_id()+
".get_label() called: "+this.label_);return this.label_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ordered",{get:function(){e.logger.debug(this.user_friendly_id()+".get_ordered() called: "+this.ordered_);return this.ordered_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"maxPacketLifeTime",{get:function(){e.logger.debug(this.user_friendly_id()+".get_maxPacketLifeTime() called: "+this.maxPacketLifeTime_);return this.maxPacketLifeTime_},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"maxRetransmits",{get:function(){e.logger.debug(this.user_friendly_id()+".get_maxRetransmits() called: "+this.maxRetransmits_);return this.maxRetransmits_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"protocol",{get:function(){e.logger.debug(this.user_friendly_id()+".get_protocol() called: "+this.protocol_);return this.protocol_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"negotiated",{get:function(){e.logger.debug(this.user_friendly_id()+
".get_negotiated() called: "+this.negotiated_);return this.negotiated_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){e.logger.debug(this.user_friendly_id()+".get_id() called: "+this.id_);return this.id_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"readyState",{get:function(){e.logger.debug(this.user_friendly_id()+".get_readyState() called: "+this.readyState_);return this.readyState_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"bufferedAmount",{get:function(){e.logger.debug(this.user_friendly_id()+".get_bufferedAmount() called: "+this.bufferedAmount_);return this.bufferedAmount_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"bufferedAmountLowThreshold",{get:function(){e.logger.debug(this.user_friendly_id()+".get_bufferedAmountLowThreshold() called: "+this.bufferedAmountLowThreshold_);return this.bufferedAmountLowThreshold_},set:function(a){e.logger.info(this.user_friendly_id()+".get_bufferedAmountLowThreshold() called: "+
a);this.bufferedAmountLowThreshold_=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"binaryType",{get:function(){e.logger.debug(this.user_friendly_id()+".get_binaryType() called: "+this.binaryType_);return this.binaryType_},set:function(a){e.logger.info(this.user_friendly_id()+".set_binaryType() called: "+a);this.binaryType_="blob"==a||"arraybuffer"==a?a:"blob"},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onopen",{get:function(){e.logger.debug(this.user_friendly_id()+
".get_onopen() called.");return this.onopen_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onopen() called.");this.onopen_=a;this.waitUntilConnected(this.user_friendly_id()+".onopen").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onopen);d.then(function(a){e.logger.info(b.user_friendly_id()+".onopen callback received!!!");b.syncBarrier().then(function(){e.logger.info(b.user_friendly_id()+".onopen notifying...");var a=new Event("open",
{});Object.defineProperty(a,"target",{writable:!1,value:b});b.onopen_(a)})["catch"](function(){e.logger.error(b.user_friendly_id()+".syncBarrier(): failed!")})});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onopen,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+".onopen() failed.")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onbufferedamountlow",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onbufferedamountlow() called.");return this.onbufferedamountlow_},
set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onbufferedamountlow() called.");this.onbufferedamountlow_=a;this.waitUntilConnected(this.user_friendly_id()+".onbufferedamountlow").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onbufferedamountlow);d.then(function(a){e.logger.info(b.user_friendly_id()+".onbufferedamountlow callback received!!!");a=new Event("onbufferedamountlow");Object.defineProperty(a,"target",{writable:!1,value:b});
b.onbufferedamountlow_(a)});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onbufferedamountlow,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+".onbufferedamountlows() failed.")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onerror",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onerror() called.");return this.onerror_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onerror() called.");this.onerror_=a;this.waitUntilConnected(this.user_friendly_id()+
".onerror").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onerror);d.then(function(a){a=b.param0(a);e.logger.error(b.user_friendly_id()+".onerror callback received! error: "+a);a=new Event("onerror");Object.defineProperty(a,"target",{writable:!1,value:b});b.onerror_(a)});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onerror,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+".onerror() failed.")})},enumerable:!1,configurable:!0});
Object.defineProperty(b.prototype,"onclosing",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onclosing() called.");return this.onclosing_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onclosing() called.");this.onclosing_=a;this.waitUntilConnected(this.user_friendly_id()+".onclosing").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onclosing);d.then(function(a){e.logger.info(b.user_friendly_id()+".onclosing callback received!!!");
a=new Event("onclosing");Object.defineProperty(a,"target",{writable:!1,value:b});b.onclosing_(a)});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onclosing,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+".onclosing() failed.")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onclose",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onclose() called.");return this.onclose_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+
".set_onclose() called.");this.onclose_=a;this.waitUntilConnected(this.user_friendly_id()+".onclose").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onclose);d.then(function(a){e.logger.info(b.user_friendly_id()+".onclose callback received!!!");a=new Event("onclose");Object.defineProperty(a,"target",{writable:!1,value:b});b.onclose_(a)});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onclose,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+
".onclose() failed.")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onmessage",{get:function(){e.logger.debug(this.user_friendly_id()+".get_onmessage() called.");return this.onmessage_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onmessage() called.");this.onmessage_=a;this.waitUntilConnected(this.user_friendly_id()+".onmessage").then(function(){var d=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDataChannel_t.onmessage);d.then(function(a){e.logger.info(b.user_friendly_id()+
".onmessage callback received!!!");var c=b.param0(a);a=new Event("onmessage");c.binary?a.data=c.data_ab:(c=atob(c.data_sz),a.data=c);b.onmessage_(a)});return b.remoteInvoke(!0,g.method_id_RTCDataChannel_t.onmessage,d.success)})["catch"](function(){e.logger.error(b.user_friendly_id()+".onmessage() failed.")})},enumerable:!1,configurable:!0});b.prototype.close=function(){var a=this;e.logger.info(this.user_friendly_id()+".close() called.");this.waitUntilConnected("RTCDataChannel.close").then(function(){return a.remoteInvoke(!1,
g.method_id_RTCDataChannel_t.close)}).then(function(){e.logger.info(a.user_friendly_id()+".close: success.")})["catch"](function(){e.logger.error(a.user_friendly_id()+".close: failed.")})};b.prototype.send=function(a){var b=this;e.logger.debug(this.user_friendly_id()+".send() called.");this.waitUntilConnected("RTCDataChannel.send").then(function(){if("string"===typeof a)return e.logger.info(b.user_friendly_id()+"data(string): "+a),b.remoteInvoke(!1,g.method_id_RTCDataChannel_t.send_text,a);if(a instanceof
Blob)a.arrayBuffer().then(function(a){a=x.Util.toByteArray(a);return b.remoteInvoke(!1,g.method_id_RTCDataChannel_t.send_binary,a)})["catch"](function(){e.logger.error(b.user_friendly_id()+".arrayBuffer(): failed.")});else{var d=x.Util.toByteArray(a);return b.remoteInvoke(!1,g.method_id_RTCDataChannel_t.send_binary,d)}}).then(function(){e.logger.debug(b.user_friendly_id()+".send: success.")})["catch"](function(){e.logger.error(b.user_friendly_id()+".send: failed.")})};b.prototype.toRTCDataChannelState=
function(a){var b="closed";a==n.connecting?b="connecting":a==n.open?b="open":a==n.closing?b="closing":a==n.closed&&(b="closed");return b};return b}(p.ProxyObject);a.RtcDataChannel=b},484:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])};return a(b,e)};return function(b,e){function c(){this.constructor=b}a(b,e);b.prototype=null===
e?Object.create(e):(c.prototype=e.prototype,new c)}}(),k=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,e=b&&a[b],c=0;if(e)return e.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.RtcRtpReceiveParameters=
a.RtcRtpSendParameters=a.RtcRtpEncodingParameters=a.RtcRtpParameters=a.RtcRtcpParameters=a.RtcRtpHeaderExtensionParameters=a.RtcRtpCodecParameters=void 0;var p=d(851),g=function(){function a(){}a.defRtcRtpCodecParameters=function(){return{mimeType:"",payloadType:0,sdpFmtpLine:""}};a.defRTCRtpCodecParameters=function(){return{clockRate:0,mimeType:"",payloadType:0}};a.toRtcRtpCodecParameters=function(b){var e=a.defRtcRtpCodecParameters();b&&(b.channels&&(e.channels=b.channels),b.clockRate&&(e.clockRate=
b.clockRate),b.mimeType&&(e.mimeType=b.mimeType),b.payloadType&&(e.payloadType=b.payloadType),b.sdpFmtpLine&&(e.sdpFmtpLine=b.sdpFmtpLine));return e};a.toRTCRtpCodecParameters=function(b){var e=a.defRTCRtpCodecParameters();b&&(b.channels&&(e.channels=b.channels),b.clockRate&&(e.clockRate=b.clockRate),b.mimeType&&(e.mimeType=b.mimeType),b.payloadType&&(e.payloadType=b.payloadType),b.sdpFmtpLine&&(e.sdpFmtpLine=b.sdpFmtpLine));return e};return a}();a.RtcRtpCodecParameters=g;var e=function(){function a(){}
a.defRtcRtpHeaderExtensionParameters=function(){return{encrypted:!1,id:0,uri:""}};a.defRTCRtpHeaderExtensionParameters=function(){return{id:0,uri:""}};a.toRtcRtpHeaderExtensionParameters=function(b){var e=a.defRtcRtpHeaderExtensionParameters();if(b){var c=b.encrypted;void 0!=c&&null!=c&&(e.encrypted=c);b.id&&(e.id=b.id);b.uri&&(e.uri=b.uri)}return e};a.toRTCRtpHeaderExtensionParameters=function(b){var e=a.defRTCRtpHeaderExtensionParameters();if(b){var c=b.encrypted;void 0!=c&&null!=c&&(e.encrypted=
c);b.id&&(e.id=b.id);b.uri&&(e.uri=b.uri)}return e};return a}();a.RtcRtpHeaderExtensionParameters=e;var t=function(){function a(){}a.defRtcRtcpParameters=function(){return{cname:"",reducedSize:!1}};a.defRTCRtcpParameters=function(){return{}};a.toRtcRtcpParameters=function(b){var e=a.defRtcRtcpParameters();b&&(b.cname&&(e.cname=b.cname),b=b.reducedSize,void 0!=b&&null!=b&&(e.reducedSize=b));return e};a.toRTCRtcpParameters=function(b){var e=a.defRTCRtcpParameters();b&&(b.cname&&(e.cname=b.cname),b=
b.reducedSize,void 0!=b&&null!=b&&(e.reducedSize=b));return e};return a}();a.RtcRtcpParameters=t;var x=function(){function a(){}a.defRtcRtpParameters=function(){return{codecs:[],headerExtensions:[],rtcp:t.defRtcRtcpParameters()}};a.defRTCRtpParameters=function(){return{codecs:[],headerExtensions:[],rtcp:t.defRTCRtcpParameters()}};a.toRtcRtpParameters=function(b){var d,c,f,v,m=a.defRtcRtpParameters();if(b){if(b.codecs)try{for(var y=k(b.codecs),l=y.next();!l.done;l=y.next())m.codecs.push(g.toRtcRtpCodecParameters(l.value))}catch(D){d=
{error:D}}finally{try{l&&!l.done&&(c=y["return"])&&c.call(y)}finally{if(d)throw d.error;}}if(b.headerExtensions)try{for(var C=k(b.headerExtensions),r=C.next();!r.done;r=C.next())m.headerExtensions.push(e.toRtcRtpHeaderExtensionParameters(r.value))}catch(D){f={error:D}}finally{try{r&&!r.done&&(v=C["return"])&&v.call(C)}finally{if(f)throw f.error;}}b.rtcp&&(m.rtcp=t.toRtcRtcpParameters(b.rtcp))}return m};a.toRTCRtpParameters=function(b){var d,c,f,m,p=a.defRTCRtpParameters();if(b){if(b.codecs)try{for(var y=
k(b.codecs),l=y.next();!l.done;l=y.next())p.codecs.push(g.toRTCRtpCodecParameters(l.value))}catch(D){d={error:D}}finally{try{l&&!l.done&&(c=y["return"])&&c.call(y)}finally{if(d)throw d.error;}}if(b.headerExtensions)try{for(var C=k(b.headerExtensions),r=C.next();!r.done;r=C.next())p.headerExtensions.push(e.toRTCRtpHeaderExtensionParameters(r.value))}catch(D){f={error:D}}finally{try{r&&!r.done&&(m=C["return"])&&m.call(C)}finally{if(f)throw f.error;}}b.rtcp&&(p.rtcp=t.toRtcRtcpParameters(b.rtcp))}return p};
return a}();a.RtcRtpParameters=x;var m=function(){function a(){}a.defRtcRtpEncodingParameters=function(){return{active:!0,rid:""}};a.defRTCRtpEncodingParameters=function(){return{}};a.toRtcRtpEncodingParameters=function(b){var e=a.defRtcRtpEncodingParameters();if(b){var c=b.active;void 0!=c&&null!=c&&(e.active=c);b.maxBitrate&&(e.maxBitrate=b.maxBitrate);b.maxFramerate&&(e.maxFramerate=b.maxFramerate);b.scaleResolutionDownBy&&(e.scaleResolutionDownBy=b.scaleResolutionDownBy);b.rid&&(e.rid=b.rid);
b.networkPriority&&(e.networkPriority=b.networkPriority)}return e};a.toRTCRtpEncodingParameters=function(b){var e=a.defRTCRtpEncodingParameters();if(b){var c=b.active;void 0!=c&&null!=c&&(e.active=c);b.maxBitrate&&(e.maxBitrate=b.maxBitrate);b.maxFramerate&&(e.maxFramerate=b.maxFramerate);b.scaleResolutionDownBy&&(e.scaleResolutionDownBy=b.scaleResolutionDownBy);b.rid&&(e.rid=b.rid);b.networkPriority&&(e.networkPriority=b.networkPriority)}return e};return a}();a.RtcRtpEncodingParameters=m;b=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}f(b,a);b.defRtcRtpSendParameters=function(){var a=x.defRtcRtpParameters();a.encodings=[];a.transaction_id="";return a};b.defRTCRtpSendParameters=function(){var a=x.defRTCRtpParameters();a.encodings=[];a.transactionId="";return a};b.toRtcRtpSendParameters=function(a){var c,e;p.logger.info("RtcRtpSendParameters.toRtcRtpSendParameters() in param:"+JSON.stringify(a));var d=b.defRtcRtpSendParameters(),f=x.toRtcRtpParameters(a);f.codecs.forEach(function(a){return d.codecs.push(a)});
f.headerExtensions.forEach(function(a){return d.headerExtensions.push(a)});d.rtcp=f.rtcp;if(a){if(a.encodings)try{for(var g=k(a.encodings),l=g.next();!l.done;l=g.next())d.encodings.push(m.toRtcRtpEncodingParameters(l.value))}catch(n){c={error:n}}finally{try{l&&!l.done&&(e=g["return"])&&e.call(g)}finally{if(c)throw c.error;}}a.transactionId&&(d.transaction_id=a.transactionId)}p.logger.info("RtcRtpSendParameters.toRtcRtpSendParameters() out param:"+JSON.stringify(d));return d};b.toRTCRtpSendParameters=
function(a){var c,e;p.logger.info("RtcRtpSendParameters.toRTCRtpSendParameters() in param:"+JSON.stringify(a));var d=b.defRTCRtpSendParameters(),f=x.toRTCRtpParameters(a);f.codecs.forEach(function(a){return d.codecs.push(a)});f.headerExtensions.forEach(function(a){return d.headerExtensions.push(a)});d.rtcp=f.rtcp;if(a){if(a.encodings)try{for(var g=k(a.encodings),l=g.next();!l.done;l=g.next())d.encodings.push(m.toRTCRtpEncodingParameters(l.value))}catch(n){c={error:n}}finally{try{l&&!l.done&&(e=g["return"])&&
e.call(g)}finally{if(c)throw c.error;}}a.transaction_id&&(d.transactionId=a.transaction_id)}p.logger.info("RtcRtpSendParameters.toRTCRtpSendParameters() out param:"+JSON.stringify(d));return d};return b}(x);a.RtcRtpSendParameters=b;b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);b.defRtcRtpReceiveParameters=function(){return x.defRtcRtpParameters()};b.defRTCRtpReceiveParameters=function(){return x.defRTCRtpParameters()};b.toRtcRtpReceiveParameters=function(a){p.logger.info("RtcRtpReceiveParameters.toRtcRtpReceiveParameters() in param:"+
JSON.stringify(a));a=x.toRtcRtpParameters(a);p.logger.info("RtcRtpReceiveParameters.toRtcRtpReceiveParameters() out param:"+JSON.stringify(a));return a};b.toRTCRtpReceiveParameters=function(a){p.logger.info("RtcRtpReceiveParameters.toRTCRtpReceiveParameters() in param:"+JSON.stringify(a));a=x.toRTCRtpParameters(a);p.logger.info("RtcRtpReceiveParameters.toRTCRtpReceiveParameters() out param:"+JSON.stringify(a));return a};return b}(x);a.RtcRtpReceiveParameters=b},589:function(b,a,d){var f=this&&this.__extends||
function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;
var e=c.call(a),d,h=[],f;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)h.push(d.value)}catch(g){f={error:g}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(f)throw f.error;}}return h};Object.defineProperty(a,"__esModule",{value:!0});a.RtpReceiver=a.RtpSender=a.RtpSenderReceiver=a.DtlsTransport=a.IceTransport=a.DtmfSender=a.DTMFToneChangeEvent=void 0;var p=d(658),g=d(550),e=d(851),t=d(144),x=d(517),m=d(650),n=d(484),w=function(a){function b(c,d){var h=a.call(this,c,g.class_id_t.RTCDTMFToneChangeEvent,
d,p.ProxyMode.Remote)||this;e.logger.info(h.user_friendly_id()+".constructor");return h}f(b,a);b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){a.syncBarrierDeep(b,c)&&a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){Promise.all([a.remoteInvoke(!1,g.method_id_RTCDTMFToneChangeEvent_t.tone,""),a.remoteInvoke(!1,g.method_id_RTCDTMFToneChangeEvent_t.tone_buffer,"")]).then(function(b){e.logger.info(a.user_friendly_id()+
".syncBarrier(): success.");b=k(b.map(function(b){return a.param0(b)}),2);a.tone=b[0];a.tone_buffer_=b[1];a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".prop.syncBarrier() failed.");a.syncBarrierReject(b)})})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed.");a.syncBarrierReject(b)})})};Object.defineProperty(b.prototype,"tone_buffer",{get:function(){return this.tone_buffer_},enumerable:!1,configurable:!0});return b}(p.ProxyObject);a.DTMFToneChangeEvent=
w;var h=function(a){function b(c,d){var h=a.call(this,c,g.class_id_t.RTCDTMFSender,d,p.ProxyMode.Remote)||this;e.logger.info(h.user_friendly_id()+".constructor");h.canInsertDTMF=!0;h.toneBuffer_="";return h}f(b,a);b.prototype.insertDTMF=function(a,b,c){var d=this;void 0===b&&(b=100);void 0===c&&(c=70);e.logger.info(this.user_friendly_id()+".insertDTMF() called, tones: "+a);this.waitUntilConnected("DtmfSender.insertDTMF").then(function(){return d.remoteInvoke(!1,g.method_id_RTCDTMFSender_t.insertDTMF,
a,b,c)}).then(function(){e.logger.info(d.user_friendly_id()+".insertDTMF() success, tones: "+a)})["catch"](function(a){d.logRemoteInvokeError(a,".insertDTMF() failed!")})};Object.defineProperty(b.prototype,"ontonechange",{get:function(){return this.ontonechange_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_ontonechange() called.");this.ontonechange_=a;this.waitUntilConnected("DtmfSender.ontonechange").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDTMFSender_t.ontonechange);
c.then(function(a){e.logger.info(b.user_friendly_id()+".ontonechange callback received!");(new w(b,b.param0(a).oid)).syncBarrier().then(function(a){e.logger.info(b.user_friendly_id()+"tone: "+a.tone+" tone_buffer: "+a.tone_buffer);b.toneBuffer_=a.tone_buffer;b.ontonechange_(a)})["catch"](function(a){b.logRemoteInvokeError(a,".toneEvt.syncBarrier() failed!")})});return b.remoteInvoke(!0,g.method_id_RTCDTMFSender_t.ontonechange,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_ontonechange() failed!")})},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"toneBuffer",{get:function(){e.logger.debug(this.user_friendly_id()+".toneBuffer() called.");return this.toneBuffer_},enumerable:!1,configurable:!0});return b}(p.ProxyObject);a.DtmfSender=h;var c=function(a){function b(c,d){var h=a.call(this,c,g.class_id_t.RTCIceTransport,d,p.ProxyMode.Remote)||this;e.logger.info(h.user_friendly_id()+".constructor");h.selectedPair=null;h.localCandidates_=[];h.remoteCandidates_=[];return h}f(b,a);b.prototype.syncBarrier=
function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(c,d){a.syncBarrierDeep(c,d)&&a.waitUntilConnected("IceTransport.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,g.method_id_RTCIceTransport_t.role,0),a.remoteInvoke(!1,g.method_id_RTCIceTransport_t.component,0),a.remoteInvoke(!1,g.method_id_RTCIceTransport_t.state,0),a.remoteInvoke(!1,g.method_id_RTCIceTransport_t.gatheringState,0)])}).then(function(c){e.logger.info(a.user_friendly_id()+
".syncBarrier success.");var d=0,h=0;c=k(c.map(function(b){return a.param0(b)}),4);a.role_=c[0];a.component_=c[1];d=c[2];h=c[3];a.state_=b.convertState(d);a.gatheringState_=b.convertGatheringState(h);a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");a.syncBarrierReject(b)})})};b.prototype.syncCandidates=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncCandidates() called.");return new Promise(function(b,c){a.waitUntilConnected("IceTransport.syncCandidates").then(function(){return Promise.all([a.remoteInvoke(!1,
g.method_id_RTCIceTransport_t.localcandidates,[]),a.remoteInvoke(!1,g.method_id_RTCIceTransport_t.remotecandidates,[])])}).then(function(c){e.logger.info(a.user_friendly_id()+".syncCandidates success.");c=k(c.map(function(b){return a.param0(b)}),2);a.localCandidates_=c[0];a.remoteCandidates_=c[1];b(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncCandidates() failed!");c(b)})})};Object.defineProperty(b.prototype,"role",{get:function(){return this.role_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"component",{get:function(){return this.component_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"State",{get:function(){return this.state_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"gatheringState",{get:function(){return this.gatheringState_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onstatechange",{get:function(){return this.onstatechange_},set:function(a){var c=this;e.logger.info(this.user_friendly_id()+".set_onstatechange() called.");
this.onstatechange_=a;this.waitUntilConnected("IceTransport.onstatechange").then(function(){var d=c.registerCallbacks(!1,c.isNullCallback(a),g.method_id_RTCIceTransport_t.onstatechange);d.then(function(a){e.logger.info(c.user_friendly_id()+".onstatechange callback received!");c.syncCandidates().then(function(a){e.logger.info(c.user_friendly_id()+"received updated ice candidates!")});c.state_=b.convertState(c.param0(a));e.logger.info(c.user_friendly_id()+"state: "+c.state_);c.onstatechange_()});return c.remoteInvoke(!0,
g.method_id_RTCIceTransport_t.onstatechange,d.success)})["catch"](function(a){c.logRemoteInvokeError(a,".set_onstatechange failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"ongatheringstatechange",{get:function(){return this.ongatheringstatechange_},set:function(a){var c=this;e.logger.info(this.user_friendly_id()+".set_ongatheringstatechange() called.");this.ongatheringstatechange_=a;this.waitUntilConnected("IceTransport.ongatheringstatechange").then(function(){var d=
c.registerCallbacks(!1,c.isNullCallback(a),g.method_id_RTCIceTransport_t.ongatheringstatechange);d.then(function(a){e.logger.info(c.user_friendly_id()+".ongatheringstatechange callback received!");c.syncCandidates().then(function(a){e.logger.info(c.user_friendly_id()+"received updated ice candidates!")});c.gatheringState_=b.convertGatheringState(c.param0(a));e.logger.info(c.user_friendly_id()+"gatheringState: "+c.gatheringState_);c.ongatheringstatechange_()});return c.remoteInvoke(!0,g.method_id_RTCIceTransport_t.ongatheringstatechange,
d.success)})["catch"](function(a){c.logRemoteInvokeError(a,".set_ongatheringstatechange failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onselectedcandidatepairchange",{get:function(){return this.onselectedcandidatepairchange_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onselectedcandidatepairchange() called.");this.onselectedcandidatepairchange_=a;this.waitUntilConnected("IceTransport.onselectedcandidatepairchange").then(function(){var c=
b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCIceTransport_t.onselectedcandidatepairchange);c.then(function(a){e.logger.info(b.user_friendly_id()+".onselectedcandidatepairchange callback received!");b.syncCandidates().then(function(a){e.logger.info(b.user_friendly_id()+"received updated ice candidates!")});b.selectedPair=b.param0(a);e.logger.info(b.user_friendly_id()+"selectedPair: "+b.selectedPair);b.onselectedcandidatepairchange_()});return b.remoteInvoke(!0,g.method_id_RTCIceTransport_t.onselectedcandidatepairchange,
c.success)})["catch"](function(a){b.logRemoteInvokeError(a,".set_onselectedcandidatepairchange failed!")})},enumerable:!1,configurable:!0});b.prototype.getLocalCandidates=function(){return this.localCandidates_};b.prototype.getRemoteCandidates=function(){return this.remoteCandidates_};b.prototype.getLocalParameters=function(){return null};b.prototype.getRemoteParameters=function(){return null};b.prototype.getSelectedCandidatePair=function(){return this.selectedPair};b.convertState=function(a){return 0==
a?"new":1==a?"checking":2==a?"connected":3==a?"completed":4==a?"failed":5==a?"disconnected":"closed"};b.convertGatheringState=function(a){return 0==a?"new":1==a?"gathering":"complete"};return b}(p.ProxyObject);a.IceTransport=c;var u;(function(a){a[a["new"]=0]="new";a[a.connecting=1]="connecting";a[a.connected=2]="connected";a[a.closed=3]="closed";a[a.failed=4]="failed";a[a.max=5]="max"})(u||(u={}));var v=function(a){function b(c,d){var h=a.call(this,c,g.class_id_t.RTCDtlsTransport,d,p.ProxyMode.Remote)||
this;e.logger.info(h.user_friendly_id()+".constructor");h.state_="new";h.transport_=null;h.remoteCertificates_=[];return h}f(b,a);b.prototype.dumpInfo=function(){e.logger.debug("DtlsTransport["+this.object_id()+"].dumpInfo():\n    - state:"+this.state_+"\n    - transport:"+this.transport_)};b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(d,h){a.syncBarrierDeep(d,h)&&a.waitUntilConnected("DtlsTransport.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,
g.method_id_RTCDtlsTransport_t.transport,{}),a.remoteInvoke(!1,g.method_id_RTCDtlsTransport_t.state,0),a.remoteInvoke(!1,g.method_id_RTCDtlsTransport_t.getRemoteCertificates)])}).then(function(d){var h;e.logger.info(a.user_friendly_id()+".syncBarrier remote success.");var f;h=k(d.map(function(b){return a.param0(b)}),3);d=h[0];f=h[1];a.remoteCertificates_=h[2];a.state_=b.convertState(f);h=[];if(void 0!=d&&0==d.is_null){f=a.transport_;if(null===a.transport_||a.transport_.object_id()!=d.oid)f=new c(a,
d.oid);h.push(f.syncBarrier())}else h.push(Promise.resolve(null));Promise.all(h).then(function(b){e.logger.info(a.user_friendly_id()+".syncBarrier success");a.transport_=b[0];a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".prop.syncBarrier failed!");a.syncBarrierReject(b)})})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier failed!");a.syncBarrierReject(b)})})};Object.defineProperty(b.prototype,"transport",{get:function(){return this.transport_},enumerable:!1,
configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){e.logger.debug(this.user_friendly_id()+".get_state() called: "+this.state_);return this.state_},enumerable:!1,configurable:!0});b.prototype.getRemoteCertificates=function(){return this.remoteCertificates_};Object.defineProperty(b.prototype,"onstatechange",{get:function(){return this.onstatechange_},set:function(a){var c=this;e.logger.info(this.user_friendly_id()+".set_onstatechange() called.");this.onstatechange_=a;this.waitUntilConnected("DtlsTransport.onstatechange").then(function(){var d=
c.registerCallbacks(!1,c.isNullCallback(a),g.method_id_RTCDtlsTransport_t.onstatechange);d.then(function(a){e.logger.info(c.user_friendly_id()+".onstatechange callback received!");c.state_=b.convertState(c.param0(a));e.logger.info(c.user_friendly_id()+"state_: "+c.state_);c.onstatechange_()});return c.remoteInvoke(!0,g.method_id_RTCDtlsTransport_t.onstatechange,d.success)})["catch"](function(a){c.logRemoteInvokeError(a,".set_onstatechange failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"onerror",{get:function(){return this.onerror_},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_onerror() called.");this.onerror_=a;this.waitUntilConnected("DtlsTransport.onerror").then(function(){var c=b.registerCallbacks(!1,b.isNullCallback(a),g.method_id_RTCDtlsTransport_t.onerror);c.then(function(a){a=b.param0(a);e.logger.error(b.user_friendly_id()+".onerror callback received! error: "+a);b.onerror_(a)});return b.remoteInvoke(!0,g.method_id_RTCDtlsTransport_t.onerror,c.success)})["catch"](function(a){b.logRemoteInvokeError(a,
".set_onerror failed!")})},enumerable:!1,configurable:!0});b.convertState=function(a){return a==u["new"]?"new":a==u.connecting?"connecting":a==u.connected?"connected":a==u.closed?"closed":"failed"};return b}(p.ProxyObject);a.DtlsTransport=v;b=function(a){function b(c,d,h,f){c=a.call(this,c,d,h,f)||this;e.logger.debug(c.user_friendly_id()+".constructor base");c.track_=null;c.transport_=null;return c}f(b,a);b.prototype.syncBarrierBase=function(){e.logger.info(this.user_friendly_id()+".syncBarrierBase() called.");
var a=[],b,c;this instanceof z?(b=g.method_id_RTCRtpSender_t.track,c=g.method_id_RTCRtpSender_t.transport):this instanceof y&&(b=g.method_id_RTCRtpReceiver_t.track,c=g.method_id_RTCRtpReceiver_t.transport);m.RemoteSession.isFeaturePstnSupported()&&m.RemoteSession.isFeatureDtmfSupported()?(a.push(this.remoteInvoke(!1,b,{oid:0})),a.push(this.remoteInvoke(!1,c,{oid:0}))):a.push(this.remoteInvoke(!1,b,{oid:0}));return a};b.prototype.syncBarrierBaseResults=function(a){var b,c,d=this;c=0;e.logger.info(this.user_friendly_id()+
".syncBarrierBaseResults");m.RemoteSession.isFeaturePstnSupported()&&m.RemoteSession.isFeatureDtmfSupported()?(b=k(a.map(function(a){return d.param0(a)}),2),a=b[0],b=b[1],c=2):(c=k(a.map(function(a){return d.param0(a)}),1),a=c[0],c=1);var h=[];if(void 0!=a&&!1===a.is_null){var f=this.track_;null===this.track_||this.track_.object_id()!=a.oid?f=new t.RemoteMediaTrack(this,a.oid):this.track_.bind(this,a.oid);h.push(f.syncBarrier())}else h.push(Promise.resolve(null));if(void 0!=b&&!1===b.is_null){a=this.transport_;
if(null===this.transport_||this.transport_.object_id()!=b.oid)a=new v(this,b.oid);h.push(a.syncBarrier())}else h.push(Promise.resolve(null));return[c,h]};b.prototype.syncBarrierBaseResultsWithAllPromisesFulFilled=function(a){this.track_=a[0];this.transport_=a[1]};Object.defineProperty(b.prototype,"transport",{get:function(){e.logger.debug(this.user_friendly_id()+".get transport() called.");return this.transport_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"rtcpTransport",{get:function(){e.logger.debug(this.user_friendly_id()+
".get rtcpTransport() called.");return this.transport_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"track",{get:function(){return this.track_},enumerable:!1,configurable:!0});b.prototype.reinitTrack=function(a){this.track_=a};b.prototype.getStats=function(){e.logger.debug(this.user_friendly_id()+".getStats() called.");var a=this;return new Promise(function(b,c){a.isRedirected()?a.waitUntilConnected("RtpReceiver.getStats").then(function(){if(m.RemoteSession.isFeatureSenderStatsFixSupported()){var c;
a instanceof z?c=g.method_id_RTCRtpSender_t.getStats:a instanceof y&&(c=g.method_id_RTCRtpReceiver_t.getStats);var e=a.registerCallbacks(!0,!1,c);e.then(function(a){void 0===a.params||0===a.params.length||0===a.params[0].length?b():b(x.StatsReport.fromJSON(JSON.parse(a.params[0])))});return a.remoteInvoke(!1,c,e.success)}b()})["catch"](function(b){b=a.logRemoteInvokeError(b,".getStats() failed!");c(b)}):(e.logger.debug(a.user_friendly_id()+".getStats(): not in active redirection!"),b())})};return b}(p.ProxyObject);
a.RtpSenderReceiver=b;var z=function(a){function b(c,d,h,f){c=a.call(this,c,g.class_id_t.RTCRtpSender,d,h)||this;e.logger.info(c.user_friendly_id()+".constructor");c.dtmf_=null;c.params_=n.RtcRtpSendParameters.defRtcRtpSendParameters();c.unified_=f;return c}f(b,a);b.prototype.dumpInfo=function(){e.logger.debug("RtpSender["+this.object_id()+"].dumpInfo():");this.track&&this.track.dumpInfo()};b.prototype.syncBarrier=function(){var b=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");
return new Promise(function(c,d){b.syncBarrierDeep(c,d)&&b.waitUntilConnected("RtpSender.syncBarrier").then(function(){var c=a.prototype.syncBarrierBase.call(b);m.RemoteSession.isFeaturePstnSupported()&&m.RemoteSession.isFeatureDtmfSupported()&&(c.push(b.remoteInvoke(!1,g.method_id_RTCRtpSender_t.dtmf,{oid:0})),c.push(b.remoteInvoke(!1,g.method_id_RTCRtpSender_t.getParameters)));return Promise.all(c)}).then(function(a){var c,d;c=k(b.syncBarrierBaseResults(a),2);d=c[0];c=c[1];a=k(a.slice(d).map(function(a){return b.param0(a)}),
2);d=a[0];b.params_=a[1];void 0==d||!1!==d.is_null||null!==b.dtmf_&&b.dtmf_.object_id()==d.oid||(b.dtmf_=new h(b,d.oid));Promise.all(c).then(function(a){b.syncBarrierBaseResultsWithAllPromisesFulFilled(a);e.logger.info(b.user_friendly_id()+".syncBarrierBase success.");b.syncBarrierResolve(b)})["catch"](function(a){a=b.logRemoteInvokeError(a,".syncBarrier() promises_base failed!");b.syncBarrierReject(a)})})["catch"](function(a){a=b.logRemoteInvokeError(a,".syncBarrier failed!");b.syncBarrierReject(a)})})};
b.getCapabilities=function(a){e.logger.debug(this.constructor.name+".getCapabilities() called.");return t.NavigatorUserMedia.getCapabilities(a)};Object.defineProperty(b.prototype,"dtmf",{get:function(){e.logger.debug(this.user_friendly_id()+".get dtmf() called.");return this.dtmf_},enumerable:!1,configurable:!0});b.prototype.setParameters=function(a){return this.setParametersAsync(a)};b.prototype.setParametersAsync=function(a){var b=this;e.logger.info(this.user_friendly_id()+".setParametersAsync() called.");
return new Promise(function(c,d){b.waitUntilConnected("RtpSender.setParametersAsync").then(function(){return Promise.all([b.remoteInvoke(!1,g.method_id_RTCRtpSender_t.setParameters,n.RtcRtpSendParameters.toRtcRtpSendParameters(a))])}).then(function(d){e.logger.info(b.user_friendly_id()+".setParametersAsync(): success.");c();b.params_=n.RtcRtpSendParameters.toRtcRtpSendParameters(a)})["catch"](function(a){a=b.logRemoteInvokeError(a,".setParametersAsync() failed!");d(a)})})};b.prototype.getParameters=
function(){e.logger.info(this.user_friendly_id()+".getParameters() called.");return this.getParametersInternal(!1)};b.prototype.getParametersAsync=function(){e.logger.info(this.user_friendly_id()+".getParametersAsync() called.");return this.getParametersInternal(!0)};b.prototype.getParametersInternal=function(a){var b=this,c=new Promise(function(a,c){b.waitUntilConnected(b.user_friendly_id()+".getParametersInternal").then(function(){e.logger.info(b.user_friendly_id()+".getParametersInternal() remote invoking");
return b.remoteInvoke(!1,g.method_id_RTCRtpSender_t.getParameters)}).then(function(c){b.params_=b.param0(c);e.logger.info(b.user_friendly_id()+".getParametersInternal() success returning: "+b.params_);a(n.RtcRtpSendParameters.toRTCRtpSendParameters(b.params_))})["catch"](function(a){a=b.logRemoteInvokeError(a,".getParametersInternal() failed!");c(a)})});if(a)return c;e.logger.info(this.user_friendly_id()+".getParametersInternal() returning: "+this.params_);return n.RtcRtpSendParameters.toRTCRtpSendParameters(this.params_)};
b.prototype.replaceTrack=function(a){var b=this;e.logger.info(this.user_friendly_id()+".replaceTrack() called. current track:"+(this.track_?this.track_.object_id():"null")+" with track="+(a?a.object_id():"null"));return new Promise(function(c,d){b.waitUntilConnected("RtpSender.replaceTrack").then(function(){if(!a&&!m.RemoteSession.isFeatureWebrtc1dot0Supported())return Promise.reject(new DOMException("Does not support replace track with null in non-Unified SDP semantic!"));e.logger.info(b.user_friendly_id()+
".replaceTrack() removeInvoke current track:"+(b.track_?b.track_.object_id():"null")+" with track="+(a?a.object_id():"null"));return a?b.remoteInvokeEx(!1,g.method_id_RTCRtpSender_t.replaceTrack,[a]):b.remoteInvoke(!1,g.method_id_RTCRtpSender_t.replaceTrack,{oid:-1})}).then(function(d){e.logger.info(b.user_friendly_id()+".replaceTrack(): success.");c();b.reinitTrack(a)})["catch"](function(a){a=b.logRemoteInvokeError(a,".replaceTrack() failed!");d(a)})})};return b}(b);a.RtpSender=z;var y=function(a){function b(c,
d,h,f,u){c=a.call(this,c,g.class_id_t.RTCRtpReceiver,d,h)||this;e.logger.info(c.user_friendly_id()+".constructor");c.contribsources_=[];c.syncsources_=[];c.params_=n.RtcRtpParameters.defRtcRtpParameters();c.unified_=f;u&&(c.track_=u);return c}f(b,a);b.prototype.dumpInfo=function(){e.logger.debug("RtpReceiver["+this.object_id()+"].dumpInfo():");this.track&&this.track.dumpInfo();this.transport&&this.transport.dumpInfo()};b.prototype.syncBarrier=function(){var b=this;e.logger.info(this.user_friendly_id()+
".syncBarrier() called.");return new Promise(function(c,d){b.syncBarrierDeep(c,d)&&b.waitUntilConnected("RtpReceiver.syncBarrier").then(function(){var c=a.prototype.syncBarrierBase.call(b);m.RemoteSession.isFeaturePstnSupported()&&m.RemoteSession.isFeatureDtmfSupported()?(c.push(b.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getContributingSources)),c.push(b.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getSynchronizationSources)),c.push(b.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getParameters))):
c.push(b.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getContributingSources));return Promise.all(c)}).then(function(a){var c;e.logger.info(b.user_friendly_id()+".syncBarrier success.");var d;c=k(b.syncBarrierBaseResults(a),2);d=c[0];c=c[1];a=k(a.slice(d).map(function(a){return b.param0(a)}),3);b.contribsources_=a[0];b.syncsources_=a[1];b.params_=a[2];Promise.all(c).then(function(a){b.syncBarrierBaseResultsWithAllPromisesFulFilled(a);e.logger.info(b.user_friendly_id()+".syncBarrier success.");b.syncBarrierResolve(b)})["catch"](function(a){a=
b.logRemoteInvokeError(a,".syncBarrier() promises_base failed!");b.syncBarrierReject(a)})})["catch"](function(a){a=b.logRemoteInvokeError(a,".syncBarrier() failed!");b.syncBarrierReject(a)})})};b.getCapabilities=function(a){e.logger.debug(this.constructor.name+".getCapabilities() called.");return t.NavigatorUserMedia.getCapabilities(a)};b.prototype.getContributingSources=function(){var a=this;e.logger.info(this.user_friendly_id()+".getContributingSources() called. "+JSON.stringify(this.contribsources_));
this.waitUntilConnected("RtpReceiver.getContributingSources").then(function(){return Promise.all([a.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getContributingSources)])}).then(function(b){b=k(b.map(function(b){return a.param0(b)}),1);a.contribsources_=b[0];e.logger.info(a.user_friendly_id(),".getContributingSources() success: "+JSON.stringify(a.contribsources_))})["catch"](function(b){a.logRemoteInvokeError(b,".getContributingSources() failed!");a.contribsources_=[]});return this.contribsources_};
b.prototype.getParameters=function(){var a=this;e.logger.info(this.user_friendly_id()+".getParameters() called.");this.waitUntilConnected(this.user_friendly_id()+".getParameters").then(function(){e.logger.info(a.user_friendly_id()+".getParameters() remote invoking");return a.remoteInvoke(!1,g.method_id_RTCRtpReceiver_t.getParameters)}).then(function(b){e.logger.info(a.user_friendly_id()+".getParameters() success");a.params_=a.param0(b)})["catch"](function(b){a.logRemoteInvokeError(b,".getParameters() failed!")});
e.logger.info(this.user_friendly_id()+".getParameters() returning: "+this.params_);return n.RtcRtpReceiveParameters.toRTCRtpReceiveParameters(this.params_)};b.prototype.getSynchronizationSources=function(){e.logger.debug(this.user_friendly_id()+".getSynchronizationSources() called.");return this.syncsources_};return b}(b);a.RtpReceiver=y},377:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,f=[],g;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)f.push(d.value)}catch(l){g={error:l}}finally{try{d&&
!d.done&&(c=e["return"])&&c.call(e)}finally{if(g)throw g.error;}}return f};Object.defineProperty(a,"__esModule",{value:!0});a.RtpTransceiver=a.RtcRtpTransceiverInit=a.RtcRtpTransceiverDirection=void 0;var p=d(658),g=d(550),e=d(851),t=d(589),x=d(484),m;(function(a){a[a.sendrecv=0]="sendrecv";a[a.sendonly=1]="sendonly";a[a.recvonly=2]="recvonly";a[a.inactive=3]="inactive";a[a.stopped=4]="stopped"})(m=a.RtcRtpTransceiverDirection||(a.RtcRtpTransceiverDirection={}));var n=function(){function a(){}a.toRtcRtpTransceiverDirection=
function(a){switch(a){case "inactive":a=m.inactive;break;case "recvonly":a=m.recvonly;break;case "sendonly":a=m.sendonly;break;case "sendrecv":a=m.sendrecv;break;case "stopped":a=m.stopped;break;default:a=m.sendrecv}return a};a.toRTCRtpTransceiverDirection=function(a){switch(a){case m.inactive:a="inactive";break;case m.recvonly:a="recvonly";break;case m.sendonly:a="sendonly";break;case m.sendrecv:a="sendrecv";break;case m.stopped:a="stopped";break;default:a="sendrecv"}return a};a.toRtcRtpTransceiverInit=
function(b){e.logger.info("RtcRtpTransceiverInit.toRtcRtpTransceiverInit() in init:"+JSON.stringify(b));var c={};b&&(b.direction&&(c.direction=a.toRtcRtpTransceiverDirection(b.direction)),b.sendEncodings&&(c.sendEncodings=[],b.sendEncodings.forEach(function(a){return c.sendEncodings.push(x.RtcRtpEncodingParameters.toRtcRtpEncodingParameters(a))})),b.streams&&(c.streams=b.streams));e.logger.info("RtcRtpTransceiverInit.toRtcRtpTransceiverInit() out init:"+JSON.stringify(c));return c};return a}();a.RtcRtpTransceiverInit=
n;b=function(a){function b(c,d,h,f,n,l){c=a.call(this,c,g.class_id_t.RTCRtpTransceiver,d,h)||this;e.logger.info(c.user_friendly_id()+".constructor");c.unified_=f;c.sender_=new t.RtpSender(c,0,p.ProxyMode.Pseudo,f);c.receiver_=l?l:new t.RtpReceiver(c,0,p.ProxyMode.Pseudo,f);n?(c.direction_=n,c.currentDirection_=n):(c.direction_=m.sendrecv,c.currentDirection_=m.sendrecv);return c}f(b,a);b.prototype.dumpInfo=function(){e.logger.debug(this.user_friendly_id()+".dumpInfo() [id="+this.mid+"] direction="+
n.toRTCRtpTransceiverDirection(this.direction_)+" currentDirection="+n.toRTCRtpTransceiverDirection(this.currentDirection_));this.sender&&this.sender.dumpInfo();this.receiver&&this.receiver.dumpInfo()};b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.syncBarrierDeep(b,d)&&a.waitUntilConnected("RtpTransceiver.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,g.method_id_RTCRtpTransceiver_t.mid,
""),a.remoteInvoke(!1,g.method_id_RTCRtpTransceiver_t.direction,0),a.remoteInvoke(!1,g.method_id_RTCRtpTransceiver_t.currentDirection,0),a.remoteInvoke(!1,g.method_id_RTCRtpTransceiver_t.sender,{oid:0}),a.remoteInvoke(!1,g.method_id_RTCRtpTransceiver_t.receiver,{oid:0})])}).then(function(b){var d;e.logger.info(a.user_friendly_id()+".syncBarrier remote success.");d=k(b.map(function(b){return a.param0(b)}),5);a.mid_=d[0];a.direction_=d[1];a.currentDirection_=d[2];b=d[3];d=d[4];var h=[];void 0!=b&&!1===
b.is_null&&(a.sender_.bind(a,b.oid),h.push(a.sender_.syncBarrier()));void 0!=d&&!1===d.is_null&&(a.receiver_.bind(a,d.oid),h.push(a.receiver_.syncBarrier()));if(0==h.length)e.logger.info(a.user_friendly_id()+".syncBarrier success"),a.syncBarrierResolve(a);else return e.logger.info(a.user_friendly_id()+".prop.syncBarrier start"),Promise.all(h)}).then(function(){e.logger.info(a.user_friendly_id()+".syncBarrier success");a.syncBarrierResolve(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");
a.syncBarrierReject(b)})})};Object.defineProperty(b.prototype,"mid",{get:function(){e.logger.debug(this.user_friendly_id()+".get_mid() called: "+this.mid_);return this.mid_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"sender",{get:function(){return this.sender_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"receiver",{get:function(){return this.receiver_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"direction",{get:function(){e.logger.info(this.user_friendly_id()+
".get_direction() called. "+n.toRTCRtpTransceiverDirection(this.direction_));return n.toRTCRtpTransceiverDirection(this.direction_)},set:function(a){var b=this;e.logger.info(this.user_friendly_id()+".set_direction() called. "+a);this.direction_=n.toRtcRtpTransceiverDirection(a);this.waitUntilConnected("RtpTransceiver.set_direction").then(function(){return b.remoteInvoke(!0,g.method_id_RTCRtpTransceiver_t.direction,n.toRtcRtpTransceiverDirection(a))}).then(function(){e.logger.info(b.user_friendly_id()+
".set_direction: success.")})["catch"](function(a){b.logRemoteInvokeError(a,".set_direction() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"currentDirection",{get:function(){e.logger.debug(this.user_friendly_id()+".get_currentDirection() called. "+n.toRTCRtpTransceiverDirection(this.currentDirection_));return n.toRTCRtpTransceiverDirection(this.currentDirection_)},enumerable:!1,configurable:!0});b.prototype.stop=function(){var a=this;e.logger.info(this.user_friendly_id()+
".stop() called.");this.waitUntilConnected("RtpTransceiver.stop").then(function(){return a.remoteInvoke(!0,g.method_id_RTCRtpTransceiver_t.stop)}).then(function(){e.logger.info(a.user_friendly_id()+".stop: success.")})["catch"](function(b){a.logRemoteInvokeError(b,".stop() failed!")})};b.prototype.setCodecPreferences=function(a){var b=this;e.logger.info(this.user_friendly_id()+".setCodecPreferences() called.");this.waitUntilConnected("RtpTransceiver.setCodecPreferences").then(function(){return b.remoteInvoke(!0,
g.method_id_RTCRtpTransceiver_t.setCodecPreferences,a)}).then(function(){e.logger.info(b.user_friendly_id()+".setCodecPreferences: success.")})["catch"](function(a){b.logRemoteInvokeError(a,".setCodecPreferences() failed!")})};return b}(p.ProxyObject);a.RtpTransceiver=b},973:function(b,a,d){function f(a,b){return void 0!==a.find(function(a){return a===b})}function k(a,b,c){b/=a.width;c/=a.height;var e=document.createElement("canvas"),d=e.getContext("2d");e.width=a.width*b;e.height=a.height*c;d.putImageData(a,
0,0);if(1!=b||1!=c)d.scale(b,c),d.drawImage(e,0,0);return e}function p(a,b,c){a=k(a,b,c);b=document.createElement("img");b.src=a.toDataURL();return b}function g(a,b,c,e){c="undefined"!==typeof c?c:y.Width;e="undefined"!==typeof e?e:y.Height;if(!0===b)return p(a,c,e);b=null;c==a.width&&e===a.height?b=a:(a=k(a,c,e),b=a.getContext("2d").getImageData(0,0,a.width,a.height));return b}var e=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,
b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),t=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,h=[],f;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)h.push(d.value)}catch(g){f=
{error:g}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(f)throw f.error;}}return h};Object.defineProperty(a,"__esModule",{value:!0});a.ScreenSource=a.ScreenSourceVda=a.ScreenSharingVda=a.ScreenSharingRemote=a.ScreenSharing=a.ImageDataRemote=void 0;var x=d(658),m=d(550),n=d(851),w=d(946),h=d(691),c=d(650),u;(function(a){a[a.Legacy=0]="Legacy";a[a.MonitorsAndApps=10]="MonitorsAndApps"})(u||(u={}));b=function(){return function(a,b,c){this.data=a;this.height=b;this.width=c}}();a.ImageDataRemote=
b;b=function(){function a(){this.local_=this.remote_=null}a.screenSharingInstance=function(b){a.instance||(a.instance=new a,b&&(a.instance.onscreentopologychanged=b));return a.instance};a.destroyInstance=function(){a.instance&&a.instance.remote_&&a.instance.remote_.release();a.instance=null};a.prototype.user_friendly_id=function(){return this.constructor.name+"[]"};Object.defineProperty(a.prototype,"onscreentopologychanged",{set:function(a){this.remote_||(this.remote_=new v);this.remote_.onscreentopologychanged=
a;this.local_||(this.local_=new z);this.local_.onscreentopologychanged=a},enumerable:!1,configurable:!0});a.prototype.getWindowsAsync=function(){var a=this;n.logger.info(this.user_friendly_id()+".getWindowsAsync() called.");null==this.local_&&(this.local_=new z);return new Promise(function(b,c){var e=[];a.local_.getWindowsAsync().then(function(c){c&&(e=c);n.logger.info(a.user_friendly_id()+".getWindowsAsync() returning sources");b(e)})["catch"](function(){n.logger.error("ScreenSharing.getWindowsAsync(): rejected");
b(e)})})};a.prototype.getScreensAsync=function(){var a=this;n.logger.info(this.user_friendly_id()+".getScreensAsync() called.");null==this.remote_&&(this.remote_=new v);return new Promise(function(b,c){var e=[];a.remote_.getScreensAsync().then(function(c){c&&(e=c);n.logger.info(a.user_friendly_id()+".getScreensAsync() returning sources");b(e)})["catch"](function(){n.logger.error("ScreenSharing.getScreensAsync(): rejected");b(e)})})};a.prototype.setActiveSource=function(a,b){var c=this;n.logger.info(this.user_friendly_id()+
".setActiveSource() called. id="+a+" appshare="+b);return new Promise(function(e,d){c.remote_.contains(a)?c.remote_.setActive(a).then(function(a){e(a)})["catch"](function(){n.logger.error("ScreenSharing.setActiveSource(): rejected");d()}):b?c.local_.contains(a)?c.local_.setActive(!0,a).then(function(a){e(a)})["catch"](function(){n.logger.error("ScreenSharing.setActiveSource(): rejected");d()}):(n.logger.info("ScreenSharing.setActiveSource(): legacy screen sharing"),e("")):(n.logger.info("ScreenSharing.setActiveSource(): legacy screen sharing"),
e(""))})};a.prototype.isAppshareActive=function(){return this.local_&&-1!==this.local_.lastActive};a.prototype.stopAppshare=function(){n.logger.info(this.user_friendly_id()+".stopAppshare() called.");this.local_&&this.local_.setActive(!1).then(function(a){n.logger.info("ScreenSharing.stopAppshare(): success, deviceid=",a)})["catch"](function(){n.logger.error("ScreenSharing.stopAppshare(): failure or timeout due to nonresponsive WS Agent")})};a.instance=null;return a}();a.ScreenSharing=b;var v=function(a){function b(){var c=
a.call(this,null,m.class_id_t.ScreenSharingRemote,0,x.ProxyMode.Local)||this;n.logger.info(c.user_friendly_id()+".constructor");c.sources_=[];return c}e(b,a);b.prototype.getSourceById=function(a){return this.sources_.find(function(b){return b.getId()==a})};b.prototype.contains=function(a){return void 0!==this.getSourceById(a)};Object.defineProperty(b.prototype,"onscreentopologychanged",{get:function(){return this.onscreentopologychanged_},set:function(a){var b=this;this.onscreentopologychanged_=a;
this.waitUntilConnected(this.user_friendly_id()+".onscreentopologychanged").then(function(){var a=b.registerCallbacks(!1,b.isNullCallback(b.onscreentopologychanged_),m.method_id_VDISharingRemote_t.onscreentopologychanged);a.then(function(){n.logger.info(b.user_friendly_id()+"onscreentopologychanged event received!!!");b.onscreentopologychanged_&&b.onscreentopologychanged_()});return b.remoteInvoke(!0,m.method_id_VDISharingRemote_t.onscreentopologychanged,a.success)})["catch"](function(a){b.logRemoteInvokeError(a,
".set_onscreentopologychanged() failed!")})},enumerable:!1,configurable:!0});b.prototype.getScreensAsync=function(){var a=this;n.logger.info(this.user_friendly_id()+".getScreensAsync() called.");var b=this.sources_;this.sources_=[];var e=w.getRedirector().vdabufferNoLimit()&&c.RemoteSession.isFeatureVdNoBufferLimitSupported();return new Promise(function(c,d){a.waitUntilConnected(a.user_friendly_id()+".getScreensAsync").then(function(){return a.remoteInvoke(!1,m.method_id_VDISharingRemote_t.getScreensAsync,
e)}).then(function(e){var h=[];e.params[0].forEach(function(c){var e=b.find(function(a){return a.object_id()===c.oid});void 0===e&&(n.logger.info(a.user_friendly_id()+" create a ScreenSource with oid:"+c.oid),e=new l(a,c.oid,x.ProxyMode.Remote));h.push(e.syncBarrier())});Promise.all(h.map(function(a){return a.then(function(a){return{value:a,status:"fulfilled"}},function(a){return{value:a,status:"rejected"}})})).then(function(e){var d=e.filter(function(a){return"fulfilled"===a.status}).map(function(a){return a.value});
a.sources_=d;b.filter(function(a){return!f(d,a)}).forEach(function(a){return a.release()});c(d)})["catch"](function(c){c=a.logRemoteInvokeError(c,".getScreensAsync() failed!");b.forEach(function(a){a.release()});d(c)})})["catch"](function(c){c=a.logRemoteInvokeError(c,".getScreensAsync() failed!");b.forEach(function(a){a.release()});d(c)})})};b.prototype.setActive=function(a){var b=this;n.logger.info(this.user_friendly_id()+".setActive() called. uniqueid="+a);return new Promise(function(c,e){-1!=
a?c(b.getSourceById(a).getDeviceId()):e()})};return b}(x.ProxyObject);a.ScreenSharingRemote=v;var z=function(){function a(){n.logger.info(this.user_friendly_id()+".constructor");this.sources_=[];this.lastactive_=-1}a.prototype.user_friendly_id=function(){return this.constructor.name+"[]"};Object.defineProperty(a.prototype,"onscreentopologychanged",{set:function(a){w.getRedirector().screenshare.setTopologyChangeCB(a)},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"lastActive",{get:function(){return this.lastactive_},
enumerable:!1,configurable:!0});a.prototype.getSourceById=function(a){return this.sources_.find(function(b){return b.getId()==a})};a.prototype.contains=function(a){return void 0!==this.getSourceById(a)};a.prototype.getWindowsAsync=function(){var a=this;n.logger.info(this.user_friendly_id()+".getWindowsAsync() called.");var b=this.sources_;this.sources_=[];return new Promise(function(c,e){w.getRedirector().screenshare.getSources(new h.getSourcesReqData(2)).then(function(e){e=e.map(function(c){var e=
b.find(function(a){return a.equivalent(c)});return void 0!==e?(e.setDescription(c.getDescription()),c.getIcon().then(function(a){e.setIcon(a)})["catch"](function(){n.logger.error(a.user_friendly_id()+".getWindowsAsync() failed to retrieve new icon.")}),c.getPreviewAsync().then(function(a){e.setPreview(a)})["catch"](function(){n.logger.error(a.user_friendly_id()+".getWindowsAsync() failed to retrieve new preview.")}),e):c});if(-1!=a.lastactive_){var d=b.find(function(b){return b.getId()==a.lastactive_}),
h=e.find(function(b){return b.getId()==a.lastactive_});void 0!==d&&void 0===h&&e.push(d)}a.sources_=e;c(a.sources_)})["catch"](function(){n.logger.error(a.user_friendly_id()+".getWindowsAsync(): rejected");e()})})};a.prototype.activateSource=function(a,b){var c=this;return new Promise(function(e,d){var f=b?"activate":"deactivate";n.logger.info(c.user_friendly_id()+".activateSource() called. action="+f);var g=new h.setActiveReqData(a.srcid,a.hwnd,a.origin,a.pid,!0,!0,b);w.getRedirector().screenshare.setActive(g).then(function(b){n.logger.info(c.user_friendly_id()+
": "+f+" success: srcid="+b.srcid+" deviceid="+b.bufferid);a.deviceid=b.bufferid;e(b.bufferid)})["catch"](function(){n.logger.error(c.user_friendly_id()+"failed to "+f+": srcid="+a.srcid+", maybe WS Agent is too slow to respond");d()})})};a.prototype.setActive=function(a,b){var c=this;n.logger.info(this.user_friendly_id()+".setActive() called. uniqueid="+b);return new Promise(function(e,d){a||(b=c.lastactive_);-1!=b?(a?(b!=c.lastactive_&&-1!=c.lastactive_&&c.activateSource(c.getSourceById(c.lastactive_),
!1),c.lastactive_=b):c.lastactive_=-1,c.activateSource(c.getSourceById(b),a).then(function(b){e(a?"RemoteApplication-"+b:b)})["catch"](function(){d()})):d()})};return a}();a.ScreenSharingVda=z;var y=function(){function a(){}a.Width=140;a.Height=90;return a}();b=function(){function a(b,c,e,d,h,f,g,u,n,m){this.uniqueid_=l.nextId_++;this.srcid_=b;this.deviceid_=c;this.type_=e;this.imagedata_=d;this.icon_=h;this.name_=f;this.hwnd_=g;this.origin_=u;this.caption_=n;this.pid_=m}a.prototype.user_friendly_id=
function(){return this.constructor.name+"["+this.uniqueid_+"]"};Object.defineProperty(a.prototype,"srcid",{get:function(){return this.srcid_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"hwnd",{get:function(){return this.hwnd_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"origin",{get:function(){return this.origin_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"pid",{get:function(){return this.pid_},enumerable:!1,configurable:!0});a.prototype.getId=
function(){return this.uniqueid_};a.prototype.getDeviceId=function(){return this.deviceid_};Object.defineProperty(a.prototype,"deviceid",{set:function(a){this.deviceid_=a},enumerable:!1,configurable:!0});a.prototype.getType=function(){return 2};a.prototype.getPreview=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getPreview() called, width:"+a+" height:"+b+" asImage:"+c);return Promise.reject(null)};a.prototype.setPreview=function(a){this.imagedata_=a};a.prototype.getPreviewAsync=function(a,
b,c){n.logger.debug(this.user_friendly_id()+".getPreviewAsync() called, width:"+a+" height:"+b);return!0===c?(a=p(this.imagedata_,y.Width,y.Height),Promise.resolve({data:a.src.replace(/^data:image\/(png|jpg);base64,/,"")})):Promise.resolve(this.imagedata_)};a.prototype.getPreviewImage=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getPreviewImage() called, width:"+b+" height:"+c);return Promise.resolve(g(this.imagedata_,a,b,c))};a.prototype.getDescription=function(){return this.name_};a.prototype.setDescription=
function(a){this.name_=a};a.prototype.getIcon=function(a,b,c){return!0===c?(a=p(this.icon_,y.Width,y.Height),Promise.resolve({data:a.src.replace(/^data:image\/(png|jpg);base64,/,"")})):Promise.resolve(this.icon_)};a.prototype.getIconImage=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getIconImage() called, width:"+b+" height:"+c);return Promise.resolve(g(this.icon_,a,"undefined"!==typeof b?b:this.icon_.width,"undefined"!==typeof c?c:this.icon_.height))};a.prototype.setIcon=function(a){this.icon_=
a};a.prototype.getBounds=function(){return{x:0,y:0,width:0,height:0}};a.prototype.equivalent=function(a){return this.pid_===a.pid_&&this.hwnd_===a.hwnd_};return a}();a.ScreenSourceVda=b;var l=function(a){function b(c,e,d){c=a.call(this,c,m.class_id_t.ScreenSource,e,d)||this;c.screenshare_=new h.ScreenShareUtil;c.uniqueid_=b.nextId_++;n.logger.info(c.user_friendly_id()+".constructor");return c}e(b,a);b.prototype.user_friendly_id=function(){return this.constructor.name+"["+this.uniqueid_+"]"};b.prototype.toJSImageData=
function(a){var b=atob(a.data.toString()),b=this.screenshare_.str2ab(b),b=new Uint8ClampedArray(b,0,b.byteLength);this.imagedata_=new ImageData(b,a.width,a.height)};b.prototype.syncBarrier=function(){var a=this;n.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,e){a.syncBarrierDeep(b,e)&&a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){Promise.all([a.remoteInvoke(!1,m.method_id_ScreenSource_t.srcid,0),a.remoteInvoke(!1,m.method_id_ScreenSource_t.deviceid,
""),a.remoteInvoke(!1,m.method_id_ScreenSource_t.type,0),a.remoteInvoke(!1,m.method_id_ScreenSource_t.name,""),a.remoteInvoke(!1,m.method_id_ScreenSource_t.imagedata),a.remoteInvoke(!1,m.method_id_ScreenSource_t.hwnd,""),a.remoteInvoke(!1,m.method_id_ScreenSource_t.origin,0),a.remoteInvoke(!1,m.method_id_ScreenSource_t.caption,""),a.remoteInvoke(!1,m.method_id_ScreenSource_t.pid,0)]).then(function(b){n.logger.info(a.user_friendly_id()+".syncBarrier(): success.");var e;b=t(b.map(function(b){return a.param0(b)}),
9);a.srcid_=b[0];a.deviceid_=b[1];a.type_=b[2];a.name_=b[3];e=b[4];a.hwnd_=b[5];a.origin_=b[6];a.caption_=b[7];a.pid_=b[8];a.toJSImageData(e);c.RemoteSession.isFeatureGTCSupported()?a.remoteInvoke(!1,m.method_id_ScreenSource_t.bounds,0).then(function(b){a.bounds_=a.param0(b);a.syncBarrierResolve(a)})["catch"](function(b){a.bounds_=void 0;b=a.logRemoteInvokeError(b,".prop.syncBarrier() getBounds failed.");a.syncBarrierReject(b)}):(n.logger.warning(a.user_friendly_id()+".syncBarrier() don't getBounds for GTC not supported"),
a.bounds_=void 0,a.syncBarrierResolve(a))})["catch"](function(b){b=a.logRemoteInvokeError(b,".prop.syncBarrier() failed.");a.syncBarrierReject(b)})})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed.");a.syncBarrierReject(b)})})};b.prototype.getId=function(){return this.uniqueid_};b.prototype.getDeviceId=function(){return this.deviceid_};b.prototype.getType=function(){return 1};b.prototype.getPreview=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getPreview() called, width:"+
a+" height:"+b+" asImage:"+c);return Promise.reject(null)};b.prototype.getPreviewAsync=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getPreviewAsync() called, width:"+a+" height:"+b);return!0===c?(a=p(this.imagedata_,y.Width,y.Height),Promise.resolve({data:a.src.replace(/^data:image\/(png|jpg);base64,/,"")})):Promise.resolve(this.imagedata_)};b.prototype.getPreviewImage=function(a,b,c){n.logger.debug(this.user_friendly_id()+".getPreviewImage() called, width:"+b+" height:"+c);return Promise.resolve(g(this.imagedata_,
a,b,c))};b.prototype.getDescription=function(){return this.name_};b.prototype.getIcon=function(a,b){return Promise.resolve(this.imagedata_)};b.prototype.getBounds=function(){return this.bounds_||{x:0,y:0,width:0,height:0}};b.nextId_=u.MonitorsAndApps;return b}(x.ProxyObject);a.ScreenSource=l},691:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.ScreenShareUtil=a.Bitmap=a.BitmapInfoHeader=a.BitmapFileHeader=a.setActiveRespData=a.setActiveReqData=a.getSourcesReqData=a.sshare_state=
a.sshare_cmd=void 0;var f=d(946),k=d(973),p=d(851),g;(function(a){a[a.Unknown=0]="Unknown";a[a.Cap=1]="Cap";a[a.GetSources=2]="GetSources";a[a.SetActive=3]="SetActive";a[a.TopologyChanged=4]="TopologyChanged"})(g=a.sshare_cmd||(a.sshare_cmd={}));var e;(function(a){a[a.Unknown=0]="Unknown";a[a.Initialized=1]="Initialized";a[a.Error=2]="Error"})(e=a.sshare_state||(a.sshare_state={}));b=function(){return function(a){this.origin=a}}();a.getSourcesReqData=b;b=function(){return function(a,b,e,d,f,g,l){this.srcid=
a;this.hwnd=b;this.origin=e;this.pid=d;this.border=f;this.cursor=g;this.activate=l}}();a.setActiveReqData=b;var t=function(){return function(a,b,e){this.srcid=a;this.origin=b;this.bufferid=e}}();a.setActiveRespData=t;var x=function(){function a(b,e,d,f,h){this.id_=b;this.resolve_=e;this.reject_=d;this.cmd_=f;this.data_=h;this.sent_=!1;this.timeoutId=void 0}a.prototype.user_friendly_id=function(){return this.constructor.name+"["+this.id_+"]"};a.prototype.cmdString=function(){return this.cmd_==g.Cap?
"Cap":this.cmd_==g.GetSources?"GetSources":this.cmd_==g.SetActive?"SetActive":"Unknown"};return a}(),m=function(){return function(){}}();a.BitmapFileHeader=m;var n=function(){return function(){}}();a.BitmapInfoHeader=n;var w=function(){return function(){}}();a.Bitmap=w;b=function(){function a(){this.cmdque_=[]}a.prototype.reqid=function(){return a.nextId++};a.prototype.user_friendly_id=function(){return this.constructor.name+"[]"};a.prototype.stateString=function(){return a.state_==e.Initialized?
"Initialized":a.state_==e.Error?"Error":"Unknown"};a.prototype.reset=function(){a.state_=e.Unknown;this.cmdque_=[]};a.prototype.dispatchCmds=function(){var b=this;a.state_==e.Initialized?this.cmdque_.forEach(function(a){0==a.sent_&&(a.cmd_==g.GetSources?(b.WSSendGetSources(a.id_,a.data_),a.sent_=!0,a.timeoutId=setTimeout(b.abortCmd.bind(b,a.id_),5E3)):a.cmd_==g.SetActive?(b.WSSendSetActive(a.id_,a.data_),a.sent_=!0,a.timeoutId=setTimeout(b.abortCmd.bind(b,a.id_),5E3)):p.logger.warning(a.user_friendly_id()+
".dispatchCmds(): invalid cmd: "+a.cmdString()))}):a.state_==e.Error?(this.cmdque_.forEach(function(a){p.logger.warning(a.user_friendly_id()+".dispatchCmds(): purging cmd: "+a.cmdString());a.reject_()}),this.cmdque_=[]):p.logger.warning(this.user_friendly_id()+".dispatchCmds(): invalid state: "+this.stateString())};a.prototype.abortCmd=function(a){var b=this.cmdque_.findIndex(function(b){return b.id_===a});-1!==b?(b=this.cmdque_.splice(b,1)[0],p.logger.warning(b.user_friendly_id()+NaN+b.cmdString()+
"]: aborted due to nonresponsive WS Agent!"),b.cmd_===g.SetActive&&b.data_.activate&&k.ScreenSharing.screenSharingInstance().stopAppshare(),b.reject_()):p.logger.warning(this.user_friendly_id()+".abortCmd(): Cmd not found!")};a.prototype.finalizeCmd=function(a,b,e){for(var d=0;d<this.cmdque_.length;d++){var f=this.cmdque_[d];if(void 0!=b&&b==f.id_&&1==f.sent_||void 0==b&&1==f.sent_){clearTimeout(f.timeoutId);p.logger.info(f.user_friendly_id()+".finalizeCmd(): purging cmd: "+f.cmdString());a?void 0!=
e?f.resolve_(e):f.resolve_():f.reject_();this.cmdque_.splice(d,1);break}}};a.prototype.onInitialized=function(b){p.logger.info(this.user_friendly_id()+".onInitialized(): init: "+b+" state:"+this.stateString());a.state_!=e.Initialized&&(a.state_=b?e.Initialized:e.Error);this.dispatchCmds()};a.prototype.onInitComplete=function(){p.logger.info(this.user_friendly_id()+".onInitComplete(): state:"+this.stateString());a.state_==e.Unknown&&(a.state_=e.Error,p.logger.info(this.user_friendly_id()+".onInitComplete(): items in queue:"+
this.cmdque_.length),this.dispatchCmds())};a.prototype.onError=function(b){p.logger.error(this.user_friendly_id()+".onError(): state: "+this.stateString());a.state_==e.Unknown?(a.state_=e.Error,this.dispatchCmds()):a.state_==e.Initialized&&this.finalizeCmd(!1,b)};a.prototype.ab2str=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};a.prototype.str2ab=function(a){for(var b=new ArrayBuffer(a.length),e=new Uint8Array(b),d=0,f=a.length;d<f;d++)e[d]=a.charCodeAt(d);return b};a.prototype.getBMP=
function(a){var b=new DataView(a),e=new w;e.fileheader=new m;e.fileheader.bfType=b.getUint16(0,!0);e.fileheader.bfSize=b.getUint32(2,!0);e.fileheader.bfReserved1=b.getUint16(6,!0);e.fileheader.bfReserved2=b.getUint16(8,!0);e.fileheader.bfOffBits=b.getUint32(10,!0);e.infoheader=new n;e.infoheader.biSize=b.getUint32(14,!0);e.infoheader.biWidth=b.getUint32(18,!0);e.infoheader.biHeight=b.getUint32(22,!0);e.infoheader.biPlanes=b.getUint16(26,!0);e.infoheader.biBitCount=b.getUint16(28,!0);e.infoheader.biCompression=
b.getUint32(30,!0);e.infoheader.biSizeImage=b.getUint32(34,!0);e.infoheader.biXPelsPerMeter=b.getUint32(38,!0);e.infoheader.biYPelsPerMeter=b.getUint32(42,!0);e.infoheader.biClrUsed=b.getUint32(46,!0);e.infoheader.biClrImportant=b.getUint32(50,!0);b=e.fileheader.bfOffBits;e.stride=4*Math.floor((e.infoheader.biBitCount*e.infoheader.biWidth+31)/32);e.pixels=new Uint8Array(a,b);return e};a.prototype.convertToImageData=function(a){var b=document.createElement("canvas").getContext("2d"),e=a.infoheader.biWidth,
d=a.infoheader.biHeight,b=b.createImageData(e,d),f=b.data,h=a.pixels;a=a.stride;for(var g=0;g<d;++g)for(var n=0;n<e;++n){var m=4*(n+e*(d-g)),k=4*n+a*g;f[m]=h[k+2];f[m+1]=h[k+1];f[m+2]=h[k];f[m+3]=255}return b};a.prototype.onGetSources=function(a,b){this.sources_=[];var e=this;b.sources.forEach(function(a){var b=a.image,c=atob(b.data),c=e.str2ab(c),c=new Uint8ClampedArray(c,0,c.byteLength),b=new ImageData(c,b.width,b.height),c=a.icon,d=atob(c.data),d=e.str2ab(d),d=new Uint8ClampedArray(d,0,d.byteLength),
c=new ImageData(d,c.width,c.height);a=new k.ScreenSourceVda(a.srcid,a.devicdid,a.type,b,c,a.name,a.hwnd,a.origin,a.caption,a.pid);e.sources_.push(a)});this.finalizeCmd(!0,a,this.sources_)};a.prototype.getSources=function(b){var d=this;return new Promise(function(f,n){if(a.state_!=e.Error){var m=new x(d.reqid(),f,n,g.GetSources,b);d.cmdque_.push(m)}else n();a.state_==e.Initialized&&d.dispatchCmds()})};a.prototype.onSetActive=function(a,b){var e=new t(b.srcid,b.origin,b.bufferid);this.finalizeCmd(!0,
a,e)};a.prototype.setActive=function(b){var d=this;return new Promise(function(f,n){if(a.state_!=e.Error){var m=new x(d.reqid(),f,n,g.SetActive,b);d.cmdque_.push(m)}else n();a.state_==e.Initialized&&d.dispatchCmds()})};a.prototype.setTopologyChangeCB=function(a){this.onwindowtopologychanged_=a};a.prototype.onToplogyChanged=function(){if(this.onwindowtopologychanged_)this.onwindowtopologychanged_()};a.prototype.WSSendGetSources=function(a,b){try{f.getRedirector().WSSendObject({v:"appsharing",hdr:{command:g.GetSources,
id:a},data:{origin:b.origin}})}catch(e){p.logger.error(e)}};a.prototype.WSSendSetActive=function(a,b){try{f.getRedirector().WSSendObject({v:"appsharing",hdr:{command:g.SetActive,id:a},data:{srcid:b.srcid,hwnd:b.hwnd,origin:b.origin,pid:b.pid,border:b.border,cursor:b.cursor,activate:b.activate}})}catch(e){p.logger.error(e)}};a.state_=e.Unknown;a.nextId=0;return a}();a.ScreenShareUtil=b},517:function(b,a){var d=this&&this.__generator||function(a,b){function d(a){return function(b){return f([a,b])}}
function f(d){if(k)throw new TypeError("Generator is already executing.");for(;g;)try{if(k=1,h&&(c=d[0]&2?h["return"]:d[0]?h["throw"]||((c=h["return"])&&c.call(h),0):h.next)&&!(c=c.call(h,d[1])).done)return c;if(h=0,c)d=[d[0]&2,c.value];switch(d[0]){case 0:case 1:c=d;break;case 4:return g.label++,{value:d[1],done:!1};case 5:g.label++;h=d[1];d=[0];continue;case 7:d=g.ops.pop();g.trys.pop();continue;default:if(!(c=g.trys,c=0<c.length&&c[c.length-1])&&(6===d[0]||2===d[0])){g=0;continue}if(3===d[0]&&
(!c||d[1]>c[0]&&d[1]<c[3]))g.label=d[1];else if(6===d[0]&&g.label<c[1])g.label=c[1],c=d;else if(c&&g.label<c[2])g.label=c[2],g.ops.push(d);else{c[2]&&g.ops.pop();g.trys.pop();continue}}d=b.call(a,g)}catch(m){d=[6,m],h=0}finally{k=c=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var g={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},k,h,c,u;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();return u={next:d(0),"throw":d(1),"return":d(2)},
"function"===typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},f=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,d=b&&a[b],f=0;if(d)return d.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&f>=a.length&&(a=void 0);return{value:a&&a[f++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},k=this&&this.__read||function(a,
b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var d="function"===typeof Symbol&&a[Symbol.iterator];if(!d)return a;var f=d.call(a),g,k=[],h;try{for(;(void 0===b||0<b--)&&!(g=f.next()).done;)k.push(g.value)}catch(c){h={error:c}}finally{try{g&&!g.done&&(d=f["return"])&&d.call(f)}finally{if(h)throw h.error;}}return k};Object.defineProperty(a,"__esModule",{value:!0});a.CitrixRTCStatsReport=a.Stats=a.StatsReport=void 0;var p=function(){function a(){this.items=[]}a.fromJSON=function(b){var d,
m,n=new a;try{for(var k=f(b),h=k.next();!h.done;h=k.next()){var c=g.fromJSON(h.value);n.items.push(c)}}catch(u){d={error:u}}finally{try{h&&!h.done&&(m=k["return"])&&m.call(k)}finally{if(d)throw d.error;}}return n};a.prototype.toJSON=function(){return this.items};a.prototype.result=function(){return this.items};return a}();a.StatsReport=p;var g=function(){function a(){this.names_=[];this.stat_=new Map;this.id="";this.timestamp=0;this.type=""}a.fromJSON=function(b){var d=new a;d.id=b.id||"";d.timestamp=
b.timestamp||"";d.type=b.type||"";Object.keys(b).forEach(function(a){"id"!==a&&"timestamp"!==a&&"type"!==a&&(d.names_.push(a),d.stat_.set(a,b[a]))});return d};a.prototype.toJSON=function(){var a,b,e={id:this.id,timestamp:this.timestamp,type:this.type};try{for(var d=f(this.stat_),g=d.next();!g.done;g=d.next()){var h=k(g.value,2);e[h[0]]=h[1]}}catch(c){a={error:c}}finally{try{g&&!g.done&&(b=d["return"])&&b.call(d)}finally{if(a)throw a.error;}}return e};a.prototype.names=function(){return this.names_};
a.prototype.stat=function(a){return this.stat_.get(a)};return a}();a.Stats=g;p=function(){function a(b){var e,d;this.statsMap=new Map;try{for(var g=f(b),k=g.next();!k.done;k=g.next()){var h=k.value;this.statsMap.set(h.id,h)}}catch(c){e={error:c}}finally{try{k&&!k.done&&(d=g["return"])&&d.call(g)}finally{if(e)throw e.error;}}}a.prototype.entries=function(){return this.statsMap.entries()};a.prototype.forEach=function(a,b){this.statsMap.forEach(a,b)};Object.defineProperty(a.prototype,"size",{get:function(){return this.statsMap.size},
enumerable:!1,configurable:!0});a.prototype.get=function(a){return this.statsMap.get(a)};a.prototype.has=function(a){return this.statsMap.has(a)};a.prototype.keys=function(){return this.statsMap.keys()};a.prototype.values=function(){return this.statsMap.values()};$jscomp.initSymbol();$jscomp.initSymbolIterator();a.prototype[Symbol.iterator]=function(){return d(this,function(a){switch(a.label){case 0:return[5,f(this.statsMap)];case 1:return a.sent(),[2]}})};return a}();a.CitrixRTCStatsReport=p},704:function(b,
a,d){var f=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,e)};return function(b,e){function d(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(d.prototype=e.prototype,new d)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e="function"===typeof Symbol&&
a[Symbol.iterator];if(!e)return a;var d=e.call(a),f,c=[],g;try{for(;(void 0===b||0<b--)&&!(f=d.next()).done;)c.push(f.value)}catch(k){g={error:k}}finally{try{f&&!f.done&&(e=d["return"])&&e.call(d)}finally{if(g)throw g.error;}}return c},p=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,e=b&&a[b],d=0;if(e)return e.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&d>=a.length&&(a=
void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.StreamResolution=a.RemoteCallConstraints=void 0;var g=d(550),e=d(658),t=d(851);b=function(){return function(){}}();a.RemoteCallConstraints=b;b=function(a){function b(){var d=a.call(this,null,g.class_id_t.StreamResolution,0,e.ProxyMode.Local)||this;d.lastSentConstraints_=null;return d}f(b,a);Object.defineProperty(b.prototype,
"onupdate",{get:function(){return this.onupdate_},set:function(a){var e=this;this.onupdate_=a;this.waitUntilConnected(this.user_friendly_id()+".onupdate").then(function(){var a=e.registerCallbacks(!1,e.isNullCallback(e.onupdate_),g.method_id_StreamResolution_t.onupdate);a.then(function(a){a=k(a.params);var d=a[0];a.slice(1);t.logger.info(e.user_friendly_id()+".onupdate",JSON.stringify(d));e.lastSentConstraints_&&JSON.stringify(e.lastSentConstraints_)==JSON.stringify(d)?t.logger.debug(e.user_friendly_id()+
".onupdate constraints unchanged, ignoring"):e.onupdate_&&(b.isValidRemoteConstraints(d)?(e.lastSentConstraints_=d,e.onupdate_(e.toICallConstraints(e.lastSentConstraints_))):t.logger.warning(e.user_friendly_id()+".onupdate invalid RemoteCallConstraints"))});return e.remoteInvoke(!0,g.method_id_StreamResolution_t.onupdate,a.success)})["catch"](function(){return t.logger.error(e.user_friendly_id()+".onupdate, could not set listener")})},enumerable:!1,configurable:!0});b.prototype.toICallConstraints=
function(a){var b,e,c={maxParticipantResolutions:null};if(a.max_participant_resolutions_dynamic){c.maxParticipantResolutions={};try{for(var d=p(a.max_participant_resolutions_dynamic),f=d.next();!f.done;f=d.next()){var g=f.value;c.maxParticipantResolutions[g.count]=g.resolution}}catch(m){b={error:m}}finally{try{f&&!f.done&&(e=d["return"])&&e.call(d)}finally{if(b)throw b.error;}}}else a.max_participant_resolutions_static&&(c.maxParticipantResolutions=a.max_participant_resolutions_static);c.maxIncomingStreams=
a.max_incoming_streams;c.maxOutgoingResolution=a.max_outgoing_resolution;c.maxSimulcastLayers=a.max_simulcast_layers;t.logger.info(this.user_friendly_id()+".toICallConstraints: "+JSON.stringify(c));return c};b.isValidRemoteConstraints=function(a){return null!=a&&(null!=a.max_participant_resolutions_dynamic||null!=a.max_participant_resolutions_static)&&null!=a.max_incoming_streams&&null!=a.max_outgoing_resolution&&null!=a.max_simulcast_layers};b.prototype.getCallConstraints=function(){var a=this;return new Promise(function(e,
d){a.waitUntilConnected(a.user_friendly_id()+".getCallConstraints").then(function(){return a.remoteInvoke(!1,g.method_id_StreamResolution_t.getCallConstraints)}).then(function(c){c=a.param0(c);t.logger.info(a.user_friendly_id()+".getCallConstraints",JSON.stringify(c));b.isValidRemoteConstraints(c)?(a.onupdate_&&(a.lastSentConstraints_=c),e(a.toICallConstraints(c))):(t.logger.warning(a.user_friendly_id()+".getCallConstraints invalid RemoteCallConstraints"),d())})["catch"](function(){t.logger.error(a.user_friendly_id()+
".getCallConstraints promise rejected");d()})})};b.getDefaultConstraints=function(){var a={maxParticipantResolutions:{1:720,2:720,3:360,more:360},maxIncomingStreams:4,maxOutgoingResolution:720,maxSimulcastLayers:0};t.logger.info("StreamResolution.getDefaultConstraints: "+JSON.stringify(a));return a};b.prototype.updateStreamResolution=function(){var a=this;this.getCallConstraints().then(function(b){return a.onupdate&&a.onupdate(b)})["catch"](function(){return t.logger.error("Failed to get stream resolution information!")})};
return b}(e.ProxyObject);a.StreamResolution=b},736:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),k=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();
$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var e=c.call(a),d,f=[],g;try{for(;(void 0===b||0<b--)&&!(d=e.next()).done;)f.push(d.value)}catch(l){g={error:l}}finally{try{d&&!d.done&&(c=e["return"])&&c.call(e)}finally{if(g)throw g.error;}}return f};Object.defineProperty(a,"__esModule",{value:!0});a.RemoteMediaStreamAudioDestinationNode=a.RemoteMediaStreamAudioSourceNode=a.RemoteAudioNode=a.RemoteAudioContext=void 0;var p=d(658),g=d(550),e=d(851),t=
d(144),x=d(550);b=function(a){function b(c,d){void 0===d&&(d=p.ProxyMode.Local);var f=a.call(this,null,g.class_id_t.AudioContext,c,d)||this;e.logger.info(f.user_friendly_id()+": ctor");return f}f(b,a);b.prototype.close=function(){var a=this;e.logger.info(this.user_friendly_id()+".close() called.");return new Promise(function(b,d){a.waitUntilConnected("RemoteAudioContext.close").then(function(){return a.remoteInvoke(!1,x.method_id_AudioContext_t.close)}).then(function(){e.logger.info(a.user_friendly_id()+
".close() successful.");b();a.release()})["catch"](function(b){a.logRemoteInvokeError(b,".close() failed!");d();a.release()})})};b.prototype.createMediaStreamSource=function(a){var b=this,d=new m(this,p.ProxyMode.Pseudo,{mediaStream:a});Promise.all([this.waitUntilConnected("RemoteAudioContext.createMediaStreamSource"),a.waitUntilConnected("RemoteAudioContext.createMediaStreamSource.RemoteStream")]).then(function(){e.logger.info(b.user_friendly_id()+".createMediaStreamSource id="+a.id+" oid="+a.object_id()+
" numberOfTracks="+a.getAudioTracks().length);return b.remoteInvoke(!1,x.method_id_AudioContext_t.createMediaStreamSource,{oid:a.object_id()})}).then(function(a){d.bind(b,b.param0(a).oid);return d.syncBarrier()}).then(function(a){e.logger.info(b.user_friendly_id()+".createMediaStreamSource MediaStreamAudioSourceNode successfully created.")})["catch"](function(a){b.logRemoteInvokeError(a,".createMediaStreamSource failed!")});return d};b.prototype.createMediaStreamDestination=function(){var a=this,
b={streamId:t.RemoteStream.generateIdWithPrefix("AC-"),audioTrackId:t.RemoteStream.generateIdWithPrefix("AC-")},d=t.RemoteMediaTrack.createPseudo(this,b.audioTrackId,"audio",b.audioTrackId),d=t.RemoteStream.createPseudo(this,b.streamId,[d]),f=new n(this,p.ProxyMode.Pseudo,d);this.waitUntilConnected("RemoteAudioContext.createMediaStreamDestination").then(function(){return a.remoteInvoke(!1,x.method_id_AudioContext_t.createMediaStreamDestination,b)}).then(function(b){f.bind(a,a.param0(b).oid);return f.syncBarrier()}).then(function(b){e.logger.info(a.user_friendly_id()+
".createMediaStreamDestination MediaStreamAudioDestinationNode successfully created.")})["catch"](function(b){a.logRemoteInvokeError(b,"createMediaStreamDestination failed!")});return f};b.prototype.syncBarrier=function(){var a=this;e.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,d){a.waitUntilConnected("RemoteAudioContext.syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,x.method_id_AudioContext_t.sampleRate)])}).then(function(d){e.logger.info(a.user_friendly_id()+
".syncBarrier() remote success");d=k(d.map(function(b){return a.param0(b)}),1);a.sampleRate=d[0];b(a)})["catch"](function(b){a.logRemoteInvokeError(b,".syncBarrier failed!");d()})})};return b}(p.ProxyObject);a.RemoteAudioContext=b;(function(){return function(){}})();b=function(a){function b(c,d,f,g,h,l,m,k){c=a.call(this,c,d,f,g,null,[h],k)||this;e.logger.info(c.user_friendly_id()+".constructor base");c.channelCount=2;c.channelCountMode="explicit";c.channelInterpretation="speakers";c._numberOfInputs=
l;c._numberOfOutputs=m;c.outputs_=Array(m);for(l=0;l<m;l++)c.outputs_[l]=new Map;c.inputs_=new Map;return c}f(b,a);Object.defineProperty(b.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"numberOfInputs",{get:function(){return this._numberOfInputs},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"numberOfOutputs",{get:function(){return this._numberOfOutputs},enumerable:!1,configurable:!0});b.prototype.addEventListener=
function(a,b,d){e.logger.debug(this.user_friendly_id()+".addEventListener: unimplemented!")};b.prototype.dispatchEvent=function(a){e.logger.debug(this.user_friendly_id()+".dispatchEvent: unimplemented!");return!1};b.prototype.removeEventListener=function(a,b,d){e.logger.debug(this.user_friendly_id()+".removeEventListener: unimplemented!")};b.prototype.connectionExists=function(a,b,e){return this.outputs_[a].has(b)&&0<=this.outputs_[a].get(b).indexOf(e)?!0:!1};b.prototype.findFreeInput=function(){for(var a=
0;a<this._numberOfInputs;++a)if(!this.inputs_.has(a))return a;return-1};b.prototype.connectToInput=function(a,b){if(0>a||!b||this.inputs_.has(a))return!1;this.inputs_.set(a,b);return!0};b.prototype.disconnectFromInput=function(a){if(0>a)return!1;this.inputs_["delete"](a);return!0};b.prototype.disconnectNodeFromInputs=function(a){var b=this;Array.from(this.inputs_.keys()).forEach(function(e){b.inputs_[e]===a&&b.disconnectFromInput(e)})};b.prototype.connectOutput=function(a,b,e){if(0>b||0>a||!e||a>=
this.numberOfOutputs)return!1;a=this.outputs_[a];a.has(e)||a.set(e,[]);a.get(e).push(b);return!0};b.prototype.connect=function(a,d,f){var m=this;e.logger.info(this.user_friendly_id()+".connect input="+(f||"undefined")+" output="+(d||"undefined"));if(!(a instanceof b))throw e.logger.error(this.user_friendly_id()+".connect: Connecting to AudioParam unsupported!"),new DOMException("AudioNode connecting to AudioParam is currently NOT supported!","NotSupportedError");var k=null!==d&&void 0!==d?d:0;if(0>
k||k>=this.numberOfOutputs)throw new RangeError("output parameter out of range!");if(a.context!==this.context)throw new TypeError("The destination node has been created in a different context!");var l=null!==f&&void 0!==f?f:a.findFreeInput();if(0>l||l>=a.numberOfInputs)throw new RangeError("input of the destination node out of range!");if(this.connectionExists(k,a,l))return e.logger.info(this.user_friendly_id()+".connect. The specified AudioNode and input combination is already connected to the output specified."),
a;this.connectOutput(k,l,a);a.connectToInput(l,this);Promise.all([this.waitUntilConnected(this.user_friendly_id()+".connect"),a.waitUntilConnected(this.user_friendly_id()+".connect")]).then(function(){e.logger.info(m.user_friendly_id()+".connect node="+m.object_id()+" output="+k+" destinationNode="+a.object_id()+" input="+l);return m.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,!1,g.method_id_AudioNode_t.connect,{oid:a.object_id()},k,l)}).then(function(){e.logger.info(m.user_friendly_id()+".connect successful.")})["catch"](function(a){m.logRemoteInvokeError(a,
".connect failed!")});e.logger.info(this.user_friendly_id()+".connect() returned");return a};b.prototype.disconnect=function(a,d,f){e.logger.info(this.user_friendly_id()+".disconnect() called");void 0===a||a instanceof b?void 0===a&&void 0===d&&void 0===f?this.disconnectAll():void 0===a&&void 0===f&&"number"===typeof d?this.disconnectOutput(d):void 0===d&&void 0===f&&a instanceof b?this.disconnectDestinationNode(a):void 0===f&&a instanceof b&&"number"===typeof d?this.disconnectOutputDestinationNode(a,
d):a instanceof b&&"number"===typeof d&&"number"===typeof f?this.disconnectSpecific(a,d,f):e.logger.error(this.user_friendly_id()+".disconnect error: incorrect call signature!"):e.logger.info(this.user_friendly_id()+".disconnect: Connecting to AudioParam unsupported!")};b.prototype.disconnectAll=function(){for(var a=this,b=0;b<this.numberOfOutputs;b++)this.outputs_[b].forEach(function(b,e){return e.disconnectNodeFromInputs(a)}),this.outputs_[b]=new Map;this.waitUntilConnected(this.user_friendly_id()+
".disconnectAll").then(function(){return a.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,!1,g.method_id_AudioNode_t.disconnectAll)}).then(function(){e.logger.info(a.user_friendly_id()+".disconnectAll success.")})["catch"](function(b){a.logRemoteInvokeError(b,".disconnectAll failed!")})};b.prototype.disconnectOutput=function(a){var b=this;if(0>a||a>=this.numberOfOutputs)throw new RangeError("output parameter out of range!");this.outputs_[a].forEach(function(a,c){return c.disconnectNodeFromInputs(b)});
this.outputs_[a]=new Map;this.waitUntilConnected(this.user_friendly_id()+".disconnectOutput").then(function(){return b.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,!1,g.method_id_AudioNode_t.disconnectOutput,a)}).then(function(){e.logger.info(b.user_friendly_id()+".disconnectOutput success.")})["catch"](function(a){b.logRemoteInvokeError(a,".disconnectOutput failed!")})};b.prototype.disconnectDestinationNode=function(a){for(var b=this,d=0,f=0;f<this.numberOfOutputs;f++){var h=this.outputs_[f];
h.has(a)&&(d+=h.get(a).length,h["delete"](a),a.disconnectNodeFromInputs(this))}if(0===d)throw new TypeError("No connection to this AudioNode!");this.waitUntilConnected(this.user_friendly_id()+".disconnectDestinationNode").then(function(){return b.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,!1,g.method_id_AudioNode_t.disconnectDestinationNode,{oid:a.object_id()})}).then(function(){e.logger.info(b.user_friendly_id()+".disconnectDestinationNode success.")})["catch"](function(a){b.logRemoteInvokeError(a,
".disconnectDestinationNode failed!")})};b.prototype.disconnectOutputDestinationNode=function(a,b){var d=this;if(0>b||b>=this.numberOfOutputs)throw new RangeError("output parameter out of range!");var f=this.outputs_[b].get(a);if(void 0===f||0===f.length)throw new TypeError("No connection to this AudioNode on this given output!");this.outputs_[b]["delete"](a);a.disconnectNodeFromInputs(this);this.waitUntilConnected(this.user_friendly_id()+".disconectOutputDestinationNode").then(function(){return d.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,
!1,g.method_id_AudioNode_t.disconnectOutputDestinationNode,{oid:a.object_id()},b)}).then(function(){e.logger.info(d.user_friendly_id()+".disconnectOutputDestinationNode success.")})["catch"](function(a){d.logRemoteInvokeError(a,".disconnectOutputDestinationNode failed!")})};b.prototype.disconnectSpecific=function(a,b,d){var f=this;if(0>b||b>=this.numberOfOutputs)throw new RangeError("output parameter out of range!");if(0>d||d>=a.numberOfInputs)throw new RangeError("input of the destination node out of range!");
if(this.connectionExists(b,a,d)){var h=this.outputs_[b].get(a).indexOf(d);this.outputs_[b].get(a).splice(h,1);a.disconnectFromInput(d);this.waitUntilConnected(this.user_friendly_id()+".disconnect").then(function(){return f.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,!1,g.method_id_AudioNode_t.disconnect,{oid:a.object_id()},b,d)}).then(function(){e.logger.info(f.user_friendly_id()+".disconnect success.")})["catch"](function(a){f.logRemoteInvokeError(a,".disconnect failed!")})}else throw new TypeError("No connection to this AudioNode from the given input on this given output!");
};return b}(p.ProxyObject);a.RemoteAudioNode=b;var m=function(a){function b(c,e,d){var f=this,h=d.mediaStream.getAudioTracks();if(1>h.length)throw Error("InvalidStateError");h.sort(function(a,b){return a.id<b.id?-1:a.id>b.id?1:0});h[0].getChannelCount();f=a.call(this,c,g.class_id_t.MediaStreamAudioSourceNode,0,e,c,0,1,d)||this;f._context=c;f.inputTrack=h[0];f.mediaStream=d.mediaStream;return f}f(b,a);b.prototype.syncBarrier=function(){var a=this,b=this;return new Promise(function(e,d){b.waitUntilConnected("MediaStreamAudioSourceNode.syncBarrier").then(function(){return a.remoteInvokeWithInterfaceId(g.class_id_t.AudioNode,
!1,g.method_id_AudioNode_t.channelCount)}).then(function(a){b.channelCount=b.param0(a);e(b)})["catch"](function(a){a=b.logRemoteInvokeError(a,"syncBarrier failed!");d(a)})})};return b}(b);a.RemoteMediaStreamAudioSourceNode=m;var n=function(a){function b(c,e,d,f){void 0===f&&(f={});var h=this,l=2,m="explicit",k="speakers";void 0!==f.channelCount&&(l=f.channelCount);void 0!==f.channelCountMode&&(m=f.channelCountMode);void 0!==f.channelInterpretation&&(k=f.channelInterpretation);h=a.call(this,c,g.class_id_t.MediaStreamAudioDestinationNode,
0,e,c,16,0,{channelCount:l,channelCountMode:m,channelInterpretation:k})||this;h._context=c;h.channelCount=l;h.channelCountMode=m;h.channelInterpretation=k;h.stream=d;return h}f(b,a);b.prototype.syncBarrier=function(){var a=this,b=a.stream;e.logger.info(this.user_friendly_id(),".syncBarrier ");return new Promise(function(d,f){a.waitUntilConnected(a.user_friendly_id()+".syncBarrier.").then(function(){return a.remoteInvoke(!1,x.method_id_MediaStreamAudioDestinationNode_t.stream)}).then(function(d){b.isPseudo()&&
(d=a.param0(d).oid,e.logger.info("\n                            "+a.user_friendly_id()+" remote created MediaStream and associated MediaStreamTrack \n                            for this MediaStreamAudioDestinationNode, stream oid: "+d),b.bind(a,d));return b.syncBarrier()}).then(function(b){b=b.getTracks();1!==b.length?(e.logger.error(a.user_friendly_id()+" incorrect number of tracks: "+b.length),f()):(b=b[0],"audio"!==b.kind?(e.logger.error(a.user_friendly_id()+" incorrect kind of track: "+b.kind),
f()):(b=b.getChannelCount(),b!==a.channelCount?(e.logger.error(a.user_friendly_id()+" incorrect channelCount of track: "+b),f()):d(a)))})["catch"](function(b){b=a.logRemoteInvokeError(b,"createStreamAndTrack failed!");f(b)})})};return b}(b);a.RemoteMediaStreamAudioDestinationNode=n},394:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.Telemetry=a.tel_key_CPUTotalmemory=a.tel_key_CPUGpuinfo=a.tel_key_CPUMachineid=a.tel_key_CPUProcessors=a.tel_key_CPUCores=a.tel_key_CPUModel=a.tel_key_CPUSpeed=
a.tel_key_OSEdition=a.tel_key_OSDistro=a.tel_key_OSArchitecture=a.tel_key_OSVersion=a.tel_key_OSFamily=a.tel_key_VerHdxRtcEngine=a.tel_key_VerTypeScript=a.tel_key_VerEndpoint=a.tel_key_VerVda=a.tel_key_VerReceiver=a.tel_key_VerWebrtcCodecs=a.tel_key_VerWebrpc=a.tel_key_PerfCallType=a.tel_key_PerfCallState=a.tel_key_PerfCallDirection=a.tel_key_SpeakerDeviceUsed=a.tel_key_VideoDeviceUsed=a.tel_key_AudioDeviceUsed=a.tel_key_CallEstOutgoing=a.tel_key_CallEstIncoming=a.tel_key_ScreensharingCallDuration=
a.tel_key_VideoCallDuration=a.tel_key_AudioCallDuration=a.tel_key_ConferenceCallDuration=a.tel_cmd=a.tel_CallType=a.tel_CallDirection=a.tel_CallState=void 0;var f=d(946),k=d(851);(function(a){a[a.unknown=0]="unknown";a[a.active=1]="active";a[a.idle=2]="idle"})(a.tel_CallState||(a.tel_CallState={}));(function(a){a[a.unknown=0]="unknown";a[a.incoming=1]="incoming";a[a.outgoing=2]="outgoing"})(a.tel_CallDirection||(a.tel_CallDirection={}));(function(a){a[a.unknown=0]="unknown";a[a.audio=1]="audio";a[a.video=
2]="video";a[a.multi=3]="multi";a[a.dshare=4]="dshare"})(a.tel_CallType||(a.tel_CallType={}));var p;(function(a){a[a.Unknown=0]="Unknown";a[a.Cap=1]="Cap";a[a.Init=2]="Init";a[a.Data=3]="Data"})(p=a.tel_cmd||(a.tel_cmd={}));a.tel_key_ConferenceCallDuration="ConferenceCallDuration";a.tel_key_AudioCallDuration="AudioCallDuration";a.tel_key_VideoCallDuration="VideoCallDuration";a.tel_key_ScreensharingCallDuration="ScreensharingCallDuration";a.tel_key_CallEstIncoming="CallEstIncoming";a.tel_key_CallEstOutgoing=
"CallEstOutgoing";a.tel_key_AudioDeviceUsed="AudioDeviceUsed";a.tel_key_VideoDeviceUsed="VideoDeviceUsed";a.tel_key_SpeakerDeviceUsed="SpeakerDeviceUsed";a.tel_key_PerfCallDirection="PerfCallDirection";a.tel_key_PerfCallState="PerfCallState";a.tel_key_PerfCallType="PerfCallType";a.tel_key_VerWebrpc="VerWebrpc";a.tel_key_VerWebrtcCodecs="VerWebrtcCodecs";a.tel_key_VerReceiver="VerReceiver";a.tel_key_VerVda="VerVda";a.tel_key_VerEndpoint="VerEndpoint";a.tel_key_VerTypeScript="VerTypeScript";a.tel_key_VerHdxRtcEngine=
"VerHdxRtcEngine";a.tel_key_OSFamily="OSFamily";a.tel_key_OSVersion="OSVersion";a.tel_key_OSArchitecture="OSArchitecture";a.tel_key_OSDistro="OSDistro";a.tel_key_OSEdition="OSEdition";a.tel_key_CPUSpeed="CPUSpeed";a.tel_key_CPUModel="CPUModel";a.tel_key_CPUCores="CPUCores";a.tel_key_CPUProcessors="CPUProcessors";a.tel_key_CPUMachineid="CPUMachineid";a.tel_key_CPUGpuinfo="CPUGpuinfo";a.tel_key_CPUTotalmemory="CPUTotalmemory";var g=function(){function a(b,d,e,f){this.cmd=b;this.key=d;this.value=e;this.flags=
f}a.prototype.SendTelemetryData=function(a){a.SendTelemetryData(this.cmd,this.key,this.value,this.flags)};return a}();b=function(){function a(){this.id=0;this.deferredData=[]}a.prototype.reset=function(){this.id=0;this.deferredData=[]};a.prototype.onInitialized=function(a){for(this.id=a;this.deferredData&&0<this.deferredData.length;)this.deferredData.shift().SendTelemetryData(this)};a.prototype.SendTelemetryInit=function(){0<this.id&&this.reset();try{f.getRedirector().WSSendObject({v:"telemetry",
hdr:{command:p.Init,id:0},init:{domain:"HDXMM Teams",subdomain:"Teams",feature:"msteams",version:"1.1.1.1"}})}catch(a){k.logger.error(a)}};a.prototype.SendTelemetryData=function(a,b,d,e){if(a!=p.Data)k.logger.warning("invalid telemetry command!");else if(0==this.id)this.deferredData.push(new g(a,b,d,e));else try{f.getRedirector().WSSendObject({v:"telemetry",hdr:{command:a,id:this.id},data:{key:b,value:d,flags:e}})}catch(q){k.logger.error(q)}};return a}();a.Telemetry=b},259:function(b,a,d){Object.defineProperty(a,
"__esModule",{value:!0});a.Util=void 0;var f=d(851);b=function(){function a(){}a.stringifyArray=function(a){for(var b="[",d=0;d<a.length;++d)0!=d&&(b+=","),b+=this.stringify(a[d]);return b+"]"};a.stringifyObject=function(a){var b="{",d=!0,f;for(f in a)d?d=!1:b+=",",b=b+'"'+f+'":',b=a[f]instanceof Array?b+this.stringifyArray(a[f]):"object"==typeof a[f]?b+this.stringifyObject(a[f]):b+JSON.stringify(a[f]);return b+"}"};a.stringify=function(a){return"object"==typeof a?"[object Array]"==Object.prototype.toString.call(a)?
this.stringifyArray(a):this.stringifyObject(a):JSON.stringify(a)};a.GetObjectPropertyDescriptor=function(a,b){for(var d=void 0;a!=Object.prototype;){d=Object.getOwnPropertyDescriptor(a,b);if(void 0!==d)break;a=a.__proto__}return d};a.sendEvent=function(a,b){try{var d=document.createEvent("Event");d.initEvent(b,!0,!0);a.dispatchEvent(d)}catch(k){f.logger.error('sendEvent(): exception dispatching "'+b+'" event: '+k.message)}};a.hasValue=function(a){var b=!1;null!==a&&void 0!==a&&(b=!0);return b};a.toByteArray=
function(a){var b=[];a=new Uint8Array(a instanceof ArrayBuffer?a:a.buffer);for(var d in a)b.push(a[d]);return b};a.toDataView=function(a){return new DataView(a)};return a}();a.Util=b},307:function(b,a,d){var f=this&&this.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{l(d.next(a))}catch(b){f(b)}}function h(a){try{l(d["throw"](a))}catch(b){f(b)}}function l(a){a.done?c(a.value):e(a.value).then(g,
h)}l((d=d.apply(a,b||[])).next())})},k=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,g&&(h=c[0]&2?g["return"]:c[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[c[0]&2,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;g=c[1];c=[0];continue;case 7:c=e.ops.pop();
e.trys.pop();continue;default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(l){c=[6,l],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,
h,l;$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();return l={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},p=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};
throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},g=d(360),e=d(144);d(679);var t=d(945),x=d(368),m=d(851).logger,n=d(650),q=d(973),h=d(247).getGC,c=d(946),u=d(613).E911Service;b=d(550);var v=b.Features,z=b.FEATURE_vda_delete_viewport,y=d(704).StreamResolution,l=d(239).E;b=d(919);var C=b.getHIDInterface,r=b.destroyHIDInterface,D=d(736).RemoteAudioContext;(function(a,b){a.CitrixWebRTC=b()})("undefined"!==typeof self?self:this,function(){function a(b,c){m.info("VDI Shim createMediaStreamInternal");
J();var d=new e.RemoteStream(null,0,0,b),A=new Promise(function(a,b){d.syncBarrier().then(function(b){m.info("stream.syncBarrier(): success.");a(b)})["catch"](function(a){m.error("stream.syncBarrier(): failed with error: "+JSON.stringify(a));d.release();b()})});return c?A:d}function b(a){null==ea&&(ea=new x.Frames(!S.isFeatureSupported(v.FEATURE_public_multi_window)));a(ea)}function d(a,c){b(function(b){var d=b.findFrame(a);void 0==d&&(d=b.newFrame(a));c(d)})}function I(a,c){b(function(b){b=b.findFrame(a);
null!=b&&c(b)})}function H(a){c.getRedirector().SendTelemetryData_Speaker(a)}function E(a,b){m.info("VDI Shim fireVMEvent eventName: "+a+", data: "+JSON.stringify(b));if(W)try{"vdiE911InfoChanged"===a?a="vdiE911DataChanged":"vdiCallConstraintsChanged"===a&&(a="vdiStreamConstraintsChanged");var c=Object.assign({event:a},b);m.info("Dispatching VM event:"+JSON.stringify(c));W(c)}catch(d){m.error("Exception onVMEvent(), eventName:"+a+" message:"+d.message)}}function J(){var a=window.getCitrixWebrtcRedir;
void 0!==a?a().then(function(a){m.info("sucesss on connect, getCitrixWebrtcRedir reg value:"+a);"1"!==a||S||(m.info("supported client"),B(ca))})["catch"](function(){m.error("Failure to Read Webrtc redir Reg Key");Q()}):(m.warning("window.getCitrixWebrtcRedir() method is not available yet"),Q())}function G(a){m.info("VDI Event: vdiClientDisconnected");Y();if(!0===a&&!1===ga){m.info("VDI Event: vdiClientDisconnected with failure reported");ga=!0;try{W({event:"vdiClientDisconnected",reason:"failure",
msg:"Websocket Connection Failure"})}catch(b){m.error("onVMEvent(): exception: "+b.message)}}else{ga=!1;try{W({event:"vdiClientDisconnected",reason:"endpointDisconnected"})}catch(b){m.error("onVMEvent(): exception: "+b.message)}}m.cleanup()}function B(a){m.info("initRemoteSession with vendor:"+a);S||(S=new n.RemoteSession("CitrixWebRTCSDK",a))}function F(){m.info("VDI Event: onVdiClientDisconnectedTimer");B(ca)}function N(){var a=this;m.info("VDI Shim onVdiClientConnected...");S?(S.getSessionInfo().then(function(c){return f(a,
void 0,void 0,function(){return k(this,function(a){switch(a.label){case 0:return m.info("VDI Shim onVdiClientConnected, client endpoint info:"+JSON.stringify(c)),P&&P.isValid()||(P=new e.RemoteDevices),O&&O.isValid()||(O=new e.NavigatorUserMedia),b(function(a){a.reconnect()}),E("vdiClientConnected",{version:c,endpointId:c.endpointId}),[4,O.getCapabilities().then(function(a){m.info("VDI Shim onVdiClientConnected, caps = "+JSON.stringify(a))})["catch"](function(){m.error("VDI Shim onVdiClientConnected, could not get capabilities")})];
case 1:return a.sent(),X||(X=new u,X.onupdate=function(a){E("vdiE911InfoChanged",a)},X.updateE911Info()),ba||(E("vdiCallConstraintsChanged",y.getDefaultConstraints()),null!==S&&n.RemoteSession.isFeatureCallConstraintsSupported()&&(ba=new y,ba.onupdate=function(a){E("vdiCallConstraintsChanged",a)},ba.updateStreamResolution())),[2]}})})})["catch"](function(){m.error("VDI Shim onVdiClientConnected, getSessionInfo failure! Session is not fully connected yet...")}),navigator.mediaDevices.dispatchEvent(new CustomEvent("devicechange"))):
m.warning("VDI Shim onVdiClientConnected, remoteSession does not exist")}function T(a){if("1"===a)m.info("Supported client"),c.getRedirector().pingConnectionBegin(!0);else if("0"===a){m.info("VDI Event: Unsupported client reported");try{W({event:"vdiClientDisconnected",reason:"endpointUnsupported",msg:"Unsupported endpoint connected"})}catch(b){m.error("onVMEvent(): exception: "+b.message)}}else m.warning("Citrix Webrtc Redir Reg Key value is incorrect")}function Q(){!1===fa&&(m.info("starting MS Reg retry..."),
fa=!0,L(10))}function L(a){if(0>=a){fa=!1;m.info("VDI Event: Reg Key not Updated after timer reported, Fallback");try{W({event:"vdiClientDisconnected",reason:"failure",msg:"Citrix Webrtc Redir Reg Key not Present"})}catch(b){m.error("onVMEvent(): exception: "+b.message)}}else{var c=window.getCitrixWebrtcRedir;void 0!==c?c().then(function(b){m.info("CitrixMSTeamsRedir reg value:"+b);"0"===b||"1"===b?(T(b),fa=!1):(m.info("MS Teams Redir Reg key not updated - Start timer"),setTimeout(function(){m.info("Timer waiting for registry to be updated count :"+
a);L(--a)},1E3))})["catch"](function(){m.error("Failure to Read MS Teams redir Reg Key - Start timer");setTimeout(function(){m.info("Timer waiting for registry to be updated count :"+a);L(--a)},1E3)}):(m.info("window.getCitrixWebrtcRedir() method is not available yet"),setTimeout(function(){m.info("Timer waiting for registry to be updated count :"+a);L(--a)},1E3))}}function Z(a){A("isFeatureOn");return S?S.isFeatureSupported(a):!1}function Y(){m.info("VDI : cleanup");c.getRedirector().clearReqs();
e.NavigatorUserMedia.resetCapabilities();P=O=null;r();ea=null;R&&R.release();S&&S.release();S=null;q.ScreenSharing.destroyInstance();X&&(X.release(),X=null);ba&&(ba.release(),ba=null);h().reset();m.info("VDI : cleanup done")}function aa(){return q.ScreenSharing.screenSharingInstance(function(){if(W)try{W({event:"vdiScreenTopologyChanged"})}catch(a){m.error("onVMEvent('vdiScreenTopologyChanged'): exception: "+a.message)}})}function A(a){if(!da)throw m.info("VDI Shim "+a+": throwing exception: not initialized!!"),
new DOMException("UCSDK is not initialized!!!");}m.setInstanceId("UCSDK");var ia=g.PeerConnection,O=null,ha=e.NavigatorUserMedia.getCapabilities,P=null,ea=null,R=null,W=null;window.addEventListener("unload",function(a){m.cleanup()});var X=null,ba=null,ga=!1,S=void 0,fa=!1,da=!1,ca=void 0;return{Features:v,CitrixPeerConnection:ia,getUserMedia:function(a,b,c){A("getUserMedia");J();m.info("VDI Shim getUserMedia");null!==O&&O.isValid()||(O=new e.NavigatorUserMedia);var d=e.RemoteMediaStreamConstraints.isConstraintsAudioDeviceIdEmpty(a),
f=e.RemoteMediaStreamConstraints.isConstraintsVideoSourceIdEmpty(a);return d||f?new Promise(function(d,e){P.enumerateDevices().then(function(d){return O.webkitGetUserMedia(a,b,c)}).then(function(a){m.info("webkitGetUserMedia for default was resolved");d(a)})["catch"](function(a){m.info("getUserMedia() for default failed with error:"+JSON.stringify(a));e()})}):O.webkitGetUserMedia(a,b,c)},getDisplayMedia:function(a){A("getDisplayMedia");J();m.info("VDI Shim getDisplayMedia");null!==P&&P.isValid()||
(P=new e.RemoteDevices);return P.getDisplayMedia(a)},enumerateDevices:function(){A("enumerateDevices");J();m.info("VDI Shim enumerateDevices");null!==P&&P.isValid()||(P=new e.RemoteDevices);return P.enumerateDevices()},onWindowClose:function(a,d,e){A("onWindowClose");m.info("VDI Shim onWindowClose: (handle: "+a+")");c.getRedirector().getVDAFeatureValue(z)&&b(function(b){b.disposeFrame(a)})},setClientAreaOffset:function(a,b,c){A("setClientAreaOffset");m.info("VDI setClientAreaOffset with xOffset = "+
a+", yOffset = "+b+", windowHandle = "+c);J();d(c,function(c){c.setClientAreaOffset(a,b)})},mapVideoElement:function(a,b){A("mapVideoElement");m.info("VDI New Video Element Created, Creating Mapping to Thin Client DOM");J();d(b,function(b){b.newVideoElement(a)})},mapAudioElement:function(a){A("mapAudioElement");m.info("VDI New Audio Element Created, Creating Mapping to VDA");if(void 0!==a.remoteAudioElement)m.info("Audio element is already configured!");else{J();delete a.remoteAudioElement;Object.defineProperty(a,
"remoteAudioElement",{writable:!0,configurable:!0,value:null});a.remoteAudioElement=new t.AudioElement;delete a.sinkId;Object.defineProperty(a,"sinkId",{configurable:!0,get:function(){return a.remoteAudioElement?a.remoteAudioElement.sinkId:void 0},set:function(b){m.info("VDI Shim set audio element SinkId value = "+b);a.setSinkId(b).then(function(){m.info("VDI Shim set audio element SinkId success")})["catch"](function(){m.error("VDI Shim set audio element SinkId failure")})}});var b=a.remoteAudioElement.play;
a.play=function(){m.info("VDI Shim remote audio play");return b.apply(a.remoteAudioElement,arguments)};var c=a.remoteAudioElement.pause;a.pause=function(){m.info("VDI Shim remote audio pause");return c.apply(a.remoteAudioElement,arguments)};a.setSinkId=function(b){m.info("VDI Shim set audio element SinkId value = "+b);var c=a.remoteAudioElement.setSinkId(b),d;e.enumeratedDevices.forEach(function(a){b===a.deviceId&&(d=a.label)});H(d);return c};delete a.srcObject;Object.defineProperty(a,"srcObject",
{configurable:!0,get:function(){return a.remoteAudioElement?a.remoteAudioElement.srcObject:void 0},set:function(b){m.info("VDI Shim set audio element srcObject "+JSON.stringify(b));a.remoteAudioElement.srcObject=b}})}},disposeVideoElement:function(a,b){A("disposeVideoElement");m.info("VDI Shim disposeVideoElement: ");I(b,function(b){b.disposeVideoElement(a)})},disposeAudioElement:function(a,b,c){A("disposeAudioElement");m.info("VDI Shim disposeAudioElement: ");a&&(b=a.remoteAudioElement)&&(b.dispose(),
a.remoteAudioElement=void 0)},setVMEventCallback:function(a){var b=this;W=a;c.getRedirector().isConnected()&&S.getSessionInfo().then(function(a){return f(b,void 0,void 0,function(){return k(this,function(b){m.info("VDI Shim onVdiClientConnected, client endpoint info:"+JSON.stringify(a));E("vdiClientConnected",{version:a,endpointId:a.endpointId});return[2]})})});m.info("VDI Event Callback Set")},playNotifyAudio:function(a,b){A("playNotifyAudio");m.info("VDI Shim Audio playNotifyAudio audioId:"+a+" src:"+
b);R&&R.playNotifyAudio(a,b)},stopNotifyAudio:function(a,b){A("stopNotifyAudio");m.info("VDI Shim Audio pauseNotifyAudio audioId:"+a+" src:"+b);R&&R.pauseNotifyAudio(a,b)},setSinkId:function(a,b){A("setSinkId");m.info("VDI Shim Audio setSinkId audioId:"+a+" sinkId:"+b);R&&R.setSinkId(a,b)},getLoop:function(a){A("getLoop");var b;R&&(b=R.getLoop(a));m.info("VDI Shim Audio getLoop audioId:"+a+" loop: "+b);return b},setLoop:function(a,b){A("setLoop");m.info("VDI Shim Audio setLoop audioId:"+a+" bool:"+
b);R&&R.setLoop(a,b)},addClipRect:function(a,b){A("addClipRect");m.info("VDI Adding Occlusion "+JSON.stringify(a));d(b,function(b){b.addOcclusion(a)})},removeClipRect:function(a,b){A("removeClipRect");m.info("VDI Removing Occlusion "+JSON.stringify(a));d(b,function(b){b.removeOcclusion(a)})},initLog:function(a,b){m.setMSLogger(a,b);m.info("VDI init logger")},isFeatureOn:Z,onConnectionChange:function(a){A("onConnectionChange");m.info("VDI : onConnectionChange to "+a);!1===a?m.info("Disconnecting from the VDA"):
(m.info("Connecting to the VDA"),a=window.getCitrixWebrtcRedir,void 0!==a?a().then(function(a){m.info("Sucesss on connect, CitrixRedir reg value:"+a);"0"===a||"1"===a?T(a):(m.info("MS Teams Redir Reg key not updated yet"),Q())})["catch"](function(){m.error("Failure to Read MS Teams redir Reg Key");Q()}):(m.warning("window.getCitrixWebrtcRedir() method is not available yet"),Q()))},getScreensAsync:function(){A("getScreensAsync");m.info("VDI Shim getScreensAsync");J();var a=aa();return a.getScreensAsync.apply(a,
arguments)},getWindowsAsync:function(){A("getWindowsAsync");m.info("VDI Shim getWindowsAsync");J();var a=aa();return a.getWindowsAsync.apply(a,arguments)},setScreenSharePanelId:function(a){A("setScreenSharePanelId");m.info("VDI: setScreenSharePanelId set to "+JSON.stringify(a));J();null!==P&&P.isValid()||(P=new e.RemoteDevices);P.panelid=a},setCodecCapabilities:function(a){A("setCodecCapabilities");J();m.info("VDI Shim setCodecCapabilities");null!==O&&O.isValid()||(O=new e.NavigatorUserMedia);return O.setCodecCapabilities(a)},
getE911Data:function(){A("getE911Data");return X?X.getE911Info():null},createMediaStream:function(b){A("createMediaStream");m.info("VDI Shim createMediaStream");return a(b,!1)},createMediaStreamAsync:function(b){A("createMediaStreamAsync");m.info("VDI Shim createMediaStreamAsync");return a(b,!0)},disposeMediaStream:function(a){var b,c;A("disposeMediaStream");m.info("VDI Shim disposeMediaStream: ");try{for(var d=p(a),e=d.next();!e.done;e=d.next()){var f=e.value;f&&f.dispose()}}catch(g){b={error:g}}finally{try{e&&
!e.done&&(c=d["return"])&&c.call(d)}finally{if(b)throw b.error;}}},getCapabilities:function(a){A("getCapabilities");J();m.info("VDI Shim getCapabilities");null!==O&&O.isValid()||(O=new e.NavigatorUserMedia,ha=e.NavigatorUserMedia.getCapabilities);return ha.apply(O,arguments)},initUCSDK:function(a){m.info("VDI Shim initUCSDK vendor:"+a);if(da)throw m.error("VDI Shim initUCSDK: throwing exception: Already initialized."),new DOMException("UCSDK is already initialized.");var b;"string"===typeof a&&(b=
a.trim());if(void 0===b||0===b.length)throw m.error("VDI Shim initUCSDK: throwing exception: vendor info cannot be empty!!!"),new DOMException("vendor info cannot be empty, please pass vendor info string!!!");ca=b;O=new e.NavigatorUserMedia;P=new e.RemoteDevices;R=new l;B(ca);window.onVdiClientDisconnected=G;window.onVdiClientDisconnectedTimer=F;window.onVdiClientConnected=N;da=!0},deinitUCSDK:function(){m.info("VDI Shim deinitUCSDK");da&&(Y(),c.getRedirector().setDeiniting(),c.getRedirector().terminateOptimization(),
window.onVdiClientDisconnectedTimer=void 0,ca=window.onVdiClientConnected=void 0,da=!1)},createAudioContext:function(){A("createAudioContext");m.info("VDI Shim createAudioContext");J();return Z(v.FEATURE_public_share_system_audio)?new D(0):null},getHid:function(){A("getHid");var a=null;Z(v.FEATURE_public_webhid)&&(a=C());return a}}})},679:function(b,a,d){var f=this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||
function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(a,"__esModule",{value:!0});a.VideoElement=a.VideoRect=void 0;var k=d(658),p=d(610),g=d(550),e=d(851),t=d(946),x=d(550),m=function(){return function(a,b){this.x=Math.round(a.x)*b.devicePixelRatio;this.y=Math.round(a.y)*b.devicePixelRatio;this.width=Math.round(a.width)*
b.devicePixelRatio;this.height=Math.round(a.height)*b.devicePixelRatio}}();a.VideoRect=m;var n;(function(a){a[a.pixels=0]="pixels";a[a.percent=1]="percent"})(n||(n={}));var q=function(){function a(b){this.value=parseInt(b);this.units=this.detectUnits(b)}a.prototype.detectUnits=function(a){return-1===a.toLowerCase().indexOf("px")?n.pixels:n.percent};return a}(),h;(function(a){a[a.fill=0]="fill";a[a.contain=1]="contain";a[a.cover=2]="cover"})(h||(h={}));var c=function(){return function(a,b){this.x=
a;this.y=b}}(),u=function(){function a(b,d,e){this.fit=this.convertFit(b);this.position=new c(d,e)}a.prototype.convertFit=function(a){return"fill"==a?h.fill:"contain"==a?h.contain:"cover"==a?h.cover:h.fill};return a}(),v;(function(a){a[a.NotReady=0]="NotReady";a[a.Ready=1]="Ready"})(v||(v={}));b=function(a){function b(c,d){var f=a.call(this,null,g.class_id_t.VideoElement,0,k.ProxyMode.Local)||this;f.srcObject_=null;f.sinkId_="";f.videoWidth=0;f.videoHeight=0;f.isLoaded=!1;f.connectionState="disconnected";
f.styleObserver=null;f.readyState_=v.NotReady;f.deferredVideoActions=[];f.pendingRelease_=!1;f.activeConnectionEvent_=null;f.connectionEventQueue_=[];f.window_=d;f.elementId=c;e.logger.info("VideoElement.constructor (elementid: "+c+")");return f}f(b,a);b.prototype.dispose=function(){var a=this;e.logger.info("VideoElement.dispose (elementId: "+this.elementId+" oid: "+this.object_id()+")");this.pendingRelease_=!0;this.srcObject=this.ontimeupdate=this.onloadedmetadata=null;this.waitUntilReady("VideoElement.dispose").then(function(){})["catch"](function(){a.pendingRelease_=
!1;a.setState("disconnected");a.onconnectionstatechange=null;a.release()});this.onReady()};b.prototype.setState=function(a){this.connectionState=a;if(this.onconnectionstatechange_)this.onconnectionstatechange_()};Object.defineProperty(b.prototype,"Id",{get:function(){return this.elementId},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"sinkId",{get:function(){return this.sinkId_},set:function(a){var b=this;e.logger.info("VideoElement.sinkId: (id="+a+")");this.waitUntilConnected("VideoElement.sinkId").then(function(){return void 0!=
a?b.remoteInvoke(!0,g.method_id_VideoElement_t.sinkId,a):new Promise(function(a){return a(void 0)})}).then(function(){e.logger.info("videoElement: setting state to ready. (oid: "+b.object_id()+")");b.sinkId_=a;b.readyState_=v.Ready;b.onReady()})["catch"](function(a){b.logRemoteInvokeError(a,".set_sinkId() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"srcObject",{get:function(){return this.srcObject_},set:function(a){e.logger.info(this.user_friendly_id()+".srcObject: set srcObject... this.srcObject:"+
this.srcObject+" obj:"+a);if(this.srcObject_!==a){var b=t.getRedirector().getFeatureValue(x.FEATURE_ms_teams_1911);null!==this.srcObject_&&(null===a&&b&&this.disconnect(),b||this.disconnect(),this.isLoaded=!1);this.srcObject_=a;null!==this.srcObject_&&this.connectTo(this.srcObject_)}},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onconnectionstatechange",{get:function(){return this.onconnectionstatechange_},set:function(a){e.logger.info(this.user_friendly_id()+".set_onconnectionstatechange() called.");
this.onconnectionstatechange_=a},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"onloadedmetadata",{set:function(a){e.logger.info(this.user_friendly_id()+".set_onloadedmetadata() called.");this.onloadedmetadata_=a},enumerable:!1,configurable:!0});b.prototype.setupOnVideoFrameChanged=function(){var a=this,b=this.registerCallbacks(!1,!1,g.method_id_VideoElement_t.onvideoframechanged);b.then(function(b){e.logger.info(a.user_friendly_id()+".onvideoframechanged",b.params);a.videoWidth=
b.params[0]||0;a.videoHeight=b.params[1]||0;a.isLoaded||(a.isLoaded=!0,a.onloadedmetadata_&&a.onloadedmetadata_())});this.remoteInvoke(!0,g.method_id_VideoElement_t.onvideoframechanged,b.success)};b.prototype.processConnectionEvent=function(){var a=this;if(0!==this.connectionEventQueue_.length&&!this.activeConnectionEvent_){var b=this.connectionEventQueue_.pop();"connectTo"==b.operation?this.activeConnectionEvent_=this.connectToAsync(b.param):"disconnect"==b.operation&&(this.activeConnectionEvent_=
this.disconnectAsync());this.activeConnectionEvent_.then(function(){a.activeConnectionEvent_=void 0;a.processConnectionEvent()})["catch"](function(){e.logger.error(a.user_friendly_id()+" : Failed to handle connection event! ");a.activeConnectionEvent_=void 0;a.processConnectionEvent()})}};b.prototype.connectTo=function(a){this.connectionEventQueue_.push({operation:"connectTo",param:a});this.processConnectionEvent()};b.prototype.disconnect=function(){this.connectionEventQueue_.push({operation:"disconnect",
param:null});this.processConnectionEvent()};b.prototype.connectToAsync=function(a){var b=this;return new Promise(function(c,d){e.logger.info(b.user_friendly_id()+".connectTo: connect media stream with id = "+a.id+", clone_id = "+a.clone_state.clone_id);b.streamId_=a.id;b.waitUntilReady("VideoElement.connectTo").then(function(){return a.waitUntilConnected("MediaStream.connectTo")}).then(function(){b.setupOnVideoFrameChanged();return a.clone_state.synchronize(a)}).then(function(a){e.logger.info(b.user_friendly_id()+
".connectTo: remote invoking");var c=b.registerCallbacks(!0,!1,g.method_id_VideoElement_t.connectTo);return Promise.all([b.remoteInvokeEx(!1,g.method_id_VideoElement_t.connectTo,[a],c.success,c.fail),c.prom()])}).then(function(a){e.logger.info(b.user_friendly_id()+".connectTo: remote media stream is connected!");b.setState("connected");b.watch();b.updateTimer=setInterval(function(){b.ontimeupdate&&b.ontimeupdate()},250);(a=b.window_.document.getElementById(b.elementId))&&b.updateStyle(a);c()})["catch"](function(a){b.logRemoteInvokeError(a,
".connectTo: failed to connect!");d()})})};b.prototype.disconnectAsync=function(){var a=this;return new Promise(function(b,c){e.logger.info(a.user_friendly_id()+".disconnect: disconnecting stream : "+a.streamId_);a.unwatch();a.waitUntilReady("VideoElement.disconnect").then(function(){a.updateTimer&&clearInterval(a.updateTimer);var b=a.registerCallbacks(!1,!0,g.method_id_VideoElement_t.onvideoframechanged);a.remoteInvoke(!0,g.method_id_VideoElement_t.onvideoframechanged,b.success);return a.remoteInvoke(!1,
g.method_id_VideoElement_t.disconnect)}).then(function(){e.logger.info(a.user_friendly_id()+".disconnect: remote media stream is disconnected!");a.setState("disconnected");1==a.pendingRelease_&&(a.pendingRelease_=!1,a.onconnectionstatechange=null,a.release());b()})["catch"](function(b){a.logRemoteInvokeError(b,".disconnect: failed to connect!");c()})})};b.prototype.setFrame=function(a){var b=this;e.logger.info(this.user_friendly_id()+".setFrame: set video frame to",a.x,a.y,a.width,a.height);this.waitUntilReady("VideoElement.setFrame").then(function(){var c=
new m(a,b.window_);return b.remoteInvoke(!1,g.method_id_VideoElement_t.setFrame,c)}).then(function(){e.logger.info(b.user_friendly_id()+".setFrame: success!")})["catch"](function(a){b.logRemoteInvokeError(a,".setFrame: failed to connect!")})};b.prototype.addClipRect=function(a){var b=this;e.logger.info(this.user_friendly_id()+".addClipRect: ",JSON.stringify(a));this.waitUntilReady("VideoElement.addClipRect").then(function(){var c=new m(a,b.window_);return b.remoteInvoke(!1,g.method_id_VideoElement_t.addClipRect,
c)})["catch"](function(a){b.logRemoteInvokeError(a,".addClipRect failed!")})};b.prototype.removeClipRect=function(a){var b=this;e.logger.info(this.user_friendly_id()+".removeClipRect: ",JSON.stringify(a));this.waitUntilReady("VideoElement.removeClipRect").then(function(){var c=new m(a,b.window_);return b.remoteInvoke(!1,g.method_id_VideoElement_t.removeClipRect,c)})["catch"](function(a){b.logRemoteInvokeError(a,".removeClipRect failed!")})};b.prototype.watch=function(){var a=this;if(t.getRedirector().getFeatureValue(x.FEATURE_ms_teams_video_placement)){var b=
this.window_.document.getElementById(this.elementId);b&&(this.unwatch(),this.styleObserver=new MutationObserver(function(b){b.forEach(function(b){"style"==b.attributeName?-1==b.oldValue.indexOf("background-color")&&a.updateStyle(b.target):a.elementId=b.target.id})}),this.styleObserver.observe(b,{attributes:!0,attributeOldValue:!0,attributeFilter:["style","id"]}))}};b.prototype.unwatch=function(){this.styleObserver&&(this.styleObserver.disconnect(),this.styleObserver=null)};b.prototype.updateStyle=
function(a){if("connected"==this.connectionState){var b=this.window_.getComputedStyle(a).getPropertyValue("object-fit"),c=this.window_.getComputedStyle(a).getPropertyValue("object-position").split(" ");a=new q(c[0]);c=new q(c[1]);this.placement=new u(b,a,c)}else e.logger.warning(this.user_friendly_id()+".updateStyle: video element is not connected")};Object.defineProperty(b.prototype,"placement",{get:function(){return this.placement_},set:function(a){var b=this;t.getRedirector().getFeatureValue(x.FEATURE_ms_teams_video_placement)?
this.waitUntilReady("VideoElement.placement").then(function(){return b.remoteInvoke(!0,g.method_id_VideoElement_t.placement,a)}).then(function(){b.placement_=a})["catch"](function(a){b.logRemoteInvokeError(a,".placement setter: failed to connect!")}):e.logger.warning(this.user_friendly_id()+".placement: video placement feature is not supported on a client")},enumerable:!1,configurable:!0});b.prototype.waitUntilReady=function(a){var b=this;return new Promise(function(c,d){e.logger.info("VideoElement.waitUntilReady(): readyState="+
b.readyState_+". (oid: "+b.object_id()+")");b.readyState_==v.Ready?c():(e.logger.info('videoElement.waitUntilReady(): deferring action "'+a+'". (oid: '+b.object_id()+")"),b.deferredVideoActions.push(new p.deferred_action(c,d,a)))})};b.prototype.onReady=function(){for(;this.deferredVideoActions&&0<this.deferredVideoActions.length;)this.deferredVideoActions.shift().post(this.readyState_==v.Ready)};return b}(k.ProxyObject);a.VideoElement=b},919:function(b,a,d){function f(){K||(K=new D);return K}var k=
this&&this.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),p=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,
c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&d>=a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},g=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d=c.call(a),e,f=[],g;try{for(;(void 0===b||0<b--)&&!(e=d.next()).done;)f.push(e.value)}catch(h){g=
{error:h}}finally{try{e&&!e.done&&(c=d["return"])&&c.call(d)}finally{if(g)throw g.error;}}return f};Object.defineProperty(a,"__esModule",{value:!0});a.HidInputReportEvent=a.HidConnectionEventInternal=a.HidConnectionEvent=a.destroyHIDInterface=a.getHIDInterface=a.HidInterface=a.HidDevice=a.HidCollectionInfo=a.HidReportInfo=a.HidReportItem=a.NumberBoundsUtil=a.JS_NUMBER_TYPE=a.JS_NUMBER_LEN=a.JS_NUMBER_MASK=a.HidDeviceRequestOptions=a.HIDUnitSystem=void 0;var e=d(550),t=d(658),q=d(259),m=d(851),n=function(a){return void 0!==
a&&null!==a?Uint32Array.from(Int32Array.of(a))[0]:a};(function(a){a[a.none=0]="none";a[a.si_linear=1]="si_linear";a[a.si_rotation=2]="si_rotation";a[a.english_linear=3]="english_linear";a[a.english_rotation=4]="english_rotation";a[a.vendor_defined=5]="vendor_defined";a[a.reserved=6]="reserved"})(a.HIDUnitSystem||(a.HIDUnitSystem={}));var w=function(){function a(){}a.validate=function(b){var c=new a;if("object"!==typeof b)throw TypeError("Filter is not object. Filter = "+b);this.validateField("vendorId",
b,c);this.validateField("productId",b,c);this.validateField("usagePage",b,c);this.validateField("usage",b,c);if(void 0!=c.productId&&void 0==c.vendorId)throw TypeError("productId is present but the venderId is not.");if(void 0!=c.usage&&void 0==c.usagePage)throw TypeError("usage is present but the usagePage is not.");var d=Object.keys(c);Object.keys(b).forEach(function(a){-1==d.indexOf(a)&&m.logger.warning("HidDeviceFilter unexpected field will be ignored. Field = "+a)});if(0==d.length)throw TypeError("HIDDeviceFilter must have at least one expected field.");
return c};a.validateField=function(a,b,c){b=b[a];if(void 0!==b)if("number"===typeof b)c[a]=b;else throw TypeError(a+" is not a number");};return a}(),h=function(){function a(){this.filters=[]}a.validate=function(b){var c,d,e,f;m.logger.info("HidDeviceRequestOptions.validate() called with options = "+JSON.stringify(b));var g=new a;try{var h=b.filters;if(void 0===h||null===h)throw TypeError("filters field is missing.");if(!Array.isArray(h))throw TypeError("filters field is not an array.");try{for(var k=
p(h),l=k.next();!l.done;l=k.next()){var n=w.validate(l.value);g.filters.push(n)}}catch(t){c={error:t}}finally{try{l&&!l.done&&(d=k["return"])&&d.call(k)}finally{if(c)throw c.error;}}var A=b.exclusionFilters;if(A){if(!Array.isArray(A))throw TypeError("exclusionFilters field is not an array.");g.exclusionFilters=[];try{for(var r=p(A),u=r.next();!u.done;u=r.next()){var q=w.validate(u.value);g.exclusionFilters.push(q)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(f=r["return"])&&f.call(r)}finally{if(e)throw e.error;
}}}var x=Object.keys(g);Object.keys(b).forEach(function(a){-1==x.indexOf(a)&&m.logger.warning("HidDeviceRequestOptions unexpected field will be ignored. Field = "+a)})}catch(t){return m.logger.error("HidDeviceRequestOptions parsing error. error = "+t.message),null}return g};return a}();a.HidDeviceRequestOptions=h;var c;(function(a){a[a["byte"]=127]="byte";a[a.octet=255]="octet";a[a["short"]=32767]="short";a[a.ushort=65535]="ushort";a[a["long"]=2147483647]="long";a[a.ulong=4294967295]="ulong"})(c=
a.JS_NUMBER_MASK||(a.JS_NUMBER_MASK={}));var u;(function(a){a[a["byte"]=7]="byte";a[a.octet=8]="octet";a[a["short"]=15]="short";a[a.ushort=16]="ushort";a[a["long"]=31]="long";a[a.ulong=32]="ulong"})(u=a.JS_NUMBER_LEN||(a.JS_NUMBER_LEN={}));var v;(function(a){a[a["byte"]=0]="byte";a[a.octet=1]="octet";a[a["short"]=2]="short";a[a.ushort=3]="ushort";a[a["long"]=4]="long";a[a.ulong=5]="ulong"})(v=a.JS_NUMBER_TYPE||(a.JS_NUMBER_TYPE={}));var z=function(){function a(){}a.unsigned_bitwise_and_op=function(a,
b,c){for(var d="",e=0;e<c;e++)d=(a>>e&b>>e&1).toString()+d;return Number("0b"+d)};a.to_byte=function(a){return(0>a?-1:1)*(c["byte"]&Math.abs(a))};a.to_octet=function(b){return a.unsigned_bitwise_and_op(c.octet,b,u.octet)};a.to_short=function(a){return(0>a?-1:1)*(c["short"]&Math.abs(a))};a.to_ushort=function(b){return a.unsigned_bitwise_and_op(c.ushort,b,u.ushort)};a.to_long=function(a){return(0>a?-1:1)*(c["long"]&Math.abs(a))};a.to_ulong=function(b){return a.unsigned_bitwise_and_op(c.ulong,b,u.ulong)};
a.validate_number=function(b,c){if(void 0!==c&&null!==c){var d=0,e=!0;switch(b){case v["byte"]:d=a.to_byte(c);break;case v.octet:d=a.to_octet(c);break;case v["short"]:d=a.to_short(c);break;case v.ushort:d=a.to_ushort(c);break;case v["long"]:d=a.to_long(c);break;case v.ulong:d=a.to_ulong(c);break;default:m.logger.error("NumberBoundsUtil.validate_number() invalid number type!")}d!=c&&(e=!1,m.logger.error("NumberBoundsUtil.validate() validate_number overflow! v:"+c.toString(16)+" modified:"+d.toString(16)));
return[d,e]}return void 0===c?[void 0,!0]:[void 0,!1]};return a}();a.NumberBoundsUtil=z;var y=function(){function a(){}a.validate=function(a){var b,c=[],d=!0;if(a){if(a.isRange)a.usages=void 0,d=!0,b=n(a.usageMinimum),b=g(z.validate_number(v.ulong,b),2),a.usageMinimum=b[0],(d=b[1])&&void 0!==a.usageMinimum||c.push("usageMinimum"),d=!0,b=n(a.usageMaximum),b=g(z.validate_number(v.ulong,b),2),a.usageMaximum=b[0],(d=b[1])&&void 0!==a.usageMaximum||c.push("usageMinimum");else{a.usageMinimum=void 0;a.usageMaximum=
void 0;var d=!0,e=[];void 0!==a.usages&&a.usages.forEach(function(a){var b;a=n(a);a=g(z.validate_number(v.ulong,a),2);b=a[0];d=a[1];e.push(b);d||c.push("usages")});a.usages=0<e.length?e:void 0}d=!0;b=g(z.validate_number(v.ushort,a.reportSize),2);a.reportSize=b[0];(d=b[1])||c.push("reportSize");d=!0;b=g(z.validate_number(v.ushort,a.reportCount),2);a.reportCount=b[0];(d=b[1])||c.push("reportCount");d=!0;b=g(z.validate_number(v["byte"],a.unitExponent),2);a.unitExponent=b[0];(d=b[1])||c.push("unitExponent");
d=!0;b=g(z.validate_number(v["byte"],a.unitFactorLengthExponent),2);a.unitFactorLengthExponent=b[0];(d=b[1])||c.push("unitFactorLengthExponent");d=!0;b=g(z.validate_number(v["byte"],a.unitFactorMassExponent),2);a.unitFactorMassExponent=b[0];(d=b[1])||c.push("unitFactorMassExponent");d=!0;b=g(z.validate_number(v["byte"],a.unitFactorTimeExponent),2);a.unitFactorTimeExponent=b[0];(d=b[1])||c.push("unitFactorTimeExponent");d=!0;b=g(z.validate_number(v["byte"],a.unitFactorTemperatureExponent),2);a.unitFactorTemperatureExponent=
b[0];(d=b[1])||c.push("unitFactorTemperatureExponent");d=!0;b=g(z.validate_number(v["byte"],a.unitFactorCurrentExponent),2);a.unitFactorCurrentExponent=b[0];(d=b[1])||c.push("unitFactorCurrentExponent");d=!0;b=g(z.validate_number(v["byte"],a.unitFactorLuminousIntensityExponent),2);a.unitFactorLuminousIntensityExponent=b[0];(d=b[1])||c.push("unitFactorLuminousIntensityExponent");d=!0;b=g(z.validate_number(v["long"],a.logicalMinimum),2);a.logicalMinimum=b[0];(d=b[1])||c.push("logicalMinimum");d=!0;
b=g(z.validate_number(v["long"],a.logicalMaximum),2);a.logicalMaximum=b[0];(d=b[1])||c.push("logicalMaximum");d=!0;b=g(z.validate_number(v["long"],a.physicalMinimum),2);a.physicalMinimum=b[0];(d=b[1])||c.push("physicalMinimum");d=!0;b=g(z.validate_number(v["long"],a.physicalMaximum),2);a.physicalMaximum=b[0];(d=b[1])||c.push("physicalMaximum")}0<c.length&&(d=!1,m.logger.error("HidReportItem.validate() overflows:"+c));return[a,d]};return a}();a.HidReportItem=y;var l=function(){function a(){}a.validate=
function(a){var b,c=[],d=!0;if(a&&(d=!0,b=g(z.validate_number(v.octet,a.reportId),2),a.reportId=b[0],(d=b[1])||c.push("reportId"),d=!0,void 0!==a.items)){var e=[];a.items.forEach(function(a){var b;a=g(y.validate(a),2);b=a[0];d=a[1];e.push(b);d||c.push("items")});a.items=e}0<c.length&&(d=!1,m.logger.error("HidReportInfo.validate() overflows:"+c));return[a,d]};return a}();a.HidReportInfo=l;var C=function(){function a(){}a.validate=function(b){var c,d=[],e=!0;if(b){e=!0;c=g(z.validate_number(v.ushort,
b.usagePage),2);b.usagePage=c[0];(e=c[1])||d.push("usagePage");e=!0;c=g(z.validate_number(v.ushort,b.usage),2);b.usage=c[0];(e=c[1])||d.push("usage");e=!0;c=g(z.validate_number(v.ushort,b.type),2);b.type=c[0];(e=c[1])||d.push("type");e=!0;if(void 0!==b.children){var f=[];b.children.forEach(function(b){var c;b=g(a.validate(b),2);c=b[0];e=b[1];f.push(c);e||d.push("children")});b.children=f}e=!0;if(void 0!==b.inputReports){var h=[];b.inputReports.forEach(function(a){var b;a=g(l.validate(a),2);b=a[0];
e=a[1];h.push(b);e||d.push("inputReports")});b.inputReports=h}e=!0;if(void 0!==b.outputReports){var k=[];b.outputReports.forEach(function(a){var b;a=g(l.validate(a),2);b=a[0];e=a[1];k.push(b);e||d.push("outputReports")});b.outputReports=k}e=!0;if(void 0!==b.featureReports){var n=[];b.featureReports.forEach(function(a){var b;a=g(l.validate(a),2);b=a[0];e=a[1];n.push(b);e||d.push("featureReports")});b.featureReports=n}}0<d.length&&(e=!1,m.logger.error("HidCollectionInfo.validate() overflows:"+d));return[b,
e]};return a}();a.HidCollectionInfo=C;var r=function(a){function b(c,d){var f=a.call(this,c,e.class_id_t.WebHidDevice,d,t.ProxyMode.Remote)||this;f.setupOnCollectionsAddedCallback();return f}k(b,a);b.prototype.syncBarrier=function(){var a=this;m.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,e.method_id_WebHidDevice_t.opened,!1),a.remoteInvoke(!1,
e.method_id_WebHidDevice_t.vendorId,0),a.remoteInvoke(!1,e.method_id_WebHidDevice_t.productId,0),a.remoteInvoke(!1,e.method_id_WebHidDevice_t.productName,""),a.remoteInvoke(!1,e.method_id_WebHidDevice_t.collections,{}),a.remoteInvoke(!1,e.method_id_WebHidDevice_t.compositeId,"")])}).then(function(c){var d,e,f;m.logger.info(a.user_friendly_id()+".syncBarrier remote success.");var h;c=g(c.map(function(b){return a.param0(b)}),6);a.opened_=c[0];a.vendorId_=c[1];a.productId_=c[2];a.productName_=c[3];h=
c[4];a.compositeId_=c[5];c=!0;var k=[];try{for(var A=p(h),l=A.next();!l.done;l=A.next()){var n=h=void 0;f=g(C.validate(l.value),2);h=f[0];(n=f[1])?k.push(h):c=!1}}catch(t){d={error:t}}finally{try{l&&!l.done&&(e=A["return"])&&e.call(A)}finally{if(d)throw d.error;}}a.collections_=k;c||m.logger.warning(a.user_friendly_id()+"collections received from endpoint got truncated!!!");b(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");c(b)})})};b.prototype.syncBarrierForStateAttributes=
function(){var a=this;m.logger.info(this.user_friendly_id()+".syncBarrierForStateAttributes() called.");return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".syncBarrierForStateAttributes").then(function(){return Promise.all([a.remoteInvoke(!1,e.method_id_WebHidDevice_t.opened,!1)])}).then(function(c){m.logger.info(a.user_friendly_id()+".syncBarrierForStateAttributes remote success.");c=g(c.map(function(b){return a.param0(b)}),1);a.opened_=c[0];b(a)})["catch"](function(b){b=
a.logRemoteInvokeError(b,".syncBarrierForStateAttributes() failed!");c(b)})})};b.prototype.copyStateAttributes=function(a){this.opened_=a.opened};Object.defineProperty(b.prototype,"opened",{get:function(){return this.opened_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"vendorId",{get:function(){return this.vendorId_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"productId",{get:function(){return this.productId_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"productName",{get:function(){return this.productName_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"collections",{get:function(){return this.collections_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"oninputreport",{get:function(){return this.oninputreport_},set:function(a){var b=this;this.oninputreport_=a;this.waitUntilConnected(this.user_friendly_id()+".oninputreport").then(function(){var a=b.registerCallbacks(!1,b.isNullCallback(b.oninputreport_),e.method_id_WebHidDevice_t.oninputreport);
a.then(function(a){var c=new H(b,b.param0(a).oid,"inputreport");c.useMinimalLogging=!0;c.syncBarrier().then(function(a){if(b.oninputreport_&&a&&a.isValid()){var c=new I(a.device,a.reportId,a.data,a.type);b.oninputreport_(c)}a.release()})["catch"](function(){c.release()})});return b.remoteInvoke(!0,e.method_id_WebHidDevice_t.oninputreport,a.success)})["catch"](function(a){b.logRemoteInvokeError(a,"set_oninputreport() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"groupId",
{get:function(){return this.compositeId_},enumerable:!1,configurable:!0});b.prototype.open=function(){var a=this;m.logger.info(this.user_friendly_id()+".open() called.");return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".open").then(function(){var b=a.registerCallbacks(!0,!1,e.method_id_WebHidDevice_t.open);a.remoteInvoke(!1,e.method_id_WebHidDevice_t.open,b.success,b.fail);return b.prom()}).then(function(){m.logger.info(a.user_friendly_id()+".open(): remote success!");return a.syncBarrierForStateAttributes()}).then(function(){m.logger.info(a.user_friendly_id()+
".open(): syncBarrierForStateAttributes success!");b()})["catch"](function(b){b=a.logRemoteInvokeError(b,".open() failed.");c(b)})})};b.prototype.close=function(){var a=this;m.logger.info(this.user_friendly_id()+".close() called.");return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".close").then(function(){var b=a.registerCallbacks(!0,!1,e.method_id_WebHidDevice_t.close);a.remoteInvoke(!1,e.method_id_WebHidDevice_t.close,b.success,b.fail);return b.prom()}).then(function(){m.logger.info(a.user_friendly_id()+
".close(): remote success!");return a.syncBarrierForStateAttributes()}).then(function(){m.logger.info(a.user_friendly_id()+".close(): syncBarrierForStateAttributes success!");b()})["catch"](function(b){b=a.logRemoteInvokeError(b,".close() failed.");c(b)})})};b.prototype.forget=function(){var a=this;m.logger.info(this.user_friendly_id()+".forget() called.");return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".forget").then(function(){var b=a.registerCallbacks(!0,!1,e.method_id_WebHidDevice_t.forget);
a.remoteInvoke(!1,e.method_id_WebHidDevice_t.forget,b.success,b.fail);return b.prom()}).then(function(){m.logger.info(a.user_friendly_id()+".forget(): remote success!");return a.syncBarrierForStateAttributes()}).then(function(){m.logger.info(a.user_friendly_id()+".forget(): syncBarrierForStateAttributes success!");b()})["catch"](function(b){b=a.logRemoteInvokeError(b,".forget() failed.");c(b)})})};b.prototype.sendReport=function(a,c){var d=this;m.logger.info(this.user_friendly_id()+".sendReport() called for reportId = "+
a);return new Promise(function(f,g){b.validateReportId(a)?d.waitUntilConnected(d.user_friendly_id()+".sendReport").then(function(){var b=d.registerCallbacks(!0,!1,e.method_id_WebHidDevice_t.sendReport);d.remoteInvoke(!1,e.method_id_WebHidDevice_t.sendReport,b.success,b.fail,a,q.Util.toByteArray(c));return b.prom()}).then(function(){m.logger.info(d.user_friendly_id()+".sendReport(): remote success!");f()})["catch"](function(a){a=d.logRemoteInvokeError(a,".sendReport() failed.");g(a)}):g(new TypeError("reportId is not an 8-bit integer."))})};
b.prototype.sendFeatureReport=function(a,c){var d=this;m.logger.info(this.user_friendly_id()+".sendFeatureReport() called for reportId = "+a);return new Promise(function(f,g){b.validateReportId(a)?d.waitUntilConnected(d.user_friendly_id()+".sendFeatureReport").then(function(){var b=d.registerCallbacks(!0,!1,e.method_id_WebHidDevice_t.sendFeatureReport);d.remoteInvoke(!1,e.method_id_WebHidDevice_t.sendFeatureReport,b.success,b.fail,a,q.Util.toByteArray(c));return b.prom()}).then(function(){m.logger.info(d.user_friendly_id()+
".sendFeatureReport(): remote success!");f()})["catch"](function(a){a=d.logRemoteInvokeError(a,".sendFeatureReport() failed.");g(a)}):g(new TypeError("reportId is not an 8-bit integer."))})};b.prototype.receiveFeatureReport=function(a){var c=this;m.logger.info(this.user_friendly_id()+".receiveFeatureReport() called for reportId = "+a);return new Promise(function(d,f){b.validateReportId(a)?c.waitUntilConnected(c.user_friendly_id()+".receiveFeatureReport").then(function(){var b=c.registerCallbacks(!0,
!1,e.method_id_WebHidDevice_t.receiveFeatureReport);c.remoteInvoke(!1,e.method_id_WebHidDevice_t.receiveFeatureReport,b.success,b.fail,a);return b.prom()}).then(function(a){m.logger.info(c.user_friendly_id()+".receiveFeatureReport(): remote success!");a=c.param0(a);a=new Uint8Array(a);d(q.Util.toDataView(a.buffer))})["catch"](function(a){a=c.logRemoteInvokeError(a,".receiveFeatureReport() failed.");f(a)}):f(new TypeError("reportId is not an 8-bit integer."))})};b.validateReportId=function(a){return Number.isInteger(a)&&
0<=a&&255>=a?!0:!1};b.prototype.findCollection=function(a,b){return this.collections_.find(function(c){return c.usagePage===a&&c.usage===b})};b.prototype.addCollections=function(a){var b=this;a.forEach(function(a){m.logger.info(b.user_friendly_id()+".addCollections adding collection for Page = "+a.usagePage+", Usage = "+a.usage);void 0===b.findCollection(a.usagePage,a.usage)&&b.collections_.push(a)})};b.prototype.setupOnCollectionsAddedCallback=function(){var a=this;this.waitUntilConnected(this.user_friendly_id()+
".onCollectionsAdded").then(function(){var b=a.registerCallbacks(!1,!1,e.method_id_WebHidDevice_t.onCollectionsAdded);b.then(function(b){var c=new E(a,a.param0(b).oid);c.syncBarrier().then(function(a){a.device&&a.collections&&a.device.addCollections(a.collections);a.release()})["catch"](function(){c.release()})});return a.remoteInvoke(!0,e.method_id_WebHidDevice_t.onCollectionsAdded,b.success)})["catch"](function(b){a.logRemoteInvokeError(b,"set_oninputreport() failed!")})};return b}(t.ProxyObject);
a.HidDevice=r;var D=function(a){function b(){var c=a.call(this,null,e.class_id_t.WebHidInterface,0,t.ProxyMode.Local)||this;c.devices_=[];return c}k(b,a);b.prototype.findDeviceByOId=function(a){return this.devices_.find(function(b){return b.object_id()===a})};b.prototype.addDevice=function(a){if(a){var b=this.devices_.find(function(b){return b.object_id()===a.object_id()});if(b)return b.copyStateAttributes(a),b;this.devices_.push(a)}return a};b.prototype.removeDevice=function(a){var b=-1;this.devices_.forEach(function(c,
d){c.object_id()===a&&(b=d)});0<=b&&this.devices_.splice(b,1)};Object.defineProperty(b.prototype,"onconnect",{get:function(){return this.onconnect_},set:function(a){var b=this;this.onconnect_=a;this.waitUntilConnected(this.user_friendly_id()+".onconnect_").then(function(){var a=b.registerCallbacks(!1,b.isNullCallback(b.onconnect_),e.method_id_WebHidInterface_t.onconnect);a.then(function(a){m.logger.info(b.user_friendly_id()+".onconnect callback received!!!");var c=new U(b,b.param0(a).oid,"connect");
c.syncBarrier().then(function(a){m.logger.info(b.user_friendly_id()+".onconnect .syncBarrier() success");if(a.device&&b.onconnect_){m.logger.info(b.user_friendly_id()+".onconnect notified!!! "+a.device.productName);var c=new M(a.device,a.type);b.onconnect_(c)}a.release()})["catch"](function(){c.release()})});return b.remoteInvoke(!0,e.method_id_WebHidInterface_t.onconnect,a.success)})["catch"](function(a){b.logRemoteInvokeError(a,"set_onconnect() failed!")})},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,
"ondisconnect",{get:function(){return this.ondisconnect_},set:function(a){var b=this;this.ondisconnect_=a;this.waitUntilConnected(this.user_friendly_id()+".ondisconnect_").then(function(){var a=b.registerCallbacks(!1,b.isNullCallback(b.ondisconnect_),e.method_id_WebHidInterface_t.ondisconnect);a.then(function(a){m.logger.info(b.user_friendly_id()+".ondisconnect callback received!!!");var c=new U(b,b.param0(a).oid,"disconnect");c.syncBarrier().then(function(a){m.logger.info(b.user_friendly_id()+".ondisconnect .syncBarrier() success");
b.removeDevice(a.device.object_id());if(b.ondisconnect_){m.logger.info(b.user_friendly_id()+".ondisconnect notified!!! "+a.device.productName);var c=new M(a.device,a.type);b.ondisconnect_(c)}a.release()})["catch"](function(){c.release()})});return b.remoteInvoke(!0,e.method_id_WebHidInterface_t.ondisconnect,a.success)})["catch"](function(a){b.logRemoteInvokeError(a,"set_ondisconnect() failed!")})},enumerable:!1,configurable:!0});b.prototype.getDevices=function(){var a=this;m.logger.info(this.user_friendly_id()+
".getDevices() called.");return new Promise(function(b,c){var d;a.waitUntilConnected(a.user_friendly_id()+".getDevices").then(function(){d=a.registerCallbacks(!0,!1,e.method_id_WebHidInterface_t.getDevices);return a.remoteInvoke(!1,e.method_id_WebHidInterface_t.getDevices,d.success,d.fail)}).then(function(){return d.prom()}).then(function(c){m.logger.info(a.user_friendly_id()+".getDevices remote success");var d=[],e=[],f=[];c.params[0].forEach(function(b){var c=a.findDeviceByOId(b.oid);void 0===c&&
(c=new r(a,b.oid),e.push(c),f.push(c.syncBarrier()));d.push(c)});Promise.all(f).then(function(){m.logger.info(a.user_friendly_id()+".getDevices: returning devices with ids ["+d.map(function(a){return a.object_id()})+"]");e.forEach(function(b){a.addDevice(b)});b(d)})["catch"](function(c){a.logRemoteInvokeError(c,".prop.getDevices() failed.");e.forEach(function(a){a.release()});d=[];b(d)})})["catch"](function(c){a.logRemoteInvokeError(c,".getDevices() failed.");b([])})})};Object.defineProperty(b.prototype,
"devices",{get:function(){return this.devices_},enumerable:!1,configurable:!0});b.prototype.requestDevice=function(a){var b=this;m.logger.info(this.user_friendly_id()+".requestDevice() called with options = "+JSON.stringify(a));return new Promise(function(c,d){var f=h.validate(a);if(f){var g;b.waitUntilConnected(b.user_friendly_id()+".requestDevice").then(function(){g=b.registerCallbacks(!0,!1,e.method_id_WebHidInterface_t.requestDevice);return b.remoteInvoke(!1,e.method_id_WebHidInterface_t.requestDevice,
f,g.success,g.fail)}).then(function(){return g.prom()}).then(function(a){m.logger.info(b.user_friendly_id()+".requestDevice remote success");var d=[],e=[],f=[];a.params[0].forEach(function(a){var c=b.findDeviceByOId(a.oid);void 0===c&&(c=new r(b,a.oid),e.push(c),f.push(c.syncBarrier()));d.push(c)});Promise.all(f).then(function(){m.logger.info(b.user_friendly_id()+".requestDevice: returning devices with ids ["+d.map(function(a){return a.object_id()})+"]");e.forEach(function(a){b.addDevice(a)});c(d)})["catch"](function(a){b.logRemoteInvokeError(a,
".prop.requestDevice() failed.");e.forEach(function(a){a.release()});d=[];c(d)})})["catch"](function(a){b.logRemoteInvokeError(a,".requestDevice() failed.");c([])})}else{var k=new TypeError("Invalid HIDDeviceRequestOptions");b.logRemoteInvokeError(k,".requestDevice() failed.");d(k)}})};b.prototype.getHIDDeviceByGroupId=function(a){return this.devices_.find(function(b){return b.groupId===a})};return b}(t.ProxyObject);a.HidInterface=D;var K=null;a.getHIDInterface=f;a.destroyHIDInterface=function(){K&&
(K.release(),K=null)};var M=function(){function a(b,c){this.type_=c;this.device_=b}Object.defineProperty(a.prototype,"type",{get:function(){return this.type_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"device",{get:function(){return this.device_},enumerable:!1,configurable:!0});return a}();a.HidConnectionEvent=M;var U=function(a){function b(c,d,f){c=a.call(this,c,e.class_id_t.WebHidConnectionEvent,d,t.ProxyMode.Remote)||this;c.type_=f;return c}k(b,a);b.prototype.syncBarrier=
function(){var a=this;m.logger.info(this.user_friendly_id()+".syncBarrier() called.");return new Promise(function(b,c){var d;a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return a.remoteInvoke(!1,e.method_id_WebHidConnectionEvent_t.device,{oid:0})}).then(function(b){m.logger.info(a.user_friendly_id()+".syncBarrier() remote success.");d=K.findDeviceByOId(a.param0(b).oid);return void 0===d?(d=new r(K,a.param0(b).oid),f().addDevice(d),d.syncBarrier()):d.syncBarrierForStateAttributes()}).then(function(c){m.logger.info(a.user_friendly_id()+
".syncBarrier() success.");a.device_=c;b(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");void 0!==d&&d.release();c(b)})})};Object.defineProperty(b.prototype,"type",{get:function(){return this.type_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"device",{get:function(){return this.device_},enumerable:!1,configurable:!0});return b}(t.ProxyObject);a.HidConnectionEventInternal=U;var I=function(){function a(b,c,d,e){this.device_=b;this.reportId_=c;this.data_=
d;this.type_=e}Object.defineProperty(a.prototype,"type",{get:function(){return this.type_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"device",{get:function(){return this.device_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"reportId",{get:function(){return this.reportId_},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"data",{get:function(){return this.data_},enumerable:!1,configurable:!0});return a}();a.HidInputReportEvent=I;var H=
function(a){function b(c,d,f){c=a.call(this,c,e.class_id_t.WebHidInputReportEvent,d,t.ProxyMode.Remote)||this;c.type_=f;return c}k(b,a);b.prototype.syncBarrier=function(){var a=this;return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,e.method_id_WebHidInputReportEvent_t.device,{oid:0}),a.remoteInvoke(!1,e.method_id_WebHidInputReportEvent_t.reportId,0),a.remoteInvoke(!1,e.method_id_WebHidInputReportEvent_t.data,
[])])}).then(function(d){var e;e=g(d.map(function(b){return a.param0(b)}),3);d=e[0];a.reportId_=e[1];e=new Uint8Array(e[2]);a.data_=q.Util.toDataView(e.buffer);void 0!=d&&!1===d.is_null?(a.device_=K.findDeviceByOId(d.oid),b(a)):c()})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");c(b)})})};Object.defineProperty(b.prototype,"type",{get:function(){return this.type_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"device",{get:function(){return this.device_},
enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"reportId",{get:function(){return this.reportId_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"data",{get:function(){return this.data_},enumerable:!1,configurable:!0});b.prototype.isValid=function(){return void 0!=this.device&&void 0!=this.reportId&&void 0!=this.data&&void 0!=this.type};return b}(t.ProxyObject),E=function(a){function b(c,d){return a.call(this,c,e.class_id_t.WebHidCollectionsAddedEvent,d,t.ProxyMode.Remote)||
this}k(b,a);b.prototype.syncBarrier=function(){var a=this;return new Promise(function(b,c){a.waitUntilConnected(a.user_friendly_id()+".syncBarrier").then(function(){return Promise.all([a.remoteInvoke(!1,e.method_id_WebHidCollectionsAddedEvent_t.device,{oid:0}),a.remoteInvoke(!1,e.method_id_WebHidCollectionsAddedEvent_t.collections,[])])}).then(function(c){var d;d=g(c.map(function(b){return a.param0(b)}),2);c=d[0];d=d[1];void 0!=c&&!1===c.is_null&&c.oid&&(a.device_=K.findDeviceByOId(c.oid));a.collections_=
d;b(a)})["catch"](function(b){b=a.logRemoteInvokeError(b,".syncBarrier() failed!");c(b)})})};Object.defineProperty(b.prototype,"device",{get:function(){return this.device_},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"collections",{get:function(){return this.collections_},enumerable:!1,configurable:!0});return b}(t.ProxyObject)},269:function(b,a){Object.defineProperty(a,"__esModule",{value:!0});a.HardwareInfo=a.MemoryInfo=a.GPUInfo=a.GPU=a.CPUInfo=a.WebrpcClassLibInfo=a.WebrpcClassInfo=
a.WebrpcMethodInfo=a.EndpointId=a.OSInfo=a.WebrpcFeatureInfo=a.FeatureData=a.VersionData=a.FEATURE_unsupported=a.FEATURE_ms_teams_redirection=void 0;a.FEATURE_ms_teams_redirection="ms_teams_redirection";a.FEATURE_unsupported="unsupported";var d=function(){return function(a,b,d,f){this.major=a;this.minor=b;this.revision=d;this.build=f}}();a.VersionData=d;d=function(){return function(){}}();a.FeatureData=d;d=function(){return function(a,b){this.fature=a;this.version=b}}();a.WebrpcFeatureInfo=d;d=function(){return function(a,
b,d,f,e){this.family=a;this.version=b;this.architecture=d;this.distro=f;this.edition=e}}();a.OSInfo=d;d=function(){return function(a,b){this.machine_id=a;this.user_id=b}}();a.EndpointId=d;d=function(){return function(b,d,f,g,e){void 0===e&&(e=a.FEATURE_ms_teams_redirection);this.iid=b;this.mid=d;this.name=f;this.isprop=g;this.feature=e}}();a.WebrpcMethodInfo=d;d=function(){return function(a,b,d){this.id=a;this.name=b;this.methods=d}}();a.WebrpcClassInfo=d;d=function(){return function(a,b){this.name=
a;this.classes=b}}();a.WebrpcClassLibInfo=d;d=function(){return function(a,b){this.cpumodel=a;this.numberofprocessors=b}}();a.CPUInfo=d;d=function(){return function(a,b){this.name=a;this.driver=b}}();a.GPU=d;d=function(){return function(a){this.gpus=a}}();a.GPUInfo=d;d=function(){return function(a){this.totalmemory=a}}();a.MemoryInfo=d;d=function(){return function(a,b,d){this.cpu_info=a;this.gpu_info=b;this.memory_info=d}}();a.HardwareInfo=d},550:function(b,a,d){var f=this&&this.__createBinding||
(Object.create?function(a,b,d,f){void 0===f&&(f=d);Object.defineProperty(a,f,{enumerable:!0,get:function(){return b[d]}})}:function(a,b,d,f){void 0===f&&(f=d);a[f]=b[d]});b=this&&this.__exportStar||function(a,b){for(var d in a)"default"===d||b.hasOwnProperty(d)||f(b,a,d)};var k=this&&this.__values||function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&Symbol.iterator,d=b&&a[b],f=0;if(d)return d.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&
f>=a.length&&(a=void 0);return{value:a&&a[f++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");};Object.defineProperty(a,"__esModule",{value:!0});a.WebrpcClassLibInfoUtil=void 0;var p=d(187);b(d(187),a);d=function(){function a(){}a.getInterfaceByid=function(a){var b,d;try{for(var f=k(p.class_lib_info.classes),g=f.next();!g.done;g=f.next()){var q=g.value;if(q.id==a)return q}}catch(h){b={error:h}}finally{try{g&&!g.done&&(d=f["return"])&&d.call(f)}finally{if(b)throw b.error;
}}return null};a.getMethodByid=function(a,b){var d,f,g=this.getInterfaceByid(a);if(null!=g)try{for(var p=k(g.methods),h=p.next();!h.done;h=p.next()){var c=h.value;if(c.mid==b)return c}}catch(u){d={error:u}}finally{try{h&&!h.done&&(f=p["return"])&&f.call(p)}finally{if(d)throw d.error;}}return null};a.getMethodFeatureByid=function(a,b){var d,f,g=this.getInterfaceByid(a);if(null!=g)try{for(var p=k(g.methods),h=p.next();!h.done;h=p.next()){var c=h.value;if(c.mid==b)return c.feature}}catch(u){d={error:u}}finally{try{h&&
!h.done&&(f=p["return"])&&f.call(p)}finally{if(d)throw d.error;}}return null};a.composeClassInfoData=function(a){var b,d,f,g;a=a.hdr;if(void 0==a)return"*** Invalid packet: Couldn't find hdr object ***";var q=a.proc;if(void 0==q)return"";a=q.iid;q=q.methodid;try{for(var h=k(p.class_lib_info.classes),c=h.next();!c.done;c=h.next()){var u=c.value;if(u.id==a)try{for(var v=(f=void 0,k(u.methods)),z=v.next();!z.done;z=v.next()){var y=z.value;if(y.mid==q)return u.name+"::"+y.name}}catch(l){f={error:l}}finally{try{z&&
!z.done&&(g=v["return"])&&g.call(v)}finally{if(f)throw f.error;}}}}catch(l){b={error:l}}finally{try{c&&!c.done&&(d=h["return"])&&d.call(h)}finally{if(b)throw b.error;}}return""};return a}();a.WebrpcClassLibInfoUtil=d},187:function(b,a,d){Object.defineProperty(a,"__esModule",{value:!0});a.class_lib_info=a.method_id_WebHidCollectionsAddedEvent_t=a.method_id_WebHidInputReportEvent_t=a.method_id_WebHidConnectionEvent_t=a.method_id_WebHidDevice_t=a.method_id_WebHidInterface_t=a.method_id_MediaStreamAudioDestinationNode_t=
a.method_id_MediaStreamAudioSourceNode_t=a.method_id_AudioNode_t=a.method_id_AudioContext_t=a.mehtod_id_VideoEffect_t=a.method_id_StreamResolution_t=a.method_id_RTCSctpTransport_t=a.method_id_RTCDataChannel_t=a.method_id_E911Service_t=a.method_id_ScreenSource_t=a.method_id_VDISharingRemote_t=a.method_id_RTCRtpTransceiver_t=a.method_id_RTCIceCandidatePair_t=a.method_id_RTCDTMFToneChangeEvent_t=a.method_id_RTCDTMFSender_t=a.method_id_RTCIceTransport_t=a.method_id_RTCDtlsTransport_t=a.method_id_RTCRtpSender_t=
a.method_id_RTCRtpReceiver_t=a.method_id_AudioElement_t=a.method_id_VideoElement_t=a.method_id_MediaStreamEvent_t=a.method_id_RTCIceCandidateEvent_t=a.method_id_RTCIceCandidate_t=a.method_id_NavigatorUserMedia_t=a.method_id_MediaStream_t=a.method_id_MediaStreamTrack_t=a.method_id_RTCSessionDescription_t=a.method_id_MediaDeviceInfo_t=a.method_id_MediaDevices_t=a.method_id_RTCPeerConnection_t=a.method_id_EngineControl_t=a.class_id_t=a.vdaFeatureNameMap=a.featureNameMap=a.Features=a.FEATURE_ms_teams_sender_stats_fix=
a.FEATURE_ms_teams_webhid=a.FEATURE_ms_teams_enumerate_devices_v2=a.FEATURE_ms_teams_track_clone_with_id=a.FEATURE_ms_teams_audio_notifications_loop=a.FEATURE_ms_teams_share_system_audio=a.FEATURE_ms_teams_stream_active_status=a.FEATURE_ms_teams_hardware_info=a.FEATURE_ms_teams_secondary_audio_notifications=a.FEATURE_ms_teams_stream_resolution=a.FEATURE_ms_teams_client_info=a.FEATURE_ms_teams_no_vd_buffer_limit=a.FEATURE_ms_teams_data_channel=a.FEATURE_ms_teams_webrtc_1dot0=a.FEATURE_ms_teams_multi_window=
a.FEATURE_ms_teams_gtc=a.FEATURE_ms_teams_e911=a.FEATURE_ms_teams_codec_capability=a.FEATURE_ms_teams_app_sharing=a.FEATURE_ms_teams_monitor_sharing=a.FEATURE_ms_teams_video_placement=a.FEATURE_ms_teams_dtmf=a.FEATURE_ms_teams_device_group_id=a.FEATURE_ms_teams_remote_audio_notifications=a.FEATURE_ms_teams_endpoint_id=a.FEATURE_ms_teams_osinfo=a.FEATURE_ms_teams_mstrack_constraints=a.FEATURE_ms_teams_1912=a.FEATURE_ms_teams_pstn=a.FEATURE_ms_teams_1911=a.FEATURE_ms_teams_common_media_constraints=
a.FEATURE_ms_teams_speaking_indicator=a.FEATURE_ms_teams_desktop_sharing=a.FEATURE_vda_delete_viewport=a.FEATURE_vda_multi_window=a.FEATURE_vda_app_sharing=a.FEATURE_vda_service_no_buffer_limit=a.HDXMS_VERSION=a.BUILD_TYPE_SDK=void 0;b=d(269);var f=d(269);Object.defineProperty(a,"VersionData",{enumerable:!0,get:function(){return f.VersionData}});Object.defineProperty(a,"FeatureData",{enumerable:!0,get:function(){return f.FeatureData}});Object.defineProperty(a,"OSInfo",{enumerable:!0,get:function(){return f.OSInfo}});
Object.defineProperty(a,"EndpointId",{enumerable:!0,get:function(){return f.EndpointId}});Object.defineProperty(a,"HardwareInfo",{enumerable:!0,get:function(){return f.HardwareInfo}});a.BUILD_TYPE_SDK=!0;a.HDXMS_VERSION="4.0.2";a.FEATURE_vda_service_no_buffer_limit="wsservice_no_buffer_limit";a.FEATURE_vda_app_sharing="webrtc_app_sharing";a.FEATURE_vda_multi_window="webrtc_multi_window";a.FEATURE_vda_delete_viewport="overlay_delete_viewport";a.FEATURE_ms_teams_desktop_sharing="ms_teams_desktop_sharing";
a.FEATURE_ms_teams_speaking_indicator="ms_teams_speaking_indicator";a.FEATURE_ms_teams_common_media_constraints="ms_teams_common_media_constraints";a.FEATURE_ms_teams_1911="ms_teams_1911";a.FEATURE_ms_teams_pstn="ms_teams_pstn";a.FEATURE_ms_teams_1912="ms_teams_1912";a.FEATURE_ms_teams_mstrack_constraints="ms_teams_mstrack_constraints";a.FEATURE_ms_teams_osinfo="ms_teams_osinfo";a.FEATURE_ms_teams_endpoint_id="ms_teams_endpoint_id";a.FEATURE_ms_teams_remote_audio_notifications="ms_teams_remote_audio_notifications";
a.FEATURE_ms_teams_device_group_id="ms_teams_device_group_id";a.FEATURE_ms_teams_dtmf="ms_teams_dtmf";a.FEATURE_ms_teams_video_placement="ms_teams_video_placement";a.FEATURE_ms_teams_monitor_sharing="ms_teams_multi_monitor_sharing";a.FEATURE_ms_teams_app_sharing="ms_teams_app_sharing";a.FEATURE_ms_teams_codec_capability="ms_teams_codec_capability";a.FEATURE_ms_teams_e911="ms_teams_e911";a.FEATURE_ms_teams_gtc="ms_teams_gtc";a.FEATURE_ms_teams_multi_window="ms_teams_multi_windows";a.FEATURE_ms_teams_webrtc_1dot0=
"ms_teams_webrtc_1.0";a.FEATURE_ms_teams_data_channel="ms_teams_data_channel";a.FEATURE_ms_teams_no_vd_buffer_limit="ms_teams_no_vd_buffer_limit";a.FEATURE_ms_teams_client_info="ms_teams_client_info";a.FEATURE_ms_teams_stream_resolution="ms_teams_stream_resolution";a.FEATURE_ms_teams_secondary_audio_notifications="ms_teams_secondary_audio_notifications";a.FEATURE_ms_teams_hardware_info="ms_teams_hardware_info";a.FEATURE_ms_teams_stream_active_status="ms_teams_stream_active_status";a.FEATURE_ms_teams_share_system_audio=
"ms_teams_share_system_audio";a.FEATURE_ms_teams_audio_notifications_loop="ms_teams_audio_notifications_loop";a.FEATURE_ms_teams_track_clone_with_id="ms_teams_track_clone_with_id";a.FEATURE_ms_teams_enumerate_devices_v2="ms_teams_enumerate_devices_v2";a.FEATURE_ms_teams_webhid="ms_teams_web_hid";a.FEATURE_ms_teams_sender_stats_fix="ms_teams_sender_stats_fix";new b.WebrpcFeatureInfo(b.FEATURE_ms_teams_redirection,new b.VersionData(1,1,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_desktop_sharing,
new b.VersionData(1,2,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_speaking_indicator,new b.VersionData(1,2,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_common_media_constraints,new b.VersionData(1,4,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_1911,new b.VersionData(1,4,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_1912,new b.VersionData(1,5,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_mstrack_constraints,new b.VersionData(1,6,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_pstn,
new b.VersionData(1,6,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_osinfo,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_endpoint_id,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_remote_audio_notifications,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_device_group_id,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_codec_capability,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_dtmf,
new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_video_placement,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_monitor_sharing,new b.VersionData(1,7,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_app_sharing,new b.VersionData(1,8,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_webrtc_1dot0,new b.VersionData(1,8,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_data_channel,new b.VersionData(1,8,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_e911,
new b.VersionData(1,13,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_multi_window,new b.VersionData(1,14,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_client_info,new b.VersionData(1,19,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_stream_resolution,new b.VersionData(1,25,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_secondary_audio_notifications,new b.VersionData(1,21,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_hardware_info,new b.VersionData(1,35,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_stream_active_status,
new b.VersionData(1,32,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_audio_notifications_loop,new b.VersionData(1,33,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_track_clone_with_id,new b.VersionData(1,33,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_enumerate_devices_v2,new b.VersionData(1,35,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_webhid,new b.VersionData(1,37,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_sender_stats_fix,new b.VersionData(1,36,0,0));new b.WebrpcFeatureInfo(a.FEATURE_ms_teams_share_system_audio,
new b.VersionData(1,37,0,0));d=function(){function a(){}a.FEATURE_public_screenshare="screenshare";a.FEATURE_public_redirection="redirection";a.FEATURE_public_speaking_indicator="speaking_indicator";a.FEATURE_public_pstn="pstn";a.FEATURE_public_osinfo="osinfo";a.FEATURE_public_endpoint_id="endpointid";a.FEATURE_public_remote_audio_notifications="remoteaudionotifications";a.FEATURE_public_device_group_id="compositedevices";a.FEATURE_public_dtmf="dtmf";a.FEATURE_public_monitor_sharing="multimonitorscreenshare";
a.FEATURE_public_app_sharing="appshare";a.FEATURE_public_codec_capability="codec_capability";a.FEATURE_public_e911="e911";a.FEATURE_public_gtc="givecontrol";a.FEATURE_public_webrtc1dot0="webrtc1.0";a.FEATURE_public_data_channel="datachannel";a.FEATURE_public_vdnobuflimit="vdnobuflimit";a.FEATURE_public_multi_window="multiwindow";a.FEATURE_public_secondary_audio_notifications="secondaryringer";a.FEATURE_public_stream_resolution="streamresolution";a.FEATURE_public_track_clone_with_id="track_clone_with_id";
a.FEATURE_public_webhid="webhid";a.FEATURE_public_sender_stats_fix="sender_stats_fix";a.FEATURE_public_audio_notification_loop="loop";a.FEATURE_public_share_system_audio="sharesystemaudio";return a}();a.Features=d;a.featureNameMap={};a.featureNameMap[d.FEATURE_public_screenshare]=[a.FEATURE_ms_teams_desktop_sharing];a.featureNameMap[d.FEATURE_public_redirection]=[b.FEATURE_ms_teams_redirection];a.featureNameMap[d.FEATURE_public_speaking_indicator]=[a.FEATURE_ms_teams_speaking_indicator];a.featureNameMap[d.FEATURE_public_pstn]=
[a.FEATURE_ms_teams_pstn];a.featureNameMap[d.FEATURE_public_osinfo]=[a.FEATURE_ms_teams_osinfo];a.featureNameMap[d.FEATURE_public_endpoint_id]=[a.FEATURE_ms_teams_endpoint_id];a.featureNameMap[d.FEATURE_public_remote_audio_notifications]=[a.FEATURE_ms_teams_remote_audio_notifications,a.FEATURE_ms_teams_secondary_audio_notifications];a.featureNameMap[d.FEATURE_public_device_group_id]=[a.FEATURE_ms_teams_device_group_id];a.featureNameMap[d.FEATURE_public_dtmf]=[a.FEATURE_ms_teams_dtmf];a.featureNameMap[d.FEATURE_public_monitor_sharing]=
[a.FEATURE_ms_teams_monitor_sharing];a.featureNameMap[d.FEATURE_public_app_sharing]=[a.FEATURE_ms_teams_app_sharing];a.featureNameMap[d.FEATURE_public_codec_capability]=[a.FEATURE_ms_teams_codec_capability];a.featureNameMap[d.FEATURE_public_e911]=[a.FEATURE_ms_teams_e911];a.featureNameMap[d.FEATURE_public_gtc]=[a.FEATURE_ms_teams_gtc];a.featureNameMap[d.FEATURE_public_webrtc1dot0]=[a.FEATURE_ms_teams_webrtc_1dot0];a.featureNameMap[d.FEATURE_public_multi_window]=[a.FEATURE_ms_teams_multi_window];a.featureNameMap[d.FEATURE_public_data_channel]=
[a.FEATURE_ms_teams_data_channel];a.featureNameMap[d.FEATURE_public_vdnobuflimit]=[a.FEATURE_ms_teams_no_vd_buffer_limit];a.featureNameMap[d.FEATURE_public_secondary_audio_notifications]=[a.FEATURE_ms_teams_remote_audio_notifications,a.FEATURE_ms_teams_secondary_audio_notifications];a.featureNameMap[d.FEATURE_public_stream_resolution]=[a.FEATURE_ms_teams_stream_resolution];a.featureNameMap[d.FEATURE_public_track_clone_with_id]=[a.FEATURE_ms_teams_track_clone_with_id];a.featureNameMap[d.FEATURE_public_webhid]=
[a.FEATURE_ms_teams_webhid];a.featureNameMap[d.FEATURE_public_sender_stats_fix]=[a.FEATURE_ms_teams_sender_stats_fix];a.featureNameMap[d.FEATURE_public_audio_notification_loop]=[a.FEATURE_ms_teams_audio_notifications_loop];a.featureNameMap[d.FEATURE_public_share_system_audio]=[a.FEATURE_ms_teams_share_system_audio];a.vdaFeatureNameMap={};a.vdaFeatureNameMap[d.FEATURE_public_multi_window]=[a.FEATURE_vda_multi_window];a.vdaFeatureNameMap[d.FEATURE_public_app_sharing]=[a.FEATURE_vda_app_sharing];(function(a){a[a.EngineControl=
0]="EngineControl";a[a.RTCPeerConnection=1]="RTCPeerConnection";a[a.RTCSessionDescription=2]="RTCSessionDescription";a[a.RTCIceCandidate=3]="RTCIceCandidate";a[a.RTCIceCandidateEvent=4]="RTCIceCandidateEvent";a[a.MediaDevices=5]="MediaDevices";a[a.MediaDeviceInfo=6]="MediaDeviceInfo";a[a.MediaStreamTrack=7]="MediaStreamTrack";a[a.MediaStreamEvent=8]="MediaStreamEvent";a[a.MediaStream=9]="MediaStream";a[a.NavigatorUserMedia=10]="NavigatorUserMedia";a[a.VideoElement=11]="VideoElement";a[a.AudioElement=
12]="AudioElement";a[a.RTCRtpReceiver=13]="RTCRtpReceiver";a[a.RTCRtpSender=14]="RTCRtpSender";a[a.RTCDtlsTransport=15]="RTCDtlsTransport";a[a.RTCIceTransport=16]="RTCIceTransport";a[a.RTCDTMFSender=17]="RTCDTMFSender";a[a.RTCDTMFToneChangeEvent=18]="RTCDTMFToneChangeEvent";a[a.RTCIceCandidatePair=19]="RTCIceCandidatePair";a[a.RTCRtpTransceiver=20]="RTCRtpTransceiver";a[a.ScreenSharingRemote=21]="ScreenSharingRemote";a[a.ScreenSource=22]="ScreenSource";a[a.E911Service=23]="E911Service";a[a.reserved2=
24]="reserved2";a[a.RTCDataChannel=25]="RTCDataChannel";a[a.RTCSctpTransport=26]="RTCSctpTransport";a[a.StreamResolution=27]="StreamResolution";a[a.VideoEffect=28]="VideoEffect";a[a.AudioContext=29]="AudioContext";a[a.MediaStreamAudioSourceNode=30]="MediaStreamAudioSourceNode";a[a.MediaStreamAudioDestinationNode=31]="MediaStreamAudioDestinationNode";a[a.AudioNode=32]="AudioNode";a[a.WebHidInterface=33]="WebHidInterface";a[a.WebHidDevice=34]="WebHidDevice";a[a.WebHidConnectionEvent=35]="WebHidConnectionEvent";
a[a.WebHidInputReportEvent=36]="WebHidInputReportEvent";a[a.WebHidCollectionsAddedEvent=37]="WebHidCollectionsAddedEvent"})(d=a.class_id_t||(a.class_id_t={}));var k;(function(a){a[a.ctor=0]="ctor";a[a.version=1]="version";a[a.feature_flags=2]="feature_flags";a[a.version_info=3]="version_info";a[a.osinfo=4]="osinfo";a[a.endpoint_id=5]="endpoint_id";a[a.set_client_info=6]="set_client_info";a[a.hardware_info=7]="hardware_info"})(k=a.method_id_EngineControl_t||(a.method_id_EngineControl_t={}));var p;
(function(a){a[a.ctor=0]="ctor";a[a.localDescription=1]="localDescription";a[a.remoteDescription=2]="remoteDescription";a[a.readyState=3]="readyState";a[a.iceState=4]="iceState";a[a.localStreams=5]="localStreams";a[a.remoteStreams=6]="remoteStreams";a[a.createOffer=7]="createOffer";a[a.createAnswer=8]="createAnswer";a[a.setLocalDescription=9]="setLocalDescription";a[a.setRemoteDescription=10]="setRemoteDescription";a[a.updateIce=11]="updateIce";a[a.addIceCandidate=12]="addIceCandidate";a[a.addStream=
13]="addStream";a[a.removeStream=14]="removeStream";a[a.close=15]="close";a[a.iceConnectionState=16]="iceConnectionState";a[a.iceGatheringState=17]="iceGatheringState";a[a.signalingState=18]="signalingState";a[a.onaddstream=19]="onaddstream";a[a.onicecandidate=20]="onicecandidate";a[a.oniceconnectionstatechange=21]="oniceconnectionstatechange";a[a.onicegatheringstatechange=22]="onicegatheringstatechange";a[a.onsignalingstatechange=23]="onsignalingstatechange";a[a.onnegotiationneeded=24]="onnegotiationneeded";
a[a.onremovestream=25]="onremovestream";a[a.getStats=26]="getStats";a[a.getReceivers=27]="getReceivers";a[a.getSenders=28]="getSenders";a[a.addTrack=29]="addTrack";a[a.removeTrack=30]="removeTrack";a[a.ontrack=31]="ontrack";a[a.setLocalDescription_v2=32]="setLocalDescription_v2";a[a.setRemoteDescription_v2=33]="setRemoteDescription_v2";a[a.addTransceiverWithTrack=34]="addTransceiverWithTrack";a[a.addTransceiverWithKind=35]="addTransceiverWithKind";a[a.getTransceivers=36]="getTransceivers";a[a.onconnectionstatechange=
37]="onconnectionstatechange";a[a.sctp=38]="sctp";a[a.ondatachannel=39]="ondatachannel";a[a.createDataChannel=40]="createDataChannel";a[a.getStats_v2=41]="getStats_v2"})(p=a.method_id_RTCPeerConnection_t||(a.method_id_RTCPeerConnection_t={}));var g;(function(a){a[a.ctor=0]="ctor";a[a.enumerateDevices=1]="enumerateDevices";a[a.getDisplayMedia=2]="getDisplayMedia";a[a.ondevicechange=3]="ondevicechange";a[a.enumerateDevicesV2=4]="enumerateDevicesV2"})(g=a.method_id_MediaDevices_t||(a.method_id_MediaDevices_t=
{}));var e;(function(a){a[a.ctor=0]="ctor";a[a.deviceId=1]="deviceId";a[a.kind=2]="kind";a[a.label=3]="label";a[a.groupId=4]="groupId"})(e=a.method_id_MediaDeviceInfo_t||(a.method_id_MediaDeviceInfo_t={}));var t;(function(a){a[a.ctor=0]="ctor";a[a.type=1]="type";a[a.sdp=2]="sdp"})(t=a.method_id_RTCSessionDescription_t||(a.method_id_RTCSessionDescription_t={}));var q;(function(a){a[a.ctor=0]="ctor";a[a.kind=1]="kind";a[a.id=2]="id";a[a.label=3]="label";a[a.enabled=4]="enabled";a[a.muted=5]="muted";
a[a.readyState=6]="readyState";a[a.onended=7]="onended";a[a.onmute=8]="onmute";a[a.onunmute=9]="onunmute";a[a.clone=10]="clone";a[a.stop=11]="stop";a[a.getCapabilities=12]="getCapabilities";a[a.getSettings=13]="getSettings";a[a.applyConstraints=14]="applyConstraints";a[a.getConstraints=15]="getConstraints"})(q=a.method_id_MediaStreamTrack_t||(a.method_id_MediaStreamTrack_t={}));var m;(function(a){a[a.ctor=0]="ctor";a[a.id=1]="id";a[a.getAudioTracks=2]="getAudioTracks";a[a.getVideoTracks=3]="getVideoTracks";
a[a.getTracks=4]="getTracks";a[a.getTrackById=5]="getTrackById";a[a.addTrack=6]="addTrack";a[a.removeTrack=7]="removeTrack";a[a.clone=8]="clone";a[a.active=9]="active"})(m=a.method_id_MediaStream_t||(a.method_id_MediaStream_t={}));var n;(function(a){a[a.ctor=0]="ctor";a[a.getUserMedia=1]="getUserMedia";a[a.setCodecCapabilities=2]="setCodecCapabilities";a[a.getCapabilities=3]="getCapabilities"})(n=a.method_id_NavigatorUserMedia_t||(a.method_id_NavigatorUserMedia_t={}));var w;(function(a){a[a.ctor=
0]="ctor";a[a.candidate=1]="candidate";a[a.sdpMid=2]="sdpMid";a[a.sdpMLineIndex=3]="sdpMLineIndex"})(w=a.method_id_RTCIceCandidate_t||(a.method_id_RTCIceCandidate_t={}));var h;(function(a){a[a.ctor=0]="ctor";a[a.candidate=1]="candidate"})(h=a.method_id_RTCIceCandidateEvent_t||(a.method_id_RTCIceCandidateEvent_t={}));var c;(function(a){a[a.ctor=0]="ctor";a[a.stream=1]="stream"})(c=a.method_id_MediaStreamEvent_t||(a.method_id_MediaStreamEvent_t={}));var u;(function(a){a[a.ctor=0]="ctor";a[a.sinkId=
1]="sinkId";a[a.connectTo=2]="connectTo";a[a.disconnect=3]="disconnect";a[a.setFrame=4]="setFrame";a[a.addClipRect=5]="addClipRect";a[a.removeClipRect=6]="removeClipRect";a[a.onerror=7]="onerror";a[a.onvideoframechanged=8]="onvideoframechanged";a[a.placement=9]="placement"})(u=a.method_id_VideoElement_t||(a.method_id_VideoElement_t={}));var v;(function(a){a[a.ctor=0]="ctor";a[a.sinkId=1]="sinkId";a[a.srcObject=2]="srcObject";a[a.src=3]="src";a[a.play=4]="play";a[a.pause=5]="pause";a[a.loop=6]="loop"})(v=
a.method_id_AudioElement_t||(a.method_id_AudioElement_t={}));var z;(function(a){a[a.ctor=0]="ctor";a[a.track=1]="track";a[a.getContributingSources=2]="getContributingSources";a[a.getSynchronizationSources=3]="getSynchronizationSources";a[a.transport=4]="transport";a[a.rtcpTransport=5]="rtcpTransport";a[a.getCapabilities=6]="getCapabilities";a[a.getParameters=7]="getParameters";a[a.getStats=8]="getStats";a[a.getCapabilities_v2=9]="getCapabilities_v2"})(z=a.method_id_RTCRtpReceiver_t||(a.method_id_RTCRtpReceiver_t=
{}));var y;(function(a){a[a.ctor=0]="ctor";a[a.track=1]="track";a[a.transport=2]="transport";a[a.rtcpTransport=3]="rtcpTransport";a[a.dtmf=4]="dtmf";a[a.getCapabilities=5]="getCapabilities";a[a.getParameters=6]="getParameters";a[a.setParameters=7]="setParameters";a[a.replaceTrack=8]="replaceTrack";a[a.getStats=9]="getStats";a[a.setStreams=10]="setStreams";a[a.getCapabilities_v2=11]="getCapabilities_v2"})(y=a.method_id_RTCRtpSender_t||(a.method_id_RTCRtpSender_t={}));var l;(function(a){a[a.ctor=0]=
"ctor";a[a.transport=1]="transport";a[a.state=2]="state";a[a.getRemoteCertificates=3]="getRemoteCertificates";a[a.onstatechange=4]="onstatechange";a[a.onerror=5]="onerror"})(l=a.method_id_RTCDtlsTransport_t||(a.method_id_RTCDtlsTransport_t={}));var C;(function(a){a[a.ctor=0]="ctor";a[a.role=1]="role";a[a.component=2]="component";a[a.state=3]="state";a[a.gatheringState=4]="gatheringState";a[a.localcandidates=5]="localcandidates";a[a.remotecandidates=6]="remotecandidates";a[a.onstatechange=7]="onstatechange";
a[a.ongatheringstatechange=8]="ongatheringstatechange";a[a.onselectedcandidatepairchange=9]="onselectedcandidatepairchange"})(C=a.method_id_RTCIceTransport_t||(a.method_id_RTCIceTransport_t={}));var r;(function(a){a[a.ctor=0]="ctor";a[a.insertDTMF=1]="insertDTMF";a[a.ontonechange=2]="ontonechange";a[a.canInsertDTMF=3]="canInsertDTMF";a[a.toneBuffer=4]="toneBuffer"})(r=a.method_id_RTCDTMFSender_t||(a.method_id_RTCDTMFSender_t={}));var D;(function(a){a[a.ctor=0]="ctor";a[a.tone=1]="tone";a[a.tone_buffer=
2]="tone_buffer"})(D=a.method_id_RTCDTMFToneChangeEvent_t||(a.method_id_RTCDTMFToneChangeEvent_t={}));var K;(function(a){a[a.ctor=0]="ctor";a[a.local=1]="local";a[a.remote=2]="remote"})(K=a.method_id_RTCIceCandidatePair_t||(a.method_id_RTCIceCandidatePair_t={}));var M;(function(a){a[a.ctor=0]="ctor";a[a.mid=1]="mid";a[a.sender=2]="sender";a[a.receiver=3]="receiver";a[a.direction=4]="direction";a[a.currentDirection=5]="currentDirection";a[a.stop=6]="stop";a[a.setCodecPreferences=7]="setCodecPreferences"})(M=
a.method_id_RTCRtpTransceiver_t||(a.method_id_RTCRtpTransceiver_t={}));var U;(function(a){a[a.ctor=0]="ctor";a[a.getScreensAsync=1]="getScreensAsync";a[a.onscreentopologychanged=2]="onscreentopologychanged"})(U=a.method_id_VDISharingRemote_t||(a.method_id_VDISharingRemote_t={}));var I;(function(a){a[a.ctor=0]="ctor";a[a.srcid=1]="srcid";a[a.deviceid=2]="deviceid";a[a.type=3]="type";a[a.name=4]="name";a[a.imagedata=5]="imagedata";a[a.hwnd=6]="hwnd";a[a.origin=7]="origin";a[a.caption=8]="caption";a[a.pid=
9]="pid";a[a.bounds=10]="bounds"})(I=a.method_id_ScreenSource_t||(a.method_id_ScreenSource_t={}));var H;(function(a){a[a.ctor=0]="ctor";a[a.getE911Info=1]="getE911Info";a[a.onupdate=2]="onupdate"})(H=a.method_id_E911Service_t||(a.method_id_E911Service_t={}));var E;(function(a){a[a.ctor=0]="ctor";a[a.label=1]="label";a[a.ordered=2]="ordered";a[a.maxPacketLifeTime=3]="maxPacketLifeTime";a[a.maxRetransmits=4]="maxRetransmits";a[a.protocol=5]="protocol";a[a.negotiated=6]="negotiated";a[a.id=7]="id";a[a.readyState=
8]="readyState";a[a.bufferedAmount=9]="bufferedAmount";a[a.bufferedAmountLowThreshold=10]="bufferedAmountLowThreshold";a[a.onopen=11]="onopen";a[a.onbufferedamountlow=12]="onbufferedamountlow";a[a.onerror=13]="onerror";a[a.onclosing=14]="onclosing";a[a.onclose=15]="onclose";a[a.onmessage=16]="onmessage";a[a.close=17]="close";a[a.send_text=18]="send_text";a[a.send_binary=19]="send_binary"})(E=a.method_id_RTCDataChannel_t||(a.method_id_RTCDataChannel_t={}));var J;(function(a){a[a.ctor=0]="ctor";a[a.transport=
1]="transport";a[a.state=2]="state";a[a.maxMessageSize=3]="maxMessageSize";a[a.maxChannels=4]="maxChannels";a[a.onstatechange=5]="onstatechange"})(J=a.method_id_RTCSctpTransport_t||(a.method_id_RTCSctpTransport_t={}));var G;(function(a){a[a.ctor=0]="ctor";a[a.getCallConstraints=1]="getCallConstraints";a[a.onupdate=2]="onupdate"})(G=a.method_id_StreamResolution_t||(a.method_id_StreamResolution_t={}));(function(a){a[a.ctor=0]="ctor";a[a.sendMessageDeviceVideoEffectsAsync=1]="sendMessageDeviceVideoEffectsAsync";
a[a.sendMessageDeviceVideoEffectsAsync_v2=2]="sendMessageDeviceVideoEffectsAsync_v2"})(a.mehtod_id_VideoEffect_t||(a.mehtod_id_VideoEffect_t={}));var B;(function(a){a[a.ctor=0]="ctor";a[a.sampleRate=1]="sampleRate";a[a.close=2]="close";a[a.createMediaStreamSource=3]="createMediaStreamSource";a[a.createMediaStreamDestination=4]="createMediaStreamDestination"})(B=a.method_id_AudioContext_t||(a.method_id_AudioContext_t={}));var F;(function(a){a[a.ctor=0]="ctor";a[a.connect=1]="connect";a[a.disconnectAll=
2]="disconnectAll";a[a.disconnectOutput=3]="disconnectOutput";a[a.disconnectDestinationNode=4]="disconnectDestinationNode";a[a.disconnectOutputDestinationNode=5]="disconnectOutputDestinationNode";a[a.disconnect=6]="disconnect";a[a.numberOfInputs=7]="numberOfInputs";a[a.numberOfOutputs=8]="numberOfOutputs";a[a.channelCount=9]="channelCount"})(F=a.method_id_AudioNode_t||(a.method_id_AudioNode_t={}));var N;(function(a){a[a.ctor=0]="ctor";a[a.mediaStream=1]="mediaStream"})(N=a.method_id_MediaStreamAudioSourceNode_t||
(a.method_id_MediaStreamAudioSourceNode_t={}));var T;(function(a){a[a.ctor=0]="ctor";a[a.stream=1]="stream"})(T=a.method_id_MediaStreamAudioDestinationNode_t||(a.method_id_MediaStreamAudioDestinationNode_t={}));var Q;(function(a){a[a.ctor=0]="ctor";a[a.onconnect=1]="onconnect";a[a.ondisconnect=2]="ondisconnect";a[a.getDevices=3]="getDevices";a[a.requestDevice=4]="requestDevice"})(Q=a.method_id_WebHidInterface_t||(a.method_id_WebHidInterface_t={}));var L;(function(a){a[a.ctor=0]="ctor";a[a.opened=
1]="opened";a[a.vendorId=2]="vendorId";a[a.productId=3]="productId";a[a.productName=4]="productName";a[a.collections=5]="collections";a[a.oninputreport=6]="oninputreport";a[a.open=7]="open";a[a.close=8]="close";a[a.forget=9]="forget";a[a.sendReport=10]="sendReport";a[a.sendFeatureReport=11]="sendFeatureReport";a[a.receiveFeatureReport=12]="receiveFeatureReport";a[a.compositeId=13]="compositeId";a[a.onCollectionsAdded=14]="onCollectionsAdded"})(L=a.method_id_WebHidDevice_t||(a.method_id_WebHidDevice_t=
{}));var Z;(function(a){a[a.ctor=0]="ctor";a[a.device=1]="device"})(Z=a.method_id_WebHidConnectionEvent_t||(a.method_id_WebHidConnectionEvent_t={}));var Y;(function(a){a[a.ctor=0]="ctor";a[a.device=1]="device";a[a.reportId=2]="reportId";a[a.data=3]="data"})(Y=a.method_id_WebHidInputReportEvent_t||(a.method_id_WebHidInputReportEvent_t={}));var aa;(function(a){a[a.ctor=0]="ctor";a[a.device=1]="device";a[a.collections=2]="collections"})(aa=a.method_id_WebHidCollectionsAddedEvent_t||(a.method_id_WebHidCollectionsAddedEvent_t=
{}));a.class_lib_info=new b.WebrpcClassLibInfo("webrpc_class_library",[new b.WebrpcClassInfo(d.EngineControl,"EngineControl",[new b.WebrpcMethodInfo(d.EngineControl,k.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.EngineControl,k.version,"version",!0),new b.WebrpcMethodInfo(d.EngineControl,k.feature_flags,"feature_flags",!0),new b.WebrpcMethodInfo(d.EngineControl,k.version_info,"version_info",!0,a.FEATURE_ms_teams_desktop_sharing),new b.WebrpcMethodInfo(d.EngineControl,k.osinfo,"osinfo",!0,a.FEATURE_ms_teams_osinfo),
new b.WebrpcMethodInfo(d.EngineControl,k.endpoint_id,"endpoint_id",!0,a.FEATURE_ms_teams_endpoint_id),new b.WebrpcMethodInfo(d.EngineControl,k.set_client_info,"set_client_info",!1,a.FEATURE_ms_teams_client_info),new b.WebrpcMethodInfo(d.EngineControl,k.hardware_info,"hardware_info",!0,a.FEATURE_ms_teams_hardware_info)]),new b.WebrpcClassInfo(d.RTCPeerConnection,"RTCPeerConnection",[new b.WebrpcMethodInfo(d.RTCPeerConnection,p.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.localDescription,
"localDescription",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.remoteDescription,"remoteDescription",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.readyState,"readyState",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.iceState,"iceState",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.localStreams,"localStreams",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.remoteStreams,"remoteStreams",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.createOffer,"createOffer",!1),new b.WebrpcMethodInfo(d.RTCPeerConnection,
p.createAnswer,"createAnswer",!1),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.setLocalDescription,"setLocalDescription",!1),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.setRemoteDescription,"setRemoteDescription",!1),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.updateIce,"updateIce",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.addIceCandidate,"addIceCandidate",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.addStream,"addStream",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.removeStream,
"removeStream",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.close,"close",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.iceConnectionState,"iceConnectionState",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.iceGatheringState,"iceGatheringState",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.signalingState,"signalingState",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onaddstream,"onaddstream",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onicecandidate,"onicecandidate",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,
p.oniceconnectionstatechange,"oniceconnectionstatechange",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onicegatheringstatechange,"onicegatheringstatechange",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onsignalingstatechange,"onsignalingstatechange",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onnegotiationneeded,"onnegotiationneeded",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onremovestream,"onremovestream",!0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.getStats,"getStats",!1),
new b.WebrpcMethodInfo(d.RTCPeerConnection,p.getReceivers,"getReceivers",!1,a.FEATURE_ms_teams_speaking_indicator),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.getSenders,"getSenders",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.addTrack,"addTrack",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.removeTrack,"removeTrack",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.ontrack,"ontrack",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCPeerConnection,
p.setLocalDescription_v2,"setLocalDescription_v2",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.setRemoteDescription_v2,"setRemoteDescription_v2",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.addTransceiverWithTrack,"addTransceiverWithTrack",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.addTransceiverWithKind,"addTransceiverWithKind",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,
p.getTransceivers,"getTransceivers",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.onconnectionstatechange,"onconnectionstatechange",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.sctp,"sctp",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.ondatachannel,"ondatachannel",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCPeerConnection,p.createDataChannel,"createDataChannel",!1,a.FEATURE_ms_teams_data_channel),
new b.WebrpcMethodInfo(d.RTCPeerConnection,p.getStats_v2,"getStats_v2",!1,a.FEATURE_ms_teams_webrtc_1dot0)]),new b.WebrpcClassInfo(d.RTCSessionDescription,"RTCSessionDescription",[new b.WebrpcMethodInfo(d.RTCSessionDescription,t.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.RTCSessionDescription,t.type,"type",!0),new b.WebrpcMethodInfo(d.RTCSessionDescription,t.sdp,"sdp",!0)]),new b.WebrpcClassInfo(d.RTCIceCandidate,"RTCIceCandidate",[new b.WebrpcMethodInfo(d.RTCIceCandidate,w.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.RTCIceCandidate,
w.candidate,"candidate",!0),new b.WebrpcMethodInfo(d.RTCIceCandidate,w.sdpMid,"sdpMid",!0),new b.WebrpcMethodInfo(d.RTCIceCandidate,w.sdpMLineIndex,"sdpMLineIndex",!0)]),new b.WebrpcClassInfo(d.RTCIceCandidateEvent,"RTCIceCandidateEvent",[new b.WebrpcMethodInfo(d.RTCIceCandidateEvent,h.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.RTCIceCandidateEvent,h.candidate,"candidate",!0)]),new b.WebrpcClassInfo(d.MediaDevices,"MediaDevices",[new b.WebrpcMethodInfo(d.MediaDevices,g.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.MediaDevices,
g.enumerateDevices,"enumerateDevices",!1),new b.WebrpcMethodInfo(d.MediaDevices,g.getDisplayMedia,"getDisplayMedia",!1,a.FEATURE_ms_teams_desktop_sharing),new b.WebrpcMethodInfo(d.MediaDevices,g.ondevicechange,"ondevicechange",!0,a.FEATURE_ms_teams_speaking_indicator),new b.WebrpcMethodInfo(d.MediaDevices,g.enumerateDevicesV2,"enuerateDevicesV2",!1,a.FEATURE_ms_teams_enumerate_devices_v2)]),new b.WebrpcClassInfo(d.MediaDeviceInfo,"MediaDeviceInfo",[new b.WebrpcMethodInfo(d.MediaDeviceInfo,e.ctor,
"ctor",!1),new b.WebrpcMethodInfo(d.MediaDeviceInfo,e.deviceId,"deviceId",!0),new b.WebrpcMethodInfo(d.MediaDeviceInfo,e.kind,"kind",!0),new b.WebrpcMethodInfo(d.MediaDeviceInfo,e.label,"label",!0),new b.WebrpcMethodInfo(d.MediaDeviceInfo,e.groupId,"groupId",!0)]),new b.WebrpcClassInfo(d.MediaStreamTrack,"MediaStreamTrack",[new b.WebrpcMethodInfo(d.MediaStreamTrack,q.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.clone,"clone",!1),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.stop,"stop",
!1),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.getCapabilities,"getCapabilities",!1),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.getSettings,"getSettings",!1),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.applyConstraints,"applyConstraints",!1,a.FEATURE_ms_teams_desktop_sharing),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.kind,"kind",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.id,"id",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.label,"label",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.enabled,
"enabled",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.muted,"muted",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.readyState,"readyState",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.onended,"onended",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.onmute,"onmute",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.onunmute,"onunmute",!0),new b.WebrpcMethodInfo(d.MediaStreamTrack,q.getConstraints,"getConstraints",!1,a.FEATURE_ms_teams_mstrack_constraints)]),new b.WebrpcClassInfo(d.MediaStream,
"MediaStream",[new b.WebrpcMethodInfo(d.MediaStream,m.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.MediaStream,m.id,"id",!0),new b.WebrpcMethodInfo(d.MediaStream,m.getAudioTracks,"getAudioTracks",!1),new b.WebrpcMethodInfo(d.MediaStream,m.getVideoTracks,"getVideoTracks",!1),new b.WebrpcMethodInfo(d.MediaStream,m.getTracks,"getTracks",!1),new b.WebrpcMethodInfo(d.MediaStream,m.getTrackById,"getTrackById",!1),new b.WebrpcMethodInfo(d.MediaStream,m.addTrack,"addTrack",!1),new b.WebrpcMethodInfo(d.MediaStream,
m.removeTrack,"removeTrack",!1),new b.WebrpcMethodInfo(d.MediaStream,m.clone,"clone",!0),new b.WebrpcMethodInfo(d.MediaStream,m.active,"active",!0)]),new b.WebrpcClassInfo(d.NavigatorUserMedia,"NavigatorUserMedia",[new b.WebrpcMethodInfo(d.NavigatorUserMedia,n.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.NavigatorUserMedia,n.getUserMedia,"getUserMedia",!1),new b.WebrpcMethodInfo(d.NavigatorUserMedia,n.setCodecCapabilities,"setCodecCapabilities",!1,a.FEATURE_ms_teams_codec_capability),new b.WebrpcMethodInfo(d.NavigatorUserMedia,
n.getCapabilities,"getRtpCapabilities",!1,a.FEATURE_ms_teams_webrtc_1dot0)]),new b.WebrpcClassInfo(d.MediaStreamEvent,"MediaStreamEvent",[new b.WebrpcMethodInfo(d.MediaStreamEvent,c.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.MediaStreamEvent,c.stream,"stream",!0)]),new b.WebrpcClassInfo(d.VideoElement,"VideoElement",[new b.WebrpcMethodInfo(d.VideoElement,u.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.VideoElement,u.sinkId,"sinkId",!0),new b.WebrpcMethodInfo(d.VideoElement,u.connectTo,"connectTo",!1),new b.WebrpcMethodInfo(d.VideoElement,
u.disconnect,"disconnect",!1),new b.WebrpcMethodInfo(d.VideoElement,u.setFrame,"setFrame",!1),new b.WebrpcMethodInfo(d.VideoElement,u.addClipRect,"addClipRect",!1),new b.WebrpcMethodInfo(d.VideoElement,u.removeClipRect,"removeClipRect",!1),new b.WebrpcMethodInfo(d.VideoElement,u.onerror,"onerror",!0),new b.WebrpcMethodInfo(d.VideoElement,u.onvideoframechanged,"onvideoframechanged",!0),new b.WebrpcMethodInfo(d.VideoElement,u.placement,"placement",!0,a.FEATURE_ms_teams_video_placement)]),new b.WebrpcClassInfo(d.AudioElement,
"AudioElement",[new b.WebrpcMethodInfo(d.AudioElement,v.ctor,"ctor",!1),new b.WebrpcMethodInfo(d.AudioElement,v.sinkId,"sinkId",!0),new b.WebrpcMethodInfo(d.AudioElement,v.srcObject,"srcObject",!0),new b.WebrpcMethodInfo(d.AudioElement,v.src,"src",!0),new b.WebrpcMethodInfo(d.AudioElement,v.play,"play",!1),new b.WebrpcMethodInfo(d.AudioElement,v.pause,"pause",!1),new b.WebrpcMethodInfo(d.AudioElement,v.loop,"loop",!0,a.FEATURE_ms_teams_audio_notifications_loop)]),new b.WebrpcClassInfo(d.RTCRtpReceiver,
"RTCRtpReceiver",[new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.ctor,"ctor",!1,a.FEATURE_ms_teams_speaking_indicator),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.track,"track",!0,a.FEATURE_ms_teams_speaking_indicator),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getContributingSources,"getContributingSources",!1,a.FEATURE_ms_teams_speaking_indicator),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getSynchronizationSources,"getSynchronizationSources",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,
z.transport,"transport",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.rtcpTransport,"rtcptransport",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getCapabilities,"getCapabilities",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getParameters,"getParameters",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getStats,"getStats",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpReceiver,z.getCapabilities_v2,
"getCapabilities_v2",!1,a.FEATURE_ms_teams_webrtc_1dot0)]),new b.WebrpcClassInfo(d.RTCRtpSender,"RTCRtpSender",[new b.WebrpcMethodInfo(d.RTCRtpSender,y.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.track,"track",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.transport,"transport",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.rtcpTransport,"rtcpTransport",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.dtmf,
"dtmf",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.getCapabilities,"getCapabilities",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.getParameters,"getParameters",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.setParameters,"setParameters",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.replaceTrack,"replaceTrack",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.getStats,"getStats",!1,a.FEATURE_ms_teams_pstn),
new b.WebrpcMethodInfo(d.RTCRtpSender,y.setStreams,"setStreams",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCRtpSender,y.getCapabilities_v2,"getCapabilities_v2",!1,a.FEATURE_ms_teams_webrtc_1dot0)]),new b.WebrpcClassInfo(d.RTCDtlsTransport,"RTCDtlsTransport",[new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.transport,"transport",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.state,"state",
!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.getRemoteCertificates,"getRemoteCertificates",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.onstatechange,"onstatechange",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDtlsTransport,l.onerror,"onerror",!0,a.FEATURE_ms_teams_pstn)]),new b.WebrpcClassInfo(d.RTCIceTransport,"RTCIceTransport",[new b.WebrpcMethodInfo(d.RTCIceTransport,C.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,
C.role,"role",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.component,"component",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.state,"state",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.gatheringState,"gatheringState",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.localcandidates,"localcandidates",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.remotecandidates,"remotecandidates",
!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.onstatechange,"onstatechange",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.ongatheringstatechange,"ongatheringstatechange",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceTransport,C.onselectedcandidatepairchange,"onselectedcandidatepairchange",!0,a.FEATURE_ms_teams_pstn)]),new b.WebrpcClassInfo(d.RTCDTMFSender,"RTCDTMFSender",[new b.WebrpcMethodInfo(d.RTCDTMFSender,r.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),
new b.WebrpcMethodInfo(d.RTCDTMFSender,r.insertDTMF,"insertDTMF",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDTMFSender,r.ontonechange,"ontonechange",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDTMFSender,r.canInsertDTMF,"canInsertDTMF",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDTMFSender,r.toneBuffer,"toneBuffer",!0,a.FEATURE_ms_teams_pstn)]),new b.WebrpcClassInfo(d.RTCDTMFToneChangeEvent,"RTCDTMFToneChangeEvent",[new b.WebrpcMethodInfo(d.RTCDTMFToneChangeEvent,
D.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDTMFToneChangeEvent,D.tone,"tone",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCDTMFToneChangeEvent,D.tone_buffer,"tone_buffer",!0,a.FEATURE_ms_teams_pstn)]),new b.WebrpcClassInfo(d.RTCIceCandidatePair,"RTCIceCandidatePair",[new b.WebrpcMethodInfo(d.RTCIceCandidatePair,K.ctor,"ctor",!1,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceCandidatePair,K.local,"local",!0,a.FEATURE_ms_teams_pstn),new b.WebrpcMethodInfo(d.RTCIceCandidatePair,
K.remote,"remote",!0,a.FEATURE_ms_teams_pstn)]),new b.WebrpcClassInfo(d.RTCRtpTransceiver,"RTCRtpTransceiver",[new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.ctor,"ctor",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.mid,"mid",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.sender,"sender",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.receiver,"receiver",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,
M.direction,"direction",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.currentDirection,"currentDirection",!0,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.stop,"stop",!1,a.FEATURE_ms_teams_webrtc_1dot0),new b.WebrpcMethodInfo(d.RTCRtpTransceiver,M.setCodecPreferences,"setCodecPreferences",!1,a.FEATURE_ms_teams_webrtc_1dot0)]),new b.WebrpcClassInfo(d.ScreenSharingRemote,"ScreenSharingRemote",[new b.WebrpcMethodInfo(d.ScreenSharingRemote,
U.ctor,"ctor",!1,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSharingRemote,U.getScreensAsync,"getScreensAsync",!1,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSharingRemote,U.onscreentopologychanged,"onscreentopologychanged",!0,a.FEATURE_ms_teams_monitor_sharing)]),new b.WebrpcClassInfo(d.ScreenSource,"ScreenSource",[new b.WebrpcMethodInfo(d.ScreenSource,I.ctor,"ctor",!1,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.srcid,
"srcid",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.deviceid,"deviceid",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.type,"type",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.name,"name",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.imagedata,"imagedata",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.hwnd,"hwnd",!0,a.FEATURE_ms_teams_monitor_sharing),
new b.WebrpcMethodInfo(d.ScreenSource,I.origin,"origin",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.caption,"caption",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.pid,"pid",!0,a.FEATURE_ms_teams_monitor_sharing),new b.WebrpcMethodInfo(d.ScreenSource,I.bounds,"bounds",!0,a.FEATURE_ms_teams_gtc)]),new b.WebrpcClassInfo(d.E911Service,"E911Service",[new b.WebrpcMethodInfo(d.E911Service,H.ctor,"ctor",!1,a.FEATURE_ms_teams_e911),new b.WebrpcMethodInfo(d.E911Service,
H.getE911Info,"getE911Info",!1,a.FEATURE_ms_teams_e911),new b.WebrpcMethodInfo(d.E911Service,H.onupdate,"onupdate",!0,a.FEATURE_ms_teams_e911)]),new b.WebrpcClassInfo(d.RTCDataChannel,"RTCDataChannel",[new b.WebrpcMethodInfo(d.RTCDataChannel,E.ctor,"ctor",!1,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.label,"label",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.ordered,"ordered",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,
E.maxPacketLifeTime,"maxPacketLifeTime",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.maxRetransmits,"maxRetransmits",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.protocol,"protocol",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.negotiated,"negotiated",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.id,"id",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,
E.readyState,"readyState",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.bufferedAmount,"bufferedAmount",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.bufferedAmountLowThreshold,"bufferedAmountLowThreshold",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.onopen,"onopen",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.onbufferedamountlow,"onbufferedamountlow",!0,a.FEATURE_ms_teams_data_channel),
new b.WebrpcMethodInfo(d.RTCDataChannel,E.onerror,"onerror",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.onclosing,"onclosing",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.onclose,"onclose",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.onmessage,"onmessage",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.close,"close",!1,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,
E.send_text,"send_text",!1,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCDataChannel,E.send_binary,"send_binary",!1,a.FEATURE_ms_teams_data_channel)]),new b.WebrpcClassInfo(d.RTCSctpTransport,"RTCSctpTransport",[new b.WebrpcMethodInfo(d.RTCSctpTransport,J.ctor,"ctor",!1,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCSctpTransport,J.transport,"transport",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCSctpTransport,J.state,"state",!0,a.FEATURE_ms_teams_data_channel),
new b.WebrpcMethodInfo(d.RTCSctpTransport,J.maxMessageSize,"maxMessageSize",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCSctpTransport,J.maxChannels,"maxChannels",!0,a.FEATURE_ms_teams_data_channel),new b.WebrpcMethodInfo(d.RTCSctpTransport,J.onstatechange,"onstatechange",!0,a.FEATURE_ms_teams_data_channel)]),new b.WebrpcClassInfo(d.StreamResolution,"StreamResolution",[new b.WebrpcMethodInfo(d.StreamResolution,G.ctor,"ctor",!1,a.FEATURE_ms_teams_stream_resolution),new b.WebrpcMethodInfo(d.StreamResolution,
G.getCallConstraints,"getCallConstraints",!1,a.FEATURE_ms_teams_stream_resolution),new b.WebrpcMethodInfo(d.StreamResolution,G.onupdate,"onupdate",!0,a.FEATURE_ms_teams_stream_resolution)]),new b.WebrpcClassInfo(d.AudioContext,"AudioContext",[new b.WebrpcMethodInfo(d.AudioContext,B.ctor,"ctor",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioContext,B.sampleRate,"sampleRate",!0,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioContext,B.close,"close",!1,a.FEATURE_ms_teams_share_system_audio),
new b.WebrpcMethodInfo(d.AudioContext,B.createMediaStreamSource,"createMediaStreamSource",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioContext,B.createMediaStreamDestination,"createMediaStreamDestination",!1,a.FEATURE_ms_teams_share_system_audio)]),new b.WebrpcClassInfo(d.AudioNode,"AudioNode",[new b.WebrpcMethodInfo(d.AudioNode,F.ctor,"ctor",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.connect,"connect",!1,a.FEATURE_ms_teams_share_system_audio),
new b.WebrpcMethodInfo(d.AudioNode,F.disconnectAll,"disconnectAll",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.disconnectOutput,"disconnectOutput",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.disconnectDestinationNode,"disconnectDestinationNode",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.disconnectOutputDestinationNode,"disconnectDestinationNode",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,
F.disconnect,"disconnect",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.numberOfInputs,"numberOfInputs",!0,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.numberOfOutputs,"numberOfOutputs",!0,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.AudioNode,F.channelCount,"channelCount",!0,a.FEATURE_ms_teams_share_system_audio)]),new b.WebrpcClassInfo(d.MediaStreamAudioSourceNode,"MediaStreamAudioSourceNode",[new b.WebrpcMethodInfo(d.MediaStreamAudioSourceNode,
N.ctor,"ctor",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.MediaStreamAudioSourceNode,N.mediaStream,"mediaStream",!0,a.FEATURE_ms_teams_share_system_audio)]),new b.WebrpcClassInfo(d.MediaStreamAudioDestinationNode,"MediaStreamAudioDestinationNode",[new b.WebrpcMethodInfo(d.MediaStreamAudioDestinationNode,T.ctor,"ctor",!1,a.FEATURE_ms_teams_share_system_audio),new b.WebrpcMethodInfo(d.MediaStreamAudioDestinationNode,T.stream,"stream",!0,a.FEATURE_ms_teams_share_system_audio)]),
new b.WebrpcClassInfo(d.WebHidInterface,"WebHidInterface",[new b.WebrpcMethodInfo(d.WebHidInterface,Q.ctor,"ctor",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInterface,Q.onconnect,"onconnect",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInterface,Q.ondisconnect,"ondisconnect",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInterface,Q.getDevices,"getDevices",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInterface,Q.requestDevice,"requestDevice",
!1,a.FEATURE_ms_teams_webhid)]),new b.WebrpcClassInfo(d.WebHidDevice,"WebHidDevice",[new b.WebrpcMethodInfo(d.WebHidDevice,L.ctor,"ctor",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.opened,"opened",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.vendorId,"vendorId",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.productId,"productId",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.productName,"productName",
!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.collections,"collections",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.oninputreport,"oninputreport",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.open,"open",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.close,"close",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.forget,"forget",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,
L.sendReport,"sendReport",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.sendFeatureReport,"sendFeatureReport",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.receiveFeatureReport,"receiveFeatureReport",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.compositeId,"compositeId",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidDevice,L.onCollectionsAdded,"onCollectionsAdded",!0,a.FEATURE_ms_teams_webhid)]),new b.WebrpcClassInfo(d.WebHidConnectionEvent,
"WebHidConnectionEvent",[new b.WebrpcMethodInfo(d.WebHidConnectionEvent,Z.ctor,"ctor",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidConnectionEvent,Z.device,"device",!0,a.FEATURE_ms_teams_webhid)]),new b.WebrpcClassInfo(d.WebHidInputReportEvent,"WebHidInputReportEvent",[new b.WebrpcMethodInfo(d.WebHidInputReportEvent,Y.ctor,"ctor",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInputReportEvent,Y.device,"device",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInputReportEvent,
Y.reportId,"reportId",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidInputReportEvent,Y.data,"data",!0,a.FEATURE_ms_teams_webhid)]),new b.WebrpcClassInfo(d.WebHidCollectionsAddedEvent,"WebHidCollectionsAddedEvent",[new b.WebrpcMethodInfo(d.WebHidCollectionsAddedEvent,aa.ctor,"ctor",!1,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidCollectionsAddedEvent,aa.device,"device",!0,a.FEATURE_ms_teams_webhid),new b.WebrpcMethodInfo(d.WebHidCollectionsAddedEvent,aa.collections,"collections",
!0,a.FEATURE_ms_teams_webhid)])])},545:function(b,a,d){var f=this&&this.__read||function(a,b){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var d="function"===typeof Symbol&&a[Symbol.iterator];if(!d)return a;var f=d.call(a),g,k=[],h;try{for(;(void 0===b||0<b--)&&!(g=f.next()).done;)k.push(g.value)}catch(c){h={error:c}}finally{try{g&&!g.done&&(d=f["return"])&&d.call(f)}finally{if(h)throw h.error;}}return k},k=this&&this.__spread||function(){for(var a=[],b=0;b<arguments.length;b++)a=
a.concat(f(arguments[b]));return a};Object.defineProperty(a,"__esModule",{value:!0});a.WsJsonUtil=a.ws_msg_type_t=void 0;var p=d(550),g;(function(a){a[a.req=0]="req";a[a.reply=1]="reply";a[a.event_req=2]="event_req";a[a.event_reply=3]="event_reply"})(g=a.ws_msg_type_t||(a.ws_msg_type_t={}));b=function(){function a(){}a.createMessageByid=function(a,b,d,e,f,g){for(var c=[],q=6;q<arguments.length;q++)c[q-6]=arguments[q];(q=p.WebrpcClassLibInfoUtil.getMethodByid(e,f))&&q.isprop||(a=!1);return this.createMessage.apply(this,
k([d,a,b,e,f,g],c))};a.createMessage=function(a,b,d,e,f,g){for(var c=[],p=6;p<arguments.length;p++)c[p-6]=arguments[p];return{v:"webrtc",hdr:{version:this._version,msg_type:this.getMsgType(a),modifier:b,destroy:d,proc:{iid:e,methodid:f}},objref:{oid:g},params:k(c)}};a.getMsgType=function(a){var b="";switch(a){default:b="req";break;case g.reply:b="reply";break;case g.event_req:b="event-req";break;case g.event_reply:b="event-reply"}return b};a._version=1;return a}();a.WsJsonUtil=b}},q={};return f(307)}()});
