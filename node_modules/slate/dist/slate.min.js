!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Slate={})}(this,(function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0}));t(n);var o=r((function(e){e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));t(o);var i=r((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));t(i);var a=r((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));t(a);var s=r((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));t(s);var u=t(r((function(e){e.exports=function(e){return o(e)||i(e)||a(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0}))),c=r((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));t(c);var f=r((function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0}));t(f);var l=r((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));t(l);var h=t(r((function(e){e.exports=function(e,t){return c(e)||f(e,t)||a(e,t)||l()},e.exports.default=e.exports,e.exports.__esModule=!0}))),d=t(r((function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),v=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,b=new WeakMap;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e.path;return yt.levels(t);case"insert_node":var r=e.node,n=e.path,o=yt.levels(n),i=Rt.isText(r)?[]:Array.from(dt.nodes(r),(function(e){var t=h(e,2)[1];return n.concat(t)}));return[].concat(u(o),u(i));case"merge_node":var a=e.path,s=yt.ancestors(a),c=yt.previous(a);return[].concat(u(s),[c]);case"move_node":var f=e.path,l=e.newPath;if(yt.equals(f,l))return[];var d,v=[],p=[],g=O(yt.ancestors(f));try{for(g.s();!(d=g.n()).done;){var y=d.value,m=yt.transform(y,e);v.push(m)}}catch(e){g.e(e)}finally{g.f()}var b,w=O(yt.ancestors(l));try{for(w.s();!(b=w.n()).done;){var x=b.value,P=yt.transform(x,e);p.push(P)}}catch(e){w.e(e)}finally{w.f()}var k=p[p.length-1],A=l[l.length-1],j=k.concat(A);return[].concat(v,p,[j]);case"remove_node":var E=e.path,F=yt.ancestors(E);return u(F);case"split_node":var S=e.path,_=yt.levels(S),N=yt.next(S);return[].concat(u(_),[N]);default:return[]}},A=r((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0}));t(A);var j=t(r((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o=A(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0}))),E=r((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new F(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===o)throw i;return _()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?v:h,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function g(){}function y(){}function m(){}var b={};u(b,i,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(S([])));x&&x!==r&&n.call(x,i)&&(b=x);var O=m.prototype=g.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function S(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=m,u(O,"constructor",m),u(m,"constructor",y),y.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},P(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(O),u(O,s,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));
/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
function F(e){return"[object Object]"===Object.prototype.toString.call(e)}function S(e){var t,r;return!1!==F(e)&&(void 0===(t=e.constructor)||!1!==F(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function _(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=/\s/,D=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,R=/['\u2018\u2019]/,T=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!r,o=0,i=null,a=n?e:Q(e),s=_(a);try{for(s.s();!(t=s.n()).done;){var u=t.value,c=u.codePointAt(0);if(!c)break;if(G(c))o+=u.length,i="ZWJ";else{var f=n?[z,W]:[W,z],l=h(f,2),d=l[0],v=l[1];if(d(c)){if("KC"===i)break;o+=u.length,i="KC"}else{if(v(c)){o+=u.length;break}if(L(c)){if(o+=u.length,n&&"BMP"===i)break;i="VAR"}else if(V(c)){if(n&&i&&"ZWJ"!==i&&"VAR"!==i)break;if(o+=u.length,r&&"VAR"===i)break;i="BMP"}else if(q(c))o+=u.length,i="MOD";else{var p=n?[J,Y]:[Y,J],g=h(p,2),y=g[0],m=g[1];if(y(c)){if("TAG"===i)break;o+=u.length,i="TAG"}else{if(m(c)){o+=u.length;break}if("TAG"===i&&K(c))o+=u.length;else if(U(c)){if(o+=u.length,"RI"===i)break;i="RI"}else{if($(c)){if(n&&"MOD"===i){o+=u.length;break}break}if("NSEQ"===i)break;o+=u.length,i="NSEQ"}}}}}}}catch(e){s.e(e)}finally{s.f()}return o||1},B=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,n=!1;e.length>0;){var o=T(e,t),i=I(e,o,t),a=h(i,2),s=a[0],u=a[1];if(M(s,u,t))n=!0,r+=o;else{if(n)break;r+=o}e=u}return r},I=function(e,t,r){if(r){var n=e.length-t;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,t),e.slice(t)]},M=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(C.test(t))return!1;if(R.test(t)){var o=T(r,n),i=I(r,o,n),a=h(i,2),s=a[0],u=a[1];if(e(s,u,n))return!0}return!D.test(t)},q=function(e){return e>=127995&&e<=127999},L=function(e){return e<=65039&&e>=65024},z=function(e){return e>=48&&e<=57||35===e||42===e},W=function(e){return 8419===e},V=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e||11014===e||8599===e||10145===e||8600===e||11015===e||8601===e||11013===e||8598===e||8597===e||8596===e||8617===e||8618===e||10548===e||10549===e},U=function(e){return e>=127462&&e<=127487},$=function(e){return e<=65535},G=function(e){return 8205===e},J=function(e){return 127988===e},K=function(e){return e>=917504&&e<=917631},Y=function(e){return 917631===e},Q=E.mark((function e(t){var r,n,o,i;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.length-1,n=0;case 2:if(!(n<t.length)){e.next=16;break}if(o=t.charAt(r-n),!X(o.charCodeAt(0))){e.next=11;break}if(i=t.charAt(r-n-1),!Z(i.charCodeAt(0))){e.next=11;break}return e.next=9,i+o;case 9:return n++,e.abrupt("continue",13);case 11:return e.next=13,o;case 13:n++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})),Z=function(e){return e>=55296&&e<=56319},X=function(e){return e>=56320&&e<=57343},H=function(e){return S(e)&&dt.isNodeList(e.children)&&!ue.isEditor(e)},ee={isAncestor:function(e){return S(e)&&dt.isNodeList(e.children)},isElement:H,isElementList:function(e){return Array.isArray(e)&&e.every((function(e){return ee.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},isElementType:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return H(e)&&e[r]===t},matches:function(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},te=["text"],re=["text"];function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=new WeakMap,ue={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.voids,n=void 0!==r&&r,o=t.mode,i=void 0===o?"lowest":o,a=t.at,s=void 0===a?e.selection:a,u=t.match;if(s){var c,f=ue.path(e,s),l="lowest"===i,d=ie(ue.levels(e,{at:f,voids:n,match:u,reverse:l}));try{for(d.s();!(c=d.n()).done;){var v=h(c.value,2),p=v[0],g=v[1];if(!Rt.isText(p)&&!yt.equals(f,g))return[p,g]}}catch(e){d.e(e)}finally{d.f()}}},addMark:function(e,t,r){e.addMark(t,r)},after:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ue.point(e,t,{edge:"end"}),a=ue.end(e,[]),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=ie(ue.positions(e,oe(oe({},o),{},{at:s})));try{for(l.s();!(n=l.n()).done;){var h=n.value;if(f>c)break;0!==f&&(r=h),f++}}catch(e){l.e(e)}finally{l.f()}return r},before:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=ue.start(e,[]),a=ue.point(e,t,{edge:"start"}),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=ie(ue.positions(e,oe(oe({},o),{},{at:s,reverse:!0})));try{for(l.s();!(n=l.n()).done;){var h=n.value;if(f>c)break;0!==f&&(r=h),f++}}catch(e){l.e(e)}finally{l.f()}return r},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteBackward(n)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteForward(n)},deleteFragment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.direction,n=void 0===r?"forward":r;e.deleteFragment(n)},edges:function(e,t){return[ue.start(e,t),ue.end(e,t)]},end:function(e,t){return ue.point(e,t,{edge:"end"})},first:function(e,t){var r=ue.path(e,t,{edge:"start"});return ue.node(e,r)},fragment:function(e,t){var r=ue.range(e,t),n=dt.fragment(e,r);return n},hasBlocks:function(e,t){return t.children.some((function(t){return ue.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return Rt.isText(t)||ue.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return Rt.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return ee.isElement(t)&&!e.isInline(t)},isEditor:function(e){if(!S(e))return!1;var t=se.get(e);if(void 0!==t)return t;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||S(e.marks))&&(null===e.selection||At.isRange(e.selection))&&dt.isNodeList(e.children)&&gt.isOperationList(e.operations);return se.set(e,r),r},isEnd:function(e,t,r){var n=ue.end(e,r);return xt.equals(t,n)},isEdge:function(e,t,r){return ue.isStart(e,t,r)||ue.isEnd(e,t,r)},isEmpty:function(e,t){var r=t.children,n=h(r,1)[0];return 0===r.length||1===r.length&&Rt.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:function(e,t){return ee.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=g.get(e);return void 0===t||t},isStart:function(e,t,r){if(0!==t.offset)return!1;var n=ue.start(e,r);return xt.equals(t,n)},isVoid:function(e,t){return ee.isElement(t)&&e.isVoid(t)},last:function(e,t){var r=ue.path(e,t,{edge:"end"});return ue.node(e,r)},leaf:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ue.path(e,t,r),o=dt.leaf(e,n);return[o,n]},levels:E.mark((function(e){var t,r,n,o,i,a,s,u,c,f,l,d,v,p,g,y=arguments;return E.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},r=t.at,n=void 0===r?e.selection:r,o=t.reverse,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,null==(u=t.match)&&(u=function(){return!0}),n){m.next=6;break}return m.abrupt("return");case 6:c=[],f=ue.path(e,n),l=ie(dt.levels(e,f)),m.prev=9,l.s();case 11:if((d=l.n()).done){m.next=20;break}if(v=h(d.value,2),p=v[0],g=v[1],u(p,g)){m.next=15;break}return m.abrupt("continue",18);case 15:if(c.push([p,g]),s||!ue.isVoid(e,p)){m.next=18;break}return m.abrupt("break",20);case 18:m.next=11;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(9),l.e(m.t0);case 25:return m.prev=25,l.f(),m.finish(25);case 28:return i&&c.reverse(),m.delegateYield(c,"t1",30);case 30:case"end":return m.stop()}}),c,null,[[9,22,25,28]])})),marks:function(e){var t=e.marks,r=e.selection;if(!r)return null;if(t)return t;if(At.isExpanded(r)){var n=ue.nodes(e,{match:Rt.isText}),o=h(n,1)[0];if(o){var i=h(o,1)[0];return i.text,j(i,te)}return{}}var a=r.anchor,s=a.path,u=ue.leaf(e,s),c=h(u,1)[0];if(0===a.offset){var f=ue.previous(e,{at:s,match:Rt.isText}),l=ue.above(e,{match:function(t){return ue.isBlock(e,t)}});if(f&&l){var d=h(f,2),v=d[0],p=d[1],g=h(l,2)[1];yt.isAncestor(g,p)&&(c=v)}}var y=c;return y.text,j(y,re)},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=ue.after(e,u,{voids:i});if(c){var f=ue.last(e,[]),l=h(f,2),d=l[1],v=[c.path,d];if(yt.isPath(u)&&0===u.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(yt.isPath(u)){var p=ue.parent(e,u),g=h(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=ue.nodes(e,{at:v,match:a,mode:n,voids:i}),b=h(m,1),w=b[0];return w}}},node:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ue.path(e,t,r),o=dt.get(e,n);return[o,n]},nodes:E.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,d,v,p,g,y,m,b,w,x,O,P,k,A,j,F,S,_=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_.length>1&&void 0!==_[1]?_[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.mode,a=void 0===i?"all":i,s=r.universal,u=void 0!==s&&s,c=r.reverse,f=void 0!==c&&c,l=r.voids,d=void 0!==l&&l,(v=r.match)||(v=function(){return!0}),o){e.next=6;break}return e.abrupt("return");case 6:fe.isSpan(o)?(p=o[0],g=o[1]):(y=ue.path(t,o,{edge:"start"}),m=ue.path(t,o,{edge:"end"}),p=f?m:y,g=f?y:m),b=dt.nodes(t,{reverse:f,from:p,to:g,pass:function(e){var r=h(e,1)[0];return!d&&ue.isVoid(t,r)}}),w=[],O=ie(b),e.prev=10,O.s();case 12:if((P=O.n()).done){e.next=37;break}if(k=h(P.value,2),A=k[0],j=k[1],F=x&&0===yt.compare(j,x[1]),"highest"!==a||!F){e.next=17;break}return e.abrupt("continue",35);case 17:if(v(A,j)){e.next=23;break}if(!u||F||!Rt.isText(A)){e.next=22;break}return e.abrupt("return");case 22:return e.abrupt("continue",35);case 23:if("lowest"!==a||!F){e.next=26;break}return x=[A,j],e.abrupt("continue",35);case 26:if(!(S="lowest"===a?x:[A,j])){e.next=34;break}if(!u){e.next=32;break}w.push(S),e.next=34;break;case 32:return e.next=34,S;case 34:x=[A,j];case 35:e.next=12;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(10),O.e(e.t0);case 42:return e.prev=42,O.f(),e.finish(42);case 45:if("lowest"!==a||!x){e.next=52;break}if(!u){e.next=50;break}w.push(x),e.next=52;break;case 50:return e.next=52,x;case 52:if(!u){e.next=54;break}return e.delegateYield(w,"t1",54);case 54:case"end":return e.stop()}}),e,null,[[10,39,42,45]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,o=function(e){return v.get(e)||[]};if(ue.isNormalizing(e)){if(n){var i=Array.from(dt.nodes(e),(function(e){return h(e,2)[1]}));v.set(e,i)}0!==o(e).length&&ue.withoutNormalizing(e,(function(){var t,r=ie(o(e));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(dt.has(e,n)){var i=ue.node(e,n),a=h(i,2),s=a[0];a[1];ee.isElement(s)&&0===s.children.length&&e.normalizeNode(i)}}}catch(e){r.e(e)}finally{r.f()}for(var u=42*o(e).length,c=0;0!==o(e).length;){if(c>u)throw new Error("\n            Could not completely normalize the editor after ".concat(u," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var f=o(e).pop();if(dt.has(e,f)){var l=ue.node(e,f);e.normalizeNode(l)}c++}}))}},parent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ue.path(e,t,r),o=yt.parent(n),i=ue.node(e,o);return i},path:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.depth,o=r.edge;if(yt.isPath(t))if("start"===o){var i=dt.first(e,t),a=h(i,2),s=a[1];t=s}else if("end"===o){var u=dt.last(e,t),c=h(u,2),f=c[1];t=f}return At.isRange(t)&&(t="start"===o?At.start(t):"end"===o?At.end(t):yt.common(t.anchor.path,t.focus.path)),xt.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},hasPath:function(e,t){return dt.has(e,t)},pathRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return ue.pathRefs(e).delete(i),i.current=null,t}},a=ue.pathRefs(e);return a.add(i),i},pathRefs:function(e){var t=y.get(e);return t||(t=new Set,y.set(e,t)),t},point:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.edge,o=void 0===n?"start":n;if(yt.isPath(t)){var i;if("end"===o){var a=dt.last(e,t),s=h(a,2),u=s[1];i=u}else{var c=dt.first(e,t),f=h(c,2),l=f[1];i=l}var d=dt.get(e,i);if(!Rt.isText(d))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(t,"] because it has no ").concat(o," text node."));return{path:i,offset:"end"===o?d.text.length:0}}if(At.isRange(t)){var v=At.edges(t),p=h(v,2),g=p[0],y=p[1];return"start"===o?g:y}return t},pointRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return ue.pointRefs(e).delete(i),i.current=null,t}},a=ue.pointRefs(e);return a.add(i),i},pointRefs:function(e){var t=m.get(e);return t||(t=new Set,m.set(e,t)),t},positions:E.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,d,v,p,g,y,m,b,w,x,O,P,k,A,j,F,S,_,N,C,D=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C=function(e,t,r){return"character"===t?T(e,r):"word"===t?B(e,r):"line"===t||"block"===t?e.length:1},r=D.length>1&&void 0!==D[1]?D[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.unit,a=void 0===i?"offset":i,s=r.reverse,u=void 0!==s&&s,c=r.voids,f=void 0!==c&&c,o){e.next=5;break}return e.abrupt("return");case 5:l=ue.range(t,o),d=At.edges(l),v=h(d,2),p=v[0],g=v[1],y=u?g:p,m=!1,b="",w=0,x=0,O=0,P=ie(ue.nodes(t,{at:o,reverse:u,voids:f})),e.prev=14,P.s();case 16:if((k=P.n()).done){e.next=51;break}if(A=h(k.value,2),j=A[0],F=A[1],!ee.isElement(j)){e.next=26;break}if(f||!t.isVoid(j)){e.next=23;break}return e.next=22,ue.start(t,F);case 22:return e.abrupt("continue",49);case 23:if(!t.isInline(j)){e.next=25;break}return e.abrupt("continue",49);case 25:ue.hasInlines(t,j)&&(S=yt.isAncestor(F,g.path)?g:ue.end(t,F),_=yt.isAncestor(F,p.path)?p:ue.start(t,F),b=ue.string(t,{anchor:_,focus:S},{voids:f}),m=!0);case 26:if(!Rt.isText(j)){e.next=49;break}if((N=yt.equals(F,y.path))?(x=u?y.offset:j.text.length-y.offset,O=y.offset):(x=j.text.length,O=u?x:0),!N&&!m&&"offset"!==a){e.next=33;break}return e.next=32,{path:F,offset:O};case 32:m=!1;case 33:if(0!==w){e.next=39;break}if(""!==b){e.next=37;break}return e.abrupt("break",49);case 37:w=C(b,a,u),b=I(b,w,u)[1];case 39:if(O=u?O-w:O+w,!((x-=w)<0)){e.next=44;break}return w=-x,e.abrupt("break",49);case 44:return w=0,e.next=47,{path:F,offset:O};case 47:e.next=33;break;case 49:e.next=16;break;case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(14),P.e(e.t0);case 56:return e.prev=56,P.f(),e.finish(56);case 59:case"end":return e.stop()}}),e,null,[[14,53,56,59]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=ue.before(e,u,{voids:i});if(c){var f=ue.first(e,[]),l=h(f,2),d=l[1],v=[c.path,d];if(yt.isPath(u)&&0===u.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(yt.isPath(u)){var p=ue.parent(e,u),g=h(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=ue.nodes(e,{reverse:!0,at:v,match:a,mode:n,voids:i}),b=h(m,1),w=b[0];return w}}},range:function(e,t,r){return At.isRange(t)&&!r?t:{anchor:ue.start(e,t),focus:ue.end(e,r||t)}},rangeRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return ue.rangeRefs(e).delete(i),i.current=null,t}},a=ue.rangeRefs(e);return a.add(i),i},rangeRefs:function(e){var t=b.get(e);return t||(t=new Set,b.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},setNormalizing:function(e,t){g.set(e,t)},start:function(e,t){return ue.point(e,t,{edge:"start"})},string:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.voids,i=void 0!==o&&o,a=ue.range(e,t),s=At.edges(a),u=h(s,2),c=u[0],f=u[1],l="",d=ie(ue.nodes(e,{at:a,match:Rt.isText,voids:i}));try{for(d.s();!(r=d.n()).done;){var v=h(r.value,2),p=v[0],g=v[1],y=p.text;yt.equals(g,f.path)&&(y=y.slice(0,f.offset)),yt.equals(g,c.path)&&(y=y.slice(c.offset)),l+=y}}catch(e){d.e(e)}finally{d.f()}return l},unhangRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.voids,o=void 0!==n&&n,i=At.edges(t),a=h(i,2),s=a[0],u=a[1];if(0!==s.offset||0!==u.offset||At.isCollapsed(t))return t;var c,f=ue.above(e,{at:u,match:function(t){return ue.isBlock(e,t)}}),l=f?f[1]:[],d=ue.start(e,[]),v={anchor:d,focus:u},p=!0,g=ie(ue.nodes(e,{at:v,match:Rt.isText,reverse:!0,voids:o}));try{for(g.s();!(c=g.n()).done;){var y=h(c.value,2),m=y[0],b=y[1];if(p)p=!1;else if(""!==m.text||yt.isBefore(b,l)){u={path:b,offset:m.text.length};break}}}catch(e){g.e(e)}finally{g.f()}return{anchor:s,focus:u}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ue.above(e,oe(oe({},t),{},{match:function(t){return ue.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var r=ue.isNormalizing(e);ue.setNormalizing(e,!1);try{t()}finally{ue.setNormalizing(e,r)}ue.normalize(e)}},ce={isLocation:function(e){return yt.isPath(e)||xt.isPoint(e)||At.isRange(e)}},fe={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(yt.isPath)}};function le(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function he(e){return!!e&&!!e[Ze]}function de(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Xe}(e)||Array.isArray(e)||!!e[Qe]||!!e.constructor[Qe]||me(e)||be(e))}function ve(e,t,r){void 0===r&&(r=!1),0===pe(e)?(r?Object.keys:He)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function pe(e){var t=e[Ze];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:me(e)?2:be(e)?3:0}function ge(e,t){return 2===pe(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ye(e,t,r){var n=pe(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function me(e){return Ge&&e instanceof Map}function be(e){return Je&&e instanceof Set}function we(e){return e.o||e.t}function xe(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=et(e);delete t[Ze];for(var r=He(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Oe(e,t){return void 0===t&&(t=!1),ke(e)||he(e)||!de(e)||(pe(e)>1&&(e.set=e.add=e.clear=e.delete=Pe),Object.freeze(e),t&&ve(e,(function(e,t){return Oe(t,!0)}),!0)),e}function Pe(){le(2)}function ke(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ae(e){var t=tt[e];return t||le(18,e),t}function je(){return Ue}function Ee(e,t){t&&(Ae("Patches"),e.u=[],e.s=[],e.v=t)}function Fe(e){Se(e),e.p.forEach(Ne),e.p=null}function Se(e){e===Ue&&(Ue=e.l)}function _e(e){return Ue={p:[],l:Ue,h:e,m:!0,_:0}}function Ne(e){var t=e[Ze];0===t.i||1===t.i?t.j():t.O=!0}function Ce(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||Ae("ES5").S(t,e,n),n?(r[Ze].P&&(Fe(t),le(4)),de(e)&&(e=De(t,e),t.l||Te(t,e)),t.u&&Ae("Patches").M(r[Ze],e,t.u,t.s)):e=De(t,r,[]),Fe(t),t.u&&t.v(t.u,t.s),e!==Ye?e:void 0}function De(e,t,r){if(ke(t))return t;var n=t[Ze];if(!n)return ve(t,(function(o,i){return Re(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return Te(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=xe(n.k):n.o;ve(3===n.i?new Set(o):o,(function(t,i){return Re(e,n,o,t,i,r)})),Te(e,o,!1),r&&e.u&&Ae("Patches").R(n,r,e.u,e.s)}return n.o}function Re(e,t,r,n,o,i){if(he(o)){var a=De(e,o,i&&t&&3!==t.i&&!ge(t.D,n)?i.concat(n):void 0);if(ye(r,n,a),!he(a))return;e.m=!1}if(de(o)&&!ke(o)){if(!e.h.F&&e._<1)return;De(e,o),t&&t.A.l||Te(e,o)}}function Te(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&Oe(t,r)}function Be(e,t){var r=e[Ze];return(r?we(r):e)[t]}function Ie(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Me(e){e.P||(e.P=!0,e.l&&Me(e.l))}function qe(e){e.o||(e.o=xe(e.t))}function Le(e,t,r){var n=me(t)?Ae("MapSet").N(t,r):be(t)?Ae("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:je(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=rt;r&&(o=[n],i=nt);var a=Proxy.revocable(o,i),s=a.revoke,u=a.proxy;return n.k=u,n.j=s,u}(t,r):Ae("ES5").J(t,r);return(r?r.A:je()).p.push(n),n}function ze(e){return he(e)||le(22,e),function e(t){if(!de(t))return t;var r,n=t[Ze],o=pe(t);if(n){if(!n.P&&(n.i<4||!Ae("ES5").K(n)))return n.t;n.I=!0,r=We(t,o),n.I=!1}else r=We(t,o);return ve(r,(function(t,o){n&&function(e,t){return 2===pe(e)?e.get(t):e[t]}(n.t,t)===o||ye(r,t,e(o))})),3===o?new Set(r):r}(e)}function We(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return xe(e)}var Ve,Ue,$e="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ge="undefined"!=typeof Map,Je="undefined"!=typeof Set,Ke="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ye=$e?Symbol.for("immer-nothing"):((Ve={})["immer-nothing"]=!0,Ve),Qe=$e?Symbol.for("immer-draftable"):"__$immer_draftable",Ze=$e?Symbol.for("immer-state"):"__$immer_state",Xe=""+Object.prototype.constructor,He="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,et=Object.getOwnPropertyDescriptors||function(e){var t={};return He(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},tt={},rt={get:function(e,t){if(t===Ze)return e;var r=we(e);if(!ge(r,t))return function(e,t,r){var n,o=Ie(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!de(n)?n:n===Be(e.t,t)?(qe(e),e.o[t]=Le(e.A.h,n,e)):n},has:function(e,t){return t in we(e)},ownKeys:function(e){return Reflect.ownKeys(we(e))},set:function(e,t,r){var n=Ie(we(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=Be(we(e),t),i=null==o?void 0:o[Ze];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,o)&&(void 0!==r||ge(e.t,t)))return!0;qe(e),Me(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Be(e.t,t)||t in e.t?(e.D[t]=!1,qe(e),Me(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=we(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){le(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){le(12)}},nt={};ve(rt,(function(e,t){nt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),nt.deleteProperty=function(e,t){return rt.deleteProperty.call(this,e[0],t)},nt.set=function(e,t,r){return rt.set.call(this,e[0],t,r,e[0])};var ot=new(function(){function e(e){var t=this;this.g=Ke,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var o=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(a))}))}}var a;if("function"!=typeof r&&le(6),void 0!==n&&"function"!=typeof n&&le(7),de(e)){var s=_e(t),u=Le(t,e,void 0),c=!0;try{a=r(u),c=!1}finally{c?Fe(s):Se(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Ee(s,n),Ce(e,s)}),(function(e){throw Fe(s),e})):(Ee(s,n),Ce(a,s))}if(!e||"object"!=typeof e){if((a=r(e))===Ye)return;return void 0===a&&(a=e),t.F&&Oe(a,!0),a}le(21,e)},this.produceWithPatches=function(e,r){return"function"==typeof e?function(r){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(o))}))}:[t.produce(e,r,(function(e,t){n=e,o=t})),n,o];var n,o},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){de(e)||le(8),he(e)&&(e=ze(e));var t=_e(this),r=Le(this,e,void 0);return r[Ze].C=!0,Se(t),r},t.finishDraft=function(e,t){var r=(e&&e[Ze]).A;return Ee(r,t),Ce(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Ke&&le(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var o=Ae("Patches").$;return he(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),it=ot.produce;ot.produceWithPatches.bind(ot),ot.setAutoFreeze.bind(ot),ot.setUseProxies.bind(ot),ot.applyPatches.bind(ot);var at=ot.createDraft.bind(ot),st=ot.finishDraft.bind(ot),ut=["children"],ct=["text"];function ft(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ht=new WeakMap,dt={ancestor:function(e,t){var r=dt.get(e,t);if(Rt.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},ancestors:E.mark((function e(t,r){var n,o,i,a,s,u,c=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>2&&void 0!==c[2]?c[2]:{},o=ft(yt.ancestors(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return a=i.value,s=dt.ancestor(t,a),u=[s,a],e.next=10,u;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(Rt.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},children:E.mark((function(e,t){var r,n,o,i,a,s,u,c,f=arguments;return E.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},n=r.reverse,o=void 0!==n&&n,i=dt.ancestor(e,t),a=i.children,s=o?a.length-1:0;case 5:if(!(o?s>=0:s<a.length)){l.next=13;break}return u=dt.child(i,s),c=t.concat(s),l.next=10,[u,c];case 10:s=o?s-1:s+1,l.next=5;break;case 13:case"end":return l.stop()}}),a)})),common:function(e,t,r){var n=yt.common(t,r);return[dt.get(e,n),n]},descendant:function(e,t){var r=dt.get(e,t);if(ue.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},descendants:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=ft(dt.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],0===(s=i[1]).length){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=ft(dt.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],s=i[1],!ee.isElement(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){return ee.isAncestor(e)?(e.children,j(e,ut)):(e.text,j(e,ct))},first:function(e,t){for(var r=t.slice(),n=dt.get(e,r);n&&!Rt.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment:function(e,t){if(Rt.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return it({children:e.children},(function(e){var r,n=At.edges(t),o=h(n,2),i=o[0],a=o[1],s=ft(dt.nodes(e,{reverse:!0,pass:function(e){var r=h(e,2)[1];return!At.includes(t,r)}}));try{for(s.s();!(r=s.n()).done;){var u=h(r.value,2)[1];if(!At.includes(t,u)){var c=dt.parent(e,u),f=u[u.length-1];c.children.splice(f,1)}if(yt.equals(u,a.path)){var l=dt.leaf(e,u);l.text=l.text.slice(0,a.offset)}if(yt.equals(u,i.path)){var d=dt.leaf(e,u);d.text=d.text.slice(i.offset)}}}catch(e){s.e(e)}finally{s.f()}ue.isEditor(e)&&(e.selection=null)})).children},get:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Rt.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Rt.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:function(e){return Rt.isText(e)||ee.isElement(e)||ue.isEditor(e)},isNodeList:function(e){if(!Array.isArray(e))return!1;var t=ht.get(e);if(void 0!==t)return t;var r=e.every((function(e){return dt.isNode(e)}));return ht.set(e,r),r},last:function(e,t){for(var r=t.slice(),n=dt.get(e,r);n&&!Rt.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf:function(e,t){var r=dt.get(e,t);if(!Rt.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},levels:E.mark((function e(t,r){var n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>2&&void 0!==u[2]?u[2]:{},o=ft(yt.levels(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=11;break}return a=i.value,s=dt.get(t,a),e.next=9,[s,a];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return ee.isElement(e)&&ee.isElementProps(t)&&ee.matches(e,t)||Rt.isText(e)&&Rt.isTextProps(t)&&Rt.matches(e,t)},nodes:E.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,h,d,v,p=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=p.length>1&&void 0!==p[1]?p[1]:{},n=r.pass,o=r.reverse,i=void 0!==o&&o,a=r.from,s=void 0===a?[]:a,u=r.to,c=new Set,f=[],l=t;case 6:if(!u||!(i?yt.isBefore(f,u):yt.isAfter(f,u))){e.next=9;break}return e.abrupt("break",37);case 9:if(c.has(l)){e.next=12;break}return e.next=12,[l,f];case 12:if(c.has(l)||Rt.isText(l)||0===l.children.length||null!=n&&!1!==n([l,f])){e.next=19;break}return c.add(l),h=i?l.children.length-1:0,yt.isAncestor(f,s)&&(h=s[f.length]),f=f.concat(h),l=dt.get(t,f),e.abrupt("continue",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt("break",37);case 21:if(i){e.next=27;break}if(d=yt.next(f),!dt.has(t,d)){e.next=27;break}return f=d,l=dt.get(t,f),e.abrupt("continue",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return v=yt.previous(f),f=v,l=dt.get(t,f),e.abrupt("continue",6);case 32:f=yt.parent(f),l=dt.get(t,f),c.add(l),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var r=yt.parent(t),n=dt.get(e,r);if(Rt.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:function(e){return Rt.isText(e)?e.text:e.children.map(dt.string).join("")},texts:E.mark((function e(t){var r,n,o,i,a,s,u=arguments;return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=ft(dt.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],s=i[1],!Rt.isText(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gt={isNodeOperation:function(e){return gt.isOperation(e)&&e.type.endsWith("_node")},isOperation:function(e){if(!S(e))return!1;switch(e.type){case"insert_node":return yt.isPath(e.path)&&dt.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&yt.isPath(e.path);case"merge_node":return"number"==typeof e.position&&yt.isPath(e.path)&&S(e.properties);case"move_node":return yt.isPath(e.path)&&yt.isPath(e.newPath);case"remove_node":return yt.isPath(e.path)&&dt.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&yt.isPath(e.path);case"set_node":return yt.isPath(e.path)&&S(e.properties)&&S(e.newProperties);case"set_selection":return null===e.properties&&At.isRange(e.newProperties)||null===e.newProperties&&At.isRange(e.properties)||S(e.properties)&&S(e.newProperties);case"split_node":return yt.isPath(e.path)&&"number"==typeof e.position&&S(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&e.every((function(e){return gt.isOperation(e)}))},isSelectionOperation:function(e){return gt.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation:function(e){return gt.isOperation(e)&&e.type.endsWith("_text")},inverse:function(e){switch(e.type){case"insert_node":return pt(pt({},e),{},{type:"remove_node"});case"insert_text":return pt(pt({},e),{},{type:"remove_text"});case"merge_node":return pt(pt({},e),{},{type:"split_node",path:yt.previous(e.path)});case"move_node":var t=e.newPath,r=e.path;if(yt.equals(t,r))return e;if(yt.isSibling(r,t))return pt(pt({},e),{},{path:t,newPath:r});var n=yt.transform(r,e),o=yt.transform(yt.next(r),e);return pt(pt({},e),{},{path:n,newPath:o});case"remove_node":return pt(pt({},e),{},{type:"insert_node"});case"remove_text":return pt(pt({},e),{},{type:"insert_text"});case"set_node":var i=e.properties,a=e.newProperties;return pt(pt({},e),{},{properties:a,newProperties:i});case"set_selection":var s=e.properties,u=e.newProperties;return pt(pt({},e),{},null==s?{properties:u,newProperties:null}:null==u?{properties:null,newProperties:s}:{properties:u,newProperties:s});case"split_node":return pt(pt({},e),{},{type:"merge_node",path:yt.next(e.path)})}}},yt={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=yt.levels(e,t);return o=n?o.slice(1):o.slice(0,-1)},common:function(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return yt.equals(n,o)&&i>a},endsAt:function(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return yt.equals(n,o)},endsBefore:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return yt.equals(n,o)&&i<a},equals:function(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===yt.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===yt.compare(e,t)},isBefore:function(e,t){return-1===yt.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===yt.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===yt.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===yt.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===yt.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&yt.equals(r,n)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=[],i=0;i<=e.length;i++)o.push(e.slice(0,i));return n&&o.reverse(),o},next:function(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!yt.isAncestor(t,e)&&!yt.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(e,(function(n){var o=r.affinity,i=void 0===o?"forward":o;if(e&&0!==(null==e?void 0:e.length)){if(null===n)return null;switch(t.type){case"insert_node":var a=t.path;(yt.equals(a,n)||yt.endsBefore(a,n)||yt.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var s=t.path;if(yt.equals(s,n)||yt.isAncestor(s,n))return null;yt.endsBefore(s,n)&&(n[s.length-1]-=1);break;case"merge_node":var u=t.path,c=t.position;yt.equals(u,n)||yt.endsBefore(u,n)?n[u.length-1]-=1:yt.isAncestor(u,n)&&(n[u.length-1]-=1,n[u.length]+=c);break;case"split_node":var f=t.path,l=t.position;if(yt.equals(f,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else yt.endsBefore(f,n)?n[f.length-1]+=1:yt.isAncestor(f,n)&&e[f.length]>=l&&(n[f.length-1]+=1,n[f.length]-=l);break;case"move_node":var h=t.path,d=t.newPath;if(yt.equals(h,d))return;if(yt.isAncestor(h,n)||yt.equals(h,n)){var v=d.slice();return yt.endsBefore(h,d)&&h.length<d.length&&(v[h.length-1]-=1),v.concat(n.slice(h.length))}yt.isSibling(h,d)&&(yt.isAncestor(d,n)||yt.equals(d,n))?yt.endsBefore(h,n)?n[h.length-1]-=1:n[h.length-1]+=1:yt.endsBefore(d,n)||yt.equals(d,n)||yt.isAncestor(d,n)?(yt.endsBefore(h,n)&&(n[h.length-1]-=1),n[d.length-1]+=1):yt.endsBefore(h,n)&&(yt.equals(d,n)&&(n[d.length-1]+=1),n[h.length-1]-=1)}}}))}},mt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=yt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xt={compare:function(e,t){var r=yt.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:function(e,t){return 1===xt.compare(e,t)},isBefore:function(e,t){return-1===xt.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&yt.equals(e.path,t.path)},isPoint:function(e){return S(e)&&"number"==typeof e.offset&&yt.isPath(e.path)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(e,(function(e){if(null===e)return null;var n=r.affinity,o=void 0===n?"forward":n,i=e.path,a=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=yt.transform(i,t,r);break;case"insert_text":yt.equals(t.path,i)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":yt.equals(t.path,i)&&(e.offset+=t.position),e.path=yt.transform(i,t,r);break;case"remove_text":yt.equals(t.path,i)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(yt.equals(t.path,i)||yt.isAncestor(t.path,i))return null;e.path=yt.transform(i,t,r);break;case"split_node":if(yt.equals(t.path,i)){if(t.position===a&&null==o)return null;(t.position<a||t.position===a&&"forward"===o)&&(e.offset-=t.position,e.path=yt.transform(i,t,wt(wt({},r),{},{affinity:"forward"})))}else e.path=yt.transform(i,t,r)}}))}},Ot={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=xt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},Pt=["anchor","focus"];function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var At={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=e.anchor,i=e.focus;return At.isBackward(e)===n?[o,i]:[i,o]},end:function(e){var t=At.edges(e),r=h(t,2)[1];return r},equals:function(e,t){return xt.equals(e.anchor,t.anchor)&&xt.equals(e.focus,t.focus)},includes:function(e,t){if(At.isRange(t)){if(At.includes(e,t.anchor)||At.includes(e,t.focus))return!0;var r=At.edges(e),n=h(r,2),o=n[0],i=n[1],a=At.edges(t),s=h(a,2),u=s[0],c=s[1];return xt.isBefore(o,u)&&xt.isAfter(i,c)}var f=At.edges(e),l=h(f,2),d=l[0],v=l[1],p=!1,g=!1;return xt.isPoint(t)?(p=xt.compare(t,d)>=0,g=xt.compare(t,v)<=0):(p=yt.compare(t,d.path)>=0,g=yt.compare(t,v.path)<=0),p&&g},intersection:function(e,t){e.anchor,e.focus;var r=j(e,Pt),n=At.edges(e),o=h(n,2),i=o[0],a=o[1],s=At.edges(t),u=h(s,2),c=u[0],f=u[1],l=xt.isBefore(i,c)?c:i,v=xt.isBefore(a,f)?a:f;return xt.isBefore(v,l)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:l,focus:v},r)},isBackward:function(e){var t=e.anchor,r=e.focus;return xt.isAfter(t,r)},isCollapsed:function(e){var t=e.anchor,r=e.focus;return xt.equals(t,r)},isExpanded:function(e){return!At.isCollapsed(e)},isForward:function(e){return!At.isBackward(e)},isRange:function(e){return S(e)&&xt.isPoint(e.anchor)&&xt.isPoint(e.focus)},points:E.mark((function e(t){return E.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=At.edges(e),r=h(t,1)[0];return r},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return it(e,(function(e){if(null===e)return null;var n,o,i=r.affinity,a=void 0===i?"inward":i;if("inward"===a){var s=At.isCollapsed(e);At.isForward(e)?(n="forward",o=s?n:"backward"):(n="backward",o=s?n:"forward")}else"outward"===a?At.isForward(e)?(n="backward",o="forward"):(n="forward",o="backward"):(n=a,o=a);var u=xt.transform(e.anchor,t,{affinity:n}),c=xt.transform(e.focus,t,{affinity:o});if(!u||!c)return null;e.anchor=u,e.focus=c}))}},jt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=At.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},Et=function e(t,r){for(var n in t){var o=t[n],i=r[n];if(S(o)&&S(i)){if(!e(o,i))return!1}else{if(Array.isArray(o)&&Array.isArray(i)){if(o.length!==i.length)return!1;for(var a=0;a<o.length;a++)if(o[a]!==i[a])return!1;return!0}if(o!==i)return!1}}for(var s in r)if(void 0===t[s]&&void 0!==r[s])return!1;return!0},Ft=["text"],St=["anchor","focus"];function _t(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt={equals:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.loose,o=void 0!==n&&n;function i(e){return e.text,j(e,Ft)}return Et(o?i(e):e,o?i(t):t)},isText:function(e){return S(e)&&"string"==typeof e.text},isTextList:function(e){return Array.isArray(e)&&e.every((function(e){return Rt.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations:function(e,t){var r,n=[Dt({},e)],o=_t(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value,s=(a.anchor,a.focus,j(a,St)),u=At.edges(a),c=h(u,2),f=c[0],l=c[1],d=[],v=0,p=_t(n);try{for(p.s();!(i=p.n()).done;){var g=i.value,y=g.text.length,m=v;if(v+=y,f.offset<=m&&l.offset>=v)Object.assign(g,s),d.push(g);else if(f.offset!==l.offset&&(f.offset===v||l.offset===m)||f.offset>v||l.offset<m||l.offset===m&&0!==m)d.push(g);else{var b=g,w=void 0,x=void 0;if(l.offset<v){var O=l.offset-m;x=Dt(Dt({},b),{},{text:b.text.slice(O)}),b=Dt(Dt({},b),{},{text:b.text.slice(0,O)})}if(f.offset>m){var P=f.offset-m;w=Dt(Dt({},b),{},{text:b.text.slice(0,P)}),b=Dt(Dt({},b),{},{text:b.text.slice(P)})}Object.assign(b,s),w&&d.push(w),d.push(b),x&&d.push(x)}}}catch(e){p.e(e)}finally{p.f()}n=d}}catch(e){o.e(e)}finally{o.f()}return n}};function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function It(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qt=["text"],Lt=["children"];function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ut(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t={insertNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.mode,u=void 0===s?"lowest":s,c=r.at,f=r.match,l=r.select;if(dt.isNode(t)&&(t=[t]),0!==t.length){var d=h(t,1)[0];if(c||(c=e.selection?e.selection:e.children.length>0?ue.end(e,[]):[0],l=!0),null==l&&(l=!1),At.isRange(c))if(o||(c=ue.unhangRange(e,c)),At.isCollapsed(c))c=c.anchor;else{var v=At.edges(c),p=h(v,2)[1],g=ue.pointRef(e,p);nr.delete(e,{at:c}),c=g.unref()}if(xt.isPoint(c)){null==f&&(f=Rt.isText(d)?function(e){return Rt.isText(e)}:e.isInline(d)?function(t){return Rt.isText(t)||ue.isInline(e,t)}:function(t){return ue.isBlock(e,t)});var y=ue.nodes(e,{at:c.path,match:f,mode:u,voids:a}),m=h(y,1)[0];if(!m)return;var b=h(m,2)[1],w=ue.pathRef(e,b),x=ue.isEnd(e,c,b);nr.splitNodes(e,{at:c,match:f,mode:u,voids:a});var O=w.unref();c=x?yt.next(O):O}var P=yt.parent(c),k=c[c.length-1];if(a||!ue.void(e,{at:P})){var A,j=Vt(t);try{for(j.s();!(A=j.n()).done;){var E=A.value,F=P.concat(k);k++,e.apply({type:"insert_node",path:F,node:E}),c=yt.next(c)}}catch(e){j.e(e)}finally{j.f()}if(c=yt.previous(c),l){var S=ue.end(e,c);S&&nr.select(e,S)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.at,n=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,a=t.voids,s=void 0!==a&&a,u=t.match;if(null==u&&(u=yt.isPath(n)?Kt(e,n):function(t){return ue.isBlock(e,t)}),n)for(var c=ue.nodes(e,{at:n,match:u,mode:i,voids:s}),f=0,l=Array.from(c,(function(t){var r=h(t,2)[1];return ue.pathRef(e,r)}));f<l.length;f++){var d=l[f].unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var v=ue.node(e,yt.parent(d)),p=h(v,2),g=p[0],y=p[1],m=d[d.length-1],b=g.children.length;if(1===b){var w=yt.next(y);nr.moveNodes(e,{at:d,to:w,voids:s}),nr.removeNodes(e,{at:y,voids:s})}else if(0===m)nr.moveNodes(e,{at:d,to:y,voids:s});else if(m===b-1){var x=yt.next(y);nr.moveNodes(e,{at:d,to:x,voids:s})}else{var O=yt.next(d),P=yt.next(y);nr.splitNodes(e,{at:O,voids:s}),nr.moveNodes(e,{at:d,to:P,voids:s})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.match,n=t.at,o=void 0===n?e.selection:n,i=t.hanging,a=void 0!==i&&i,s=t.voids,u=void 0!==s&&s,c=t.mode,f=void 0===c?"lowest":c;if(o){if(null==r)if(yt.isPath(o)){var l=ue.parent(e,o),d=h(l,1)[0];r=function(e){return d.children.includes(e)}}else r=function(t){return ue.isBlock(e,t)};if(!a&&At.isRange(o)&&(o=ue.unhangRange(e,o)),At.isRange(o))if(At.isCollapsed(o))o=o.anchor;else{var v=At.edges(o),p=h(v,2)[1],g=ue.pointRef(e,p);nr.delete(e,{at:o}),o=g.unref(),null==t.at&&nr.select(e,o)}var y=ue.nodes(e,{at:o,match:r,voids:u,mode:f}),m=h(y,1)[0],b=ue.previous(e,{at:o,match:r,voids:u,mode:f});if(m&&b){var w=h(m,2),x=w[0],O=w[1],P=h(b,2),k=P[0],A=P[1];if(0!==O.length&&0!==A.length){var E,F,S=yt.next(A),_=yt.common(O,A),N=yt.isSibling(O,A),C=Array.from(ue.levels(e,{at:O}),(function(e){return h(e,1)[0]})).slice(_.length).slice(0,-1),D=ue.above(e,{at:O,mode:"highest",match:function(t){return C.includes(t)&&Gt(e,t)}}),R=D&&ue.pathRef(e,D[1]);if(Rt.isText(x)&&Rt.isText(k)){x.text;var T=j(x,qt);F=k.text.length,E=T}else{if(!ee.isElement(x)||!ee.isElement(k))throw new Error("Cannot merge the node at path [".concat(O,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(x)," ").concat(JSON.stringify(k)));x.children;var B=j(x,Lt);F=k.children.length,E=B}N||nr.moveNodes(e,{at:O,to:S,voids:u}),R&&nr.removeNodes(e,{at:R.current,voids:u}),ee.isElement(k)&&ue.isEmpty(e,k)||Rt.isText(k)&&""===k.text&&0!==A[A.length-1]?nr.removeNodes(e,{at:A,voids:u}):e.apply({type:"merge_node",path:S,position:F,properties:E}),R&&R.unref()}}}}))},moveNodes:function(e,t){ue.withoutNormalizing(e,(function(){var r=t.to,n=t.at,o=void 0===n?e.selection:n,i=t.mode,a=void 0===i?"lowest":i,s=t.voids,u=void 0!==s&&s,c=t.match;if(o){null==c&&(c=yt.isPath(o)?Kt(e,o):function(t){return ue.isBlock(e,t)});for(var f=ue.pathRef(e,r),l=ue.nodes(e,{at:o,match:c,mode:a,voids:u}),d=0,v=Array.from(l,(function(t){var r=h(t,2)[1];return ue.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref(),g=f.current;0!==p.length&&e.apply({type:"move_node",path:p,newPath:g}),f.current&&yt.isSibling(g,p)&&yt.isAfter(g,p)&&(f.current=yt.next(f.current))}f.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.hanging,n=void 0!==r&&r,o=t.voids,i=void 0!==o&&o,a=t.mode,s=void 0===a?"lowest":a,u=t.at,c=void 0===u?e.selection:u,f=t.match;if(c){null==f&&(f=yt.isPath(c)?Kt(e,c):function(t){return ue.isBlock(e,t)}),!n&&At.isRange(c)&&(c=ue.unhangRange(e,c));for(var l=ue.nodes(e,{at:c,match:f,mode:s,voids:i}),d=0,v=Array.from(l,(function(t){var r=h(t,2)[1];return ue.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref();if(p){var g=ue.node(e,p),y=h(g,1)[0];e.apply({type:"remove_node",path:p,node:y})}}}}))},setNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(e,(function(){var n=r.match,o=r.at,i=void 0===o?e.selection:o,a=r.hanging,s=void 0!==a&&a,u=r.mode,c=void 0===u?"lowest":u,f=r.split,l=void 0!==f&&f,d=r.voids,v=void 0!==d&&d;if(i){if(null==n&&(n=yt.isPath(i)?Kt(e,i):function(t){return ue.isBlock(e,t)}),!s&&At.isRange(i)&&(i=ue.unhangRange(e,i)),l&&At.isRange(i)){if(At.isCollapsed(i)&&ue.leaf(e,i.anchor)[0].text.length>0)return;var p=ue.rangeRef(e,i,{affinity:"inward"}),g=At.edges(i),y=h(g,2),m=y[0],b=y[1],w="lowest"===c?"lowest":"highest",x=ue.isEnd(e,b,b.path);nr.splitNodes(e,{at:b,match:n,mode:w,voids:v,always:!x});var O=ue.isStart(e,m,m.path);nr.splitNodes(e,{at:m,match:n,mode:w,voids:v,always:!O}),i=p.unref(),null==r.at&&nr.select(e,i)}var P,k=Vt(ue.nodes(e,{at:i,match:n,mode:c,voids:v}));try{for(k.s();!(P=k.n()).done;){var A=h(P.value,2),j=A[0],E=A[1],F={},S={};if(0!==E.length){var _=!1;for(var N in t)"children"!==N&&"text"!==N&&t[N]!==j[N]&&(_=!0,j.hasOwnProperty(N)&&(F[N]=j[N]),null!=t[N]&&(S[N]=t[N]));_&&e.apply({type:"set_node",path:E,properties:F,newProperties:S})}}}catch(e){k.e(e)}finally{k.f()}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s,c=t.height,f=void 0===c?0:c,l=t.always,d=void 0!==l&&l;if(null==a&&(a=function(t){return ue.isBlock(e,t)}),At.isRange(u)&&(u=Jt(e,u)),yt.isPath(u)){var v=u,p=ue.point(e,v),g=ue.parent(e,v),y=h(g,1)[0];a=function(e){return e===y},f=p.path.length-v.length+1,u=p,d=!0}if(u){var m=ue.pointRef(e,u,{affinity:"backward"}),b=ue.nodes(e,{at:u,match:a,mode:n,voids:i}),w=h(b,1)[0];if(w){var x=ue.void(e,{at:u,mode:"highest"});if(!i&&x){var O=h(x,2),P=O[0],k=O[1];if(ee.isElement(P)&&e.isInline(P)){var A=ue.after(e,k);if(!A){var j=yt.next(k);nr.insertNodes(e,{text:""},{at:j,voids:i}),A=ue.point(e,j)}u=A,d=!0}f=u.path.length-k.length+1,d=!0}var E,F=ue.pointRef(e,u),S=u.path.length-f,_=h(w,2)[1],N=u.path.slice(0,S),C=0===f?u.offset:u.path[S]+0,D=Vt(ue.levels(e,{at:N,reverse:!0,voids:i}));try{for(D.s();!(E=D.n()).done;){var R=h(E.value,2),T=R[0],B=R[1],I=!1;if(B.length<_.length||0===B.length||!i&&ue.isVoid(e,T))break;var M=m.current,q=ue.isEnd(e,M,B);if(d||!m||!ue.isEdge(e,M,B)){I=!0;var L=dt.extractProps(T);e.apply({type:"split_node",path:B,position:C,properties:L})}C=B[B.length-1]+(I||q?1:0)}}catch(e){D.e(e)}finally{D.f()}if(null==t.at){var z=F.current||ue.end(e,[]);nr.select(e,z)}m.unref(),F.unref()}}}))},unsetNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n,o={},i=Vt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o[a]=null}}catch(e){i.e(e)}finally{i.f()}nr.setNodes(e,o,r)},unwrapNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,u=t.at,c=void 0===u?e.selection:u,f=t.match;if(c){null==f&&(f=yt.isPath(c)?Kt(e,c):function(t){return ue.isBlock(e,t)}),yt.isPath(c)&&(c=ue.range(e,c));var l,d=At.isRange(c)?ue.rangeRef(e,c):null,v=ue.nodes(e,{at:c,match:f,mode:n,voids:s}),p=Vt(Array.from(v,(function(t){var r=h(t,2)[1];return ue.pathRef(e,r)})).reverse());try{var g=function(){var t=l.value.unref(),r=ue.node(e,t),n=h(r,1)[0],o=ue.range(e,t);i&&d&&(o=At.intersection(d.current,o)),nr.liftNodes(e,{at:o,match:function(e){return ee.isAncestor(n)&&n.children.includes(e)},voids:s})};for(p.s();!(l=p.n()).done;)g()}catch(e){p.e(e)}finally{p.f()}d&&d.unref()}}))},wrapNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(e,(function(){var n=r.mode,o=void 0===n?"lowest":n,i=r.split,a=void 0!==i&&i,s=r.voids,u=void 0!==s&&s,c=r.match,f=r.at,l=void 0===f?e.selection:f;if(l){if(null==c&&(c=yt.isPath(l)?Kt(e,l):e.isInline(t)?function(t){return ue.isInline(e,t)||Rt.isText(t)}:function(t){return ue.isBlock(e,t)}),a&&At.isRange(l)){var d=At.edges(l),v=h(d,2),p=v[0],g=v[1],y=ue.rangeRef(e,l,{affinity:"inward"});nr.splitNodes(e,{at:g,match:c,voids:u}),nr.splitNodes(e,{at:p,match:c,voids:u}),l=y.unref(),null==r.at&&nr.select(e,l)}for(var m=0,b=Array.from(ue.nodes(e,{at:l,match:e.isInline(t)?function(t){return ue.isBlock(e,t)}:function(e){return ue.isEditor(e)},mode:"lowest",voids:u}));m<b.length;m++){var w=h(b[m],2)[1],x=At.isRange(l)?At.intersection(l,ue.range(e,w)):l;if(x){var O=Array.from(ue.nodes(e,{at:x,match:c,mode:o,voids:u}));if(O.length>0)if("continue"===function(){var r=h(O,1)[0],n=O[O.length-1],o=h(r,2)[1],i=h(n,2)[1];if(0===o.length&&0===i.length)return"continue";var a=yt.equals(o,i)?yt.parent(o):yt.common(o,i),s=ue.range(e,o,i),c=ue.node(e,a),f=h(c,1)[0],l=a.length+1,d=yt.next(i.slice(0,l)),v=Wt(Wt({},t),{},{children:[]});nr.insertNodes(e,v,{at:d,voids:u}),nr.moveNodes(e,{at:s,match:function(e){return ee.isAncestor(f)&&f.children.includes(e)},to:d.concat(0),voids:u})}())continue}}}}))}},Gt=function e(t,r){if(ee.isElement(r)){var n=r;return!!ue.isVoid(t,r)||1===n.children.length&&e(t,n.children[0])}return!ue.isEditor(r)},Jt=function(e,t){if(At.isCollapsed(t))return t.anchor;var r=At.edges(t),n=h(r,2)[1],o=ue.pointRef(e,n);return nr.delete(e,{at:t}),o.unref()},Kt=function(e,t){var r=ue.node(e,t),n=h(r,1)[0];return function(e){return e===n}};function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Zt={collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.edge,n=void 0===r?"anchor":r,o=e.selection;if(o)if("anchor"===n)nr.select(e,o.anchor);else if("focus"===n)nr.select(e,o.focus);else if("start"===n){var i=At.edges(o),a=h(i,1),s=a[0];nr.select(e,s)}else if("end"===n){var u=At.edges(o),c=h(u,2),f=c[1];nr.select(e,f)}},deselect:function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.selection,n=t.distance,o=void 0===n?1:n,i=t.unit,a=void 0===i?"character":i,s=t.reverse,u=void 0!==s&&s,c=t.edge,f=void 0===c?null:c;if(r){"start"===f&&(f=At.isBackward(r)?"focus":"anchor"),"end"===f&&(f=At.isBackward(r)?"anchor":"focus");var l=r.anchor,h=r.focus,d={distance:o,unit:a},v={};if(null==f||"anchor"===f){var p=u?ue.before(e,l,d):ue.after(e,l,d);p&&(v.anchor=p)}if(null==f||"focus"===f){var g=u?ue.before(e,h,d):ue.after(e,h,d);g&&(v.focus=g)}nr.setSelection(e,v)}},select:function(e,t){var r=e.selection;if(t=ue.range(e,t),r)nr.setSelection(e,t);else{if(!At.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.selection,o=r.edge,i=void 0===o?"both":o;if(n){"start"===i&&(i=At.isBackward(n)?"focus":"anchor"),"end"===i&&(i=At.isBackward(n)?"anchor":"focus");var a=n.anchor,s=n.focus,u="anchor"===i?a:s;nr.setSelection(e,d({},"anchor"===i?"anchor":"focus",Qt(Qt({},u),t)))}},setSelection:function(e,t){var r=e.selection,n={},o={};if(r){for(var i in t)("anchor"===i&&null!=t.anchor&&!xt.equals(t.anchor,r.anchor)||"focus"===i&&null!=t.focus&&!xt.equals(t.focus,r.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==r[i])&&(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}};function Xt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ht(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var er={delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ue.withoutNormalizing(e,(function(){var r=t.reverse,n=void 0!==r&&r,o=t.unit,i=void 0===o?"character":o,a=t.distance,s=void 0===a?1:a,u=t.voids,c=void 0!==u&&u,f=t.at,l=void 0===f?e.selection:f,d=t.hanging,v=void 0!==d&&d;if(l){if(At.isRange(l)&&At.isCollapsed(l)&&(l=l.anchor),xt.isPoint(l)){var p=ue.void(e,{at:l,mode:"highest"});if(!c&&p){l=h(p,2)[1]}else{var g={unit:i,distance:s};l={anchor:l,focus:n?ue.before(e,l,g)||ue.start(e,[]):ue.after(e,l,g)||ue.end(e,[])},v=!0}}if(yt.isPath(l))nr.removeNodes(e,{at:l,voids:c});else if(!At.isCollapsed(l)){if(!v){var y=At.edges(l),m=h(y,2)[1],b=ue.end(e,[]);xt.equals(m,b)||(l=ue.unhangRange(e,l,{voids:c}))}var w=At.edges(l),x=h(w,2),O=x[0],P=x[1],k=ue.above(e,{match:function(t){return ue.isBlock(e,t)},at:O,voids:c}),A=ue.above(e,{match:function(t){return ue.isBlock(e,t)},at:P,voids:c}),j=k&&A&&!yt.equals(k[1],A[1]),E=yt.equals(O.path,P.path),F=c?null:ue.void(e,{at:O,mode:"highest"}),S=c?null:ue.void(e,{at:P,mode:"highest"});if(F){var _=ue.before(e,O);_&&k&&yt.isAncestor(k[1],_.path)&&(O=_)}if(S){var N=ue.after(e,P);N&&A&&yt.isAncestor(A[1],N.path)&&(P=N)}var C,D,R=[],T=Xt(ue.nodes(e,{at:l,voids:c}));try{for(T.s();!(D=T.n()).done;){var B=D.value,I=h(B,2),M=I[0],q=I[1];C&&0===yt.compare(q,C)||(!c&&ue.isVoid(e,M)||!yt.isCommon(q,O.path)&&!yt.isCommon(q,P.path))&&(R.push(B),C=q)}}catch(e){T.e(e)}finally{T.f()}var L=Array.from(R,(function(t){var r=h(t,2)[1];return ue.pathRef(e,r)})),z=ue.pointRef(e,O),W=ue.pointRef(e,P);if(!E&&!F){var V=z.current,U=ue.leaf(e,V),$=h(U,1)[0],G=V.path,J=O.offset,K=$.text.slice(J);K.length>0&&e.apply({type:"remove_text",path:G,offset:J,text:K})}for(var Y=0,Q=L;Y<Q.length;Y++){var Z=Q[Y].unref();nr.removeNodes(e,{at:Z,voids:c})}if(!S){var X=W.current,H=ue.leaf(e,X),ee=h(H,1)[0],te=X.path,re=E?O.offset:0,ne=ee.text.slice(re,P.offset);ne.length>0&&e.apply({type:"remove_text",path:te,offset:re,text:ne})}!E&&j&&W.current&&z.current&&nr.mergeNodes(e,{at:W.current,hanging:!0,voids:c});var oe=n?z.unref()||W.unref():W.unref()||z.unref();null==t.at&&oe&&nr.select(e,oe)}}}))},insertFragment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.at,u=void 0===s?e.selection:s;if(t.length&&u){if(At.isRange(u))if(o||(u=ue.unhangRange(e,u)),At.isCollapsed(u))u=u.anchor;else{var c=At.edges(u),f=h(c,2)[1];if(!a&&ue.void(e,{at:f}))return;var l=ue.pointRef(e,f);nr.delete(e,{at:u}),u=l.unref()}else yt.isPath(u)&&(u=ue.start(e,u));if(a||!ue.void(e,{at:u})){var d=ue.above(e,{at:u,match:function(t){return ue.isInline(e,t)},mode:"highest",voids:a});if(d){var v=h(d,2)[1];if(ue.isEnd(e,u,v))u=ue.after(e,v);else if(ue.isStart(e,u,v)){u=ue.before(e,v)}}var p,g=ue.above(e,{match:function(t){return ue.isBlock(e,t)},at:u,voids:a}),y=h(g,2)[1],m=ue.isStart(e,u,y),b=ue.isEnd(e,u,y),w=m&&b,x=!m||m&&b,O=!b,P=dt.first({children:t},[]),k=h(P,2)[1],A=dt.last({children:t},[]),j=h(A,2)[1],E=[],F=function(t){var r=h(t,2),n=r[0],o=r[1];return!(0===o.length)&&(!!w||!(x&&yt.isAncestor(o,k)&&ee.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(O&&yt.isAncestor(o,j)&&ee.isElement(n)&&!e.isVoid(n)&&!e.isInline(n)))},S=Xt(dt.nodes({children:t},{pass:F}));try{for(S.s();!(p=S.n()).done;){var _=p.value;F(_)&&E.push(_)}}catch(e){S.e(e)}finally{S.f()}for(var N=[],C=[],D=[],R=!0,T=!1,B=0,I=E;B<I.length;B++){var M=h(I[B],1)[0];ee.isElement(M)&&!e.isInline(M)?(R=!1,T=!0,C.push(M)):R?N.push(M):D.push(M)}var q=ue.nodes(e,{at:u,match:function(t){return Rt.isText(t)||ue.isInline(e,t)},mode:"highest",voids:a}),L=h(q,1)[0],z=h(L,2)[1],W=ue.isStart(e,u,z),V=ue.isEnd(e,u,z),U=ue.pathRef(e,b?yt.next(y):y),$=ue.pathRef(e,V?yt.next(z):z),G=ue.pathRef(e,y);nr.splitNodes(e,{at:u,match:function(t){return T?ue.isBlock(e,t):Rt.isText(t)||ue.isInline(e,t)},mode:T?"lowest":"highest",voids:a});var J=ue.pathRef(e,!W||W&&V?yt.next(z):z);if(nr.insertNodes(e,N,{at:J.current,match:function(t){return Rt.isText(t)||ue.isInline(e,t)},mode:"highest",voids:a}),w&&C.length&&nr.delete(e,{at:G.unref(),voids:a}),nr.insertNodes(e,C,{at:U.current,match:function(t){return ue.isBlock(e,t)},mode:"lowest",voids:a}),nr.insertNodes(e,D,{at:$.current,match:function(t){return Rt.isText(t)||ue.isInline(e,t)},mode:"highest",voids:a}),!r.at){var K;K=D.length>0?yt.previous($.current):C.length>0?yt.previous(U.current):yt.previous(J.current);var Y=ue.end(e,K);nr.select(e,Y)}J.unref(),U.unref(),$.unref()}}}))},insertText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue.withoutNormalizing(e,(function(){var n=r.voids,o=void 0!==n&&n,i=r.at,a=void 0===i?e.selection:i;if(a){if(yt.isPath(a)&&(a=ue.range(e,a)),At.isRange(a))if(At.isCollapsed(a))a=a.anchor;else{var s=At.end(a);if(!o&&ue.void(e,{at:s}))return;var u=ue.pointRef(e,s);nr.delete(e,{at:a,voids:o}),a=u.unref(),nr.setSelection(e,{anchor:a,focus:a})}if(o||!ue.void(e,{at:a})){var c=a,f=c.path,l=c.offset;t.length>0&&e.apply({type:"insert_text",path:f,offset:l,text:t})}}}))}};function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var nr=rr(rr(rr(rr({},{transform:function(e,t){e.children=at(e.children);var r=e.selection&&at(e.selection);try{r=function(e,t,r){switch(r.type){case"insert_node":var n=r.path,o=r.node,i=dt.parent(e,n),a=n[n.length-1];if(a>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(i.children.splice(a,0,o),t){var s,c=It(At.points(t));try{for(c.s();!(s=c.n()).done;){var f=h(s.value,2),l=f[0];t[f[1]]=xt.transform(l,r)}}catch(e){c.e(e)}finally{c.f()}}break;case"insert_text":var d=r.path,v=r.offset,p=r.text;if(0===p.length)break;var g=dt.leaf(e,d),y=g.text.slice(0,v),m=g.text.slice(v);if(g.text=y+p+m,t){var b,w=It(At.points(t));try{for(w.s();!(b=w.n()).done;){var x=h(b.value,2),O=x[0];t[x[1]]=xt.transform(O,r)}}catch(e){w.e(e)}finally{w.f()}}break;case"merge_node":var P=r.path,k=dt.get(e,P),A=yt.previous(P),j=dt.get(e,A),E=dt.parent(e,P),F=P[P.length-1];if(Rt.isText(k)&&Rt.isText(j))j.text+=k.text;else{if(Rt.isText(k)||Rt.isText(j))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(P,"] to nodes of different interfaces: ").concat(k," ").concat(j));var S;(S=j.children).push.apply(S,u(k.children))}if(E.children.splice(F,1),t){var _,N=It(At.points(t));try{for(N.s();!(_=N.n()).done;){var C=h(_.value,2),D=C[0];t[C[1]]=xt.transform(D,r)}}catch(e){N.e(e)}finally{N.f()}}break;case"move_node":var R=r.path,T=r.newPath;if(yt.isAncestor(R,T))throw new Error("Cannot move a path [".concat(R,"] to new path [").concat(T,"] because the destination is inside itself."));var B=dt.get(e,R),I=dt.parent(e,R),M=R[R.length-1];I.children.splice(M,1);var q=yt.transform(R,r),L=dt.get(e,yt.parent(q)),z=q[q.length-1];if(L.children.splice(z,0,B),t){var W,V=It(At.points(t));try{for(V.s();!(W=V.n()).done;){var U=h(W.value,2),$=U[0];t[U[1]]=xt.transform($,r)}}catch(e){V.e(e)}finally{V.f()}}break;case"remove_node":var G=r.path,J=G[G.length-1];if(dt.parent(e,G).children.splice(J,1),t){var K,Y=It(At.points(t));try{for(Y.s();!(K=Y.n()).done;){var Q=h(K.value,2),Z=Q[0],X=Q[1],H=xt.transform(Z,r);if(null!=t&&null!=H)t[X]=H;else{var ee,te=void 0,re=void 0,ne=It(dt.texts(e));try{for(ne.s();!(ee=ne.n()).done;){var oe=h(ee.value,2),ie=oe[0],ae=oe[1];if(-1!==yt.compare(ae,G)){re=[ie,ae];break}te=[ie,ae]}}catch(e){ne.e(e)}finally{ne.f()}var se=!1;te&&re&&(se=yt.equals(re[1],G)?!yt.hasPrevious(re[1]):yt.common(te[1],G).length<yt.common(re[1],G).length),te&&!se?(Z.path=te[1],Z.offset=te[0].text.length):re?(Z.path=re[1],Z.offset=0):t=null}}}catch(e){Y.e(e)}finally{Y.f()}}break;case"remove_text":var ue=r.path,ce=r.offset,fe=r.text;if(0===fe.length)break;var le=dt.leaf(e,ue),he=le.text.slice(0,ce),de=le.text.slice(ce+fe.length);if(le.text=he+de,t){var ve,pe=It(At.points(t));try{for(pe.s();!(ve=pe.n()).done;){var ge=h(ve.value,2),ye=ge[0];t[ge[1]]=xt.transform(ye,r)}}catch(e){pe.e(e)}finally{pe.f()}}break;case"set_node":var me=r.path,be=r.properties,we=r.newProperties;if(0===me.length)throw new Error("Cannot set properties on the root node!");var xe=dt.get(e,me);for(var Oe in we){if("children"===Oe||"text"===Oe)throw new Error('Cannot set the "'.concat(Oe,'" property of nodes!'));var Pe=we[Oe];null==Pe?delete xe[Oe]:xe[Oe]=Pe}for(var ke in be)we.hasOwnProperty(ke)||delete xe[ke];break;case"set_selection":var Ae=r.newProperties;if(null==Ae)t=Ae;else{if(null==t){if(!At.isRange(Ae))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Ae)," when there is no current selection."));t=Bt({},Ae)}for(var je in Ae){var Ee=Ae[je];if(null==Ee){if("anchor"===je||"focus"===je)throw new Error('Cannot remove the "'.concat(je,'" selection property'));delete t[je]}else t[je]=Ee}}break;case"split_node":var Fe=r.path,Se=r.position,_e=r.properties;if(0===Fe.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Fe,"] because the root node cannot be split."));var Ne,Ce=dt.get(e,Fe),De=dt.parent(e,Fe),Re=Fe[Fe.length-1];if(Rt.isText(Ce)){var Te=Ce.text.slice(0,Se),Be=Ce.text.slice(Se);Ce.text=Te,Ne=Bt(Bt({},_e),{},{text:Be})}else{var Ie=Ce.children.slice(0,Se),Me=Ce.children.slice(Se);Ce.children=Ie,Ne=Bt(Bt({},_e),{},{children:Me})}if(De.children.splice(Re+1,0,Ne),t){var qe,Le=It(At.points(t));try{for(Le.s();!(qe=Le.n()).done;){var ze=h(qe.value,2),We=ze[0];t[ze[1]]=xt.transform(We,r)}}catch(e){Le.e(e)}finally{Le.f()}}}return t}(e,r,t)}finally{e.children=st(e.children),e.selection=r?he(r)?st(r):r:null}}}),$t),Zt),er);e.Editor=ue,e.Element=ee,e.Location=ce,e.Node=dt,e.Operation=gt,e.Path=yt,e.PathRef=mt,e.Point=xt,e.PointRef=Ot,e.Range=At,e.RangeRef=jt,e.Span=fe,e.Text=Rt,e.Transforms=nr,e.createEditor=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var r,n=O(ue.pathRefs(e));try{for(n.s();!(r=n.n()).done;){var o=r.value;mt.transform(o,t)}}catch(e){n.e(e)}finally{n.f()}var i,a=O(ue.pointRefs(e));try{for(a.s();!(i=a.n()).done;){var s=i.value;Ot.transform(s,t)}}catch(e){a.e(e)}finally{a.f()}var u,c=O(ue.rangeRefs(e));try{for(c.s();!(u=c.n()).done;){var f=u.value;jt.transform(f,t)}}catch(e){c.e(e)}finally{c.f()}var l,h=new Set,d=[],g=function(e){if(e){var t=e.join(",");h.has(t)||(h.add(t),d.push(e))}},y=v.get(e)||[],m=k(t),b=O(y);try{for(b.s();!(l=b.n()).done;){var w=l.value;g(yt.transform(w,t))}}catch(e){b.e(e)}finally{b.f()}var x,P=O(m);try{for(P.s();!(x=P.n()).done;){g(x.value)}}catch(e){P.e(e)}finally{P.f()}v.set(e,d),nr.transform(e,t),e.operations.push(t),ue.normalize(e),"set_selection"===t.type&&(e.marks=null),p.get(e)||(p.set(e,!0),Promise.resolve().then((function(){p.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,r){var n=e.selection;if(n)if(At.isExpanded(n))nr.setNodes(e,d({},t,r),{match:Rt.isText,split:!0});else{var o=x(x({},ue.marks(e)||{}),{},d({},t,r));e.marks=o,p.get(e)||e.onChange()}},deleteBackward:function(t){var r=e.selection;r&&At.isCollapsed(r)&&nr.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var r=e.selection;r&&At.isCollapsed(r)&&nr.delete(e,{unit:t})},deleteFragment:function(t){var r=e.selection;r&&At.isExpanded(r)&&nr.delete(e,{reverse:"backward"===t})},getFragment:function(){var t=e.selection;return t?dt.fragment(e,t):[]},insertBreak:function(){nr.splitNodes(e,{always:!0})},insertFragment:function(t){nr.insertFragment(e,t)},insertNode:function(t){nr.insertNodes(e,t)},insertText:function(t){var r=e.selection,n=e.marks;if(r){if(At.isCollapsed(r)){var o=ue.above(e,{match:function(t){return ue.isInline(e,t)},mode:"highest"});if(o){var i=h(o,2)[1];if(ue.isEnd(e,r.anchor,i)){var a=ue.after(e,i);nr.setSelection(e,{anchor:a,focus:a})}}}if(n){var s=x({text:t},n);nr.insertNodes(e,s)}else nr.insertText(e,t);e.marks=null}},normalizeNode:function(t){var r=h(t,2),n=r[0],o=r[1];if(!Rt.isText(n))if(ee.isElement(n)&&0===n.children.length){nr.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}else for(var i=!ue.isEditor(n)&&(ee.isElement(n)&&(e.isInline(n)||0===n.children.length||Rt.isText(n.children[0])||e.isInline(n.children[0]))),a=0,s=0;s<n.children.length;s++,a++){var u=dt.get(e,o);if(!Rt.isText(u)){var c=n.children[s],f=u.children[a-1],l=s===n.children.length-1;if((Rt.isText(c)||ee.isElement(c)&&e.isInline(c))!==i)nr.removeNodes(e,{at:o.concat(a),voids:!0}),a--;else if(ee.isElement(c)){if(e.isInline(c))if(null!=f&&Rt.isText(f)){if(l){nr.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{nr.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else null!=f&&Rt.isText(f)&&(Rt.equals(c,f,{loose:!0})?(nr.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===f.text?(nr.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):""===c.text&&(nr.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}}},removeMark:function(t){var r=e.selection;if(r)if(At.isExpanded(r))nr.unsetNodes(e,t,{match:Rt.isText,split:!0});else{var n=x({},ue.marks(e)||{});delete n[t],e.marks=n,p.get(e)||e.onChange()}}};return e},Object.defineProperty(e,"__esModule",{value:!0})}));
