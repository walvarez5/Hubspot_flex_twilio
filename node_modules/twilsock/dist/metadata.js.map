{"version":3,"file":"metadata.js","sources":["../src/metadata.ts"],"sourcesContent":["import * as platform from \"platform\";\n\nclass Metadata {\n  public static getMetadata(options: {\n    clientMetadata: Metadata;\n  }): Record<string, unknown> {\n    const overrides =\n      options && options.clientMetadata ? options.clientMetadata : {};\n\n    const fieldNames = [\n      \"ver\",\n      \"env\",\n      \"envv\",\n      \"os\",\n      \"osv\",\n      \"osa\",\n      \"type\",\n      \"sdk\",\n      \"sdkv\",\n      \"dev\",\n      \"devv\",\n      \"devt\",\n      \"app\",\n      \"appv\",\n    ];\n    const defaults = {\n      env: platform.name ?? \"unknown\",\n      envv: platform.version ?? \"unknown\",\n      os: platform.os?.family ?? \"unknown\",\n      osv: platform.os?.version ?? \"unknown\",\n      osa: platform.os?.architecture ?? \"unknown\",\n      sdk: \"js-default\",\n    };\n\n    const finalClientMetadata = {};\n    fieldNames\n      .filter((key) => key in overrides || key in defaults)\n      .forEach(\n        (key) =>\n          (finalClientMetadata[key] =\n            key in overrides ? overrides[key] : defaults[key])\n      );\n\n    return finalClientMetadata;\n  }\n}\n\nexport { Metadata };\n"],"names":["platform"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,MAAM,QAAQ,CAAA;IACL,OAAO,WAAW,CAAC,OAEzB,EAAA;;AACC,QAAA,MAAM,SAAS,GACb,OAAO,IAAI,OAAO,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,GAAG,EAAE,CAAC;AAElE,QAAA,MAAM,UAAU,GAAG;YACjB,KAAK;YACL,KAAK;YACL,MAAM;YACN,IAAI;YACJ,KAAK;YACL,KAAK;YACL,MAAM;YACN,KAAK;YACL,MAAM;YACN,KAAK;YACL,MAAM;YACN,MAAM;YACN,KAAK;YACL,MAAM;SACP,CAAC;AACF,QAAA,MAAM,QAAQ,GAAG;AACf,YAAA,GAAG,EAAE,CAAA,EAAA,GAAAA,mBAAQ,CAAC,IAAI,mCAAI,SAAS;AAC/B,YAAA,IAAI,EAAE,CAAA,EAAA,GAAAA,mBAAQ,CAAC,OAAO,mCAAI,SAAS;YACnC,EAAE,EAAE,MAAA,CAAA,EAAA,GAAAA,mBAAQ,CAAC,EAAE,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,SAAS;YACpC,GAAG,EAAE,MAAA,CAAA,EAAA,GAAAA,mBAAQ,CAAC,EAAE,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,SAAS;YACtC,GAAG,EAAE,MAAA,CAAA,EAAA,GAAAA,mBAAQ,CAAC,EAAE,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,YAAY,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,SAAS;AAC3C,YAAA,GAAG,EAAE,YAAY;SAClB,CAAC;QAEF,MAAM,mBAAmB,GAAG,EAAE,CAAC;QAC/B,UAAU;AACP,aAAA,MAAM,CAAC,CAAC,GAAG,KAAK,GAAG,IAAI,SAAS,IAAI,GAAG,IAAI,QAAQ,CAAC;aACpD,OAAO,CACN,CAAC,GAAG,MACD,mBAAmB,CAAC,GAAG,CAAC;AACvB,YAAA,GAAG,IAAI,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CACvD,CAAC;AAEJ,QAAA,OAAO,mBAAmB,CAAC;KAC5B;AACF;;;;"}