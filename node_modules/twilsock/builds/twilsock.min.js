/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes javascript-state-machine under the following license.

    Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.


*/
this.Twilio=this.Twilio||{},this.Twilio.Twilsock=function(t){"use strict";var e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")(),i={},a=function(t){try{return!!t()}catch(t){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l=f&&!u.call({1:2},1);c.f=l?function(t){var e=f(this,t);return!!e&&e.enumerable}:u;var p,h,d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,y=function(t){return v.call(t).slice(8,-1)},g=y,m="".split,b=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=b,k=w,S=function(t){return x(k(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=o,O=function(t){return"function"==typeof t?t:void 0},A=function(t,e){return arguments.length<2?O(E[t]):E[t]&&E[t][e]},R=A("navigator","userAgent")||"",_=o,C=R,P=_.process,I=_.Deno,j=P&&P.versions||I&&I.version,M=j&&j.v8;M?h=(p=M.split("."))[0]<4?1:p[0]+p[1]:C&&(!(p=C.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=C.match(/Chrome\/(\d+)/))&&(h=p[1]);var L=h&&+h,N=L,D=a,B=!!Object.getOwnPropertySymbols&&!D((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),F=B&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,U=A,W=F?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return"function"==typeof e&&Object(t)instanceof e},z=T,G={exports:{}},$=o,V=function(t,e){try{Object.defineProperty($,t,{value:e,configurable:!0,writable:!0})}catch(n){$[t]=e}return e},K=V,Y="__core-js_shared__",q=o[Y]||K(Y,{}),X=q;(G.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var J=w,H=function(t){return Object(J(t))},Z=H,Q={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Q.call(Z(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},ot=o,it=G.exports,at=tt,st=rt,ct=B,ut=F,ft=it("wks"),lt=ot.Symbol,pt=ut?lt:lt&&lt.withoutSetter||st,ht=function(t){return at(ft,t)&&(ct||"string"==typeof ft[t])||(ct&&at(lt,t)?ft[t]=lt[t]:ft[t]=pt("Symbol."+t)),ft[t]},dt=T,vt=W,yt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},gt=ht("toPrimitive"),mt=function(t,e){if(!dt(t)||vt(t))return t;var n,r=t[gt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!dt(n)||vt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),yt(t,e)},bt=mt,wt=W,xt=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},kt=T,St=o.document,Tt=kt(St)&&kt(St.createElement),Et=function(t){return Tt?St.createElement(t):{}},Ot=Et,At=!s&&!a((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),Rt=s,_t=c,Ct=d,Pt=S,It=xt,jt=tt,Mt=At,Lt=Object.getOwnPropertyDescriptor;i.f=Rt?Lt:function(t,e){if(t=Pt(t),e=It(e),Mt)try{return Lt(t,e)}catch(t){}if(jt(t,e))return Ct(!_t.f.call(t,e),t[e])};var Nt={},Dt=T,Bt=function(t){if(!Dt(t))throw TypeError(String(t)+" is not an object");return t},Ft=s,Ut=At,Wt=Bt,zt=xt,Gt=Object.defineProperty;Nt.f=Ft?Gt:function(t,e,n){if(Wt(t),e=zt(e),Wt(n),Ut)try{return Gt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var $t=Nt,Vt=d,Kt=s?function(t,e,n){return $t.f(t,e,Vt(1,n))}:function(t,e,n){return t[e]=n,t},Yt={exports:{}},qt=q,Xt=Function.toString;"function"!=typeof qt.inspectSource&&(qt.inspectSource=function(t){return Xt.call(t)});var Jt,Ht,Zt,Qt=qt.inspectSource,te=Qt,ee=o.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=G.exports,oe=rt,ie=re("keys"),ae=function(t){return ie[t]||(ie[t]=oe(t))},se={},ce=ne,ue=T,fe=Kt,le=tt,pe=q,he=ae,de=se,ve="Object already initialized",ye=o.WeakMap;if(ce||pe.state){var ge=pe.state||(pe.state=new ye),me=ge.get,be=ge.has,we=ge.set;Jt=function(t,e){if(be.call(ge,t))throw new TypeError(ve);return e.facade=t,we.call(ge,t,e),e},Ht=function(t){return me.call(ge,t)||{}},Zt=function(t){return be.call(ge,t)}}else{var xe=he("state");de[xe]=!0,Jt=function(t,e){if(le(t,xe))throw new TypeError(ve);return e.facade=t,fe(t,xe,e),e},Ht=function(t){return le(t,xe)?t[xe]:{}},Zt=function(t){return le(t,xe)}}var ke={set:Jt,get:Ht,has:Zt,enforce:function(t){return Zt(t)?Ht(t):Jt(t,{})},getterFor:function(t){return function(e){var n;if(!ue(e)||(n=Ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Se=o,Te=Kt,Ee=tt,Oe=V,Ae=Qt,Re=ke.get,_e=ke.enforce,Ce=String(String).split("String");(Yt.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ee(n,"name")||Te(n,"name",e),(o=_e(n)).source||(o.source=Ce.join("string"==typeof e?e:""))),t!==Se?(i?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Te(t,e,n)):a?t[e]=n:Oe(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Re(this).source||Ae(this)}));var Pe={},Ie=Math.ceil,je=Math.floor,Me=function(t){return isNaN(t=+t)?0:(t>0?je:Ie)(t)},Le=Me,Ne=Math.min,De=function(t){return t>0?Ne(Le(t),9007199254740991):0},Be=Me,Fe=Math.max,Ue=Math.min,We=function(t,e){var n=Be(t);return n<0?Fe(n+e,0):Ue(n,e)},ze=S,Ge=De,$e=We,Ve=function(t){return function(e,n,r){var o,i=ze(e),a=Ge(i.length),s=$e(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},Ke={includes:Ve(!0),indexOf:Ve(!1)},Ye=tt,qe=S,Xe=Ke.indexOf,Je=se,He=function(t,e){var n,r=qe(t),o=0,i=[];for(n in r)!Ye(Je,n)&&Ye(r,n)&&i.push(n);for(;e.length>o;)Ye(r,n=e[o++])&&(~Xe(i,n)||i.push(n));return i},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=He,tn=Ze.concat("length","prototype");Pe.f=Object.getOwnPropertyNames||function(t){return Qe(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn=Pe,rn=en,on=Bt,an=A("Reflect","ownKeys")||function(t){var e=nn.f(on(t)),n=rn.f;return n?e.concat(n(t)):e},sn=tt,cn=an,un=i,fn=Nt,ln=function(t,e){for(var n=cn(e),r=fn.f,o=un.f,i=0;i<n.length;i++){var a=n[i];sn(t,a)||r(t,a,o(e,a))}},pn=a,hn=/#|\.prototype\./,dn=function(t,e){var n=yn[vn(t)];return n==mn||n!=gn&&("function"==typeof e?pn(e):!!e)},vn=dn.normalize=function(t){return String(t).replace(hn,".").toLowerCase()},yn=dn.data={},gn=dn.NATIVE="N",mn=dn.POLYFILL="P",bn=dn,wn=o,xn=i.f,kn=Kt,Sn=Yt.exports,Tn=V,En=ln,On=bn,An=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?wn:u?wn[s]||Tn(s,{}):(wn[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=xn(n,r))&&a.value:n[r],!On(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;En(i,o)}(t.sham||o&&o.sham)&&kn(i,"sham",!0),Sn(n,r,i,t)}},Rn=Nt.f,_n=tt,Cn=ht("toStringTag"),Pn=function(t,e,n){t&&!_n(t=n?t:t.prototype,Cn)&&Rn(t,Cn,{configurable:!0,value:e})},In=o,jn=Pn;An({global:!0},{Reflect:{}}),jn(In.Reflect,"Reflect",!0);var Mn,Ln=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Nn=He,Dn=Ze,Bn=Object.keys||function(t){return Nn(t,Dn)},Fn=Nt,Un=Bt,Wn=Bn,zn=s?Object.defineProperties:function(t,e){Un(t);for(var n,r=Wn(e),o=r.length,i=0;o>i;)Fn.f(t,n=r[i++],e[n]);return t},Gn=A("document","documentElement"),$n=Bt,Vn=zn,Kn=Ze,Yn=se,qn=Gn,Xn=Et,Jn=ae("IE_PROTO"),Hn=function(){},Zn=function(t){return"<script>"+t+"</"+"script>"},Qn=function(t){t.write(Zn("")),t.close();var e=t.parentWindow.Object;return t=null,e},tr=function(){try{Mn=new ActiveXObject("htmlfile")}catch(t){}var t,e;tr="undefined"!=typeof document?document.domain&&Mn?Qn(Mn):((e=Xn("iframe")).style.display="none",qn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Zn("document.F=Object")),t.close(),t.F):Qn(Mn);for(var n=Kn.length;n--;)delete tr.prototype[Kn[n]];return tr()};Yn[Jn]=!0;var er=Object.create||function(t,e){var n;return null!==t?(Hn.prototype=$n(t),n=new Hn,Hn.prototype=null,n[Jn]=t):n=tr(),void 0===e?n:Vn(n,e)},nr=Ln,rr=T,or=[].slice,ir={},ar=function(t,e,n){if(!(e in ir)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";ir[e]=Function("C,a","return new C("+r.join(",")+")")}return ir[e](t,n)},sr=Function.bind||function(t){var e=nr(this),n=or.call(arguments,1),r=function(){var o=n.concat(or.call(arguments));return this instanceof r?ar(e,o.length,o):e.apply(t,o)};return rr(e.prototype)&&(r.prototype=e.prototype),r},cr=An,ur=Ln,fr=Bt,lr=T,pr=er,hr=sr,dr=a,vr=A("Reflect","construct"),yr=dr((function(){function t(){}return!(vr((function(){}),[],t)instanceof t)})),gr=!dr((function(){vr((function(){}))})),mr=yr||gr;function br(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function wr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){br(i,r,o,a,s,"next",t)}function s(t){br(i,r,o,a,s,"throw",t)}a(void 0)}))}}function xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kr(t){return kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kr(t)}function Sr(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kr(t)););return t}function Tr(){return Tr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Sr(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Tr.apply(this,arguments)}function Er(t,e){return Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Er(t,e)}function Or(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function Rr(t,e){if(e&&("object"===Ar(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xr(t)}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cr(t,e,n){return e&&_r(t.prototype,e),n&&_r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ir(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}cr({target:"Reflect",stat:!0,forced:mr,sham:mr},{construct:function(t,e){ur(t),fr(e);var n=arguments.length<3?t:ur(arguments[2]);if(gr&&!yr)return vr(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(hr.apply(t,r))}var o=n.prototype,i=pr(lr(o)?o:Object.prototype),a=Function.apply.call(t,i,e);return lr(a)?a:i}});var jr,Mr=Object.prototype,Lr=Mr.hasOwnProperty,Nr="function"==typeof Symbol?Symbol:{},Dr=Nr.iterator||"@@iterator",Br=Nr.asyncIterator||"@@asyncIterator",Fr=Nr.toStringTag||"@@toStringTag";function Ur(t,e,n,r){var o=e&&e.prototype instanceof Yr?e:Yr,i=Object.create(o.prototype),a=new ao(r||[]);return i._invoke=function(t,e,n){var r=zr;return function(o,i){if(r===$r)throw new Error("Generator is already running");if(r===Vr){if("throw"===o)throw i;return co()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=ro(a,n);if(s){if(s===Kr)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===zr)throw r=Vr,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=$r;var c=Wr(t,e,n);if("normal"===c.type){if(r=n.done?Vr:Gr,c.arg===Kr)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=Vr,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function Wr(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}var zr="suspendedStart",Gr="suspendedYield",$r="executing",Vr="completed",Kr={};function Yr(){}function qr(){}function Xr(){}var Jr={};Jr[Dr]=function(){return this};var Hr=Object.getPrototypeOf,Zr=Hr&&Hr(Hr(so([])));Zr&&Zr!==Mr&&Lr.call(Zr,Dr)&&(Jr=Zr);var Qr=Xr.prototype=Yr.prototype=Object.create(Jr);function to(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function eo(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===qr||"GeneratorFunction"===(e.displayName||e.name))}function no(t,e){function n(r,o,i,a){var s=Wr(t[r],t,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===Ar(u)&&Lr.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(u).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,a)}))}a(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function ro(t,e){var n=t.iterator[e.method];if(n===jr){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=jr,ro(t,e),"throw"===e.method))return Kr;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Kr}var r=Wr(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Kr;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=jr),e.delegate=null,Kr):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Kr)}function oo(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function io(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function ao(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(oo,this),this.reset(!0)}function so(t){if(t){var e=t[Dr];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(Lr.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=jr,e.done=!0,e};return r.next=r}}return{next:co}}function co(){return{value:jr,done:!0}}qr.prototype=Qr.constructor=Xr,Xr.constructor=qr,Xr[Fr]=qr.displayName="GeneratorFunction",to(no.prototype),no.prototype[Br]=function(){return this},to(Qr),Qr[Fr]="Generator",Qr[Dr]=function(){return this},Qr.toString=function(){return"[object Generator]"},ao.prototype={constructor:ao,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=jr,this.done=!1,this.delegate=null,this.method="next",this.arg=jr,this.tryEntries.forEach(io),!t)for(var e in this)"t"===e.charAt(0)&&Lr.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=jr)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=jr),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=Lr.call(o,"catchLoc"),s=Lr.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Lr.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,Kr):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Kr},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),io(n),Kr}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;io(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:so(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=jr),Kr}};var uo={wrap:Ur,isGeneratorFunction:eo,AsyncIterator:no,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Xr):(t.__proto__=Xr,Fr in t||(t[Fr]="GeneratorFunction")),t.prototype=Object.create(Qr),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new no(Ur(t,e,n,r),o);return eo(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:so},fo=y,lo=Array.isArray||function(t){return"Array"==fo(t)},po=xt,ho=Nt,vo=d,yo=function(t,e,n){var r=po(e);r in t?ho.f(t,r,vo(0,n)):t[r]=n},go=T,mo=lo,bo=ht("species"),wo=function(t){var e;return mo(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!mo(e.prototype)?go(e)&&null===(e=e[bo])&&(e=void 0):e=void 0),void 0===e?Array:e},xo=function(t,e){return new(wo(t))(0===e?0:e)},ko=a,So=L,To=ht("species"),Eo=function(t){return So>=51||!ko((function(){var e=[];return(e.constructor={})[To]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Oo=An,Ao=a,Ro=lo,_o=T,Co=H,Po=De,Io=yo,jo=xo,Mo=Eo,Lo=L,No=ht("isConcatSpreadable"),Do=9007199254740991,Bo="Maximum allowed index exceeded",Fo=Lo>=51||!Ao((function(){var t=[];return t[No]=!1,t.concat()[0]!==t})),Uo=Mo("concat"),Wo=function(t){if(!_o(t))return!1;var e=t[No];return void 0!==e?!!e:Ro(t)};Oo({target:"Array",proto:!0,forced:!Fo||!Uo},{concat:function(t){var e,n,r,o,i,a=Co(this),s=jo(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(Wo(i=-1===e?a:arguments[e])){if(c+(o=Po(i.length))>Do)throw TypeError(Bo);for(n=0;n<o;n++,c++)n in i&&Io(s,c,i[n])}else{if(c>=Do)throw TypeError(Bo);Io(s,c++,i)}return s.length=c,s}});var zo={};zo[ht("toStringTag")]="z";var Go="[object z]"===String(zo),$o=Go,Vo=y,Ko=ht("toStringTag"),Yo="Arguments"==Vo(function(){return arguments}()),qo=$o?Vo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ko))?n:Yo?Vo(e):"Object"==(r=Vo(e))&&"function"==typeof e.callee?"Arguments":r},Xo=qo,Jo=Go?{}.toString:function(){return"[object "+Xo(this)+"]"},Ho=Go,Zo=Yt.exports,Qo=Jo;Ho||Zo(Object.prototype,"toString",Qo,{unsafe:!0});var ti=W,ei=function(t){if(ti(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},ni=Bt,ri=function(){var t=ni(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},oi=Yt.exports,ii=Bt,ai=ei,si=a,ci=ri,ui="toString",fi=RegExp.prototype,li=fi.toString,pi=si((function(){return"/a/b"!=li.call({source:"a",flags:"b"})})),hi=li.name!=ui;(pi||hi)&&oi(RegExp.prototype,ui,(function(){var t=ii(this),e=ai(t.source),n=t.flags;return"/"+e+"/"+ai(void 0===n&&t instanceof RegExp&&!("flags"in fi)?ci.call(t):n)}),{unsafe:!0});var di=a,vi=function(t,e){var n=[][t];return!!n&&di((function(){n.call(null,e||function(){throw 1},1)}))},yi=An,gi=S,mi=[].join,bi=b!=Object,wi=vi("join",",");yi({target:"Array",proto:!0,forced:bi||!wi},{join:function(t){return mi.call(gi(this),void 0===t?",":t)}});var xi=Ln,ki=function(t,e,n){if(xi(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Si=ki,Ti=b,Ei=H,Oi=De,Ai=xo,Ri=[].push,_i=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,f,l){for(var p,h,d=Ei(c),v=Ti(d),y=Si(u,f,3),g=Oi(v.length),m=0,b=l||Ai,w=e?b(c,g):n||a?b(c,0):void 0;g>m;m++)if((s||m in v)&&(h=y(p=v[m],m,d),t))if(e)w[m]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:Ri.call(w,p)}else switch(t){case 4:return!1;case 7:Ri.call(w,p)}return i?-1:r||o?o:w}},Ci={forEach:_i(0),map:_i(1),filter:_i(2),some:_i(3),every:_i(4),find:_i(5),findIndex:_i(6),filterReject:_i(7)},Pi=Ci.map;An({target:"Array",proto:!0,forced:!Eo("map")},{map:function(t){return Pi(this,t,arguments.length>1?arguments[1]:void 0)}});var Ii=An,ji=a,Mi=A("JSON","stringify"),Li=/[\uD800-\uDFFF]/g,Ni=/^[\uD800-\uDBFF]$/,Di=/^[\uDC00-\uDFFF]$/,Bi=function(t,e,n){var r=n.charAt(e-1),o=n.charAt(e+1);return Ni.test(t)&&!Di.test(o)||Di.test(t)&&!Ni.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},Fi=ji((function(){return'"\\udf06\\ud834"'!==Mi("\udf06\ud834")||'"\\udead"'!==Mi("\udead")}));Mi&&Ii({target:"JSON",stat:!0,forced:Fi},{stringify:function(t,e,n){var r=Mi.apply(null,arguments);return"string"==typeof r?r.replace(Li,Bi):r}});var Ui={},Wi=An,zi=T,Gi=lo,$i=We,Vi=De,Ki=S,Yi=yo,qi=ht,Xi=Eo("slice"),Ji=qi("species"),Hi=[].slice,Zi=Math.max;Wi({target:"Array",proto:!0,forced:!Xi},{slice:function(t,e){var n,r,o,i=Ki(this),a=Vi(i.length),s=$i(t,a),c=$i(void 0===e?a:e,a);if(Gi(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Gi(n.prototype)?zi(n)&&null===(n=n[Ji])&&(n=void 0):n=void 0,n===Array||void 0===n))return Hi.call(i,s,c);for(r=new(void 0===n?Array:n)(Zi(c-s,0)),o=0;s<c;s++,o++)s in i&&Yi(r,o,i[s]);return r.length=o,r}});var Qi=Bt,ta=function(t,e,n){var r,o;Qi(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Qi(r),n},ea=Bt,na=ta,ra={},oa=ra,ia=ht("iterator"),aa=Array.prototype,sa=function(t){return void 0!==t&&(oa.Array===t||aa[ia]===t)},ca=qo,ua=ra,fa=ht("iterator"),la=function(t){if(null!=t)return t[fa]||t["@@iterator"]||ua[ca(t)]},pa=Bt,ha=la,da=function(t,e){var n=arguments.length<2?ha(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return pa(n.call(t))},va=ki,ya=H,ga=function(t,e,n,r){try{return r?e(ea(n)[0],n[1]):e(n)}catch(e){na(t,"throw",e)}},ma=sa,ba=De,wa=yo,xa=da,ka=la,Sa=ht("iterator"),Ta=!1;try{var Ea=0,Oa={next:function(){return{done:!!Ea++}},return:function(){Ta=!0}};Oa[Sa]=function(){return this},Array.from(Oa,(function(){throw 2}))}catch(t){}var Aa=function(t,e){if(!e&&!Ta)return!1;var n=!1;try{var r={};r[Sa]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ra=function(t){var e,n,r,o,i,a,s=ya(t),c="function"==typeof this?this:Array,u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,p=ka(s),h=0;if(l&&(f=va(f,u>2?arguments[2]:void 0,2)),null==p||c==Array&&ma(p))for(n=new c(e=ba(s.length));e>h;h++)a=l?f(s[h],h):s[h],wa(n,h,a);else for(i=(o=xa(s,p)).next,n=new c;!(r=i.call(o)).done;h++)a=l?ga(o,f,[r.value,h],!0):r.value,wa(n,h,a);return n.length=h,n};An({target:"Array",stat:!0,forced:!Aa((function(t){Array.from(t)}))},{from:Ra});var _a,Ca,Pa,Ia=Me,ja=ei,Ma=w,La=function(t){return function(e,n){var r,o,i=ja(Ma(e)),a=Ia(n),s=i.length;return a<0||a>=s?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},Na={codeAt:La(!1),charAt:La(!0)},Da=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ba=tt,Fa=H,Ua=Da,Wa=ae("IE_PROTO"),za=Object.prototype,Ga=Ua?Object.getPrototypeOf:function(t){return t=Fa(t),Ba(t,Wa)?t[Wa]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?za:null},$a=a,Va=Ga,Ka=Kt,Ya=ht("iterator"),qa=!1;[].keys&&("next"in(Pa=[].keys())?(Ca=Va(Va(Pa)))!==Object.prototype&&(_a=Ca):qa=!0);var Xa=null==_a||$a((function(){var t={};return _a[Ya].call(t)!==t}));Xa&&(_a={}),"function"!=typeof _a[Ya]&&Ka(_a,Ya,(function(){return this}));var Ja={IteratorPrototype:_a,BUGGY_SAFARI_ITERATORS:qa},Ha=Ja.IteratorPrototype,Za=er,Qa=d,ts=Pn,es=ra,ns=function(){return this},rs=T,os=Bt,is=function(t){if(!rs(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},as=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return os(n),is(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ss=An,cs=function(t,e,n){var r=e+" Iterator";return t.prototype=Za(Ha,{next:Qa(1,n)}),ts(t,r,!1),es[r]=ns,t},us=Ga,fs=as,ls=Pn,ps=Kt,hs=Yt.exports,ds=ra,vs=Ja.IteratorPrototype,ys=Ja.BUGGY_SAFARI_ITERATORS,gs=ht("iterator"),ms="keys",bs="values",ws="entries",xs=function(){return this},ks=function(t,e,n,r,o,i,a){cs(n,e,r);var s,c,u,f=function(t){if(t===o&&v)return v;if(!ys&&t in h)return h[t];switch(t){case ms:case bs:case ws:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,d=h[gs]||h["@@iterator"]||o&&h[o],v=!ys&&d||f(o),y="Array"==e&&h.entries||d;if(y&&(s=us(y.call(new t)))!==Object.prototype&&s.next&&(us(s)!==vs&&(fs?fs(s,vs):"function"!=typeof s[gs]&&ps(s,gs,xs)),ls(s,l,!0)),o==bs&&d&&d.name!==bs&&(p=!0,v=function(){return d.call(this)}),h[gs]!==v&&ps(h,gs,v),ds[e]=v,o)if(c={values:f(bs),keys:i?v:f(ms),entries:f(ws)},a)for(u in c)(ys||p||!(u in h))&&hs(h,u,c[u]);else ss({target:e,proto:!0,forced:ys||p},c);return c},Ss=Na.charAt,Ts=ei,Es=ke,Os=ks,As="String Iterator",Rs=Es.set,_s=Es.getterFor(As);Os(String,"String",(function(t){Rs(this,{type:As,string:Ts(t),index:0})}),(function(){var t,e=_s(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ss(n,r),e.index+=t.length,{value:t,done:!1})}));var Cs={},Ps=a,Is=o.RegExp;Cs.UNSUPPORTED_Y=Ps((function(){var t=Is("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Cs.BROKEN_CARET=Ps((function(){var t=Is("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var js,Ms,Ls=a,Ns=o.RegExp,Ds=Ls((function(){var t=Ns(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Bs=a,Fs=o.RegExp,Us=Bs((function(){var t=Fs("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Ws=ei,zs=ri,Gs=Cs,$s=G.exports,Vs=er,Ks=ke.get,Ys=Ds,qs=Us,Xs=RegExp.prototype.exec,Js=$s("native-string-replace",String.prototype.replace),Hs=Xs,Zs=(js=/a/,Ms=/b*/g,Xs.call(js,"a"),Xs.call(Ms,"a"),0!==js.lastIndex||0!==Ms.lastIndex),Qs=Gs.UNSUPPORTED_Y||Gs.BROKEN_CARET,tc=void 0!==/()??/.exec("")[1];(Zs||tc||Qs||Ys||qs)&&(Hs=function(t){var e,n,r,o,i,a,s,c=this,u=Ks(c),f=Ws(t),l=u.raw;if(l)return l.lastIndex=c.lastIndex,e=Hs.call(l,f),c.lastIndex=l.lastIndex,e;var p=u.groups,h=Qs&&c.sticky,d=zs.call(c),v=c.source,y=0,g=f;if(h&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=f.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==f.charAt(c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),n=new RegExp("^(?:"+v+")",d)),tc&&(n=new RegExp("^"+v+"$(?!\\s)",d)),Zs&&(r=c.lastIndex),o=Xs.call(h?n:c,g),h?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:Zs&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),tc&&o&&o.length>1&&Js.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=Vs(null),i=0;i<p.length;i++)a[(s=p[i])[0]]=o[s[1]];return o});var ec=Hs;An({target:"RegExp",proto:!0,forced:/./.exec!==ec},{exec:ec});var nc=An,rc=T,oc=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),ic=/./.test;nc({target:"RegExp",proto:!0,forced:!oc},{test:function(t){if("function"!=typeof this.exec)return ic.call(this,t);var e=this.exec(t);if(null!==e&&!rc(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var ac={},sc=S,cc=Pe.f,uc={}.toString,fc="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ac.f=function(t){return fc&&"[object Window]"==uc.call(t)?function(t){try{return cc(t)}catch(t){return fc.slice()}}(t):cc(sc(t))};var lc={},pc=ht;lc.f=pc;var hc=o,dc=tt,vc=lc,yc=Nt.f,gc=function(t){var e=hc.Symbol||(hc.Symbol={});dc(e,t)||yc(e,t,{value:vc.f(t)})},mc=An,bc=o,wc=A,xc=s,kc=B,Sc=a,Tc=tt,Ec=lo,Oc=T,Ac=W,Rc=Bt,_c=H,Cc=S,Pc=xt,Ic=ei,jc=d,Mc=er,Lc=Bn,Nc=Pe,Dc=ac,Bc=en,Fc=i,Uc=Nt,Wc=c,zc=Kt,Gc=Yt.exports,$c=G.exports,Vc=se,Kc=rt,Yc=ht,qc=lc,Xc=gc,Jc=Pn,Hc=ke,Zc=Ci.forEach,Qc=ae("hidden"),tu="Symbol",eu=Yc("toPrimitive"),nu=Hc.set,ru=Hc.getterFor(tu),ou=Object.prototype,iu=bc.Symbol,au=wc("JSON","stringify"),su=Fc.f,cu=Uc.f,uu=Dc.f,fu=Wc.f,lu=$c("symbols"),pu=$c("op-symbols"),hu=$c("string-to-symbol-registry"),du=$c("symbol-to-string-registry"),vu=$c("wks"),yu=bc.QObject,gu=!yu||!yu.prototype||!yu.prototype.findChild,mu=xc&&Sc((function(){return 7!=Mc(cu({},"a",{get:function(){return cu(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=su(ou,e);r&&delete ou[e],cu(t,e,n),r&&t!==ou&&cu(ou,e,r)}:cu,bu=function(t,e){var n=lu[t]=Mc(iu.prototype);return nu(n,{type:tu,tag:t,description:e}),xc||(n.description=e),n},wu=function(t,e,n){t===ou&&wu(pu,e,n),Rc(t);var r=Pc(e);return Rc(n),Tc(lu,r)?(n.enumerable?(Tc(t,Qc)&&t[Qc][r]&&(t[Qc][r]=!1),n=Mc(n,{enumerable:jc(0,!1)})):(Tc(t,Qc)||cu(t,Qc,jc(1,{})),t[Qc][r]=!0),mu(t,r,n)):cu(t,r,n)},xu=function(t,e){Rc(t);var n=Cc(e),r=Lc(n).concat(Eu(n));return Zc(r,(function(e){xc&&!ku.call(n,e)||wu(t,e,n[e])})),t},ku=function(t){var e=Pc(t),n=fu.call(this,e);return!(this===ou&&Tc(lu,e)&&!Tc(pu,e))&&(!(n||!Tc(this,e)||!Tc(lu,e)||Tc(this,Qc)&&this[Qc][e])||n)},Su=function(t,e){var n=Cc(t),r=Pc(e);if(n!==ou||!Tc(lu,r)||Tc(pu,r)){var o=su(n,r);return!o||!Tc(lu,r)||Tc(n,Qc)&&n[Qc][r]||(o.enumerable=!0),o}},Tu=function(t){var e=uu(Cc(t)),n=[];return Zc(e,(function(t){Tc(lu,t)||Tc(Vc,t)||n.push(t)})),n},Eu=function(t){var e=t===ou,n=uu(e?pu:Cc(t)),r=[];return Zc(n,(function(t){!Tc(lu,t)||e&&!Tc(ou,t)||r.push(lu[t])})),r};(kc||(iu=function(){if(this instanceof iu)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Ic(arguments[0]):void 0,e=Kc(t),n=function(t){this===ou&&n.call(pu,t),Tc(this,Qc)&&Tc(this[Qc],e)&&(this[Qc][e]=!1),mu(this,e,jc(1,t))};return xc&&gu&&mu(ou,e,{configurable:!0,set:n}),bu(e,t)},Gc(iu.prototype,"toString",(function(){return ru(this).tag})),Gc(iu,"withoutSetter",(function(t){return bu(Kc(t),t)})),Wc.f=ku,Uc.f=wu,Fc.f=Su,Nc.f=Dc.f=Tu,Bc.f=Eu,qc.f=function(t){return bu(Yc(t),t)},xc&&(cu(iu.prototype,"description",{configurable:!0,get:function(){return ru(this).description}}),Gc(ou,"propertyIsEnumerable",ku,{unsafe:!0}))),mc({global:!0,wrap:!0,forced:!kc,sham:!kc},{Symbol:iu}),Zc(Lc(vu),(function(t){Xc(t)})),mc({target:tu,stat:!0,forced:!kc},{for:function(t){var e=Ic(t);if(Tc(hu,e))return hu[e];var n=iu(e);return hu[e]=n,du[n]=e,n},keyFor:function(t){if(!Ac(t))throw TypeError(t+" is not a symbol");if(Tc(du,t))return du[t]},useSetter:function(){gu=!0},useSimple:function(){gu=!1}}),mc({target:"Object",stat:!0,forced:!kc,sham:!xc},{create:function(t,e){return void 0===e?Mc(t):xu(Mc(t),e)},defineProperty:wu,defineProperties:xu,getOwnPropertyDescriptor:Su}),mc({target:"Object",stat:!0,forced:!kc},{getOwnPropertyNames:Tu,getOwnPropertySymbols:Eu}),mc({target:"Object",stat:!0,forced:Sc((function(){Bc.f(1)}))},{getOwnPropertySymbols:function(t){return Bc.f(_c(t))}}),au)&&mc({target:"JSON",stat:!0,forced:!kc||Sc((function(){var t=iu();return"[null]"!=au([t])||"{}"!=au({a:t})||"{}"!=au(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(Oc(e)||void 0!==t)&&!Ac(t))return Ec(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ac(e))return e}),o[1]=e,au.apply(null,o)}});iu.prototype[eu]||zc(iu.prototype,eu,iu.prototype.valueOf),Jc(iu,tu),Vc[Qc]=!0;var Ou=An,Au=s,Ru=o,_u=tt,Cu=T,Pu=Nt.f,Iu=ln,ju=Ru.Symbol;if(Au&&"function"==typeof ju&&(!("description"in ju.prototype)||void 0!==ju().description)){var Mu={},Lu=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Lu?new ju(t):void 0===t?ju():ju(t);return""===t&&(Mu[e]=!0),e};Iu(Lu,ju);var Nu=Lu.prototype=ju.prototype;Nu.constructor=Lu;var Du=Nu.toString,Bu="Symbol(test)"==String(ju("test")),Fu=/^Symbol\((.*)\)[^)]+$/;Pu(Nu,"description",{configurable:!0,get:function(){var t=Cu(this)?this.valueOf():this,e=Du.call(t);if(_u(Mu,t))return"";var n=Bu?e.slice(7,-1):e.replace(Fu,"$1");return""===n?void 0:n}}),Ou({global:!0,forced:!0},{Symbol:Lu})}gc("iterator");var Uu=er,Wu=Nt,zu=ht("unscopables"),Gu=Array.prototype;null==Gu[zu]&&Wu.f(Gu,zu,{configurable:!0,value:Uu(null)});var $u=function(t){Gu[zu][t]=!0},Vu=S,Ku=$u,Yu=ra,qu=ke,Xu=ks,Ju="Array Iterator",Hu=qu.set,Zu=qu.getterFor(Ju),Qu=Xu(Array,"Array",(function(t,e){Hu(this,{type:Ju,target:Vu(t),index:0,kind:e})}),(function(){var t=Zu(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Yu.Arguments=Yu.Array,Ku("keys"),Ku("values"),Ku("entries");var tf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ef=Et("span").classList,nf=ef&&ef.constructor&&ef.constructor.prototype,rf=nf===Object.prototype?void 0:nf,of=o,af=tf,sf=rf,cf=Qu,uf=Kt,ff=ht,lf=ff("iterator"),pf=ff("toStringTag"),hf=cf.values,df=function(t,e){if(t){if(t[lf]!==hf)try{uf(t,lf,hf)}catch(e){t[lf]=hf}if(t[pf]||uf(t,pf,e),af[e])for(var n in cf)if(t[n]!==cf[n])try{uf(t,n,cf[n])}catch(e){t[n]=cf[n]}}};for(var vf in af)df(of[vf]&&of[vf].prototype,vf);df(sf,"DOMTokenList");var yf={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(yf);var gf=s,mf=Nt.f,bf=Function.prototype,wf=bf.toString,xf=/^\s*function ([^ (]*)/,kf="name";gf&&!(kf in bf)&&mf(bf,kf,{configurable:!0,get:function(){try{return wf.call(this).match(xf)[1]}catch(t){return""}}});var Sf,Tf={exports:{}},Ef={exports:{}};(Sf=Ef).exports=function(t){if(Array.isArray(t))return t},Sf.exports.__esModule=!0,Sf.exports.default=Sf.exports;var Of={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports}(Of);var Af={exports:{}},Rf={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports}(Rf),function(t){var e=Rf.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}(Af);var _f={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(_f),function(t){var e=Ef.exports,n=Of.exports,r=Af.exports,o=_f.exports;t.exports=function(t,i){return e(t)||n(t,i)||r(t,i)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}(Tf);var Cf={exports:{}},Pf={exports:{}};!function(t){var e=Rf.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Pf);var If={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(If);var jf={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}(jf),function(t){var e=Pf.exports,n=If.exports,r=Af.exports,o=jf.exports;t.exports=function(t){return e(t)||n(t)||r(t)||o()},t.exports.__esModule=!0,t.exports.default=t.exports}(Cf);var Mf={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(Mf);var Lf={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(Lf);var Nf={exports:{}},Df={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Df),function(t){var e=Df.exports;t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)},t.exports.__esModule=!0,t.exports.default=t.exports}(Nf);var Bf={exports:{}},Ff={exports:{}};!function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}(Ff),function(t){var e=yf.exports.default,n=Ff.exports;t.exports=function(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return n(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(Bf);var Uf={exports:{}};!function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(Uf);var Wf=Ke.includes,zf=$u;An({target:"Array",proto:!0},{includes:function(t){return Wf(this,t,arguments.length>1?arguments[1]:void 0)}}),zf("includes");var Gf,$f,Vf,Kf,Yf=o.Promise,qf=Yt.exports,Xf=function(t,e,n){for(var r in e)qf(t,r,e[r],n);return t},Jf=A,Hf=Nt,Zf=s,Qf=ht("species"),tl=function(t){var e=Jf(t),n=Hf.f;Zf&&e&&!e[Qf]&&n(e,Qf,{configurable:!0,get:function(){return this}})},el=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},nl=Bt,rl=sa,ol=De,il=ki,al=da,sl=la,cl=ta,ul=function(t,e){this.stopped=t,this.result=e},fl=function(t,e,n){var r,o,i,a,s,c,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),d=il(e,f,1+l+h),v=function(t){return r&&cl(r,"normal",t),new ul(!0,t)},y=function(t){return l?(nl(t),h?d(t[0],t[1],v):d(t[0],t[1])):h?d(t,v):d(t)};if(p)r=t;else{if("function"!=typeof(o=sl(t)))throw TypeError("Target is not iterable");if(rl(o)){for(i=0,a=ol(t.length);a>i;i++)if((s=y(t[i]))&&s instanceof ul)return s;return new ul(!1)}r=al(t,o)}for(c=r.next;!(u=c.call(r)).done;){try{s=y(u.value)}catch(t){cl(r,"throw",t)}if("object"==typeof s&&s&&s instanceof ul)return s}return new ul(!1)},ll=Bt,pl=Ln,hl=ht("species"),dl=function(t,e){var n,r=ll(t).constructor;return void 0===r||null==(n=ll(r)[hl])?e:pl(n)},vl=/(?:ipad|iphone|ipod).*applewebkit/i.test(R),yl="process"==y(o.process),gl=o,ml=a,bl=ki,wl=Gn,xl=Et,kl=vl,Sl=yl,Tl=gl.setImmediate,El=gl.clearImmediate,Ol=gl.process,Al=gl.MessageChannel,Rl=gl.Dispatch,_l=0,Cl={},Pl="onreadystatechange";try{Gf=gl.location}catch(t){}var Il=function(t){if(Cl.hasOwnProperty(t)){var e=Cl[t];delete Cl[t],e()}},jl=function(t){return function(){Il(t)}},Ml=function(t){Il(t.data)},Ll=function(t){gl.postMessage(String(t),Gf.protocol+"//"+Gf.host)};Tl&&El||(Tl=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return Cl[++_l]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$f(_l),_l},El=function(t){delete Cl[t]},Sl?$f=function(t){Ol.nextTick(jl(t))}:Rl&&Rl.now?$f=function(t){Rl.now(jl(t))}:Al&&!kl?(Kf=(Vf=new Al).port2,Vf.port1.onmessage=Ml,$f=bl(Kf.postMessage,Kf,1)):gl.addEventListener&&"function"==typeof postMessage&&!gl.importScripts&&Gf&&"file:"!==Gf.protocol&&!ml(Ll)?($f=Ll,gl.addEventListener("message",Ml,!1)):$f=Pl in xl("script")?function(t){wl.appendChild(xl("script")).onreadystatechange=function(){wl.removeChild(this),Il(t)}}:function(t){setTimeout(jl(t),0)});var Nl,Dl,Bl,Fl,Ul,Wl,zl,Gl,$l={set:Tl,clear:El},Vl=o,Kl=/ipad|iphone|ipod/i.test(R)&&void 0!==Vl.Pebble,Yl=/web0s(?!.*chrome)/i.test(R),ql=o,Xl=i.f,Jl=$l.set,Hl=vl,Zl=Kl,Ql=Yl,tp=yl,ep=ql.MutationObserver||ql.WebKitMutationObserver,np=ql.document,rp=ql.process,op=ql.Promise,ip=Xl(ql,"queueMicrotask"),ap=ip&&ip.value;ap||(Nl=function(){var t,e;for(tp&&(t=rp.domain)&&t.exit();Dl;){e=Dl.fn,Dl=Dl.next;try{e()}catch(t){throw Dl?Fl():Bl=void 0,t}}Bl=void 0,t&&t.enter()},Hl||tp||Ql||!ep||!np?!Zl&&op&&op.resolve?((zl=op.resolve(void 0)).constructor=op,Gl=zl.then,Fl=function(){Gl.call(zl,Nl)}):Fl=tp?function(){rp.nextTick(Nl)}:function(){Jl.call(ql,Nl)}:(Ul=!0,Wl=np.createTextNode(""),new ep(Nl).observe(Wl,{characterData:!0}),Fl=function(){Wl.data=Ul=!Ul}));var sp=ap||function(t){var e={fn:t,next:void 0};Bl&&(Bl.next=e),Dl||(Dl=e,Fl()),Bl=e},cp={},up=Ln,fp=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=up(e),this.reject=up(n)};cp.f=function(t){return new fp(t)};var lp,pp,hp,dp,vp=Bt,yp=T,gp=cp,mp=o,bp="object"==typeof window,wp=An,xp=o,kp=A,Sp=Yf,Tp=Yt.exports,Ep=Xf,Op=as,Ap=Pn,Rp=tl,_p=T,Cp=Ln,Pp=el,Ip=Qt,jp=fl,Mp=Aa,Lp=dl,Np=$l.set,Dp=sp,Bp=function(t,e){if(vp(t),yp(e)&&e.constructor===t)return e;var n=gp.f(t);return(0,n.resolve)(e),n.promise},Fp=function(t,e){var n=mp.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},Up=cp,Wp=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},zp=ke,Gp=bn,$p=bp,Vp=yl,Kp=L,Yp=ht("species"),qp="Promise",Xp=zp.get,Jp=zp.set,Hp=zp.getterFor(qp),Zp=Sp&&Sp.prototype,Qp=Sp,th=Zp,eh=xp.TypeError,nh=xp.document,rh=xp.process,oh=Up.f,ih=oh,ah=!!(nh&&nh.createEvent&&xp.dispatchEvent),sh="function"==typeof PromiseRejectionEvent,ch="unhandledrejection",uh=!1,fh=Gp(qp,(function(){var t=Ip(Qp),e=t!==String(Qp);if(!e&&66===Kp)return!0;if(Kp>=51&&/native code/.test(t))return!1;var n=new Qp((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[Yp]=r,!(uh=n.then((function(){}))instanceof r)||!e&&$p&&!sh})),lh=fh||!Mp((function(t){Qp.all(t).catch((function(){}))})),ph=function(t){var e;return!(!_p(t)||"function"!=typeof(e=t.then))&&e},hh=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Dp((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],f=o?u.ok:u.fail,l=u.resolve,p=u.reject,h=u.domain;try{f?(o||(2===t.rejection&&gh(t),t.rejection=1),!0===f?a=r:(h&&h.enter(),a=f(r),h&&(h.exit(),c=!0)),a===u.promise?p(eh("Promise-chain cycle")):(s=ph(a))?s.call(a,l,p):l(a)):p(r)}catch(t){h&&!c&&h.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&vh(t)}))}},dh=function(t,e,n){var r,o;ah?((r=nh.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),xp.dispatchEvent(r)):r={promise:e,reason:n},!sh&&(o=xp["on"+t])?o(r):t===ch&&Fp("Unhandled promise rejection",n)},vh=function(t){Np.call(xp,(function(){var e,n=t.facade,r=t.value;if(yh(t)&&(e=Wp((function(){Vp?rh.emit("unhandledRejection",r,n):dh(ch,n,r)})),t.rejection=Vp||yh(t)?2:1,e.error))throw e.value}))},yh=function(t){return 1!==t.rejection&&!t.parent},gh=function(t){Np.call(xp,(function(){var e=t.facade;Vp?rh.emit("rejectionHandled",e):dh("rejectionhandled",e,t.value)}))},mh=function(t,e,n){return function(r){t(e,r,n)}},bh=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,hh(t,!0))},wh=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw eh("Promise can't be resolved itself");var r=ph(e);r?Dp((function(){var n={done:!1};try{r.call(e,mh(wh,n,t),mh(bh,n,t))}catch(e){bh(n,e,t)}})):(t.value=e,t.state=1,hh(t,!1))}catch(e){bh({done:!1},e,t)}}};if(fh&&(th=(Qp=function(t){Pp(this,Qp,qp),Cp(t),lp.call(this);var e=Xp(this);try{t(mh(wh,e),mh(bh,e))}catch(t){bh(e,t)}}).prototype,(lp=function(t){Jp(this,{type:qp,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ep(th,{then:function(t,e){var n=Hp(this),r=oh(Lp(this,Qp));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Vp?rh.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&hh(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),pp=function(){var t=new lp,e=Xp(t);this.promise=t,this.resolve=mh(wh,e),this.reject=mh(bh,e)},Up.f=oh=function(t){return t===Qp||t===hp?new pp(t):ih(t)},"function"==typeof Sp&&Zp!==Object.prototype)){dp=Zp.then,uh||(Tp(Zp,"then",(function(t,e){var n=this;return new Qp((function(t,e){dp.call(n,t,e)})).then(t,e)}),{unsafe:!0}),Tp(Zp,"catch",th.catch,{unsafe:!0}));try{delete Zp.constructor}catch(t){}Op&&Op(Zp,th)}wp({global:!0,wrap:!0,forced:fh},{Promise:Qp}),Ap(Qp,qp,!1),Rp(qp),hp=kp(qp),wp({target:qp,stat:!0,forced:fh},{reject:function(t){var e=oh(this);return e.reject.call(void 0,t),e.promise}}),wp({target:qp,stat:!0,forced:fh},{resolve:function(t){return Bp(this,t)}}),wp({target:qp,stat:!0,forced:lh},{all:function(t){var e=this,n=oh(e),r=n.resolve,o=n.reject,i=Wp((function(){var n=Cp(e.resolve),i=[],a=0,s=1;jp(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=oh(e),r=n.reject,o=Wp((function(){var o=Cp(e.resolve);jp(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var xh=T,kh=Math.floor,Sh=function(t){return!xh(t)&&isFinite(t)&&kh(t)===t};An({target:"Number",stat:!0},{isInteger:Sh});var Th=T,Eh=as,Oh=function(t,e,n){var r,o;return Eh&&"function"==typeof(r=e.constructor)&&r!==n&&Th(o=r.prototype)&&o!==n.prototype&&Eh(t,o),t},Ah=w,Rh=ei,_h="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Ch=RegExp("^"+_h+_h+"*"),Ph=RegExp(_h+_h+"*$"),Ih=function(t){return function(e){var n=Rh(Ah(e));return 1&t&&(n=n.replace(Ch,"")),2&t&&(n=n.replace(Ph,"")),n}},jh={start:Ih(1),end:Ih(2),trim:Ih(3)},Mh=s,Lh=o,Nh=bn,Dh=Yt.exports,Bh=tt,Fh=y,Uh=Oh,Wh=W,zh=mt,Gh=a,$h=er,Vh=Pe.f,Kh=i.f,Yh=Nt.f,qh=jh.trim,Xh="Number",Jh=Lh.Number,Hh=Jh.prototype,Zh=Fh($h(Hh))==Xh,Qh=function(t){if(Wh(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,o,i,a,s,c,u=zh(t,"number");if("string"==typeof u&&u.length>2)if(43===(e=(u=qh(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(Nh(Xh,!Jh(" 0o1")||!Jh("0b1")||Jh("+0x1"))){for(var td,ed=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof ed&&(Zh?Gh((function(){Hh.valueOf.call(n)})):Fh(n)!=Xh)?Uh(new Jh(Qh(e)),n,ed):Qh(e)},nd=Mh?Vh(Jh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),rd=0;nd.length>rd;rd++)Bh(Jh,td=nd[rd])&&!Bh(ed,td)&&Yh(ed,td,Kh(Jh,td));ed.prototype=Hh,Hh.constructor=ed,Dh(Lh,Xh,ed)}var od=s,id=Bn,ad=S,sd=c.f,cd=function(t){return function(e){for(var n,r=ad(e),o=id(r),i=o.length,a=0,s=[];i>a;)n=o[a++],od&&!sd.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},ud={entries:cd(!0),values:cd(!1)}.entries;An({target:"Object",stat:!0},{entries:function(t){return ud(t)}}),Object.defineProperty(Ui,"__esModule",{value:!0});var fd=Tf.exports,ld=Cf.exports,pd=Mf.exports,hd=Lf.exports,dd=Nf.exports,vd=Bf.exports,yd=Uf.exports;function gd(t){return t&&"object"===Ar(t)&&"default"in t?t:{default:t}}var md=gd(yf.exports),bd=gd(fd),wd=gd(ld),xd=gd(pd),kd=gd(hd),Sd=gd(dd),Td=gd(vd),Ed=gd(yd),Od=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{checks:e}};function Ad(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Rd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Rd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var _d=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Od((function(t){var n,r=!1,o=[],i=Ad(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"string"!=typeof a?(r=r||t instanceof a,o.push("an instance of ".concat(a.name))):(r=r||md.default(t)===a,o.push("of type ".concat(a)))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};function Cd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Pd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Pd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Id(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ed.default(t);if(e){var o=Ed.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Td.default(this,n)}}function jd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Md(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Md(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Md(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ld=function(t,e){if(e.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(e.length));for(;e.length<t.length;)e.push(void 0);var n,r=jd(e.entries());try{for(r.s();!(n=r.n()).done;){var o=bd.default(n.value,2),i=o[0],a=o[1],s=Fd(t[i],a),c=bd.default(s,4),u=c[0],f=c[1],l=c[2],p=c[3];if(!u)throw new Error("Argument ".concat(i+1," is expected to be ").concat(l).concat(p," but got ").concat(f))}}catch(t){r.e(t)}finally{r.f()}},Nd=function(t){var e,n,r;(["undefined","boolean","number","bigint","string"].includes(md.default(t))&&(n="string"==typeof t?'"'.concat(t,'"'):"".concat(t)),"object"===md.default(t)&&"Object"!==(null==t||null===(e=t.constructor)||void 0===e?void 0:e.name))&&(n=null===t?"null":"instance of ".concat(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name));return n||(n=md.default(t)),n},Dd=function(t){var e,n=[],r=jd(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(Bd(o))}}catch(t){r.e(t)}finally{r.f()}return n},Bd=function(t){var e,n=[],r=jd(Array.isArray(t)?t:[t]);try{for(r.s();!(e=r.n()).done;){var o=e.value;"string"!=typeof o&&"function"!=typeof o?n.push(o):n.push(_d(o))}}catch(t){r.e(t)}finally{r.f()}return n},Fd=function(t,e){var n,r,o=[],i=!1,a=jd(t);try{for(a.s();!(r=a.n()).done;){var s,c=jd(r.value.checks);try{for(c.s();!(s=c.n()).done;){var u=(0,s.value)(e),f=bd.default(u,3),l=f[0],p=f[1],h=f[2];i=i||l,!n&&h&&(n=h),p&&(o=[].concat(wd.default(o),"string"==typeof p?[p]:wd.default(p)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}if(i)return[!0];var d=n||Nd(e),v=o.length-1;return[!1,d,v>0?"".concat(o.slice(0,v).join(", ")," or ").concat(o[v]):o.join(", "),v>1?";":","]};function Ud(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Wd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Wd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zd=Od((function(t){return["string"==typeof t&&t.length>0,"a non-empty string"]})),Gd=Od((function(t){return["number"==typeof t&&Number.isInteger(t)&&t>=0,"a non-negative integer"]})),$d=Od((function(t){return["object"===md.default(t)&&null!==t&&!Array.isArray(t),"a pure object (non-null and non-array)"]}));function Vd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Kd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kd(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Kd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Ui.array=function(t,e){return Od((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(t)];var r,o=Vd(n.entries());try{for(o.s();!(r=o.n()).done;){var i=bd.default(r.value,2),a=i[0],s=i[1],c=Fd(Bd(e),s),u=bd.default(c,3),f=u[0],l=u[1],p=u[2];if(!f)return[!1,"a valid array of ".concat(t," (index ").concat(a," should be ").concat(p,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))},Ui.custom=Od;var Yd=Ui.literal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Od((function(t){var n,r=!1,o=[],i=Cd(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||t===a,o.push("string"==typeof a?'"'.concat(a,'"'):"".concat(a))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};Ui.nonEmptyArray=function(t,e){return Od((function(n){if(!Array.isArray(n)||n.length<1)return[!1,"a non-empty array of ".concat(t)];var r,o=Ud(n.entries());try{for(o.s();!(r=o.n()).done;){var i=bd.default(r.value,2),a=i[0],s=i[1],c=Fd(Bd(e),s),u=bd.default(c,3),f=u[0],l=u[1],p=u[2];if(!f)return[!1,"a valid non-empty array of ".concat(t," (index ").concat(a," should be ").concat(p,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))};var qd=Ui.nonEmptyString=zd;Ui.nonNegativeInteger=Gd,Ui.objectSchema=function(t,e){return Od((function(n){if("object"!==md.default(n)||null===n||Array.isArray(n))return[!1,"valid ".concat(t," (should be a pure object)")];for(var r=0,o=Object.entries(e);r<o.length;r++){var i=bd.default(o[r],2),a=i[0],s=i[1],c=Fd(Bd(s),n[a]),u=bd.default(c,3),f=u[0],l=u[1],p=u[2];if(!f)return[!1,"valid ".concat(t,' (key "').concat(a,'" should be ').concat(p,")"),"malformed ".concat(t,' (key "').concat(a,'" is ').concat(l,")")]}return[!0]}))};var Xd=Ui.pureObject=$d;Ui.runtimeTypeValidation=Ld,Ui.stringifyReceivedType=Nd,Ui.type=_d;var Jd=Ui.validateConstructorTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dd(e);return function(t){return function(t){Sd.default(n,t);var e=Id(n);function n(){kd.default(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return Ld(r,o),e.call.apply(e,[this].concat(o))}return xd.default(n)}(t)}};Ui.validateTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dd(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ld(r,e),o.apply(this,e)}}},Ui.validateTypesAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Dd(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{Ld(r,e)}catch(t){return Promise.reject(t)}return o.apply(this,e)}}};var Hd={exports:{}};!function(t){var e,r;e=n,r=function(){var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":Ar(window))!==e&&Ar(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":Ar(console))!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function c(t,n,r){return function(){("undefined"==typeof console?"undefined":Ar(console))!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function u(t,e,n){return a(t)||c.apply(this,arguments)}function f(t,n,o){var i,a=this;n=null==n?"WARN":n;var c="loglevel";function f(){var t;if(("undefined"==typeof window?"undefined":Ar(window))!==e&&c){try{t=window.localStorage[c]}catch(t){}if(Ar(t)===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?c+=":"+t:"symbol"===Ar(t)&&(c=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||u,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":Ar(window))!==e&&c){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),("undefined"==typeof console?"undefined":Ar(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,f()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(("undefined"==typeof window?"undefined":Ar(window))!==e&&c){try{return void window.localStorage.removeItem(c)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var l=f();null==l&&(l=n),a.setLevel(l,!1)}var l=new f,p={};l.getLogger=function(t){if("symbol"!==Ar(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=p[t];return e||(e=p[t]=new f(t,l.getLevel(),l.methodFactory)),e};var h=("undefined"==typeof window?"undefined":Ar(window))!==e?window.log:void 0;return l.noConflict=function(){return("undefined"==typeof window?"undefined":Ar(window))!==e&&window.log===l&&(window.log=h),l},l.getLoggers=function(){return p},l.default=l,l},t.exports?t.exports=r():e.log=r()}(Hd);var Zd=Hd.exports.getLogger("twilsock");function Qd(t,e){return["".concat((new Date).toISOString()," Twilsock ").concat(t,":")].concat(Array.from(e))}var tv=function(){function t(e){Pr(this,t),Ir(this,"prefix",""),this.prefix=null!=e&&e.length>0?" "+e+":":""}return Cr(t,[{key:"setLevel",value:function(t){Zd.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.trace.apply(null,Qd("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.debug.apply(null,Qd("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.info.apply(null,Qd("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.warn.apply(null,Qd("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.error.apply(null,Qd("E",e))}}],[{key:"setLevel",value:function(t){Zd.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.trace.apply(null,Qd("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.debug.apply(null,Qd("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.info.apply(null,Qd("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.warn.apply(null,Qd("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Zd.error.apply(null,Qd("E",e))}}]),t}(),ev=new tv(""),nv={exports:{}},rv=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),ov=An,iv=se,av=T,sv=tt,cv=Nt.f,uv=Pe,fv=ac,lv=rv,pv=!1,hv=rt("meta"),dv=0,vv=Object.isExtensible||function(){return!0},yv=function(t){cv(t,hv,{value:{objectID:"O"+dv++,weakData:{}}})},gv=nv.exports={enable:function(){gv.enable=function(){},pv=!0;var t=uv.f,e=[].splice,n={};n[hv]=1,t(n).length&&(uv.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===hv){e.call(r,o,1);break}return r},ov({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:fv.f}))},fastKey:function(t,e){if(!av(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!sv(t,hv)){if(!vv(t))return"F";if(!e)return"E";yv(t)}return t[hv].objectID},getWeakData:function(t,e){if(!sv(t,hv)){if(!vv(t))return!0;if(!e)return!1;yv(t)}return t[hv].weakData},onFreeze:function(t){return lv&&pv&&vv(t)&&!sv(t,hv)&&yv(t),t}};iv[hv]=!0;var mv=An,bv=o,wv=bn,xv=Yt.exports,kv=nv.exports,Sv=fl,Tv=el,Ev=T,Ov=a,Av=Aa,Rv=Pn,_v=Oh,Cv=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",a=bv[t],s=a&&a.prototype,c=a,u={},f=function(t){var e=s[t];xv(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!Ev(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Ev(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Ev(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(wv(t,"function"!=typeof a||!(o||s.forEach&&!Ov((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,i),kv.enable();else if(wv(t,!0)){var l=new c,p=l[i](o?{}:-0,1)!=l,h=Ov((function(){l.has(1)})),d=Av((function(t){new a(t)})),v=!o&&Ov((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));d||((c=e((function(e,n){Tv(e,c,t);var o=_v(new a,e,c);return null!=n&&Sv(n,o[i],{that:o,AS_ENTRIES:r}),o}))).prototype=s,s.constructor=c),(h||v)&&(f("delete"),f("has"),r&&f("get")),(v||p)&&f(i),o&&s.clear&&delete s.clear}return u[t]=c,mv({global:!0,forced:c!=a},u),Rv(c,t),o||n.setStrong(c,t,r),c},Pv=Nt.f,Iv=er,jv=Xf,Mv=ki,Lv=el,Nv=fl,Dv=ks,Bv=tl,Fv=s,Uv=nv.exports.fastKey,Wv=ke.set,zv=ke.getterFor,Gv={getConstructor:function(t,e,n,r){var o=t((function(t,i){Lv(t,o,e),Wv(t,{type:e,index:Iv(null),first:void 0,last:void 0,size:0}),Fv||(t.size=0),null!=i&&Nv(i,t[r],{that:t,AS_ENTRIES:n})})),i=zv(e),a=function(t,e,n){var r,o,a=i(t),c=s(t,e);return c?c.value=n:(a.last=c={index:o=Uv(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),Fv?a.size++:t.size++,"F"!==o&&(a.index[o]=c)),t},s=function(t,e){var n,r=i(t),o=Uv(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return jv(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,Fv?t.size=0:this.size=0},delete:function(t){var e=this,n=i(e),r=s(e,t);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),Fv?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=i(this),r=Mv(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),jv(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),Fv&&Pv(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=zv(e),i=zv(r);Dv(t,e,(function(t,e){Wv(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Bv(e)}};Cv("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Gv);var $v="0.13.5",Vv=function(){function t(e,n,r){Pr(this,t),Ir(this,"confirmedCapabilities",new Set),this.activeGrant=n,this._token=e;var o=r.region||"us1",i="wss://tsock.".concat(o,".twilio.com/v3/wsconnect"),a=r.twilsock||r.Twilsock||{};this.url=a.uri||i,this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver=$v,this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return Cr(t,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(t){this._token=t}},{key:"updateContinuationToken",value:function(t){this._continuationToken=t}}]),t}(),Kv={exports:{}};!function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,r,o;for(n=1;n<arguments.length;n++)for(o in r=arguments[n])r.hasOwnProperty(o)&&(t[o]=r[o]);return t}},function(t,e,n){var r=n(0);t.exports={build:function(t,e){var n,o,i,a=e.plugins;for(n=0,o=a.length;n<o;n++)(i=a[n]).methods&&r(t,i.methods),i.properties&&Object.defineProperties(t,i.properties)},hook:function(t,e,n){var r,o,i,a,s=t.config.plugins,c=[t.context];for(n&&(c=c.concat(n)),r=0,o=s.length;r<o;r++)a=s[r],(i=s[r][e])&&i.apply(a,c)}}},function(t,e,n){function r(t){if(0===t.length)return t;var e,n,r=t.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return t;for(n=r[0].toLowerCase(),e=1;e<r.length;e++)n=n+r[e].charAt(0).toUpperCase()+r[e].substring(1).toLowerCase();return n}r.prepended=function(t,e){return t+(e=r(e))[0].toUpperCase()+e.substring(1)},t.exports=r},function(t,e,n){var r=n(0),o=n(2);function i(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}r(i.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=o.prepended("onEnter",t),this.lifecycle.onLeave[t]=o.prepended("onLeave",t),this.lifecycle.on[t]=o.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=o.prepended("onBefore",t),this.lifecycle.onAfter[t]=o.prepended("onAfter",t),this.lifecycle.on[t]=o.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,r=t.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(r({},this.defaults.init,{to:t,active:!0})):"object"===Ar(t)?this.mapTransition(r({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===Ar(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,r,o;for(n=0,r=(t=t||[]).length;n<r;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,r,o,i,a=this.defaults.wildcard;for(n=0;n<t.length;n++)for(r=t[n],o=Array.isArray(r.from)?r.from:[r.from||a],i=r.to||a,e=0;e<o.length;e++)this.mapTransition({name:r.name,from:o[e],to:i})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=i},function(t,e,n){var r=n(0),o=n(6),i=n(1),a=[null,[]];function s(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}r(s.prototype,{init:function(t){if(r(this.context,this.config.data.apply(this.context,t)),i.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,t),o=r&&r.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,r){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),i?this.observersForEvent(o.onLeave.state):a,i?this.observersForEvent(o.onLeave[e]):a,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:a,i?this.observersForEvent(o.onEnter.state):a,i?this.observersForEvent(o.onEnter[n]):a,i?this.observersForEvent(o.on[n]):a,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],r)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,r=this.observers.length,o=[];n<r;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,r){if(0===t.length)return this.endTransit(void 0===r||r);var o=t[0][0],a=t[0][1],s=t[0][2];if(e[0].event=o,o&&s&&o!==n&&i.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,o,r);var c=a.shift(),u=c[o].apply(c,e);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(t,e,o,u)},onInvalidTransition:function(t,e,n){throw new o("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new o("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=s},function(t,e,n){var r=n(0),o=n(2),i=n(1),a=n(3),s=n(4),c={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function f(t){return l(this||{},t)}function l(t,e){return p(t,new a(e,f)),t._fsm(),t}function p(t,e){if("object"!==Ar(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");i.build(t,e),Object.defineProperties(t,u),r(t,c),r(t,e.methods),e.allTransitions().forEach((function(e){t[o(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}})),t._fsm=function(){this._fsm=new s(this,e),this._fsm.init(arguments)}}f.version="3.0.1",f.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new a(e,f);return p(t.prototype,n),t.prototype._fsm.config=n,t},f.apply=l,f.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=f},function(t,e,n){t.exports=function(t,e,n,r,o){this.message=t,this.transition=e,this.from=n,this.to=r,this.current=o}}])},t.exports=n()}(Kv);var Yv={exports:{}},qv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(qv){var Xv=new Uint8Array(16);Yv.exports=function(){return qv(Xv),Xv}}else{var Jv=new Array(16);Yv.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),Jv[e]=t>>>((3&e)<<3)&255;return Jv}}for(var Hv=[],Zv=0;Zv<256;++Zv)Hv[Zv]=(Zv+256).toString(16).substr(1);var Qv,ty,ey=function(t,e){var n=e||0,r=Hv;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},ny=Yv.exports,ry=ey,oy=0,iy=0;var ay=function(t,e,n){var r=e&&n||0,o=e||[],i=(t=t||{}).node||Qv,a=void 0!==t.clockseq?t.clockseq:ty;if(null==i||null==a){var s=ny();null==i&&(i=Qv=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=ty=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:iy+1,f=c-oy+(u-iy)/1e4;if(f<0&&void 0===t.clockseq&&(a=a+1&16383),(f<0||c>oy)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");oy=c,iy=u,ty=a;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var p=c/4294967296*1e4&268435455;o[r++]=p>>>8&255,o[r++]=255&p,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var h=0;h<6;++h)o[r+h]=i[h];return e||ry(o)},sy=Yv.exports,cy=ey;var uy=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||sy)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||cy(o)},fy=ay,ly=uy,py=ly;py.v1=fy,py.v4=ly;var hy=py,dy=Cr((function t(e){Pr(this,t),this.id=e||"TM".concat(hy.v4())}));function vy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var yy=function(t){Or(n,t);var e=vy(n);function n(t,r,o,i,a){var s;return Pr(this,n),Ir(xr(s=e.call(this)),"method","init"),s.token=t,s.continuation_token=r,s.metadata=o,s.registrations=i,s.tweaks=a,s.capabilities=["client_update","offline_storage","telemetry.v1"],s}return Cr(n)}(dy);function gy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var my=function(t){Or(n,t);var e=gy(n);function n(t,r,o,i,a,s,c){var u;return Pr(this,n),(u=e.call(this,t)).continuationToken=r,u.continuationTokenStatus=i,u.offlineStorage=a,u.initRegistrations=s,u.debugInfo=c,u.confirmedCapabilities=o,u}return Cr(n)}(dy);function by(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var wy=function(t){Or(n,t);var e=by(n);function n(t){var r;return Pr(this,n),Ir(xr(r=e.call(this)),"method","update"),r.token=t,r}return Cr(n)}(dy);function xy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var ky=function(t){Or(n,t);var e=xy(n);function n(t,r,o){var i;return Pr(this,n),Ir(xr(i=e.call(this)),"method","message"),i.active_grant=t,i.payload_type=r,i.http_request=o,i}return Cr(n)}(dy);function Sy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var Ty=function(t){Or(n,t);var e=Sy(n);function n(t){var r;return Pr(this,n),Ir(xr(r=e.call(this,t)),"method","reply"),Ir(xr(r),"payload_type","application/json"),Ir(xr(r),"status",{code:200,status:"OK"}),r}return Cr(n)}(dy);function Ey(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var Oy=function(t){Or(n,t);var e=Ey(n);function n(){var t;return Pr(this,n),Ir(xr(t=e.call(this)),"method","close"),t}return Cr(n)}(dy);function Ay(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var Ry=Cr((function t(e,n,r,o,i,a){Pr(this,t),this.start=e,this.end=n,this.title=r,this.details=o,this.id=i,this.type=a})),_y=function(t){Or(n,t);var e=Ay(n);function n(t){var r;return Pr(this,n),Ir(xr(r=e.call(this)),"method","telemetry.v1"),r.events=t,r}return Cr(n)}(dy),Cy=Yt.exports,Py=ec,Iy=a,jy=ht,My=Kt,Ly=jy("species"),Ny=RegExp.prototype,Dy=function(t,e,n,r){var o=jy(t),i=!Iy((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!Iy((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ly]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var s=/./[o],c=e(o,""[t],(function(t,e,n,r,o){var a=e.exec;return a===Py||a===Ny.exec?i&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));Cy(String.prototype,t,c[0]),Cy(Ny,o,c[1])}r&&My(Ny[o],"sham",!0)},By=Na.charAt,Fy=function(t,e,n){return e+(n?By(t,e).length:1)},Uy=H,Wy=Math.floor,zy="".replace,Gy=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,$y=/\$([$&'`]|\d{1,2})/g,Vy=y,Ky=ec,Yy=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Vy(t))throw TypeError("RegExp#exec called on incompatible receiver");return Ky.call(t,e)},qy=Dy,Xy=a,Jy=Bt,Hy=Me,Zy=De,Qy=ei,tg=w,eg=Fy,ng=function(t,e,n,r,o,i){var a=n+t.length,s=r.length,c=$y;return void 0!==o&&(o=Uy(o),c=Gy),zy.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[c.slice(1,-1)];break;default:var f=+c;if(0===f)return i;if(f>s){var l=Wy(f/10);return 0===l?i:l<=s?void 0===r[l-1]?c.charAt(1):r[l-1]+c.charAt(1):i}u=r[f-1]}return void 0===u?"":u}))},rg=Yy,og=ht("replace"),ig=Math.max,ag=Math.min,sg="$0"==="a".replace(/./,"$0"),cg=!!/./[og]&&""===/./[og]("a","$0"),ug=!Xy((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));qy("replace",(function(t,e,n){var r=cg?"$":"$0";return[function(t,n){var r=tg(this),o=null==t?void 0:t[og];return void 0!==o?o.call(t,r,n):e.call(Qy(r),t,n)},function(t,o){var i=Jy(this),a=Qy(t);if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(e,i,a,o);if(s.done)return s.value}var c="function"==typeof o;c||(o=Qy(o));var u=i.global;if(u){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var p=rg(i,a);if(null===p)break;if(l.push(p),!u)break;""===Qy(p[0])&&(i.lastIndex=eg(a,Zy(i.lastIndex),f))}for(var h,d="",v=0,y=0;y<l.length;y++){p=l[y];for(var g=Qy(p[0]),m=ig(ag(Hy(p.index),a.length),0),b=[],w=1;w<p.length;w++)b.push(void 0===(h=p[w])?h:String(h));var x=p.groups;if(c){var k=[g].concat(b,m,a);void 0!==x&&k.push(x);var S=Qy(o.apply(void 0,k))}else S=ng(g,a,m,b,x,o);m>=v&&(d+=a.slice(v,m)+S,v=m+g.length)}return d+a.slice(v)}]}),!ug||!sg||cg);var fg,lg,pg,hg={exports:{}},dg="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,vg=dg,yg=s,gg=o,mg=T,bg=tt,wg=qo,xg=Kt,kg=Yt.exports,Sg=Nt.f,Tg=Ga,Eg=as,Og=ht,Ag=rt,Rg=gg.Int8Array,_g=Rg&&Rg.prototype,Cg=gg.Uint8ClampedArray,Pg=Cg&&Cg.prototype,Ig=Rg&&Tg(Rg),jg=_g&&Tg(_g),Mg=Object.prototype,Lg=Mg.isPrototypeOf,Ng=Og("toStringTag"),Dg=Ag("TYPED_ARRAY_TAG"),Bg=Ag("TYPED_ARRAY_CONSTRUCTOR"),Fg=vg&&!!Eg&&"Opera"!==wg(gg.opera),Ug=!1,Wg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},zg={BigInt64Array:8,BigUint64Array:8},Gg=function(t){if(!mg(t))return!1;var e=wg(t);return bg(Wg,e)||bg(zg,e)};for(fg in Wg)(pg=(lg=gg[fg])&&lg.prototype)?xg(pg,Bg,lg):Fg=!1;for(fg in zg)(pg=(lg=gg[fg])&&lg.prototype)&&xg(pg,Bg,lg);if((!Fg||"function"!=typeof Ig||Ig===Function.prototype)&&(Ig=function(){throw TypeError("Incorrect invocation")},Fg))for(fg in Wg)gg[fg]&&Eg(gg[fg],Ig);if((!Fg||!jg||jg===Mg)&&(jg=Ig.prototype,Fg))for(fg in Wg)gg[fg]&&Eg(gg[fg].prototype,jg);if(Fg&&Tg(Pg)!==jg&&Eg(Pg,jg),yg&&!bg(jg,Ng))for(fg in Ug=!0,Sg(jg,Ng,{get:function(){return mg(this)?this[Dg]:void 0}}),Wg)gg[fg]&&xg(gg[fg],Dg,fg);var $g={NATIVE_ARRAY_BUFFER_VIEWS:Fg,TYPED_ARRAY_CONSTRUCTOR:Bg,TYPED_ARRAY_TAG:Ug&&Dg,aTypedArray:function(t){if(Gg(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(Eg&&!Lg.call(Ig,t))throw TypeError("Target is not a typed array constructor");return t},exportTypedArrayMethod:function(t,e,n){if(yg){if(n)for(var r in Wg){var o=gg[r];if(o&&bg(o.prototype,t))try{delete o.prototype[t]}catch(t){}}jg[t]&&!n||kg(jg,t,n?e:Fg&&_g[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(yg){if(Eg){if(n)for(r in Wg)if((o=gg[r])&&bg(o,t))try{delete o[t]}catch(t){}if(Ig[t]&&!n)return;try{return kg(Ig,t,n?e:Fg&&Ig[t]||e)}catch(t){}}for(r in Wg)!(o=gg[r])||o[t]&&!n||kg(o,t,e)}},isView:function(t){if(!mg(t))return!1;var e=wg(t);return"DataView"===e||bg(Wg,e)||bg(zg,e)},isTypedArray:Gg,TypedArray:Ig,TypedArrayPrototype:jg},Vg=o,Kg=a,Yg=Aa,qg=$g.NATIVE_ARRAY_BUFFER_VIEWS,Xg=Vg.ArrayBuffer,Jg=Vg.Int8Array,Hg=!qg||!Kg((function(){Jg(1)}))||!Kg((function(){new Jg(-1)}))||!Yg((function(t){new Jg,new Jg(null),new Jg(1.5),new Jg(t)}),!0)||Kg((function(){return 1!==new Jg(new Xg(2),1,void 0).length})),Zg=Me,Qg=De,tm=function(t){if(void 0===t)return 0;var e=Zg(t),n=Qg(e);if(e!==n)throw RangeError("Wrong length or index");return n},em=Math.abs,nm=Math.pow,rm=Math.floor,om=Math.log,im=Math.LN2,am=H,sm=We,cm=De,um=function(t){for(var e=am(this),n=cm(e.length),r=arguments.length,o=sm(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,a=void 0===i?n:sm(i,n);a>o;)e[o++]=t;return e},fm=o,lm=s,pm=dg,hm=Kt,dm=Xf,vm=a,ym=el,gm=Me,mm=De,bm=tm,wm={pack:function(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,f=23===e?nm(2,-24)-nm(2,-77):0,l=t<0||0===t&&1/t<0?1:0,p=0;for((t=em(t))!=t||t===1/0?(o=t!=t?1:0,r=c):(r=rm(om(t)/im),t*(i=nm(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?f/i:f*nm(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*nm(2,e),r+=u):(o=t*nm(2,u-1)*nm(2,e),r=0));e>=8;a[p++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[p++]=255&r,r/=256,s-=8);return a[--p]|=128*l,a},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=r-1,u=t[c--],f=127&u;for(u>>=7;s>0;f=256*f+t[c],c--,s-=8);for(n=f&(1<<-s)-1,f>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===f)f=1-a;else{if(f===i)return n?NaN:u?-1/0:1/0;n+=nm(2,e),f-=a}return(u?-1:1)*n*nm(2,f-e)}},xm=Ga,km=as,Sm=Pe.f,Tm=Nt.f,Em=um,Om=Pn,Am=ke.get,Rm=ke.set,_m="ArrayBuffer",Cm="DataView",Pm="Wrong index",Im=fm.ArrayBuffer,jm=Im,Mm=fm.DataView,Lm=Mm&&Mm.prototype,Nm=Object.prototype,Dm=fm.RangeError,Bm=wm.pack,Fm=wm.unpack,Um=function(t){return[255&t]},Wm=function(t){return[255&t,t>>8&255]},zm=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Gm=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},$m=function(t){return Bm(t,23,4)},Vm=function(t){return Bm(t,52,8)},Km=function(t,e){Tm(t.prototype,e,{get:function(){return Am(this)[e]}})},Ym=function(t,e,n,r){var o=bm(n),i=Am(t);if(o+e>i.byteLength)throw Dm(Pm);var a=Am(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},qm=function(t,e,n,r,o,i){var a=bm(n),s=Am(t);if(a+e>s.byteLength)throw Dm(Pm);for(var c=Am(s.buffer).bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(pm){if(!vm((function(){Im(1)}))||!vm((function(){new Im(-1)}))||vm((function(){return new Im,new Im(1.5),new Im(NaN),Im.name!=_m}))){for(var Xm,Jm=(jm=function(t){return ym(this,jm),new Im(bm(t))}).prototype=Im.prototype,Hm=Sm(Im),Zm=0;Hm.length>Zm;)(Xm=Hm[Zm++])in jm||hm(jm,Xm,Im[Xm]);Jm.constructor=jm}km&&xm(Lm)!==Nm&&km(Lm,Nm);var Qm=new Mm(new jm(2)),tb=Lm.setInt8;Qm.setInt8(0,2147483648),Qm.setInt8(1,2147483649),!Qm.getInt8(0)&&Qm.getInt8(1)||dm(Lm,{setInt8:function(t,e){tb.call(this,t,e<<24>>24)},setUint8:function(t,e){tb.call(this,t,e<<24>>24)}},{unsafe:!0})}else jm=function(t){ym(this,jm,_m);var e=bm(t);Rm(this,{bytes:Em.call(new Array(e),0),byteLength:e}),lm||(this.byteLength=e)},Mm=function(t,e,n){ym(this,Mm,Cm),ym(t,jm,Cm);var r=Am(t).byteLength,o=gm(e);if(o<0||o>r)throw Dm("Wrong offset");if(o+(n=void 0===n?r-o:mm(n))>r)throw Dm("Wrong length");Rm(this,{buffer:t,byteLength:n,byteOffset:o}),lm||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},lm&&(Km(jm,"byteLength"),Km(Mm,"buffer"),Km(Mm,"byteLength"),Km(Mm,"byteOffset")),dm(Mm.prototype,{getInt8:function(t){return Ym(this,1,t)[0]<<24>>24},getUint8:function(t){return Ym(this,1,t)[0]},getInt16:function(t){var e=Ym(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Ym(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Gm(Ym(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Gm(Ym(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Fm(Ym(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Fm(Ym(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){qm(this,1,t,Um,e)},setUint8:function(t,e){qm(this,1,t,Um,e)},setInt16:function(t,e){qm(this,2,t,Wm,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){qm(this,2,t,Wm,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){qm(this,4,t,zm,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){qm(this,4,t,zm,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){qm(this,4,t,$m,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){qm(this,8,t,Vm,e,arguments.length>2?arguments[2]:void 0)}});Om(jm,_m),Om(Mm,Cm);var eb=Me,nb=function(t){var e=eb(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},rb=function(t,e){var n=nb(t);if(n%e)throw RangeError("Wrong offset");return n},ob=H,ib=De,ab=da,sb=la,cb=sa,ub=ki,fb=$g.aTypedArrayConstructor,lb=An,pb=o,hb=s,db=Hg,vb=$g,yb={ArrayBuffer:jm,DataView:Mm},gb=el,mb=d,bb=Kt,wb=Sh,xb=De,kb=tm,Sb=rb,Tb=xt,Eb=tt,Ob=qo,Ab=T,Rb=W,_b=er,Cb=as,Pb=Pe.f,Ib=function(t){var e,n,r,o,i,a,s=ob(t),c=arguments.length,u=c>1?arguments[1]:void 0,f=void 0!==u,l=sb(s);if(null!=l&&!cb(l))for(a=(i=ab(s,l)).next,s=[];!(o=a.call(i)).done;)s.push(o.value);for(f&&c>2&&(u=ub(u,arguments[2],2)),n=ib(s.length),r=new(fb(this))(n),e=0;n>e;e++)r[e]=f?u(s[e],e):s[e];return r},jb=Ci.forEach,Mb=tl,Lb=Nt,Nb=i,Db=Oh,Bb=ke.get,Fb=ke.set,Ub=Lb.f,Wb=Nb.f,zb=Math.round,Gb=pb.RangeError,$b=yb.ArrayBuffer,Vb=yb.DataView,Kb=vb.NATIVE_ARRAY_BUFFER_VIEWS,Yb=vb.TYPED_ARRAY_CONSTRUCTOR,qb=vb.TYPED_ARRAY_TAG,Xb=vb.TypedArray,Jb=vb.TypedArrayPrototype,Hb=vb.aTypedArrayConstructor,Zb=vb.isTypedArray,Qb="BYTES_PER_ELEMENT",tw="Wrong length",ew=function(t,e){for(var n=0,r=e.length,o=new(Hb(t))(r);r>n;)o[n]=e[n++];return o},nw=function(t,e){Ub(t,e,{get:function(){return Bb(this)[e]}})},rw=function(t){var e;return t instanceof $b||"ArrayBuffer"==(e=Ob(t))||"SharedArrayBuffer"==e},ow=function(t,e){return Zb(t)&&!Rb(e)&&e in t&&wb(+e)&&e>=0},iw=function(t,e){return e=Tb(e),ow(t,e)?mb(2,t[e]):Wb(t,e)},aw=function(t,e,n){return e=Tb(e),!(ow(t,e)&&Ab(n)&&Eb(n,"value"))||Eb(n,"get")||Eb(n,"set")||n.configurable||Eb(n,"writable")&&!n.writable||Eb(n,"enumerable")&&!n.enumerable?Ub(t,e,n):(t[e]=n.value,t)};hb?(Kb||(Nb.f=iw,Lb.f=aw,nw(Jb,"buffer"),nw(Jb,"byteOffset"),nw(Jb,"byteLength"),nw(Jb,"length")),lb({target:"Object",stat:!0,forced:!Kb},{getOwnPropertyDescriptor:iw,defineProperty:aw}),hg.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,o=t+(n?"Clamped":"")+"Array",i="get"+t,a="set"+t,s=pb[o],c=s,u=c&&c.prototype,f={},l=function(t,e){Ub(t,e,{get:function(){return function(t,e){var n=Bb(t);return n.view[i](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,o){var i=Bb(t);n&&(o=(o=zb(o))<0?0:o>255?255:255&o),i.view[a](e*r+i.byteOffset,o,!0)}(this,e,t)},enumerable:!0})};Kb?db&&(c=e((function(t,e,n,i){return gb(t,c,o),Db(Ab(e)?rw(e)?void 0!==i?new s(e,Sb(n,r),i):void 0!==n?new s(e,Sb(n,r)):new s(e):Zb(e)?ew(c,e):Ib.call(c,e):new s(kb(e)),t,c)})),Cb&&Cb(c,Xb),jb(Pb(s),(function(t){t in c||bb(c,t,s[t])})),c.prototype=u):(c=e((function(t,e,n,i){gb(t,c,o);var a,s,u,f=0,p=0;if(Ab(e)){if(!rw(e))return Zb(e)?ew(c,e):Ib.call(c,e);a=e,p=Sb(n,r);var h=e.byteLength;if(void 0===i){if(h%r)throw Gb(tw);if((s=h-p)<0)throw Gb(tw)}else if((s=xb(i)*r)+p>h)throw Gb(tw);u=s/r}else u=kb(e),a=new $b(s=u*r);for(Fb(t,{buffer:a,byteOffset:p,byteLength:s,length:u,view:new Vb(a)});f<u;)l(t,f++)})),Cb&&Cb(c,Xb),u=c.prototype=_b(Jb)),u.constructor!==c&&bb(u,"constructor",c),bb(u,Yb,c),qb&&bb(u,qb,o),f[o]=c,lb({global:!0,forced:c!=s,sham:!Kb},f),Qb in c||bb(c,Qb,r),Qb in u||bb(u,Qb,r),Mb(o)}):hg.exports=function(){},(0,hg.exports)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var sw=De,cw=Me,uw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("at",(function(t){var e=uw(this),n=sw(e.length),r=cw(t),o=r>=0?r:n+r;return o<0||o>=n?void 0:e[o]}));var fw=H,lw=We,pw=De,hw=Math.min,dw=[].copyWithin||function(t,e){var n=fw(this),r=pw(n.length),o=lw(t,r),i=lw(e,r),a=arguments.length>2?arguments[2]:void 0,s=hw((void 0===a?r:lw(a,r))-i,r-o),c=1;for(i<o&&o<i+s&&(c=-1,i+=s-1,o+=s-1);s-- >0;)i in n?n[o]=n[i]:delete n[o],o+=c,i+=c;return n},vw=dw,yw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("copyWithin",(function(t,e){return vw.call(yw(this),t,e,arguments.length>2?arguments[2]:void 0)}));var gw=Ci.every,mw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("every",(function(t){return gw(mw(this),t,arguments.length>1?arguments[1]:void 0)}));var bw=um,ww=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("fill",(function(t){return bw.apply(ww(this),arguments)}));var xw=dl,kw=$g.TYPED_ARRAY_CONSTRUCTOR,Sw=$g.aTypedArrayConstructor,Tw=function(t){return Sw(xw(t,t[kw]))},Ew=function(t,e){for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},Ow=Tw,Aw=Ci.filter,Rw=function(t,e){return Ew(Ow(t),e)},_w=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("filter",(function(t){var e=Aw(_w(this),t,arguments.length>1?arguments[1]:void 0);return Rw(this,e)}));var Cw=Ci.find,Pw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("find",(function(t){return Cw(Pw(this),t,arguments.length>1?arguments[1]:void 0)}));var Iw=Ci.findIndex,jw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("findIndex",(function(t){return Iw(jw(this),t,arguments.length>1?arguments[1]:void 0)}));var Mw=Ci.forEach,Lw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("forEach",(function(t){Mw(Lw(this),t,arguments.length>1?arguments[1]:void 0)}));var Nw=Ke.includes,Dw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("includes",(function(t){return Nw(Dw(this),t,arguments.length>1?arguments[1]:void 0)}));var Bw=Ke.indexOf,Fw=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("indexOf",(function(t){return Bw(Fw(this),t,arguments.length>1?arguments[1]:void 0)}));var Uw=o,Ww=$g,zw=Qu,Gw=ht("iterator"),$w=Uw.Uint8Array,Vw=zw.values,Kw=zw.keys,Yw=zw.entries,qw=Ww.aTypedArray,Xw=Ww.exportTypedArrayMethod,Jw=$w&&$w.prototype[Gw],Hw=!!Jw&&("values"==Jw.name||null==Jw.name),Zw=function(){return Vw.call(qw(this))};Xw("entries",(function(){return Yw.call(qw(this))})),Xw("keys",(function(){return Kw.call(qw(this))})),Xw("values",Zw,!Hw),Xw(Gw,Zw,!Hw);var Qw=$g.aTypedArray,tx=[].join;(0,$g.exportTypedArrayMethod)("join",(function(t){return tx.apply(Qw(this),arguments)}));var ex=S,nx=Me,rx=De,ox=vi,ix=Math.min,ax=[].lastIndexOf,sx=!!ax&&1/[1].lastIndexOf(1,-0)<0,cx=ox("lastIndexOf"),ux=sx||!cx?function(t){if(sx)return ax.apply(this,arguments)||0;var e=ex(this),n=rx(e.length),r=n-1;for(arguments.length>1&&(r=ix(r,nx(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:ax,fx=ux,lx=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("lastIndexOf",(function(t){return fx.apply(lx(this),arguments)}));var px=Ci.map,hx=Tw,dx=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("map",(function(t){return px(dx(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(hx(t))(e)}))}));var vx=Ln,yx=H,gx=b,mx=De,bx=function(t){return function(e,n,r,o){vx(n);var i=yx(e),a=gx(i),s=mx(i.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},wx={left:bx(!1),right:bx(!0)},xx=wx.left,kx=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("reduce",(function(t){return xx(kx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Sx=wx.right,Tx=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("reduceRight",(function(t){return Sx(Tx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Ex=$g.aTypedArray,Ox=$g.exportTypedArrayMethod,Ax=Math.floor;Ox("reverse",(function(){for(var t,e=this,n=Ex(e).length,r=Ax(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}));var Rx=De,_x=rb,Cx=H,Px=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("set",(function(t){Px(this);var e=_x(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=Cx(t),o=Rx(r.length),i=0;if(o+e>n)throw RangeError("Wrong length");for(;i<o;)this[e+i]=r[i++]}),a((function(){new Int8Array(1).set({})})));var Ix=Tw,jx=$g.aTypedArray,Mx=[].slice;(0,$g.exportTypedArrayMethod)("slice",(function(t,e){for(var n=Mx.call(jx(this),t,e),r=Ix(this),o=0,i=n.length,a=new r(i);i>o;)a[o]=n[o++];return a}),a((function(){new Int8Array(1).slice()})));var Lx=Ci.some,Nx=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("some",(function(t){return Lx(Nx(this),t,arguments.length>1?arguments[1]:void 0)}));var Dx=Math.floor,Bx=function(t,e){var n=t.length,r=Dx(n/2);return n<8?Fx(t,e):Ux(Bx(t.slice(0,r),e),Bx(t.slice(r),e),e)},Fx=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},Ux=function(t,e,n){for(var r=t.length,o=e.length,i=0,a=0,s=[];i<r||a<o;)i<r&&a<o?s.push(n(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<r?t[i++]:e[a++]);return s},Wx=Bx,zx=R.match(/firefox\/(\d+)/i),Gx=!!zx&&+zx[1],$x=/MSIE|Trident/.test(R),Vx=R.match(/AppleWebKit\/(\d+)\./),Kx=!!Vx&&+Vx[1],Yx=a,qx=Ln,Xx=De,Jx=Wx,Hx=Gx,Zx=$x,Qx=L,tk=Kx,ek=$g.aTypedArray,nk=$g.exportTypedArrayMethod,rk=o.Uint16Array,ok=rk&&rk.prototype.sort,ik=!!ok&&!Yx((function(){var t=new rk(2);t.sort(null),t.sort({})})),ak=!!ok&&!Yx((function(){if(Qx)return Qx<74;if(Hx)return Hx<67;if(Zx)return!0;if(tk)return tk<602;var t,e,n=new rk(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));nk("sort",(function(t){var e=this;if(void 0!==t&&qx(t),ak)return ok.call(e,t);ek(e);var n,r=Xx(e.length),o=Array(r);for(n=0;n<r;n++)o[n]=e[n];for(o=Jx(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=o[n];return e}),!ak||ik);var sk=De,ck=We,uk=Tw,fk=$g.aTypedArray;(0,$g.exportTypedArrayMethod)("subarray",(function(t,e){var n=fk(this),r=n.length,o=ck(t,r);return new(uk(n))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,sk((void 0===e?r:ck(e,r))-o))}));var lk=$g,pk=a,hk=o.Int8Array,dk=lk.aTypedArray,vk=lk.exportTypedArrayMethod,yk=[].toLocaleString,gk=[].slice,mk=!!hk&&pk((function(){yk.call(new hk(1))}));vk("toLocaleString",(function(){return yk.apply(mk?gk.call(dk(this)):dk(this),arguments)}),pk((function(){return[1,2].toLocaleString()!=new hk([1,2]).toLocaleString()}))||!pk((function(){hk.prototype.toLocaleString.call([1,2])})));var bk=$g.exportTypedArrayMethod,wk=a,xk=o.Uint8Array,kk=xk&&xk.prototype||{},Sk=[].toString,Tk=[].join;wk((function(){Sk.call({})}))&&(Sk=function(){return Tk.call(this)});var Ek=kk.toString!=Sk;bk("toString",Sk,Ek);var Ok=T,Ak=y,Rk=ht("match"),_k=Dy,Ck=function(t){var e;return Ok(t)&&(void 0!==(e=t[Rk])?!!e:"RegExp"==Ak(t))},Pk=Bt,Ik=w,jk=dl,Mk=Fy,Lk=De,Nk=ei,Dk=Yy,Bk=ec,Fk=a,Uk=Cs.UNSUPPORTED_Y,Wk=[].push,zk=Math.min,Gk=4294967295,$k=!Fk((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));function Vk(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})).length}function Kk(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})),n=new Uint8Array(e.length);return Array.prototype.forEach.call(e,(function(t,e){n[e]=t.charCodeAt(0)})),n}function Yk(t){var e=Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join("").replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function qk(t){return JSON.parse(Yk(t))}_k("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=Nk(Ik(this)),o=void 0===n?Gk:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Ck(t))return e.call(r,t,o);for(var i,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,u+"g");(i=Bk.call(l,r))&&!((a=l.lastIndex)>f&&(c.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&Wk.apply(c,i.slice(1)),s=i[0].length,f=a,c.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!s&&l.test("")||c.push(""):c.push(r.slice(f)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=Ik(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(Nk(o),e,n)},function(t,o){var i=Pk(this),a=Nk(t),s=n(r,i,a,o,r!==e);if(s.done)return s.value;var c=jk(i,RegExp),u=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Uk?"g":"y"),l=new c(Uk?"^(?:"+i.source+")":i,f),p=void 0===o?Gk:o>>>0;if(0===p)return[];if(0===a.length)return null===Dk(l,a)?[a]:[];for(var h=0,d=0,v=[];d<a.length;){l.lastIndex=Uk?0:d;var y,g=Dk(l,Uk?a.slice(d):a);if(null===g||(y=zk(Lk(l.lastIndex+(Uk?d:0)),a.length))===h)d=Mk(a,d,u);else{if(v.push(a.slice(h,d)),v.length===p)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===p)return v;d=h=y}}return v.push(a.slice(h)),v}]}),!$k,Uk);var Xk=function(){function t(){Pr(this,t)}return Cr(t,null,[{key:"parse",value:function(t){var e,n,r=new Uint8Array(t),o=function(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var o=e.split(" ");return{size:n,protocol:o[0],version:o[1],headerSize:Number(o[2])}}(r);if("TWILSOCK"!==o.protocol||"V3.0"!==o.version)return ev.error("unsupported protocol: ".concat(o.protocol," ver ").concat(o.version)),null;try{e=qk(r.subarray(o.size,o.size+o.headerSize))}catch(e){return ev.error("failed to parse message header",e,t),null}if(ev.debug("message received: ",e.method),ev.trace("message received: ",e),e.payload_size>0){var i=2+o.size+o.headerSize,a=e.payload_size;if(e.hasOwnProperty("payload_type")&&0!==e.payload_type.indexOf("application/json"))0===e.payload_type.indexOf("text/plain")&&(n=Yk(r.subarray(i,i+a)));else try{n=qk(r.subarray(i,i+a))}catch(e){return ev.error("failed to parse message body",e,t),null}}return{method:e.method,header:e,payload:n}}},{key:"createPacket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.payload_size=Vk(e);var n=JSON.stringify(t),r="TWILSOCK V3.0 "+Vk(n);ev.debug("send request:",r+n+e);var o=Kk(r+"\r\n"+n+"\r\n"+e);return o.buffer}}]),t}();function Jk(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Hk(t,e,n){return Hk=Jk()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&Er(o,n.prototype),o},Hk.apply(null,arguments)}function Zk(t){var e="function"==typeof Map?new Map:void 0;return Zk=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Hk(t,arguments,kr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Er(r,t)},Zk(t)}function Qk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var tS=function(t){Or(n,t);var e=Qk(n);function n(t){return Pr(this,n),e.call(this,t)}return Cr(n)}(Zk(Error));function eS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var nS=function(t){Or(n,t);var e=eS(n);function n(t,r){var o;return Pr(this,n),(o=e.call(this,t)).reply=r,o}return Cr(n)}(tS),rS=H,oS=Bn;An({target:"Object",stat:!0,forced:a((function(){oS(1)}))},{keys:function(t){return oS(rS(t))}});var iS=Ci.filter;An({target:"Array",proto:!0,forced:!Eo("filter")},{filter:function(t){return iS(this,t,arguments.length>1?arguments[1]:void 0)}});var aS=An,sS=a,cS=S,uS=i.f,fS=s,lS=sS((function(){uS(1)}));aS({target:"Object",stat:!0,forced:!fS||lS,sham:!fS},{getOwnPropertyDescriptor:function(t,e){return uS(cS(t),e)}});var pS=Ci.forEach,hS=vi("forEach")?[].forEach:function(t){return pS(this,t,arguments.length>1?arguments[1]:void 0)},dS=o,vS=tf,yS=rf,gS=hS,mS=Kt,bS=function(t){if(t&&t.forEach!==gS)try{mS(t,"forEach",gS)}catch(e){t.forEach=gS}};for(var wS in vS)bS(dS[wS]&&dS[wS].prototype);bS(yS);var xS=an,kS=S,SS=i,TS=yo;An({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,r=kS(t),o=SS.f,i=xS(r),a={},s=0;i.length>s;)void 0!==(n=o(r,e=i[s++]))&&TS(a,e,n);return a}});var ES={},OS={exports:{}};!function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports}(OS),Object.defineProperty(ES,"__esModule",{value:!0});var AS=Mf.exports,RS=Ff.exports,_S=Nf.exports,CS=Bf.exports,PS=Uf.exports,IS=OS.exports;function jS(t){return t&&"object"===Ar(t)&&"default"in t?t:{default:t}}var MS=jS(Lf.exports),LS=jS(AS),NS=jS(RS),DS=jS(_S),BS=jS(CS),FS=jS(PS),US=jS(IS);function WS(){}function zS(){zS.init.call(this)}function GS(t){return void 0===t._maxListeners?zS.defaultMaxListeners:t._maxListeners}function $S(t,e,n){if(e)t.call(n);else for(var r=t.length,o=ZS(t,r),i=0;i<r;++i)o[i].call(n)}function VS(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=ZS(t,o),a=0;a<o;++a)i[a].call(n,r)}function KS(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=ZS(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function YS(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=ZS(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function qS(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=ZS(t,o),a=0;a<o;++a)i[a].apply(n,r)}function XS(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new WS,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=GS(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function JS(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function HS(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function ZS(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function QS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=FS.default(t);if(e){var o=FS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return BS.default(this,n)}}WS.prototype=Object.create(null),zS.EventEmitter=zS,zS.usingDomains=!1,zS.prototype.domain=void 0,zS.prototype._events=void 0,zS.prototype._maxListeners=void 0,zS.defaultMaxListeners=10,zS.init=function(){this.domain=null,zS.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new WS,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},zS.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},zS.prototype.getMaxListeners=function(){return GS(this)},zS.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:$S(n,f,this);break;case 2:VS(n,f,this,arguments[1]);break;case 3:KS(n,f,this,arguments[1],arguments[2]);break;case 4:YS(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];qS(n,f,this,o)}return!0},zS.prototype.addListener=function(t,e){return XS(this,t,e,!1)},zS.prototype.on=zS.prototype.addListener,zS.prototype.prependListener=function(t,e){return XS(this,t,e,!0)},zS.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,JS(this,t,e)),this},zS.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,JS(this,t,e)),this},zS.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new WS:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new WS,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},zS.prototype.off=function(t,e){return this.removeListener(t,e)},zS.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new WS,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new WS:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new WS,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},zS.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},zS.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):HS.call(t,e)},zS.prototype.listenerCount=HS,zS.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var tT=function(t){DS.default(n,t);var e=QS(n);function n(t){var r;return MS.default(this,n),r=e.call(this),US.default(NS.default(r),"timeout",null),US.default(NS.default(r),"startTimestamp",-1),r.minDelay=t.min,r.maxDelay=t.max,r.initialDelay=t.initial||0,r.maxAttemptsCount=t.maxAttemptsCount||0,r.maxAttemptsTime=t.maxAttemptsTime||0,r.randomness=t.randomness||0,r.inProgress=!1,r.attemptNum=0,r.prevDelay=0,r.currDelay=0,r}return LS.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var e=this.currDelay+this.prevDelay;return this.maxDelay&&e>this.maxDelay&&(this.currDelay=this.maxDelay,e=this.maxDelay),this.currDelay=e,e}},{key:"randomize",value:function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)}},{key:"scheduleAttempt",value:function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var n=this.nextDelay(t);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return e.attempt()}),n)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(t){this.emit("succeeded",t)}},{key:"failed",value:function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)}}]),n}(zS),eT=function(t){DS.default(n,t);var e=QS(n);function n(t){var r;return MS.default(this,n),r=e.call(this),US.default(NS.default(r),"resolve",(function(){})),US.default(NS.default(r),"reject",(function(){})),r.retrier=new tT(t),r}return LS.default(n,[{key:"run",value:function(t){var e=this;return this.retrier.on("attempt",(function(){t().then((function(t){return e.retrier.succeeded(t)})).catch((function(t){return e.retrier.failed(t)}))})),this.retrier.on("succeeded",(function(t){return e.resolve(t)})),this.retrier.on("cancelled",(function(){return e.reject(new Error("Cancelled"))})),this.retrier.on("failed",(function(t){return e.reject(t)})),new Promise((function(t,n){e.resolve=t,e.reject=n,e.retrier.start()}))}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(zS);function nT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=FS.default(t);if(e){var o=FS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return BS.default(this,n)}}function rT(t){return null!=t}var oT=function(t){DS.default(n,t);var e=nT(n);function n(t){var r;MS.default(this,n),r=e.call(this),US.default(NS.default(r),"backoffDelay",0),US.default(NS.default(r),"nextBackoffDelay",0),US.default(NS.default(r),"backoffNumber",0),US.default(NS.default(r),"timeoutID",null),US.default(NS.default(r),"maxNumberOfRetry",-1);var o=t=t||{},i=o.initialDelay,a=o.maxDelay,s=o.randomisationFactor,c=o.factor;if(rT(i)&&i<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(rT(a)&&a<=1)throw new Error("The maximal timeout must be greater than 1.");if(rT(s)&&(s<0||s>1))throw new Error("The randomisation factor must be between 0 and 1.");if(rT(c)&&c<=1)throw new Error("Exponential factor should be greater than 1.");if(r.initialDelay=i||100,r.maxDelay=a||1e4,r.maxDelay<=r.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return r.randomisationFactor=s||0,r.factor=c||2,r.reset(),r}return LS.default(n,[{key:"backoff",value:function(t){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",t),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,t)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(t){if(t<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(t));this.maxNumberOfRetry=t}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var t=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*t))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(t){return new n(t)}}]),n}(zS);ES.AsyncRetrier=eT,ES.Backoff=oT;var iT=ES.Retrier=tT,aT={},sT={exports:{}},cT={exports:{}};!function(t){var e=Uf.exports;t.exports=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=e(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports}(cT),function(t){var e=cT.exports;function n(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=n=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=n=function(t,n,r){var o=e(t,n);if(o){var i=Object.getOwnPropertyDescriptor(o,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},t.exports.__esModule=!0,t.exports.default=t.exports),n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(sT),Object.defineProperty(aT,"__esModule",{value:!0});var uT=Lf.exports,fT=Mf.exports,lT=Ff.exports,pT=sT.exports,hT=Nf.exports,dT=Bf.exports,vT=Uf.exports,yT=OS.exports;function gT(t){return t&&"object"===Ar(t)&&"default"in t?t:{default:t}}var mT=gT(Cf.exports),bT=gT(uT),wT=gT(fT),xT=gT(lT),kT=gT(pT),ST=gT(hT),TT=gT(dT),ET=gT(vT),OT=gT(yT);function AT(){}function RT(){RT.init.call(this)}function _T(t){return void 0===t._maxListeners?RT.defaultMaxListeners:t._maxListeners}function CT(t,e,n){if(e)t.call(n);else for(var r=t.length,o=BT(t,r),i=0;i<r;++i)o[i].call(n)}function PT(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=BT(t,o),a=0;a<o;++a)i[a].call(n,r)}function IT(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=BT(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function jT(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=BT(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function MT(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=BT(t,o),a=0;a<o;++a)i[a].apply(n,r)}function LT(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new AT,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=_T(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function NT(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function DT(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function BT(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function FT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ET.default(t);if(e){var o=ET.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return TT.default(this,n)}}AT.prototype=Object.create(null),RT.EventEmitter=RT,RT.usingDomains=!1,RT.prototype.domain=void 0,RT.prototype._events=void 0,RT.prototype._maxListeners=void 0,RT.defaultMaxListeners=10,RT.init=function(){this.domain=null,RT.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new AT,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},RT.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},RT.prototype.getMaxListeners=function(){return _T(this)},RT.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:CT(n,f,this);break;case 2:PT(n,f,this,arguments[1]);break;case 3:IT(n,f,this,arguments[1],arguments[2]);break;case 4:jT(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];MT(n,f,this,o)}return!0},RT.prototype.addListener=function(t,e){return LT(this,t,e,!1)},RT.prototype.on=RT.prototype.addListener,RT.prototype.prependListener=function(t,e){return LT(this,t,e,!0)},RT.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,NT(this,t,e)),this},RT.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,NT(this,t,e)),this},RT.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new AT:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new AT,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},RT.prototype.off=function(t,e){return this.removeListener(t,e)},RT.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new AT,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new AT:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new AT,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},RT.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[],n},RT.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):DT.call(t,e)},RT.prototype.listenerCount=DT,RT.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var UT=function(t){ST.default(n,t);var e=FT(n);function n(){var t;return bT.default(this,n),t=e.call(this),OT.default(xT.default(t),"eventHistory",new Map),t}return wT.default(n,[{key:"on",value:function(t,e){return kT.default(ET.default(n.prototype),"on",this).call(this,t,e)}},{key:"once",value:function(t,e){return kT.default(ET.default(n.prototype),"once",this).call(this,t,e)}},{key:"off",value:function(t,e){return kT.default(ET.default(n.prototype),"off",this).call(this,t,e)}},{key:"emit",value:function(t){for(var e,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return this.eventHistory.set(t,o),(e=kT.default(ET.default(n.prototype),"emit",this)).call.apply(e,[this,t].concat(o))}},{key:"addListener",value:function(t,e){return kT.default(ET.default(n.prototype),"addListener",this).call(this,t,e)}},{key:"removeListener",value:function(t,e){return kT.default(ET.default(n.prototype),"removeListener",this).call(this,t,e)}},{key:"addListenerWithReplay",value:function(t,e){var n=this.eventHistory.get(t);return void 0!==n&&e.apply(void 0,mT.default(n)),this.addListener(t,e)}},{key:"onWithReplay",value:function(t,e){return this.addListenerWithReplay(t,e)}},{key:"onceWithReplay",value:function(t,e){var r=this.eventHistory.get(t);return void 0!==r?(e.apply(void 0,mT.default(r)),this):kT.default(ET.default(n.prototype),"once",this).call(this,t,e)}}]),n}(RT),WT=aT.ReplayEventEmitter=UT;function zT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function GT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zT(Object(n),!0).forEach((function(e){Ir(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var VT=function(t){Or(n,t);var e=$T(n);function n(t){var r;return Pr(this,n),Ir(xr(r=e.call(this)),"newBackoff",null),Ir(xr(r),"usedBackoff",null),Ir(xr(r),"retrier",null),r.options=t?GT({},t):{},r}return Cr(n,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(t){this.newBackoff=t}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");var t,e;this.newBackoff?!this.usedBackoff||this.usedBackoff<this.newBackoff?this.createRetrier():null===(t=this.retrier)||void 0===t||t.failed(new Error):null===(e=this.retrier)||void 0===e||e.failed(new Error)}},{key:"cancel",value:function(){var t;null===(t=this.retrier)||void 0===t||t.cancel()}},{key:"cleanRetrier",value:function(){var t,e;null===(t=this.retrier)||void 0===t||t.removeAllListeners(),null===(e=this.retrier)||void 0===e||e.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var t=GT({},this.options);return this.newBackoff&&(t.min=this.newBackoff,t.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),t.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,t}},{key:"createRetrier",value:function(){var t=this;this.cleanRetrier();var e=this.getRetryPolicy();this.retrier=new iT(e),this.retrier.once("attempt",(function(){var e,n;null===(e=t.retrier)||void 0===e||e.on("attempt",(function(){return t.emit("attempt")})),null===(n=t.retrier)||void 0===n||n.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(e){return t.emit("failed",e)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),n}(WT);function KT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var YT=function(t){Or(o,t);var e,n,r=KT(o);function o(t,e,n){var i;Pr(this,o),Ir(xr(i=r.call(this)),"disconnectingTimer",null),Ir(xr(i),"disconnectedPromiseResolve",null),Ir(xr(i),"terminalStates",["disconnected","rejected"]),Ir(xr(i),"tokenExpiredSasCode",20104),Ir(xr(i),"terminationReason","Connection is not initialized"),i.websocket=t,i.websocket.on("connected",(function(){return i.fsm.socketConnected()})),i.websocket.on("disconnected",(function(){return i.fsm.socketClosed()})),i.websocket.on("message",(function(t){return i.onIncomingMessage(t)})),i.websocket.on("socketError",(function(t){i.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(t.message),httpStatusCode:null,errorCode:null}),i.emit("stateChanged","retrying")})),i.transport=e,i.config=n,i.retrier=new VT(n.retryPolicy),i.retrier.on("attempt",(function(){return i.retry()})),i.retrier.on("failed",(function(t){ev.warn("Retrying failed: ".concat(t.message)),i.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){ev.debug("Browser reported connectivity state: online"),i.resetBackoff(),i.fsm.systemOnline()})),window.addEventListener("offline",(function(){ev.debug("Browser reported connectivity state: offline"),i.websocket.close(),i.fsm.socketClosed()})));var a=Kv.exports.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){i.setupSocket(),i.emit("connecting")},onEnterInitialising:function(){i.sendInit()},onLeaveInitialising:function(){i.cancelInit()},onEnterUpdating:function(){i.sendUpdate()},onLeaveUpdating:function(){i.cancelUpdate()},onEnterRetrying:function(){i.initRetry(),i.emit("connecting")},onEnterConnected:function(){i.resetBackoff(),i.onConnected()},onUserUpdateToken:function(){i.resetBackoff()},onTokenRejected:function(){i.resetBackoff(),i.closeSocket(!0),i.finalizeSocket()},onUserDisconnect:function(){i.closeSocket(!0)},onEnterDisconnecting:function(){i.startDisconnectTimer()},onLeaveDisconnecting:function(){i.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){i.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){i.cancelDisconnectTimer()},onDisconnected:function(){i.resetBackoff(),i.finalizeSocket()},onReceiveClose:function(){i.onCloseReceived()},onReceiveOffload:function(t,e){ev.debug("onreceiveoffload: ",e),i.modifyBackoff(e.body),i.onCloseReceived()},onUnsupported:function(){i.closeSocket(!0),i.finalizeSocket()},onError:function(t,e){i.closeSocket(e),i.finalizeSocket()},onEnterState:function(t){"none"!==t.from&&i.changeState(t)},onInvalidTransition:function(t,e,n){ev.warn("FSM: unexpected transition",e,n)}}});return i.fsm=new a,i}return Cr(o,[{key:"changeState",value:function(t){ev.debug("FSM: ".concat(t.transition,": ").concat(t.from," --\x3e ").concat(t.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){ev.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(t){ev.trace("modifyBackoff",t);var e=t?t.backoff_policy:null;e&&"number"==typeof e.reconnect_min_ms&&this.retrier.modifyBackoff(e.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var t=this;ev.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){ev.debug("disconnecting is timed out"),t.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){ev.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";default:return"disconnected"}}},{key:"initRetry",value:function(){ev.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(ev.trace("retry"),this.websocket.close(),this.fsm.userRetry()):ev.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){ev.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){ev.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(t){var e=Xk.parse(t);if(e){var n=e.method,r=e.header,o=e.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,o);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:o});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)ev.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:o});else if(406===r.status.code){var i="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(i,r,!0),ev.error(i),this.fsm.receiveFatalClose()}else 417===r.status.code?(ev.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(ev.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(ev.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(ev.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}}},{key:"sendInit",value:(n=wr(uo.mark((function t(){var e,n;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ev.trace("sendInit"),t.prev=1,this.emit("beforeSendInit"),t.next=5,this.transport.sendInit();case 5:e=t.sent,this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),t.t0 instanceof nS?(n=!1,ev.warn("Init rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),this.emit("sendInitFailed"),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.initError(!0)):500===t.t0.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(t.t0.message,t.t0.reply,n)):(this.terminationReason=t.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(t.t0.message,"\n").concat(JSON.stringify(t.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"sendUpdate",value:(e=wr(uo.mark((function t(){var e,n,r;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ev.trace("sendUpdate"),e=new wy(this.config.token),t.prev=2,t.next=5,this.transport.sendWithReply(e);case 5:n=t.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0 instanceof nS?(r=!1,ev.warn("Token update rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.updateError(t.t0.reply.status)):this.fsm.updateError(t.t0.reply.status),this.emitReplyConnectionError(t.t0.message,t.t0.reply,r)):(this.emit("error",!1,t.t0.message,null,null),this.fsm.updateError(t.t0)),this.emit("tokenUpdated",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return e.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(t,e,n){var r=e.status&&e.status.description?e.status.description:t,o=e.status.code,i=e.status&&e.status.errorCode?e.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: ".concat(r),httpStatusCode:o,errorCode:i})}},{key:"cancelInit",value:function(){ev.trace("cancelInit")}},{key:"cancelUpdate",value:function(){ev.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(t){ev.trace("confirmReceiving");try{this.transport.send(new Ty(t.id))}catch(t){ev.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(t){var e=this;ev.trace("closeSocket (graceful: ".concat(t,")")),t&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return e.fsm.socketClosed()}),0)}},{key:"connect",value:function(){ev.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return ev.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(e){t.disconnectedPromiseResolve=e,t.fsm.userDisconnect()}))}},{key:"updateToken",value:function(t){var e=this;return ev.trace("updateToken:",t),new Promise((function(t,n){e.once("tokenUpdated",(function(e){e?n(e):t()})),e.fsm.userUpdateToken()}))}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),o}(WT);Cv("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Gv);var qT={exports:{}};!function(t,e){(function(){var r={function:!0,object:!0}["undefined"==typeof window?"undefined":Ar(window)]&&window||this,o=e,i=t&&!t.nodeType&&t,a=o&&i&&"object"==Ar(n)&&n;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Math.pow(2,53)-1,c=/\bOpera/,u=Object.prototype,f=u.hasOwnProperty,l=u.toString;function p(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function h(t){return t=m(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:p(t)}function d(t,e){for(var n in t)f.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?p(t):l.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function g(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=s)for(;++n<r;)e(t[n],n,t);else d(t,e)}(t,(function(r,o){n=e(n,r,o,t)})),n}function m(t){return String(t).replace(/^ +| +$/g,"")}var b=function t(e){var n=r,o=e&&"object"==Ar(e)&&"String"!=v(e);o&&(n=e,e=null);var i=n.navigator||{},a=i.userAgent||"";e||(e=a);var s,u,f=o?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(l.toString()),p="Object",b=o?p:"ScriptBridgingProxyObject",w=o?p:"Environment",x=o&&n.java?"JavaPackage":v(n.java),k=o?p:"RuntimeObject",S=/\bJava/.test(x)&&n.java,T=S&&v(n.environment)==w,E=S?"a":"Î±",O=S?"b":"Î²",A=n.document||{},R=n.operamini||n.opera,_=c.test(_=o&&R?R["[[Class]]"]:v(R))?_:R=null,C=e,P=[],I=null,j=e==a,M=j&&R&&"function"==typeof R.version&&R.version(),L=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)})),N=function(t){return g(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),D=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(t){return g(t,(function(t,n,r){return t||(n[D]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=function(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),h(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function U(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=h(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function W(t){return g(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(L&&(L=[L]),/\bAndroid\b/.test(F)&&!D&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(D=m(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!D?D=U([B]):B&&D&&(D=D.replace(RegExp("^("+y(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+y(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(D))&&(D=s[0]),/\bSimulator\b/i.test(e)&&(D=(D?D+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(e)&&P.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(e)?(B=(s=t(e.replace(/like iPhone OS/,""))).manufacturer,D=s.product):/^iP/.test(D)?(N||(N="Safari"),F="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==N&&/^Linux\b/i.test(F)?F="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(D))||/\bAndroid\b/.test(F)&&/^Chrome/.test(N)&&/\bVersion\//i.test(e)?(N="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==N?(/\bMobi/i.test(e)||(F="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&P.unshift("accelerated")):"UC Browser"==N&&/\bUCWEB\b/.test(e)?P.push("speed mode"):"PaleMoon"==N&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?P.push("identifying as Firefox "+s[1]):"Firefox"==N&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(F||(F="Firefox OS"),D||(D=s[1])):!N||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!D&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(N=null),(s=D||B||F)&&(D||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:s)+" Browser")):"Electron"==N&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&P.push("Chromium "+s),M||(M=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(N),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==L&&parseFloat(M)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(L)&&"WebKit"||!L&&/\bMSIE\b/i.test(e)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==L&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(L=[s]),"IE"==N&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(N+=" Mobile",F="Windows Phone "+(/\+$/.test(s)?s:s+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(N="IE Mobile",F="Windows Phone 8.x",P.unshift("desktop mode"),M||(M=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=N&&"Trident"==L&&(s=/\brv:([\d.]+)/.exec(e))&&(N&&P.push("identifying as "+N+(M?" "+M:"")),N="IE",M=s[1]),j){if(function(t,e){var n=null!=t?Ar(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(n,"global"))if(S&&(C=(s=S.lang.System).getProperty("os.arch"),F=F||s.getProperty("os.name")+" "+s.getProperty("os.version")),T){try{M=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(t){(s=n.system)&&s.global.system==n.system&&(N="Narwhal",F||(F=s[0].os||null))}N||(N="Rhino")}else"object"==Ar(n.process)&&!n.process.browser&&(s=n.process)&&("object"==Ar(s.versions)&&("string"==typeof s.versions.electron?(P.push("Node "+s.versions.node),N="Electron",M=s.versions.electron):"string"==typeof s.versions.nw&&(P.push("Chromium "+M,"Node "+s.versions.node),N="NW.js",M=s.versions.nw)),N||(N="Node.js",C=s.arch,F=s.platform,M=(M=/[\d.]+/.exec(s.version))?M[0]:null));else v(s=n.runtime)==b?(N="Adobe AIR",F=s.flash.system.Capabilities.os):v(s=n.phantom)==k?(N="PhantomJS",M=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof A.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(M=[M,A.documentMode],(s=+s[1]+4)!=M[1]&&(P.push("IE "+M[1]+" mode"),L&&(L[1]=""),M[1]=s),M="IE"==N?String(M[1].toFixed(1)):M[0]):"number"==typeof A.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(P.push("masking as "+N+" "+M),N="IE",M="11.0",L=["Trident"],F="Windows");F=F&&h(F)}if(M&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(j&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(I=/b/i.test(s)?"beta":"alpha",M=M.replace(RegExp(s+"\\+?$"),"")+("beta"==I?O:E)+(/\d+\+?/.exec(s)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))N="Firefox Mobile";else if("Maxthon"==N&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(D))"Xbox 360"==D&&(F=null),"Xbox 360"==D&&/\bIEMobile\b/.test(e)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||D||/Browser|Mobi/.test(N))||"Windows CE"!=F&&!/Mobi/i.test(e))if("IE"==N&&j)try{null===n.external&&P.unshift("platform preview")}catch(t){P.unshift("embedded")}else(/\bBlackBerry\b/.test(D)||/\bBB10\b/.test(e))&&(s=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||M)?(F=((s=[s,/BB10/.test(e)])[1]?(D=null,B="BlackBerry"):"Device Software")+" "+s[0],M=null):this!=d&&"Wii"!=D&&(j&&R||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==N&&(F&&!/^Win/.test(F)&&M>5.5||/\bWindows XP\b/.test(F)&&M>8||8==M&&!/\bTrident\b/.test(e)))&&!c.test(s=t.call(d,e.replace(c,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),c.test(N)?(/\bIE\b/.test(s)&&"Mac OS"==F&&(F=null),s="identify"+s):(s="mask"+s,N=_?h(_.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(F=null),j||(M=null)),L=["Presto"],P.push(s));else N+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==N&&"+"==s[1].slice(-1)?(N="WebKit Nightly",I="alpha",M=s[1].slice(0,-1)):M!=s[1]&&M!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(M=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==L&&(L=["Blink"]),j&&(f||s[1])?(L&&(L[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=L?"27":"28")):(L&&(L[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),L&&(L[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==N&&(!M||parseInt(M)>45)?M=s:"Chrome"==N&&/\bHeadlessChrome/i.test(e)&&P.unshift("headless")),"Opera"==N&&(s=/\bzbov|zvav$/.exec(F))?(N+=" ",P.unshift("desktop mode"),"zvav"==s?(N+="Mini",M=null):N+="Mobile",F=F.replace(RegExp(" *"+s+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(L&&L[1])?(P.unshift("desktop mode"),N="Chrome Mobile",M=null,/\bOS X\b/.test(F)?(B="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test(N)&&!M&&(M=W("Chrome")),M&&0==M.indexOf(s=/[\d.]+$/.exec(F))&&e.indexOf("/"+s+"-")>-1&&(F=m(F.replace(s,""))),F&&-1!=F.indexOf(N)&&!RegExp(N+" OS").test(F)&&(F=F.replace(RegExp(" *"+y(N)+" *"),"")),L&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(F)&&/\bSafari\b/.test(L[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(N)&&L[1])&&(s=L[L.length-1])&&P.push(s),P.length&&(P=["("+P.join("; ")+")"]),B&&D&&D.indexOf(B)<0&&P.push("on "+B),D&&P.push((/^on /.test(P[P.length-1])?"":"on ")+D),F&&(s=/ ([\d.+]+)$/.exec(F),u=s&&"/"==F.charAt(F.length-s[0].length-1),F={architecture:32,family:s&&!u?F.replace(s[0],""):F,version:s?s[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(C))&&!/\bi686\b/i.test(C)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+s),"")),N&&(/\bWOW64\b/i.test(e)||j&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&P.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==N&&parseFloat(M)>=39&&(F.architecture=64),e||(e=null);var z={};return z.description=e,z.layout=L&&L[0],z.manufacturer=B,z.name=N,z.prerelease=I,z.product=D,z.ua=e,z.version=N&&M,z.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=t,z.toString=function(){return this.description||""},z.version&&P.unshift(M),z.name&&P.unshift(N),F&&N&&(F!=String(F).split(" ")[0]||F!=N.split(" ")[0]&&!D)&&P.push(D?"("+F+")":"on "+F),P.length&&(z.description=P.join(" ")),z}();o&&i?d(b,(function(t,e){o[e]=t})):r.platform=b}).call(n)}(qT,qT.exports);var XT=function(){function t(){Pr(this,t)}return Cr(t,null,[{key:"getMetadata",value:function(t){var e,n,r,o,i,a,s,c,u=t&&t.clientMetadata?t.clientMetadata:{},f={env:null!==(e=qT.exports.name)&&void 0!==e?e:"unknown",envv:null!==(n=qT.exports.version)&&void 0!==n?n:"unknown",os:null!==(r=null===(o=qT.exports.os)||void 0===o?void 0:o.family)&&void 0!==r?r:"unknown",osv:null!==(i=null===(a=qT.exports.os)||void 0===a?void 0:a.version)&&void 0!==i?i:"unknown",osa:null!==(s=null===(c=qT.exports.os)||void 0===c?void 0:c.architecture)&&void 0!==s?s:"unknown",sdk:"js-default"},l={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(t){return t in u||t in f})).forEach((function(t){return l[t]=t in u?u[t]:f[t]})),l}}]),t}();var JT=function(){function t(e,n){var r=this;Pr(this,t),this.config=n,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",(function(t){return r.processReply(t)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new tS("disconnected"))})),r.activeRequests.clear()}))}var e;return Cr(t,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(t){var e,n=this.activeRequests.get(t.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(t.id),(e=t.status.code)>=200&&e<300?n.resolve(t):(n.reject(new nS("Transport failure: "+t.status.status,t)),ev.trace("message rejected")))}},{key:"storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout((function(){ev.trace("request",t,"is timed out"),n(new tS("Twilsock: request timeout: "+t))}),3e4)};this.activeRequests.set(t,r)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new tS("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(e=wr(uo.mark((function t(){var e,n,r;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ev.trace("sendInit"),e=XT.getMetadata(this.config),n=new yy(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),t.next=5,this.sendWithReply(n);case 5:return r=t.sent,t.abrupt("return",new my(r.id,r.header.continuation_token,new Set(r.header.capabilities),r.header.continuation_token_status,r.header.offline_storage,r.header.init_registrations,r.header.debug_info));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendClose",value:function(){var t=new Oy;this.send(t)}},{key:"sendWithReply",value:function(t,e){var n=this;return new Promise((function(r,o){var i=n.send(t,e);n.storeRequest(i,r,o)}))}},{key:"send",value:function(t,e){t.id=t.id||"TM".concat(hy.v4());var n=Xk.createPacket(t,function(t){switch(Ar(t)){case"undefined":return"";case"object":return JSON.stringify(t);default:return t}}(e));try{return this.channel.send(n),t.id}catch(e){throw ev.debug("failed to send ",t,e),ev.trace(e.stack),e}}}]),t}();function HT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var ZT=function(t){Or(r,t);var n=HT(r);function r(t){var o;return Pr(this,r),Ir(xr(o=n.call(this)),"socket",null),o.url=t,o.url=t,o.WebSocket=e.WebSocket||e.MozWebSocket||{},o}return Cr(r,[{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}},{key:"connect",value:function(){var t,e=this;ev.trace("connecting to socket");try{t=new this.WebSocket(this.url)}catch(t){return ev.debug("Socket error: ".concat(this.url)),void this.emit("socketError",t)}t.binaryType="arraybuffer",t.onopen=function(){ev.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){ev.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){ev.debug("Socket error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(t){return this.socket&&this.socket.send(t)}},{key:"close",value:function(){if(ev.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),r}(WT);function QT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var tE=function(t){Or(c,t);var e,n,r,o,i,a,s=QT(c);function c(t){var e;return Pr(this,c),(e=s.call(this)).transport=t,e.registrations=new Map,e.registrationsInProgress=new Map,e}return Cr(c,[{key:"putNotificationContext",value:(a=wr(uo.mark((function t(e,n){var r;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deleteNotificationContext",value:(i=wr(uo.mark((function t(e){var n;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRegistration",value:(o=wr(uo.mark((function t(e,n){var r,o;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ev.debug("update registration for context",e),(r=this.registrationsInProgress.get(e))||(r=new Set,this.registrationsInProgress.set(e,r)),o=hy.v4(),r.add(o),t.prev=5,t.next=8,this.putNotificationContext(e,n);case 8:ev.debug("registration attempt succeeded for context",n),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e)),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(5),ev.warn("registration attempt failed for context",n),ev.debug(t.t0),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,t.t0));case 19:case"end":return t.stop()}}),t,this,[[5,13]])}))),function(t,e){return o.apply(this,arguments)})},{key:"updateRegistrations",value:(r=wr(uo.mark((function t(){var e,n=this;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ev.trace("refreshing ".concat(this.registrations.size," registrations")),e=[],this.registrations.forEach((function(t,r){e.push(n.updateRegistration(r,t))})),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setNotificationsContext",value:(n=wr(uo.mark((function t(e,n){return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}throw new tS("Invalid arguments provided");case 2:return this.registrations.set(e,n),t.next=5,this.updateRegistration(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeNotificationsContext",value:(e=wr(uo.mark((function t(e){return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrations.has(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.deleteNotificationContext(e);case 4:this.transport.isConnected&&this.registrations.delete(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),c}(WT),eE=Bt,nE=De,rE=ei,oE=w,iE=Fy,aE=Yy;Dy("match",(function(t,e,n){return[function(e){var n=oE(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](rE(n))},function(t){var r=eE(this),o=rE(t),i=n(e,r,o);if(i.done)return i.value;if(!r.global)return aE(r,o);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=aE(r,o));){var f=rE(s[0]);c[u]=f,""===f&&(r.lastIndex=iE(o,nE(r.lastIndex),a)),u++}return 0===u?null:c}]}));var sE=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},cE=Bt,uE=w,fE=sE,lE=ei,pE=Yy;Dy("search",(function(t,e,n){return[function(e){var n=uE(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](lE(n))},function(t){var r=cE(this),o=lE(t),i=n(e,r,o);if(i.done)return i.value;var a=r.lastIndex;fE(a,0)||(r.lastIndex=0);var s=pE(r,o);return fE(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var hE=An,dE=We,vE=Me,yE=De,gE=H,mE=xo,bE=yo,wE=Eo("splice"),xE=Math.max,kE=Math.min,SE=9007199254740991,TE="Maximum allowed length exceeded";function EE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}hE({target:"Array",proto:!0,forced:!wE},{splice:function(t,e){var n,r,o,i,a,s,c=gE(this),u=yE(c.length),f=dE(t,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-f):(n=l-2,r=kE(xE(vE(e),0),u-f)),u+n-r>SE)throw TypeError(TE);for(o=mE(c,r),i=0;i<r;i++)(a=f+i)in c&&bE(o,i,c[a]);if(o.length=r,n<r){for(i=f;i<u-r;i++)s=i+n,(a=i+r)in c?c[s]=c[a]:delete c[s];for(i=u;i>u-r+n;i--)delete c[i-1]}else if(n>r)for(i=u-r;i>f;i--)s=i+n-1,(a=i+r-1)in c?c[s]=c[a]:delete c[s];for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=u-r+n,o}});var OE=function(t){Or(n,t);var e=EE(n);function n(t,r,o){var i;return Pr(this,n),(i=e.call(this,r)).status=t,i.description=r,i.body=o,i}return Cr(n)}(tS);function AE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var RE=function(t){Or(n,t);var e=AE(n);function n(t){return Pr(this,n),e.call(this,t)}return Cr(n)}(tS);function _E(t,e){var n=function(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7],params:{}};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(t){return t.split("=")})).reduce((function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t}),{})}return n}throw new tS("Incorrect URI: "+t)}(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function CE(t,e,n,r,o){return{to:_E(t,e),headers:n,body:r,grant:o}}var PE=function(){function t(e,n,r){Pr(this,t),this.config=r,this.transport=e,this.pendingMessages=[],this.twilsock=n}var e;return Cr(t,[{key:"saveMessage",value:function(t){var e=this;return new Promise((function(n,r){var o={message:t,resolve:n,reject:r,alreadyRejected:!1,timeout:setTimeout((function(){ev.debug("request is timed out"),r(new tS("request '".concat(t.to.method,"' to '").concat(t.to.host,"' timed out"))),o.alreadyRejected=!0}),2e4)};e.pendingMessages.push(o)}))}},{key:"sendPendingMessages",value:function(){for(var t=this,e=function(){var e=t.pendingMessages[0];if(!e.alreadyRejected)try{var n=e.message;t.actualSend(n).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),clearTimeout(e.timeout)}catch(t){return ev.debug("Failed to send pending message",t),"break"}t.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){if("break"===e())break}}},{key:"rejectPendingMessages",value:function(){var t=this;this.pendingMessages.forEach((function(e){e.reject(new RE("Unable to connect: "+t.twilsock.getTerminationReason)),e.alreadyRejected=!0,clearTimeout(e.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(e=wr(uo.mark((function t(e){var n,r,o,i,a,s,c,u;return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.to,o=e.headers,i=e.body,a=null!==(n=e.grant)&&void 0!==n?n:this.config.activeGrant,s={host:r.host,path:r.path,method:r.method,params:r.params,headers:o},c=new ky(a,o["Content-Type"]||"application/json",s),ev.trace("Sending upstream message",c),t.next=9,this.transport.sendWithReply(c,i);case 9:if(u=t.sent,ev.trace("Received upstream message response",u),!((l=u)&&l.header&&l.header.http_status)||(f=u.header.http_status.code)>=200&&f<300){t.next=13;break}throw new OE(u.header.http_status.code,u.header.http_status.status,u.body);case 13:return t.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 14:case"end":return t.stop()}var f,l}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"send",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new RE("Unable to connect: "+this.twilsock.getTerminationReason));var i=CE(t,e,n,r,o);return this.twilsock.isConnected?this.actualSend(i):this.saveMessage(i)}}]),t}(),IE=function(){function t(){var e=this;Pr(this,t),this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return Cr(t,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}}]),t}(),jE=function(){function t(e){Pr(this,t),this.id=e}return Cr(t,null,[{key:"create",value:function(e){if(e instanceof Object&&"storage_id"in e)return new t(e.storage_id);throw new tS('Field "storage_id" is missing')}}]),t}(),ME=function(){function t(){return Pr(this,t),Ir(this,"initializedFlag","twilio_twilsock_token_storage"),Ir(this,"tokenStoragePrefix","twilio_continuation_token_"),t._instance||(this.initialize(),t._instance=this),t._instance}return Cr(t,[{key:"sessionStorage",value:function(){try{return e.sessionStorage}catch(t){return null}}},{key:"window",value:function(){try{return e.window}catch(t){return null}}},{key:"storeToken",value:function(t,e){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(e),t)}},{key:"getStoredToken",value:function(t){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(t)):null}},{key:"initialize",value:function(){var t=this;if(this.canStore()){this.sessionStorage.getItem(this.initializedFlag)&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var e=this.sessionStorage.removeItem;this.window.addEventListener("unload",(function(){e(t.initializedFlag)}))}}},{key:"clear",value:function(){if(this.canStore()){for(var t=[],e=0;e<this.sessionStorage.length;e++){var n=this.sessionStorage.key(e);n&&0===n.indexOf(this.tokenStoragePrefix)&&t.push(n)}var r=this.sessionStorage.removeItem;t.forEach((function(t){return r(t)})),r(this.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(this.tokenStoragePrefix).concat(t)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),t}();Ir(ME,"_instance",null);var LE,NE,DE=new ME,BE=function(){function t(e,n,r,o,i,a){Pr(this,t),this.title=e,this.details=n,this.start=r,this.type=i,this.id=a,this.end=o}return Cr(t,[{key:"toTelemetryEvent",value:function(){var t=new Date,e=this.start,n=this.end?this.end:t;if(n<e){var r=n;n=e,e=r}var o=e.getTime()-t.getTime(),i=n.getTime()-t.getTime();return new Ry(o,i,this.title,this.details,this.id,this.type)}}]),t}();t.TelemetryPoint=void 0,(LE=t.TelemetryPoint||(t.TelemetryPoint={}))[LE.Start=0]="Start",LE[LE.End=1]="End",t.EventSendingLimitation=void 0,(NE=t.EventSendingLimitation||(t.EventSendingLimitation={}))[NE.MinEventsPortion=0]="MinEventsPortion",NE[NE.AnyEvents=1]="AnyEvents",NE[NE.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished";var FE=function(){function e(t,n){Pr(this,e),Ir(this,"minEventsPortionToSend",50),Ir(this,"maxEventsPortionToSend",100),Ir(this,"pendingEvents",new Map),Ir(this,"readyEvents",[]),Ir(this,"hasInitializationFinished",!1),Ir(this,"_canSendTelemetry",!1),this.config=t,this.packetInterface=n}return Cr(e,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){ev.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(t.EventSendingLimitation.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(t){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(t)}},{key:"addPartialEvent",value:function(e,n,r){ev.debug("Adding ".concat(r===t.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(n,"' event"));var o=this.pendingEvents.has(n);if(r===t.TelemetryPoint.Start)o&&ev.debug("Overwriting starting point for '".concat(n,"' event")),this.pendingEvents.set(n,e);else{if(!o)return void ev.info("Could not find started event for '".concat(n,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(n),e)),this.pendingEvents.delete(n)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==t.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==t.EventSendingLimitation.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(t){var e=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return t&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(t,n){if(!(r.length>=e.maxEventsPortionToSend)){var o=e.pendingEvents.get(n);e.pendingEvents.delete(n),r.push(new BE("[UNFINISHED] ".concat(o.title),o.details,o.start,null,o.type,o.id))}})),r}},{key:"merge",value:function(t,e){return new BE(e.title?e.title:t.title,e.details?e.details:t.details,t.start,e.end,e.type?e.type:t.type,e.id?e.id:t.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(t.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(t){var e=this.getTelemetryToSend(t);if(0!==e.length)try{this.packetInterface.send(new _y(e.map((function(t){return t.toTelemetryEvent()}))))}catch(t){ev.debug("Error while sending ".concat(e.length," telemetry events due to ").concat(t,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(e)}}}]),e}();function UE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kr(t);if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Rr(this,n)}}var WE=Cr((function t(){Pr(this,t)}));Ir(WE,"TWILSOCK_CONNECT","twilsock.sdk.connect"),Ir(WE,"TWILSOCK_INIT","twilsock.sdk.init"),t.TwilsockClient=function(e){Or(TwilsockClient,e);var n,r,o,i,a,s,c,u,f=UE(TwilsockClient);function TwilsockClient(e,n,r){var o;Pr(this,TwilsockClient),Ir(xr(o=f.call(this)),"version",$v),Ir(xr(o),"offlineStorageDeferred",new IE),r.continuationToken=r.continuationToken?r.continuationToken:DE.getStoredToken(n);var i=o.config=new Vv(e,n,r);ev.setLevel(i.logLevel);var a=new ZT(i.url),s=new JT(a,i);return o.channel=new YT(a,s,i),o.registrations=new tE(s),o.upstream=new PE(s,o.channel,i),o.telemetryTracker=new FE(i,s),o.channel.on("initialized",(function(){return o.telemetryTracker.canSendTelemetry=!0})),a.on("disconnected",(function(){return o.telemetryTracker.canSendTelemetry=!1})),o.registrations.on("registered",(function(t){return o.emit("registered",t)})),o.channel.on("message",(function(t,e){return setTimeout((function(){return o.emit("message",t,e)}),0)})),o.channel.on("stateChanged",(function(t){return setTimeout((function(){return o.emit("stateChanged",t)}),0)})),o.channel.on("connectionError",(function(t){return setTimeout((function(){return o.emit("connectionError",t)}),0)})),o.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return o.emit("tokenAboutToExpire")}),0)})),o.channel.on("tokenExpired",(function(){return setTimeout((function(){return o.emit("tokenExpired")}),0)})),o.channel.on("connected",(function(){return o.registrations.updateRegistrations()})),o.channel.on("connected",(function(){return o.upstream.sendPendingMessages()})),o.channel.on("connected",(function(){return setTimeout((function(){return o.emit("connected")}),0)})),o.channel.on("beforeConnect",(function(){return o.telemetryTracker.addPartialEvent(new BE("Establish WebSocket connection","",new Date),WE.TWILSOCK_CONNECT,t.TelemetryPoint.Start)})),o.channel.on("connected",(function(){return o.telemetryTracker.addPartialEvent(new BE("Establish WebSocket connection","",new Date,new Date),WE.TWILSOCK_CONNECT,t.TelemetryPoint.End)})),o.channel.on("beforeSendInit",(function(){return o.telemetryTracker.addPartialEvent(new BE("Send Twilsock init","",new Date),WE.TWILSOCK_INIT,t.TelemetryPoint.Start)})),o.channel.on("initialized",(function(){return o.telemetryTracker.addPartialEvent(new BE("Send Twilsock init","Succeeded",new Date,new Date),WE.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("sendInitFailed",(function(){return o.telemetryTracker.addPartialEvent(new BE("Send Twilsock init","Failed",new Date,new Date),WE.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("initialized",(function(t){o.handleStorageId(n,t),DE.storeToken(t.continuationToken,n),setTimeout((function(){return o.emit("initialized",t)}),0)})),o.channel.on("disconnected",(function(){return setTimeout((function(){return o.emit("disconnected")}),0)})),o.channel.on("disconnected",(function(){return o.upstream.rejectPendingMessages()})),o.channel.on("disconnected",(function(){return o.offlineStorageDeferred.fail(new tS("Client disconnected"))})),o.offlineStorageDeferred.promise.catch((function(){})),o}return Cr(TwilsockClient,[{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return ev.debug("Emitting ".concat(t.toString(),"(").concat(r.map((function(t){return JSON.stringify(t)})).join(", "),")")),(e=Tr(kr(TwilsockClient.prototype),"emit",this)).call.apply(e,[this,t].concat(r))}},{key:"handleStorageId",value:function(t,e){if(e.offlineStorage)if(e.offlineStorage.hasOwnProperty(t))try{this.offlineStorageDeferred.set(jE.create(e.offlineStorage[t])),ev.debug("Offline storage for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage[t]),"."))}catch(n){this.offlineStorageDeferred.fail(new tS("Failed to parse offline storage for ".concat(t," ").concat(JSON.stringify(e.offlineStorage[t]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new tS("No offline storage id for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage))));else this.offlineStorageDeferred.fail(new tS("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:(u=wr(uo.mark((function t(e){return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ev.trace("updating token '".concat(e,"'")),this.config.token!==e){t.next=3;break}return t.abrupt("return");case 3:return this.config.updateToken(e),t.next=6,this.channel.updateToken(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setNotificationsContext",value:(c=wr(uo.mark((function t(e,n){return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.setNotificationsContext(e,n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"removeNotificationsContext",value:(s=wr(uo.mark((function t(e){return uo.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.removeNotificationsContext(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:(a=wr(uo.mark((function e(){return uo.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEventsIncludingUnfinished),e.next=3,this.channel.disconnect();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:(i=wr(uo.mark((function e(n,r,o){return uo.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("GET",n,r,void 0,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"post",value:(o=wr(uo.mark((function e(n,r,o,i){return uo.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("POST",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,r){return o.apply(this,arguments)})},{key:"put",value:(r=wr(uo.mark((function e(n,r,o,i){return uo.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("PUT",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,o){return r.apply(this,arguments)})},{key:"delete",value:(n=wr(uo.mark((function e(n,r,o,i){return uo.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("DELETE",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,r,o){return n.apply(this,arguments)})},{key:"addTelemetryEvent",value:function(t){this.telemetryTracker.addTelemetryEvent(t),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,n,r){this.telemetryTracker.addPartialEvent(e,n,r),r===t.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),TwilsockClient}(WT),t.TwilsockClient=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Ar(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([Jd(qd,qd,[Xd,"undefined",Yd(null)]),function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Ar(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String,String,Object])],t.TwilsockClient);var zE=function(){function t(e){Pr(this,t),this.product=e,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return Cr(t,[{key:"populateInitRegistrations",value:function(t){var e=new Set(this.message_types);for(var n in t)e.add(t[n]);this.message_types=Array.from(e)}}]),t}();return t.InitRegistration=zE,t.TelemetryEventDescription=BE,t.TelemetryTracker=FE,t.TransportUnavailableError=RE,t.Twilsock=t.TwilsockClient,t.TwilsockError=tS,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
