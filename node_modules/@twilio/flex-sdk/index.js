/*!
 * 
 * @twilio/flex-sdk.js 0.99.32-dev
 * The following license applies to all parts of this software except as documented below.
 *
 * Copyright (c) 2020 Twilio, Inc.
 * All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the “License”);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an “AS IS” BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */(()=>{var t={9401:function(t,e,r){var n,o;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}r(3524),r(6257),r(6941),r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534),function(a,c){"use strict";n=function(){var t=function(){},e="undefined",r=("undefined"==typeof window?"undefined":i(window))!==e&&i(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(t,e){var r=t[e];if("function"==typeof r.bind)return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch(e){return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(n){return"debug"===n&&(n="log"),("undefined"==typeof console?"undefined":i(console))!==e&&("trace"===n&&r?a:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):t)}function u(e,r){for(var o=0;o<n.length;o++){var i=n[o];this[i]=o<e?t:this.methodFactory(i,e,r)}this.log=this.debug}function s(t,r,n){return function(){("undefined"==typeof console?"undefined":i(console))!==e&&(u.call(this,r,n),this[t].apply(this,arguments))}}function l(t,e,r){return c(t)||s.apply(this,arguments)}function f(t,r,o){var a,c=this,s="loglevel";function f(t){var r=(n[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":i(window))!==e&&s){try{return void(window.localStorage[s]=r)}catch(t){}try{window.document.cookie=encodeURIComponent(s)+"="+r+";"}catch(t){}}}function p(){var t;if(("undefined"==typeof window?"undefined":i(window))!==e&&s){try{t=window.localStorage[s]}catch(t){}if(i(t)===e)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(s)+"=");-1!==n&&(t=/^([^;]+)/.exec(r.slice(n))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}}"string"==typeof t?s+=":"+t:"symbol"===i(t)&&(s=void 0),c.name=t,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=o||l,c.getLevel=function(){return a},c.setLevel=function(r,n){if("string"==typeof r&&void 0!==c.levels[r.toUpperCase()]&&(r=c.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(a=r,!1!==n&&f(r),u.call(c,r,t),("undefined"==typeof console?"undefined":i(console))===e&&r<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(t){p()||c.setLevel(t,!1)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)};var h=p();null==h&&(h=null==r?"WARN":r),c.setLevel(h,!1)}var p=new f,h={};p.getLogger=function(t){if("symbol"!==i(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new f(t,p.getLevel(),p.methodFactory)),e};var d=("undefined"==typeof window?"undefined":i(window))!==e?window.log:void 0;return p.noConflict=function(){return("undefined"==typeof window?"undefined":i(window))!==e&&window.log===p&&(window.log=d),p},p.getLoggers=function(){return h},p.default=p,p},void 0===(o="function"==typeof n?n.call(e,r,e,t):n)||(t.exports=o)}()},279:(t,e,r)=>{"use strict";r.d(e,{B:()=>p});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(1039),o=r(7876);function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,l(t,e,"get"))}function s(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,l(t,e,"set"),r),r}function l(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var f=new WeakMap,p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f.set(this,{writable:!0,value:void 0}),s(this,f,new o.q(e))}var e,r,i,l,p,h,d;return e=t,r=[{key:"get",value:(d=a(regeneratorRuntime.mark((function t(e,r,o){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(this,f).get(e,r,o);case 3:i=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 9:return t.abrupt("return",(0,n.G0)(i));case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e,r){return d.apply(this,arguments)})},{key:"post",value:(h=a(regeneratorRuntime.mark((function t(e,r,o,i,a){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(this,f).post(e,r,this.mapBody(o),i,a);case 3:c=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 9:return t.abrupt("return",(0,n.G0)(c));case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e,r,n,o){return h.apply(this,arguments)})},{key:"put",value:(p=a(regeneratorRuntime.mark((function t(e,r,o,i){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(this,f).put(e,r,this.mapBody(o),i);case 3:a=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 9:return t.abrupt("return",(0,n.G0)(a));case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e,r,n){return p.apply(this,arguments)})},{key:"delete",value:(l=a(regeneratorRuntime.mark((function t(e,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u(this,f).delete(e,r);case 3:o=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 9:return t.abrupt("return",(0,n.G0)(o));case 10:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(t,e){return l.apply(this,arguments)})},{key:"setIsEdgeSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u(this,f).setIsEdgeSupported(t)}},{key:"mapBody",value:function(t){return t?JSON.stringify((0,n.hf)(t)):t}}],r&&c(e.prototype,r),i&&c(e,i),t}()},7876:(t,e,r)=>{"use strict";r.d(e,{q:()=>N});r(5301),r(3600),r(6770),r(3275),r(1865),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(9280),r(3524),r(9344),r(444),r(1076),r(5547),r(6257),r(6941),r(6486),r(5128),r(4011),r(5226),r(9270);var n=r(6056),o=r(9051),i=r(8029),a=r(125),c=r(2227),u=function(t){var e;return!(null===(e=t.metadata)||void 0===e||!e.translatedErrorCode)&&c.Mb.includes(t.metadata.translatedErrorCode)},s=r(1563),l=r(4396),f=r(6107),p=r(3951),h=r(7769),d=r(1288),v=r(5543),y=r(6875);function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function x(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function O(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,P(t,e,"get"))}function S(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,P(t,e,"set"),r),r}function P(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var L=new WeakMap,T=new WeakMap,C=new WeakMap,_=new WeakMap,W=new WeakMap,I=new WeakSet,F=new WeakMap,A=new WeakMap,R=new WeakMap,N=function(){function t(e){var r,a,u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),I.add(this),L.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:void 0}),C.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:function(t){if(!t)return O(u,L).sessionToken;if("string"==typeof t)return t;throw new n.A("No token in request body")}}),A.set(this,{writable:!0,value:function(t){var e,r;return c.$Y.includes(t)&&(r=c.AL[t]),t===d.W.TooManyRequests?e=o.jK.TooManyRequests:t>=d.W.InternalServerError&&(e=o.jK.Unknown),[e,r]}}),R.set(this,{writable:!0,value:(r=regeneratorRuntime.mark((function t(e,r,n,a,c,l){var f,p,h,d,v,y,m,g,k,x,E,S,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=j(u,I,D).call(u,e),d=null,t.prev=2,v=new Headers({"Content-Type":l||"application/json"}),n&&(v=(0,s.v)(n,O(u,F).call(u,null==c?void 0:c.token),l)),y=(null==c?void 0:c.headers)||{},Object.entries(y).forEach((function(t){var e=b(t,2),r=e[0],n=e[1];v.append(r,n)})),t.next=9,fetch(h,{headers:v,method:r,body:a});case 9:d=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),O(u,T).call(u,o.jK.NetworkError,{severity:i.W.Error,translatedErrorCode:o.jK.NetworkError},void 0,t.t0);case 15:if(null!==(f=d)&&void 0!==f&&f.ok){t.next=21;break}return g={module:"backend",severity:i.W.Error,source:"SimpleHttpAdapterImpl.ts"},k=O(u,A).call(u,null===(m=d)||void 0===m?void 0:m.status),x=b(k,2),E=x[0],S=x[1],E&&O(u,T).call(u,E,w(w({},g),S&&{translatedErrorCode:S})),t.next=21,O(u,C).call(u,d,g);case 21:return t.next=23,null===(p=d)||void 0===p?void 0:p.json();case 23:return P=t.sent,t.abrupt("return",P);case 25:case"end":return t.stop()}}),t,null,[[2,12]])})),a=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){x(i,n,o,a,c,"next",t)}function c(t){x(i,n,o,a,c,"throw",t)}a(void 0)}))},function(t,e,r,n,o,i){return a.apply(this,arguments)})}),S(this,L,e.getInstanceOf(h.s)),S(this,_,(0,v.j)(e)(y.q9.Retry)),S(this,T,(0,f.C6)(e)),S(this,C,(0,f.gN)(e))}var e,r,l;return e=t,r=[{key:"get",value:function(t,e,r){var n=this;return(0,a.X)({functionToRetry:function(){return O(n,R).call(n,t,"GET",e,void 0,r)},retryCondition:u,logger:O(this,_)})}},{key:"post",value:function(t,e,r,n,o){var i=this;return(0,a.X)({functionToRetry:function(){return O(i,R).call(i,t,"POST",e,r,n,o)},retryCondition:u,logger:O(this,_)})}},{key:"put",value:function(t,e,r,n){var o=this;return(0,a.X)({functionToRetry:function(){return O(o,R).call(o,t,"PUT",e,r,void 0,n)},retryCondition:u,logger:O(this,_)})}},{key:"delete",value:function(t,e){var r=this;return(0,a.X)({functionToRetry:function(){return O(r,R).call(r,t,"DELETE",e)},retryCondition:u,logger:O(this,_)})}},{key:"setIsEdgeSupported",value:function(){S(this,W,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}}],r&&E(e.prototype,r),l&&E(e,l),t}();function D(t){var e=(0,p.B)(),r=e.region||"",n=e.edge||"",o=e.regionNonFlex||r,i=/^https?:\/\/flex\[region\]\./.test(t)?r:o;return t.replace("[region]",O(this,W)?(0,l.Us)(i,n):(0,l._k)(i))}},7769:(t,e,r)=>{"use strict";r.d(e,{s:()=>c});r(1624),r(1e3),r(2047),r(1157),r(8534);function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,i(t,e,"set"),r),r}function i(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var a=new WeakMap,c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a.set(this,{writable:!0,value:void 0})}var e,r,c;return e=t,(r=[{key:"sessionToken",get:function(){return function(t,e){return e.get?e.get.call(t):e.value}(t=this,i(t,a,"get"));var t},set:function(t){o(this,a,t)}}])&&n(e.prototype,r),c&&n(e,c),t}()},1563:(t,e,r)=>{"use strict";r.d(e,{N:()=>i,v:()=>a});var n=r(8576),o=r(9051),i=function(t){return t.HostedFlex="hosted-flex",t.Basic="basic",t}({}),a=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json";if(t===i.Basic)return new Headers({Authorization:"Basic ".concat(btoa("token:".concat(e)),")"),"Content-Type":r});if(t===i.HostedFlex)return new Headers({"x-flex-jwe":e,"Content-Type":r});throw new n.W(o.jK.InvalidParams)}},3772:(t,e,r)=>{"use strict";r.d(e,{u:()=>m});r(5301),r(3114),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(8029),o=r(8423),i=r(9051),a=r(279),c=r(1563),u=r(7044),s=r(6107);function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,v(t,e,"get"))}function d(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,v(t,e,"set"),r),r}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var y=new WeakMap,m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y.set(this,{writable:!0,value:void 0}),this.httpAdapter=new a.B(e),d(this,y,(0,s.C6)(e)),this.httpAdapter.setIsEdgeSupported(!0)}var e,r,l,v,m,w;return e=t,r=[{key:"fetchConfiguration",value:(w=f(regeneratorRuntime.mark((function t(e,r,a){var s,l,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={module:"backend",severity:n.W.Error,source:"configuration.service.ts"},t.prev=1,t.next=4,this.httpAdapter.get("https://flex-api[region].twilio.com/v1/Configuration?".concat(encodeURIComponent(String(e)),"=").concat(encodeURIComponent(String(r))),c.N.Basic,a);case 4:l=t.sent,t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(0,o.nr)(t.t0.code)){t.next=12;break}return f="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",h(this,y).call(this,i.jK.DownstreamServiceError,s,f));case 12:return t.abrupt("return",Promise.reject(t.t0));case 13:return p=(0,u.F)(l),t.abrupt("return",p);case 15:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(t,e,r){return w.apply(this,arguments)})},{key:"fetchPublicConfiguration",value:(m=f(regeneratorRuntime.mark((function t(e,r){var a,c,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={module:"backend",severity:n.W.Error,source:"configuration.service.ts"},null==e&&h(this,y).call(this,i.jK.InvalidParams,a,"Required parameter queryParamName was null or undefined."),null==r&&h(this,y).call(this,i.jK.InvalidParams,a,"Required parameter queryParamValue was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.get("https://flex-api[region].twilio.com/v1/Configuration/Public?".concat(encodeURIComponent(String(e)),"=").concat(encodeURIComponent(String(r))),void 0);case 6:c=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(0,o.nr)(t.t0.code)){t.next=14;break}return s="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",h(this,y).call(this,i.jK.DownstreamServiceError,a,s));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return l=(0,u.F)(c),t.abrupt("return",l);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t,e){return m.apply(this,arguments)})},{key:"updateConfiguration",value:(v=f(regeneratorRuntime.mark((function t(e){var r,a,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={module:"backend",severity:n.W.Error,source:"configuration.service.ts"},null==e&&h(this,y).call(this,i.jK.InvalidParams,r,"Required parameter accountConfigData was null or undefined."),t.prev=2,t.next=5,this.httpAdapter.post("https://flex-api[region].twilio.com/v1/Configuration",c.N.Basic,e);case 5:a=t.sent,t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(2),!(0,o.nr)(t.t0.code)){t.next=13;break}return s="ConfigurationService - ".concat(t.t0.message),t.abrupt("return",h(this,y).call(this,i.jK.DownstreamServiceError,r,s));case 13:return t.abrupt("return",Promise.reject(t.t0));case 14:return l=(0,u.F)(a),t.abrupt("return",l);case 16:case"end":return t.stop()}}),t,this,[[2,8]])}))),function(t){return v.apply(this,arguments)})}],r&&p(e.prototype,r),l&&p(e,l),t}()},6389:(t,e,r)=>{"use strict";r.d(e,{x:()=>O});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(5128),r(444),r(4011),r(5226),r(3275),r(9270);var n=r(9492),o=r(3304),i=r(8576),a=r(9051),c=r(8029),u=r(5543),s=r(6875),l=r(9337);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)}))}}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,g(t,e,"get"))}function w(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,g(t,e,"set"),r),r}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var b=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,O=function(){function t(e,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),w(this,b,e.getInstanceOf(n.E)),w(this,k,e.getInstanceOf(l.W)),w(this,x,(0,u.j)(e)(s.q9.Call)),m(this,x).debug("VoiceCall constructed"),w(this,j,o),w(this,E,r)}var e,r,f,h,d,g,O;return e=t,r=[{key:"call",get:function(){return m(this,E)}},{key:"device",get:function(){return m(this,j)}},{key:"toggleMute",value:function(){return m(this,E).mute(!m(this,E).isMuted())}},{key:"isMuted",value:function(){return m(this,E).isMuted()}},{key:"mute",value:function(){m(this,E).mute(!0)}},{key:"unmute",value:function(){m(this,E).mute(!1)}},{key:"disconnect",value:(O=v(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m(this,b).worker){t.next=5;break}return e="disconnect: worker is not initialized",m(this,x).error(e),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},e)));case 5:if(m(this,E)){t.next=9;break}return r="disconnect: no active call",m(this,x).error(r),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},r)));case 9:return t.prev=9,m(this,E).disconnect(),t.abrupt("return",Promise.resolve());case 14:return t.prev=14,t.t0=t.catch(9),n="disconnect: Failed to disconnect a call",m(this,x).error(n),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},n)));case 19:case"end":return t.stop()}}),t,this,[[9,14]])}))),function(){return O.apply(this,arguments)})},{key:"hold",value:(g=v(regeneratorRuntime.mark((function t(e){var r,n,u,s,l,f,h,d,v,y,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m(this,b).worker,n=null==e?void 0:e.holdMusicUrl,u=(null==e?void 0:e.holdMusicMethod)||"GET",r){t.next=7;break}return s="hold: worker is not initialized",m(this,x).error(s),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},s)));case 7:if(l=(0,o.p$)(r)){t.next=12;break}return f="hold: voice reservation not found",m(this,x).error(f),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},f)));case 12:if(!l||(0,o.A0)(l,r)){t.next=16;break}return d="hold: Cannot hold call with taskSid: ".concat(null==l||null===(h=l.task)||void 0===h?void 0:h.sid),m(this,x).error(d),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},d)));case 16:return t.prev=16,t.next=19,null==l||null===(v=l.task)||void 0===v?void 0:v.updateParticipant(p(p({hold:!0},n&&{holdUrl:n}),{},{holdMethod:u}));case 19:return t.abrupt("return",t.sent);case 22:return t.prev=22,t.t0=t.catch(16),w="hold: Error holding call with taskSid: ".concat(null==l||null===(y=l.task)||void 0===y?void 0:y.sid),m(this,x).error(w),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},w)));case 27:case"end":return t.stop()}}),t,this,[[16,22]])}))),function(t){return g.apply(this,arguments)})},{key:"unhold",value:(d=v(regeneratorRuntime.mark((function t(){var e,r,n,u,s,l,f,p,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=m(this,b).worker){t.next=5;break}return r="unhold: worker is not initialized",m(this,x).error(r),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},r)));case 5:if(n=(0,o.p$)(e)){t.next=10;break}return u="unhold: voice reservation not found",m(this,x).error(u),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},u)));case 10:if(!n||(0,o.A0)(n,e)){t.next=14;break}return l="unhold: Cannot unhold call with taskSid: ".concat(null==n||null===(s=n.task)||void 0===s?void 0:s.sid),m(this,x).error(l),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},l)));case 14:return t.prev=14,t.next=17,null==n||null===(f=n.task)||void 0===f?void 0:f.updateParticipant({hold:!1});case 17:return t.abrupt("return",t.sent);case 20:return t.prev=20,t.t0=t.catch(14),h="unhold: Error unholding call with taskSid: ".concat(null==n||null===(p=n.task)||void 0===p?void 0:p.sid),m(this,x).error(h),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},h)));case 25:case"end":return t.stop()}}),t,this,[[14,20]])}))),function(){return d.apply(this,arguments)})},{key:"isOnHold",value:(h=v(regeneratorRuntime.mark((function t(){var e,r,n,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=m(this,b).worker,r=(0,o.p$)(e)){t.next=6;break}return n="isOnHold: voice reservation not found",m(this,x).error(n),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},n)));case 6:if((0,o.cL)(r)||(0,o.im)(r.task)){t.next=10;break}return u="isOnHold: voice reservation is not live outbound call",m(this,x).error(u),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},u)));case 10:return t.next=12,m(this,k).getParticipantsByTask(null==r?void 0:r.task);case 12:return s=t.sent,t.abrupt("return",s.some((function(t){var e;return"customer"===t.type&&JSON.parse(null===(e=t.mediaProperties)||void 0===e?void 0:e.hold)})));case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})}],r&&y(e.prototype,r),f&&y(e,f),t}()},3304:(t,e,r)=>{"use strict";r.d(e,{A0:()=>E,A1:()=>f,BI:()=>h,OG:()=>m,Sc:()=>w,U_:()=>d,_8:()=>v,cL:()=>k,eO:()=>l,im:()=>x,jP:()=>p,jg:()=>j,kY:()=>O,p$:()=>g,uo:()=>y,xQ:()=>b});r(5301),r(6486),r(2047),r(1624),r(1e3),r(8534),r(4011),r(6706),r(3600),r(6770),r(3114),r(6257),r(6941),r(444),r(1076),r(5547),r(5128),r(5226),r(3275),r(9270),r(1117);function n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=u(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function u(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){return e===t.activity.sid}function f(t){return Boolean(t&&t.default&&t.default.enabled)}function p(t){return t&&t.default&&t.default.queue_sid}function h(t){return t&&t.default&&t.default.workflow_sid}function d(t){return t&&t.default&&t.default.caller_id}function v(){return!1}function y(t,e){return(null!=t&&t.reservations?Array.from(t.reservations.values()):[]).filter((function(t){return t.task&&t.task.sid===e}))}function m(t){return t&&"voice"===t.taskChannelUniqueName}function w(t,e){return!(!t||!t.reservations)&&Array.from(t.reservations.values()).some((function(t){return t.task&&t.status===e&&m(t.task)}))}function g(t){if(t&&t.reservations){var e,r=c(t.reservations.entries());try{for(r.s();!(e=r.n()).done;){var n=a(e.value,2)[1];if(n.task&&m(n.task))return n}}catch(t){r.e(t)}finally{r.f()}}return null}function b(t,e){var r=null==e?void 0:e.features,n=null==r?void 0:r.find((function(e){return e.id===t}));return!(!n||!n.enabled)}function k(t){return m(null==t?void 0:t.task)&&"accepted"===t.status}function x(t){return m(t)&&!!t.routingTarget&&"outbound"===t.attributes.direction}function E(t,e){return k(t)&&function(t,e){return Boolean(t.task&&t.workerSid===e.sid)}(t,e)}var j=function(t,e,r,n){if(r){var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({groupId:r.accountSid,userId:r.sid,workerSid:r.sid},n&&{error:n});e.track(t,a)}},O=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,r,n){var o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.sid){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,n.getParticipantsByTask(e);case 5:return i=t.sent,t.abrupt("return",!(null==i||!i.find((function(t){var e;return(null==t||null===(e=t.routingProperties)||void 0===e?void 0:e.workerSid)===o}))));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}()},5729:(t,e,r)=>{"use strict";r.d(e,{_:()=>b});r(5301),r(3114),r(1e3),r(1117),r(3524),r(3317),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(3304),c=r(8834),u=r(9492),s=r(5543),l=r(6875),f=r(8327);function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=new WeakMap,g=new WeakMap,b=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),v(this,m,e),v(this,w,r),v(this,g,n)}var e,r,y,b,k;return e=t,r=[{key:"run",value:(b=regeneratorRuntime.mark((function t(e){var r,p,h,v,y,b,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=(h=e).getInstanceOf(u.E),y=(0,s.j)(h)(l.q9.Client),b=h.getInstanceOf(f.$),k=v.worker,x=null===(r=d(this,g))||void 0===r?void 0:r.activityUpdateOptions,y.debug("setWorkerActivity invoked with activitySid: ".concat(d(this,w)," and targetWorkerSid: ").concat(d(this,m))),k){t.next=11;break}throw E="setWorkerActivity: worker is not initialized",y.error(E),new n.W(o.jK.SDK,{severity:i.W.Error},E);case 11:if(d(this,w)!==(null===(p=k.activity)||void 0===p?void 0:p.sid)){t.next=16;break}return j="setWorkerActivity: Activity with sid ".concat(d(this,w)," is already set"),(0,a.jg)(c.F.SetWorkerActivityCompleted,b,k,j),y.warn(j),t.abrupt("return",Promise.resolve());case 16:return t.prev=16,t.next=19,k.setWorkerActivity(d(this,m),d(this,w),x);case 19:return(0,a.jg)(c.F.SetWorkerActivityCompleted,b,k),t.abrupt("return",Promise.resolve());case 23:throw t.prev=23,t.t0=t.catch(16),O=null===t.t0||void 0===t.t0?void 0:t.t0.message,S=O&&O.match(/Worker WK.* cannot have its activity updated while it has .* pending reservations/)?"setWorkerActivity: Failed to set current activity to activity ".concat(d(this,w)," due to pending reservations"):"setWorkerActivity: Failed to set current activity to activity ".concat(d(this,w)),y.error(S),(0,a.jg)(c.F.SetWorkerActivityCompleted,b,k,S),new n.W(o.jK.SDK,{severity:i.W.Error},S);case 30:case"end":return t.stop()}}),t,this,[[16,23]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){p(o,r,n,i,a,"next",t)}function a(t){p(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&h(e.prototype,r),y&&h(e,y),t}()},3941:(t,e,r)=>{"use strict";r.d(e,{l:()=>x});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(1831),o=r.n(n),i=r(5543),a=r(6875),c=r(8576),u=r(9051),s=r(8029),l=r(3304),f=r(8834),p=r(9492),h=r(8327);function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=new WeakMap,x=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),m(this,g,e),m(this,b,r),m(this,k,n)}var e,r,n,w,x;return e=t,r=[{key:"run",value:(w=regeneratorRuntime.mark((function t(e){var r,n,d,v,m,w,x,E,j,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=(n=e).getInstanceOf(p.E),v=(0,i.j)(n)(a.q9.Client),m=n.getInstanceOf(h.$),w=d.worker,x=(null===(r=y(this,k))||void 0===r?void 0:r.mergeExisting)||!1,v.debug("setWorkerAttributes invoked with targetWorkerSid: ".concat(y(this,g))),w){t.next=11;break}return E="setWorkerAttributes: worker is not initialized",v.error(E),t.abrupt("return",Promise.reject(new c.W(u.jK.SDK,{severity:s.W.Error},E)));case 11:return j=x?o()(d.worker.attributes,y(this,b)):y(this,b),t.prev=12,t.next=15,d.worker.setWorkerAttributes(y(this,g),j);case 15:return(0,l.jg)(f.F.SetWorkerAttributesCompleted,m,w),t.abrupt("return",Promise.resolve());case 19:throw t.prev=19,t.t0=t.catch(12),O="setWorkerAttributes: Could not set worker attributes: ".concat(t.t0.message),new c.W(u.jK.SDK,{severity:s.W.Error},O);case 23:case"end":return t.stop()}}),t,this,[[12,19]])})),x=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=w.apply(t,e);function i(t){d(o,r,n,i,a,"next",t)}function a(t){d(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return x.apply(this,arguments)})}],r&&v(e.prototype,r),n&&v(e,n),t}()},8934:(t,e,r)=>{"use strict";r.d(e,{o:()=>b});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(3304),l=r(8834),f=r(8327),p=r(9337);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=new WeakMap,b=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),y(this,w,e),y(this,g,r)}var e,r,m,b,k;return e=t,r=[{key:"run",value:(b=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,b,k,x,E,j,O,S,P,L,T,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=(h=e).getInstanceOf(u.E),y=(0,a.j)(h)(c.q9.Actions),m=d.worker,b=h.getInstanceOf(f.$),k=h.getInstanceOf(p.W),y.debug("acceptTask invoked with taskSid: ".concat(v(this,w))),x=null===(r=v(this,g))||void 0===r?void 0:r.conferenceOptions,m){t.next=12;break}return E="acceptTask: worker is not initialized",y.error(E),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},E)));case 12:if(j=(0,s.uo)(m,v(this,w)),O=j.find((function(t){return"pending"===t.status}))){t.next=19;break}return S="acceptTask: Reservation for task ".concat(v(this,w)," not found"),(0,s.jg)(l.F.AcceptTaskCompleted,b,m,S),y.error(S),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},S)));case 19:if((0,s.OG)(O.task)){t.next=38;break}if(k){t.next=25;break}return P="acceptTask: CBM SDK is not initialized",y.error(P),(0,s.jg)(l.F.AcceptTaskCompleted,b,m,P),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},P)));case 25:return t.prev=25,t.next=28,k.acceptReservation(O);case 28:return L=t.sent,(0,s.jg)(l.F.AcceptTaskCompleted,b,m),t.abrupt("return",L);case 33:return t.prev=33,t.t0=t.catch(25),T="acceptTask: Failed to accept reservation ".concat(O.sid),y.error(T),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},T)));case 38:return t.prev=38,t.next=41,O.conference(x);case 41:return(0,s.jg)(l.F.AcceptTaskCompleted,b,m),t.abrupt("return",O);case 45:return t.prev=45,t.t1=t.catch(38),C="acceptTask: Failed to create conference for ".concat(O.sid),y.error(C),(0,s.jg)(l.F.AcceptTaskCompleted,b,m,C),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},C)));case 51:case"end":return t.stop()}}),t,this,[[25,33],[38,45]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},6149:(t,e,r)=>{"use strict";r.d(e,{N:()=>w});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(3304),l=r(8834),f=r(8327);function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),v(this,m,e)}var e,r,y,w,g;return e=t,r=[{key:"run",value:(w=regeneratorRuntime.mark((function t(e){var r,p,h,v,y,w,g,b,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=(h=e).getInstanceOf(u.E),y=(0,a.j)(h)(c.q9.Actions),w=v.worker,g=h.getInstanceOf(f.$),y.debug("cancelVoiceTaskTransfer invoked with taskSid: ".concat(d(this,m))),w){t.next=10;break}return b="cancelVoiceTaskTransfer: worker is not initialized",y.error(b),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},b)));case 10:if(k=(0,s.uo)(w,d(this,m)),x=k.find((function(t){return"accepted"===t.status}))){t.next=17;break}return E="cancelVoiceTaskTransfer: Reservation for task ".concat(d(this,m)," is not found"),y.error(E),(0,s.jg)(l.F.CancelVoiceTaskTransfer,g,w,E),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},E)));case 17:if((0,s.OG)(x.task)){t.next=22;break}return j="cancelVoiceTaskTransfer: Reservation for task ".concat(d(this,m)," is not an active call"),y.error(j),(0,s.jg)(l.F.CancelVoiceTaskTransfer,g,w,j),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},j)));case 22:if(null!==(r=x.task)&&void 0!==r&&null!==(p=r.transfers)&&void 0!==p&&p.outgoing){t.next=27;break}return O="cancelVoiceTaskTransfer: Reservation for task ".concat(d(this,m)," has\n            no outgoing transfer to cancel"),y.error(O),(0,s.jg)(l.F.CancelVoiceTaskTransfer,g,w,O),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},O)));case 27:return t.prev=27,t.next=30,x.task.transfers.outgoing.cancel();case 30:return(0,s.jg)(l.F.CancelVoiceTaskTransfer,g,w),t.abrupt("return",x.task);case 34:return t.prev=34,t.t0=t.catch(27),S="cancelVoiceTaskTransfer: Could not transfer task: ".concat(t.t0.message),(0,s.jg)(l.F.CancelVoiceTaskTransfer,g,w,S),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},S)));case 39:case"end":return t.stop()}}),t,this,[[27,34]])})),g=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=w.apply(t,e);function i(t){p(o,r,n,i,a,"next",t)}function a(t){p(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return g.apply(this,arguments)})}],r&&h(e.prototype,r),y&&h(e,y),t}()},4930:(t,e,r)=>{"use strict";r.d(e,{N:()=>g});r(5301),r(1e3),r(1117),r(4011),r(1624),r(2047),r(8534),r(3133),r(1157);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(9337),l=r(3304),f=r(8834),p=r(8327);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),y(this,w,e)}var e,r,m,g,b;return e=t,r=[{key:"run",value:(g=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,g,b,k,x,E,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=(r=e).getInstanceOf(u.E),d=(0,a.j)(r)(c.q9.Actions),y=h.worker,m=r.getInstanceOf(p.$),g=r.getInstanceOf(s.W),d.debug("completeTask invoked with taskSid: ".concat(v(this,w))),y){t.next=11;break}return b="completeTask: worker is not initialized",d.error(b),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},b)));case 11:if(g){t.next=16;break}return k="completeTask: CBM SDK is not initialized",d.error(k),(0,l.jg)(f.F.CompleteTaskCompleted,m,y,k),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},k)));case 16:if((x=(0,l.uo)(y,v(this,w)).filter((function(t){return"wrapping"===t.status||"accepted"===t.status}))).length){t.next=22;break}return E="completeTask: Reservation for task ".concat(v(this,w)," not found"),d.error(E),(0,l.jg)(f.F.CompleteTaskCompleted,m,y,E),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},E)));case 22:return t.prev=22,t.next=25,Promise.all(x.map((function(t){return g.completeReservation(t)})));case 25:(0,l.jg)(f.F.CompleteTaskCompleted,m,y),t.next=34;break;case 28:return t.prev=28,t.t0=t.catch(22),j="completeTask: Failed to complete reservation",d.error(j),(0,l.jg)(f.F.CompleteTaskCompleted,m,y,j),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},j)));case 34:return t.abrupt("return",x[0].task);case 35:case"end":return t.stop()}}),t,this,[[22,28]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=g.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},2169:(t,e,r)=>{"use strict";r.d(e,{m:()=>k});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(4930),o=r(8576),i=r(9051),a=r(8029),c=r(5543),u=r(6875),s=r(9492),l=r(9337),f=r(3304),p=r(8834),h=r(8327),d=r(776);function v(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,g(t,e,"get"))}function w(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,g(t,e,"set"),r),r}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var b=new WeakMap,k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b.set(this,{writable:!0,value:void 0}),w(this,b,e)}var e,r,g,k,x;return e=t,r=[{key:"run",value:(k=regeneratorRuntime.mark((function t(e){var r,v,y,w,g,k,x,E,j,O,S,P,L,T,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=(r=e).getInstanceOf(s.E),y=(0,c.j)(r)(u.q9.Actions),w=v.worker,g=r.getInstanceOf(h.$),k=r.getInstanceOf(l.W),y.debug("endTask invoked with taskSid: ".concat(m(this,b))),w){t.next=11;break}return x="endTask: worker is not initialized",y.error(x),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},x)));case 11:if(k){t.next=16;break}return E="endTask: CBM SDK is not initialized",y.error(E),(0,f.jg)(p.F.EndTaskCompleted,g,w,E),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},E)));case 16:if(j=(0,f.uo)(w,m(this,b)),O=j.find((function(t){return"accepted"===t.status})),S=j.find((function(t){return"wrapping"===t.status})),O||S){t.next=24;break}return P="endTask: Reservation for task ".concat(m(this,b)," is not found"),y.error(P),(0,f.jg)(p.F.EndTaskCompleted,g,w,P),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},P)));case 24:if(t.prev=24,!O||!(0,f.OG)(O.task)){t.next=29;break}return t.next=28,k.endConference(O);case 28:return t.abrupt("return",t.sent.task);case 29:if(!S){t.next=35;break}return t.t0=Promise,t.next=33,new n.N(m(this,b)).run(e);case 33:return t.t1=t.sent,t.abrupt("return",t.t0.resolve.call(t.t0,t.t1));case 35:return t.next=37,new d.n(m(this,b)).run(e);case 37:return L=t.sent,T=L.task,(0,f.jg)(p.F.EndTaskCompleted,g,w),t.abrupt("return",Promise.resolve(T));case 43:return t.prev=43,t.t2=t.catch(24),C="endTask: Could not end task: ".concat(t.t2.message),(0,f.jg)(p.F.EndTaskCompleted,g,w,C),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},C)));case 48:case"end":return t.stop()}}),t,this,[[24,43]])})),x=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=k.apply(t,e);function i(t){v(o,r,n,i,a,"next",t)}function a(t){v(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return x.apply(this,arguments)})}],r&&y(e.prototype,r),g&&y(e,g),t}()},6224:(t,e,r)=>{"use strict";r.d(e,{G:()=>g});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(9337),l=r(3304),f=r(8834),p=r(8327);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),y(this,w,e)}var e,r,m,g,b;return e=t,r=[{key:"run",value:(g=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,g,b,k,x,E,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=(r=e).getInstanceOf(u.E),d=(0,a.j)(r)(c.q9.Actions),y=h.worker,m=r.getInstanceOf(p.$),g=r.getInstanceOf(s.W),d.debug("rejectTask invoked with taskSid: ".concat(v(this,w))),y){t.next=11;break}return b="rejectTask: worker is not initialized",d.error(b),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},b)));case 11:if(k=(0,l.uo)(y,v(this,w)),x=k.find((function(t){return"pending"===t.status}))){t.next=18;break}return E="rejectTask: Reservation for task ".concat(v(this,w)," not found"),d.error(E),(0,l.jg)(f.F.RejectTaskCompleted,m,y,E),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},E)));case 18:return t.prev=18,t.next=21,g.rejectReservation(x);case 21:return(0,l.jg)(f.F.RejectTaskCompleted,m,y),t.abrupt("return",x);case 25:return t.prev=25,t.t0=t.catch(18),j="rejectTask: Failed to reject reservation ".concat(x.sid),d.error(j),(0,l.jg)(f.F.RejectTaskCompleted,m,y,j),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},j)));case 31:case"end":return t.stop()}}),t,this,[[18,25]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=g.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},7095:(t,e,r)=>{"use strict";r.d(e,{G:()=>b});r(5301),r(3114),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(3304),l=r(8834),f=r(8327);function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=new WeakMap,g=new WeakMap,b=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),v(this,m,e),v(this,w,r),v(this,g,n)}var e,r,y,b,k;return e=t,r=[{key:"run",value:(b=regeneratorRuntime.mark((function t(e){var r,p,h,v,y,b,k,x,E,j,O,S,P,L,T,C,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v=(h=e).getInstanceOf(u.E),y=(0,a.j)(h)(c.q9.Actions),b=v.worker,k=h.getInstanceOf(f.$),y.debug("startVoiceTaskTransfer invoked with taskSid: ".concat(d(this,m)," and to: ").concat(d(this,w))),x=null===(r=d(this,g))||void 0===r?void 0:r.transferOptions,b){t.next=11;break}return E="startVoiceTaskTransfer: worker is not initialized",y.error(E),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},E)));case 11:if(j=(0,s.uo)(b,d(this,m)),O=j.find((function(t){return"accepted"===t.status}))){t.next=18;break}return S="startVoiceTaskTransfer: Reservation for task ".concat(d(this,m)," is not found"),y.error(S),(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b,S),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},S)));case 18:if((0,s.OG)(O.task)){t.next=23;break}return P="startVoiceTaskTransfer: Reservation ".concat(d(this,m)," is not an active call"),y.error(P),(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b,P),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},P)));case 23:if("INITIATED"!==(null===(p=O.task.transfers.outgoing)||void 0===p?void 0:p.status)){t.next=28;break}return L="startVoiceTaskTransfer: Reservation ".concat(d(this,m)," has already initiated transfer"),y.error(L),(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b,L),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},L)));case 28:if(O.workerSid===b.sid){t.next=33;break}return T="startVoiceTaskTransfer: Reservation ".concat(d(this,m)," cannot be transferred by a different worker"),y.error(T),(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b,T),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},T)));case 33:if(t.prev=33,"COLD"!==(null==x?void 0:x.mode)){t.next=37;break}return t.next=37,O.updateParticipant({endConferenceOnExit:!1});case 37:return t.next=39,null==O?void 0:O.task.transfer(d(this,w),x);case 39:return C=t.sent,(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b),t.abrupt("return",C);case 44:if(t.prev=44,t.t0=t.catch(33),"COLD"!==(null==x?void 0:x.mode)){t.next=49;break}return t.next=49,O.updateParticipant({endConferenceOnExit:!0});case 49:return _="startVoiceTaskTransfer: Could not transfer task: ".concat(t.t0.message),(0,s.jg)(l.F.StartVoiceTaskTransferCompleted,k,b,_),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},_)));case 52:case"end":return t.stop()}}),t,this,[[33,44]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){p(o,r,n,i,a,"next",t)}function a(t){p(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&h(e.prototype,r),y&&h(e,y),t}()},776:(t,e,r)=>{"use strict";r.d(e,{n:()=>g});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(9337),l=r(3304),f=r(8834),p=r(8327);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),y(this,w,e)}var e,r,m,g,b;return e=t,r=[{key:"run",value:(g=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,g,b,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=(r=e).getInstanceOf(u.E),d=(0,a.j)(r)(c.q9.Actions),y=h.worker,m=r.getInstanceOf(p.$),g=r.getInstanceOf(s.W),d.debug("wrapupTask invoked with taskSid: ".concat(v(this,w))),y){t.next=11;break}return b="wrapupTask: worker is not initialized",d.error(b),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},b)));case 11:if(g){t.next=16;break}return k="wrapupTask: CBM SDK is not initialized",d.error(k),(0,l.jg)(f.F.WrapupTaskCompleted,m,y,k),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},k)));case 16:if(x=(0,l.uo)(y,v(this,w)),E=x.find((function(t){return"accepted"===t.status}))){t.next=23;break}return j="wrapupTask: Reservation for task ".concat(v(this,w)," is not found"),d.error(j),(0,l.jg)(f.F.WrapupTaskCompleted,m,y,j),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},j)));case 23:return t.prev=23,t.next=26,g.wrapReservation(E);case 26:return O=t.sent,(0,l.jg)(f.F.WrapupTaskCompleted,m,y),t.abrupt("return",O);case 31:return t.prev=31,t.t0=t.catch(23),S="wrapupTask: Failed to wrap-up reservation ".concat(E.sid),d.error(S),(0,l.jg)(f.F.WrapupTaskCompleted,m,y,S),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},S)));case 37:case"end":return t.stop()}}),t,this,[[23,31]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=g.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},7399:(t,e,r)=>{"use strict";r.d(e,{T:()=>k});r(1624),r(1e3),r(2047),r(1157),r(8534),r(9280),r(1117),r(5301);var n=r(2419),o=r(3308),i=r(6726),a=r(5543),c=r(6875),u=r(924),s=r(6389);function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakSet,k=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b.add(this),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),v(this,m,e),v(this,w,r),v(this,g,n)}var e,r,l,y;return e=t,r=[{key:"run",value:(y=f(regeneratorRuntime.mark((function t(e){var r,l,f,p,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=(r=e).getInstanceOf(i.ClientImpl),f=(0,a.j)(r)(c.q9.Client),d(this,m)===o.r.IncomingCall){t.next=6;break}return f.warn("Attempting to listen to an unknown event:",d(this,m)),t.abrupt("return",l);case 6:return t.prev=6,p=r.getInstanceOf(u.B),t.next=10,h(this,b,x).call(this,p,r);case 10:if(null==p||!p.voiceDevice){t.next=14;break}return p.voiceDevice.on(n.Device.EventName.Incoming,(function(t){var e=new s.x(r,t,p.voiceDevice);l.emitter.emit(o.r.IncomingCall,e)})),v=l.addListener(d(this,m),d(this,w)),t.abrupt("return",v);case 14:f.error("VoiceController does not have a voiceDevice."),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),f.error("Failed to add voice event listener to client.",t.t0);case 20:return f.warn("addVoiceEventListener failed to add a listener to the event:",d(this,m)),t.abrupt("return",l);case 22:case"end":return t.stop()}}),t,this,[[6,17]])}))),function(t){return y.apply(this,arguments)})}],r&&p(e.prototype,r),l&&p(e,l),t}();function x(t,e){return E.apply(this,arguments)}function E(){return(E=f(regeneratorRuntime.mark((function t(e,r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,a.j)(r)(c.q9.Client),e){t.next=4;break}return n.error("voiceController is undefined in initVoiceController"),t.abrupt("return");case 4:if(t.prev=4,e.isInitialized){t.next=8;break}return t.next=8,e.init(null===(o=d(this,g))||void 0===o?void 0:o.voiceDevice);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),n.error("Failed to initialise VoiceController",t.t0);case 13:case"end":return t.stop()}}),t,this,[[4,10]])})))).apply(this,arguments)}},8629:(t,e,r)=>{"use strict";r.d(e,{_:()=>O});r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(5301);var n=r(6389),o=r(8576),i=r(9051),a=r(8029),c=r(5543),u=r(9492),s=r(924),l=r(3304),f=r(9337);function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){v(i,n,o,a,c,"next",t)}function c(t){v(i,n,o,a,c,"throw",t)}a(void 0)}))}}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,b(t,e,"get"))}function g(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,b(t,e,"set"),r),r}function b(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var k=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,O=function(){function t(e,r){var n,o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:{}}),j.set(this,{writable:!0,value:(n=y(regeneratorRuntime.mark((function t(e){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=w(o,E).voiceDevice,n=(0,c.j)(e)("StartOutboundCall"),i=e.getInstanceOf(s.B),t.prev=3,i.isInitialized){t.next=7;break}return t.next=7,i.init(r);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n.error("Failed to initialise VoiceController",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),function(t){return n.apply(this,arguments)})}),g(this,k,e),g(this,x,r),g(this,E,i)}var e,r,p,d;return e=t,r=[{key:"run",value:(d=y(regeneratorRuntime.mark((function t(e){var r,p,d,v,y,m,g,b,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p=(r=e).getInstanceOf(u.E),d=r.getInstanceOf(s.B),v=(0,c.j)(r)("MonitorCall"),y=r.getInstanceOf(f.W),v.debug("monitorCall invoked with taskSid: ".concat(w(this,k))),m=p.worker,t.next=9,p.workspace.fetchTask(w(this,k));case 9:if(g=t.sent,m){t.next=14;break}return b="monitorCall: worker is not initialized",v.error(b),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},b)));case 14:return t.next=16,(0,l.kY)(g,m,y);case 16:if(!t.sent){t.next=20;break}return O="monitorCall: supervisor is already monitoring call for taskSid: ".concat(w(this,k)),v.error(O),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},O)));case 20:return t.next=22,w(this,j).call(this,r);case 22:return t.prev=22,t.next=25,p.worker.monitor(w(this,k),w(this,x),w(this,E).extraParams?h({},w(this,E).extraParams):{});case 25:t.next=30;break;case 27:return t.prev=27,t.t0=t.catch(22),t.abrupt("return",Promise.reject(new o.W(i.jK.SDK,{severity:a.W.Error},t.t0.message)));case 30:return t.abrupt("return",new Promise((function(t){d.subscribeToIncomingCallEvent((function e(o){v.info("Incoming call event received in monitorCall");var i=new n.x(r,o,d.voiceDevice);d.unsubscribeFromIncomingCallEvent(e),t(i)}))})));case 31:case"end":return t.stop()}}),t,this,[[22,27]])}))),function(t){return d.apply(this,arguments)})}],r&&m(e.prototype,r),p&&m(e,p),t}()},5540:(t,e,r)=>{"use strict";r.d(e,{N:()=>T});r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(5301);var n=r(6389),o=r(8576),i=r(9051),a=r(8029),c=r(5543),u=r(9492),s=r(3304),l=r(9294),f=r(924),p=r(8834),h=r(8327);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){m(i,n,o,a,c,"next",t)}function c(t){m(i,n,o,a,c,"throw",t)}a(void 0)}))}}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,x(t,e,"get"))}function k(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,x(t,e,"set"),r),r}function x(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var E=new WeakMap,j=new WeakMap,O=new WeakMap,S=new WeakMap,P=new WeakMap,L=new WeakMap,T=function(){function t(e,r,n,o,i){var a,u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),O.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:void 0}),L.set(this,{writable:!0,value:(a=w(regeneratorRuntime.mark((function t(e){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null===(r=b(u,P))||void 0===r?void 0:r.voiceDevice,o=(0,c.j)(e)("StartOutboundCall"),i=e.getInstanceOf(f.B),t.prev=3,i.isInitialized){t.next=7;break}return t.next=7,i.init(n);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),o.error("Failed to initialise VoiceController",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),function(t){return a.apply(this,arguments)})}),k(this,E,e),k(this,j,r),k(this,O,n),k(this,S,o),k(this,P,i)}var e,r,d,y;return e=t,r=[{key:"run",value:(y=w(regeneratorRuntime.mark((function t(e){var r,d,y,m,g,k,x,T,C,_,W,I,F,A,R,N,D,M,q,G,K,U,V,B,Y,z,H=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=(r=e).getInstanceOf(u.E),y=(0,c.j)(r)("StartOutboundCall"),m=r.getInstanceOf(h.$),g=r.getInstanceOf(l.B),k=r.getInstanceOf(f.B),y.debug("startOutboundCall invoked to number: ".concat(b(this,E))),x=d.worker,T=b(this,P)||{},C=T.attributesForTaskCreation,_=T.conferenceOptions,x){t.next=14;break}throw W="startOutboundCall: worker is not initialized",y.error(W),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,W),new o.W(i.jK.SDK,{severity:a.W.Error},W);case 14:if(b(this,E)){t.next=19;break}throw I="startOutboundCall: toNumber is a required parameter",y.error(I),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,I),new o.W(i.jK.SDK,{severity:a.W.Error},I);case 19:if(F=b(this,j)||(0,s.U_)(g.get().outboundCallFlows)){t.next=25;break}throw A="startOutboundCall: fromNumber is required",y.error(A),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,A),new o.W(i.jK.SDK,{severity:a.W.Error},A);case 25:if(R=b(this,S)||(0,s.jP)(g.get().outboundCallFlows)){t.next=31;break}throw N="startOutboundCall: taskQueueSid is required",y.error(N),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,N),new o.W(i.jK.SDK,{severity:a.W.Error},N);case 31:if(D=b(this,O)||(0,s.BI)(g.get().outboundCallFlows)){t.next=37;break}throw M="startOutboundCall: workflowSid is required",y.error(M),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,M),new o.W(i.jK.SDK,{severity:a.W.Error},M);case 37:if(q=g.get().taskrouterOfflineActivitySid){t.next=43;break}throw G="startOutboundCall: taskrouterOfflineActivitySid is undefined",y.error(G),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,G),new o.W(i.jK.SDK,{severity:a.W.Error},G);case 43:if(!(0,s.eO)(x,q)){t.next=48;break}throw K="startOutboundCall: worker is offline, outbound call cancelled",y.error(K),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,K),new o.W(i.jK.SDK,{severity:a.W.Error},K);case 48:if((0,s.A1)(g.get().outboundCallFlows)){t.next=53;break}throw U="startOutboundCall: Outbound calling is disabled in Flex account configuration,\n                                outbound call cancelled",y.error(U),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,U),new o.W(i.jK.SDK,{severity:a.W.Error},U);case 53:if(!(0,s._8)()){t.next=58;break}throw V="startOutboundCall: Another outbound call is already pending, outbound call cancelled",y.error(V),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,V),new o.W(i.jK.SDK,{severity:a.W.Error},V);case 58:if(!(0,s.Sc)(x,"pending")){t.next=63;break}throw B="startOutboundCall: Inbound call is pending, outbound call cancelled",y.error(B),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,B),new o.W(i.jK.SDK,{severity:a.W.Error},B);case 63:if(!(0,s.Sc)(x,"accepted")){t.next=68;break}throw Y="startOutboundCall: Another voice task is already in accepted status, outbound call cancelled",y.error(Y),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,Y),new o.W(i.jK.SDK,{severity:a.W.Error},Y);case 68:return t.next=70,b(this,L).call(this,r);case 70:if(k.isAudioInputDeviceAvailable()){t.next=75;break}throw z="startOutboundCall: no audio input device, outbound call cancelled",y.error(z),(0,s.jg)(p.F.StartOutboundCallCompleted,m,x,z),new o.W(i.jK.SDK,{severity:a.W.Error},z);case 75:return t.abrupt("return",new Promise(function(){var t=w(regeneratorRuntime.mark((function t(e,c){var u,s,l,f,p,h,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=function t(o){var i,a,c;if(y.info("Incoming call event received in startOutboundCall",null==o||null===(i=o.parameters)||void 0===i?void 0:i.From,null==o||null===(a=o.parameters)||void 0===a?void 0:a.To),(null==o||null===(c=o.parameters)||void 0===c?void 0:c.From)===F){y.debug("From phone numbers match"),clearTimeout(u),k.unsubscribeFromIncomingCallEvent(t);var s=new n.x(r,o,k.voiceDevice);e(s)}else y.error("Incoming call is coming from a different number, not from the one given as an argument to startOutboundCall action")},k.subscribeToIncomingCallEvent(l),p=function(){var t=w(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y.info("A reservation has been created for the task",null==e||null===(r=e.task)||void 0===r?void 0:r.sid),e.task.sid!==s){t.next=16;break}return t.prev=2,t.next=5,e.conference(_);case 5:n=t.sent,y.debug("Conference created",n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),y.error("Error creating conference",t.t0);case 12:return t.prev=12,x.off("reservationCreated",p),x.off("reservationFailed",f),t.finish(12);case 16:case"end":return t.stop()}}),t,null,[[2,9,12,16]])})));return function(e){return t.apply(this,arguments)}}(),f=function(t){var e;y.error("Failed to create reservation for task:",null==t||null===(e=t.task)||void 0===e?void 0:e.sid),t.task.sid===s&&(x.off("reservationCreated",p),x.off("reservationFailed",f))},u=setTimeout((function(){k.unsubscribeFromIncomingCallEvent(l),x.off("reservationCreated",p),x.off("reservationFailed",f);var t="Timeout: No incoming call event received within 30 seconds";y.error(t),c(new o.W(i.jK.SDK,{severity:a.W.Error},t))}),3e4),x.on("reservationCreated",p),x.on("reservationFailed",f),t.prev=7,h=v(v({},C),{},{direction:"outbound"}),d={taskChannelUniqueName:"voice",attributes:h},t.next=12,x.createTask(b(H,E),F,D,R,d);case 12:s=t.sent,t.next=22;break;case 15:t.prev=15,t.t0=t.catch(7),clearTimeout(u),k.unsubscribeFromIncomingCallEvent(l),x.off("reservationCreated",p),x.off("reservationFailed",f),c(t.t0);case 22:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e,r){return t.apply(this,arguments)}}()));case 76:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})}],r&&g(e.prototype,r),d&&g(e,d),t}()},103:(t,e,r)=>{"use strict";r.d(e,{m:()=>g});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(3304),l=r(8834),f=r(8327),p=r(9337);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),y(this,w,e)}var e,r,m,g,b;return e=t,r=[{key:"run",value:(g=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,g,b,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=(r=e).getInstanceOf(u.E),d=(0,a.j)(r)(c.q9.Actions),y=h.worker,m=r.getInstanceOf(f.$),g=r.getInstanceOf(p.W),d.debug("endConferenceForAll invoked with taskSid: ".concat(v(this,w))),y){t.next=11;break}return b="endConferenceForAll: Worker is not initialized",d.error(b),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},b)));case 11:if(k=(0,s.uo)(y,v(this,w)),x=k.find((function(t){return"accepted"===t.status}))){t.next=18;break}throw E="endConferenceForAll: Reservation not found",d.error(E),(0,s.jg)(l.F.EndConferenceForAllCompleted,m,y,E),new n.W(o.jK.SDK,{severity:i.W.Error},E);case 18:return t.prev=18,t.next=21,g.endConference(x);case 21:return j=t.sent,O=j.task,(0,s.jg)(l.F.EndConferenceForAllCompleted,m,y),t.abrupt("return",O);case 27:throw t.prev=27,t.t0=t.catch(18),S="endConferenceForAll: Could not end conference with task sid ".concat(x.task.sid),d.error(S),(0,s.jg)(l.F.UnholdParticipantCompleted,m,y,S),new n.W(o.jK.SDK,{severity:i.W.Error},S);case 33:case"end":return t.stop()}}),t,this,[[18,27]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=g.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},2910:(t,e,r)=>{"use strict";r.d(e,{Z:()=>j});r(5301),r(6706),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(5128),r(444),r(4011),r(5226),r(3275),r(9270);var n=r(3304),o=r(5543),i=r(6875),a=r(8576),c=r(9051),u=r(8029),s=r(8834),l=r(8327),f=r(9337),p=r(9492);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,b(t,e,"get"))}function g(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,b(t,e,"set"),r),r}function b(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var k=new WeakMap,x=new WeakMap,E=new WeakMap,j=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),g(this,k,e),g(this,x,r),g(this,E,n)}var e,r,h,v,b;return e=t,r=[{key:"run",value:(v=regeneratorRuntime.mark((function t(e){var r,h,v,y,m,g,b,j,O,S,P,L,T,C,_,W,I,F,A,R,N,D=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m=(y=e).getInstanceOf(p.E),g=(0,o.j)(y)(i.q9.Client),b=y.getInstanceOf(l.$),j=y.getInstanceOf(f.W),O=m.worker,S=null===(r=w(this,E))||void 0===r?void 0:r.holdMusicUrl,P=(null===(h=w(this,E))||void 0===h?void 0:h.holdMusicMethod)||"GET",L=(0,n.uo)(O,w(this,x)),(T=L.find((function(t){return"accepted"===t.status})))&&(0,n.A0)(T,O)){t.next=15;break}throw C="holdParticipant: Can't hold participant",g.error(C),(0,n.jg)(s.F.HoldParticipantCompleted,b,O,C),new a.W(c.jK.SDK,{severity:u.W.Error},C);case 15:return _=T.task,t.next=18,j.getParticipantBySid(w(this,k),_);case 18:if(!(W=t.sent)||"external"!==W.type){t.next=32;break}return t.prev=20,t.next=23,j.holdParticipant(_,w(this,k));case 23:case 39:case 44:return(0,n.jg)(s.F.HoldParticipantCompleted,b,O),t.abrupt("return",Promise.resolve());case 27:throw t.prev=27,t.t0=t.catch(20),I="holdParticipant: Could not hold external participant ".concat(w(this,k)),(0,n.jg)(s.F.HoldParticipantCompleted,b,O,I),new a.W(c.jK.SDK,{severity:u.W.Error},I);case 32:return t.next=34,j.getParticipantsByTask(_);case 34:if(F=t.sent,!(A=F.find((function(t){var e;return(null===(e=t.routingProperties)||void 0===e?void 0:e.workerSid)===w(D,k)})))||null===(v=A.routingProperties)||void 0===v||!v.workerSid||"agent"!==A.type){t.next=41;break}return t.next=39,_.hold(null===(R=A.routingProperties)||void 0===R?void 0:R.workerSid,!0,d(d({},S&&{holdUrl:S}),P&&{holdMethod:P}));case 41:return t.prev=41,t.next=44,_.updateParticipant(d(d({hold:!0},S&&{holdUrl:S}),{},{holdMethod:P}));case 48:throw t.prev=48,t.t1=t.catch(41),N="holdParticipant: Could not hold participant ".concat(w(this,k)),(0,n.jg)(s.F.HoldParticipantCompleted,b,O,N),new a.W(c.jK.SDK,{severity:u.W.Error},N);case 53:case"end":return t.stop()}}),t,this,[[20,27],[41,48]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=v.apply(t,e);function i(t){y(o,r,n,i,a,"next",t)}function a(t){y(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&m(e.prototype,r),h&&m(e,h),t}()},2621:(t,e,r)=>{"use strict";r.d(e,{X:()=>b});r(5301),r(1e3),r(1117),r(6706),r(3114),r(1624),r(2047),r(1157),r(8534);var n=r(6622),o=r(8327),i=r(9337),a=r(6875),c=r(9492),u=r(3304),s=r(8834),l=r(8576),f=r(9051),p=r(8029);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=new WeakMap,b=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),y(this,w,e),y(this,g,r)}var e,r,m,b,k;return e=t,r=[{key:"run",value:(b=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,b,k,x,E,j,O,S,P,L,T,C,_,W,I,F,A=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y=(d=e).getInstanceOf(c.E),m=(0,n.getLogger)(a.q9.Actions),b=y.worker,k=d.getInstanceOf(o.$),x=d.getInstanceOf(i.W),m.debug("kickParticipant invoked with #taskSid: ".concat(v(this,g))),x){t.next=11;break}return E="kickParticipant: CBM SDK is not initialized",m.error(E),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},E)));case 11:if(b){t.next=15;break}return j="kickParticipant: worker is not initialized",m.error(j),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},j)));case 15:if(O=(0,u.uo)(b,v(this,g)),S=null==O?void 0:O.find((function(t){return"accepted"===t.status}))){t.next=22;break}throw P="kickParticipant: Reservation for task ".concat(v(this,g)," not found"),m.error(P),(0,u.jg)(s.F.KickParticipantCompleted,k,b,P),new l.W(f.jK.SDK,{severity:p.W.Error},P);case 22:return L=S.task,t.next=25,x.getParticipantsByTask(L);case 25:if(T=t.sent,!(C=T.find((function(t){var e;return(null===(e=t.routingProperties)||void 0===e?void 0:e.workerSid)===v(A,w)})))||b.sid!==v(this,w)){t.next=32;break}throw _="kickParticipant: Worker ".concat(v(this,w)," cannot kick self from task ").concat(v(this,g)),m.error(_),(0,u.jg)(s.F.KickParticipantCompleted,k,b,_),new l.W(f.jK.SDK,{severity:p.W.Error},_);case 32:if((null==C||null===(r=C.routingProperties)||void 0===r?void 0:r.workerSid)===v(this,w)){t.next=36;break}return t.next=35,x.getParticipantBySid(v(this,w),L);case 35:W=t.sent;case 36:if(W||(null==C||null===(h=C.routingProperties)||void 0===h?void 0:h.workerSid)===v(this,w)){t.next=41;break}throw I="kickParticipant: Participant ".concat(v(this,w)," for task ").concat(v(this,g)," not found"),m.error(I),(0,u.jg)(s.F.KickParticipantCompleted,k,b,I),new l.W(f.jK.SDK,{severity:p.W.Error},I);case 41:if(t.prev=41,!W||"external"!==W.type){t.next=47;break}return t.next=45,x.removeVoiceParticipant(L,W.participantSid);case 45:return(0,u.jg)(s.F.KickParticipantCompleted,k,b),t.abrupt("return",Promise.resolve());case 47:return t.next=49,L.kick(v(this,w));case 49:return(0,u.jg)(s.F.KickParticipantCompleted,k,b),t.abrupt("return",Promise.resolve());case 53:return t.prev=53,t.t0=t.catch(41),F="kickParticipant: Failed to kick participant ".concat(v(this,w),"         from reservation ").concat(S.sid),m.error(F),(0,u.jg)(s.F.KickParticipantCompleted,k,b,F),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},F)));case 59:case"end":return t.stop()}}),t,this,[[41,53]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},5700:(t,e,r)=>{"use strict";r.d(e,{G:()=>x});r(5301),r(3114),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(6622),o=r(8327),i=r(9337),a=r(6875),c=r(9492),u=r(3304),s=r(8834),l=r(8576),f=r(9051),p=r(8029),h=r(9294);function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=new WeakMap,x=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),m(this,g,e),m(this,b,r),m(this,k,n)}var e,r,w,x,E;return e=t,r=[{key:"run",value:(x=regeneratorRuntime.mark((function t(e){var r,d,v,m,w,x,E,j,O,S,P,L,T,C;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=(r=e).getInstanceOf(c.E),v=(0,n.getLogger)(a.q9.Actions),m=d.worker,w=r.getInstanceOf(o.$),x=r.getInstanceOf(i.W),E=r.getInstanceOf(h.B),v.debug("startExternalWarmVoiceTaskTransfer invoked with #taskSid: ".concat(y(this,g)," and #phoneNumber: ").concat(y(this,b))),m){t.next=12;break}return j="startExternalWarmVoiceTaskTransfer: worker is not initialized",v.error(j),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},j)));case 12:if(O=(0,u.uo)(m,y(this,g)),S=O.find((function(t){return"accepted"===t.status}))){t.next=19;break}return P="startExternalWarmVoiceTaskTransfer: Reservation for task ".concat(y(this,g)," is not found"),v.error(P),(0,u.jg)(s.F.StartExternalWarmVoiceTaskTransferCompleted,w,m,P),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},P)));case 19:if(L=y(this,k)||(0,u.U_)(E.get().outboundCallFlows)){t.next=25;break}return T="startExternalWarmVoiceTaskTransfer: #callerId not found",v.error(T),(0,u.jg)(s.F.StartExternalWarmVoiceTaskTransferCompleted,w,m,T),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},T)));case 25:return t.prev=25,t.next=28,x.addVoiceParticipant(S.task,{from:L,to:y(this,b),type:"external"});case 28:return t.abrupt("return",t.sent);case 31:return t.prev=31,t.t0=t.catch(25),C="startExternalWarmVoiceTaskTransfer: Could not transfer task: ".concat(t.t0.message),(0,u.jg)(s.F.StartExternalWarmVoiceTaskTransferCompleted,w,m,C),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},C)));case 36:case"end":return t.stop()}}),t,this,[[25,31]])})),E=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=x.apply(t,e);function i(t){d(o,r,n,i,a,"next",t)}function a(t){d(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return E.apply(this,arguments)})}],r&&v(e.prototype,r),w&&v(e,w),t}()},2788:(t,e,r)=>{"use strict";r.d(e,{t:()=>b});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(6622),o=r(8327),i=r(9337),a=r(6875),c=r(9492),u=r(3304),s=r(8834),l=r(8576),f=r(9051),p=r(8029);function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=new WeakMap,b=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),y(this,w,e),y(this,g,r)}var e,r,m,b,k;return e=t,r=[{key:"run",value:(b=regeneratorRuntime.mark((function t(e){var r,h,d,y,m,b,k,x,E,j,O,S,P,L,T,C,_,W,I,F=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=(h=e).getInstanceOf(c.E),y=(0,n.getLogger)(a.q9.Actions),m=d.worker,b=h.getInstanceOf(o.$),k=h.getInstanceOf(i.W),y.debug("holdParticipant invoked with taskSid: ".concat(v(this,g))),m){t.next=11;break}return x="unholdParticipant: Worker is not initialized",y.error(x),t.abrupt("return",Promise.reject(new l.W(f.jK.SDK,{severity:p.W.Error},x)));case 11:if(E=(0,u.uo)(m,v(this,g)),(j=E.find((function(t){return"accepted"===t.status})))&&(0,u.A0)(j,m)){t.next=18;break}throw O="unholdParticipant: Reservation not found or worker cannot unhold it",y.error(O),(0,u.jg)(s.F.UnholdParticipantCompleted,b,m,O),new l.W(f.jK.SDK,{severity:p.W.Error},O);case 18:return S=j.task,t.next=21,k.getParticipantBySid(v(this,w),S);case 21:if(!(P=t.sent)||"external"!==P.type){t.next=36;break}return t.prev=23,t.next=26,k.unholdParticipant(S,v(this,w));case 26:case 44:case 57:return(0,u.jg)(s.F.UnholdParticipantCompleted,b,m),t.abrupt("return",Promise.resolve());case 30:throw t.prev=30,t.t0=t.catch(23),L="unholdParticipant: Could not unhold external participant ".concat(v(this,w)),y.error(L),(0,u.jg)(s.F.UnholdParticipantCompleted,b,m,L),new l.W(f.jK.SDK,{severity:p.W.Error},L);case 36:return t.next=38,k.getParticipantsByTask(S);case 38:if(T=t.sent,!(C=T.find((function(t){var e;return(null===(e=t.routingProperties)||void 0===e?void 0:e.workerSid)===v(F,w)})))||null===(r=C.routingProperties)||void 0===r||!r.workerSid||"agent"!==C.type){t.next=54;break}return t.prev=41,t.next=44,S.hold(null===(_=C.routingProperties)||void 0===_?void 0:_.workerSid,!1);case 48:throw t.prev=48,t.t1=t.catch(41),W="unholdParticipant: Could not unhold agent participant ".concat(v(this,w)),y.error(W),(0,u.jg)(s.F.UnholdParticipantCompleted,b,m,W),new l.W(f.jK.SDK,{severity:p.W.Error},W);case 54:return t.prev=54,t.next=57,S.updateParticipant({hold:!1});case 61:throw t.prev=61,t.t2=t.catch(54),I="unholdParticipant: Could not unhold participant ".concat(v(this,w)),y.error(I),(0,u.jg)(s.F.UnholdParticipantCompleted,b,m,I),new l.W(f.jK.SDK,{severity:p.W.Error},I);case 67:case"end":return t.stop()}}),t,this,[[23,30],[41,48],[54,61]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=b.apply(t,e);function i(t){h(o,r,n,i,a,"next",t)}function a(t){h(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&d(e.prototype,r),m&&d(e,m),t}()},6797:(t,e,r)=>{"use strict";r.d(e,{U:()=>k});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(1831),o=r.n(n),i=r(8576),a=r(9051),c=r(8029),u=r(5543),s=r(6875),l=r(9492),f=r(3304),p=r(8834),h=r(8327);function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m(this,g,e),m(this,b,r)}var e,r,n,w,k;return e=t,r=[{key:"run",value:(w=regeneratorRuntime.mark((function t(e){var r,n,d,v,m,w,k,x,E,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,d=(null===(r=y(this,b))||void 0===r?void 0:r.mergeExisting)||!1,v=n.getInstanceOf(l.E),m=(0,u.j)(n)(s.q9.Actions),w=v.worker,k=n.getInstanceOf(h.$),m.debug("setAttributes called with attributes ",y(this,g)),w){t.next=11;break}return x="setAttributes: worker is not initialized",m.error(x),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},x)));case 11:return E=d?o()(v.worker.attributes,y(this,g)):y(this,g),t.prev=12,t.next=15,v.worker.setAttributes(E);case 15:return(0,f.jg)(p.F.SetAttributesCompleted,k,w),t.abrupt("return",Promise.resolve());case 19:return t.prev=19,t.t0=t.catch(12),j="setAttributes: Could not set worker attributes: ".concat(t.t0.message),(0,f.jg)(p.F.SetAttributesCompleted,k,w,j),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},j)));case 24:case"end":return t.stop()}}),t,this,[[12,19]])})),k=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=w.apply(t,e);function i(t){d(o,r,n,i,a,"next",t)}function a(t){d(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return k.apply(this,arguments)})}],r&&v(e.prototype,r),n&&v(e,n),t}()},7177:(t,e,r)=>{"use strict";r.d(e,{_:()=>g});r(5301),r(1e3),r(1117),r(3524),r(3317),r(1624),r(2047),r(1157),r(8534);var n=r(8576),o=r(9051),i=r(8029),a=r(5543),c=r(6875),u=r(9492),s=r(3304),l=r(8834),f=r(8327);function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=new WeakMap,g=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),v(this,m,e),v(this,w,r)}var e,r,y,g,b;return e=t,r=[{key:"run",value:(g=regeneratorRuntime.mark((function t(e){var r,p,h,v,y,g,b,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=e,h=null===(r=d(this,w))||void 0===r?void 0:r.activityUpdateOptions,v=p.getInstanceOf(u.E),y=(0,a.j)(p)(c.q9.Actions),g=v.worker,b=p.getInstanceOf(f.$),y.debug("setCurrentActivity called with activitySid: ",d(this,m)),g){t.next=11;break}return k="setCurrentActivity: worker is not initialized",y.error(k),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},k)));case 11:if(x=g.activities.get(d(this,m)),E=g.activity,d(this,m)!==(null==E?void 0:E.sid)){t.next=18;break}return j="setCurrentActivity: Activity with sid ".concat(d(this,m)," is already set"),y.warn(j),(0,s.jg)(l.F.SetCurrentActivityCompleted,b,g,j),t.abrupt("return",Promise.resolve());case 18:return t.prev=18,t.next=21,null==x?void 0:x.setAsCurrent(h);case 21:return(0,s.jg)(l.F.SetCurrentActivityCompleted,b,g),t.abrupt("return",Promise.resolve());case 25:return t.prev=25,t.t0=t.catch(18),O=null===t.t0||void 0===t.t0?void 0:t.t0.message,S=O&&O.match(/Worker WK.* cannot have its activity updated while it has .* pending reservations/)?"setCurrentActivity: Failed to set current activity to activity ".concat(d(this,m)," due to pending reservations"):"setCurrentActivity: Failed to set current activity to activity ".concat(d(this,m)),(0,s.jg)(l.F.SetCurrentActivityCompleted,b,g,S),y.error(S),t.abrupt("return",Promise.reject(new n.W(o.jK.SDK,{severity:i.W.Error},S)));case 32:case"end":return t.stop()}}),t,this,[[18,25]])})),b=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=g.apply(t,e);function i(t){p(o,r,n,i,a,"next",t)}function a(t){p(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return b.apply(this,arguments)})}],r&&h(e.prototype,r),y&&h(e,y),t}()},3257:(t,e,r)=>{"use strict";r.d(e,{W:()=>x});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(1831),o=r.n(n),i=r(8576),a=r(9051),c=r(8029),u=r(5543),s=r(6875),l=r(9492),f=r(3304),p=r(8834),h=r(8327);function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=new WeakMap,x=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),m(this,g,e),m(this,b,r),m(this,k,n)}var e,r,n,w,x;return e=t,r=[{key:"run",value:(w=regeneratorRuntime.mark((function t(e){var r,n,d,v,m,w,x,E,j,O,S,P,L;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e,d=(null===(r=y(this,k))||void 0===r?void 0:r.mergeExisting)||!1,v=n.getInstanceOf(l.E),m=(0,u.j)(n)(s.q9.Actions),w=v.worker,x=n.getInstanceOf(h.$),m.debug("setTaskAttributes invoked with taskSid: ".concat(y(this,g))),w){t.next=11;break}return E="setTaskAttributes: worker is not initialized",m.error(E),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},E)));case 11:if((j=(0,f.uo)(w,y(this,g))).length){t.next=17;break}return O="setTaskAttributes: task for taskSid: ".concat(y(this,g)," is not found"),m.error(O),(0,f.jg)(p.F.SetTaskAttributesCompleted,x,w,O),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},O)));case 17:return S=j[0].task,t.prev=18,P=d?o()(null==S?void 0:S.attributes,y(this,b)):y(this,b),t.next=22,S.setAttributes(P);case 22:return(0,f.jg)(p.F.SetTaskAttributesCompleted,x,w),t.abrupt("return",S);case 26:return t.prev=26,t.t0=t.catch(18),L="setTaskAttributes: Could not set task attributes: ".concat(t.t0.message),(0,f.jg)(p.F.SetTaskAttributesCompleted,x,w,L),t.abrupt("return",Promise.reject(new i.W(a.jK.SDK,{severity:c.W.Error},L)));case 31:case"end":return t.stop()}}),t,this,[[18,26]])})),x=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=w.apply(t,e);function i(t){d(o,r,n,i,a,"next",t)}function a(t){d(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t){return x.apply(this,arguments)})}],r&&v(e.prototype,r),n&&v(e,n),t}()},8834:(t,e,r)=>{"use strict";r.d(e,{F:()=>n});var n=function(t){return t.AcceptTaskCompleted="AcceptTask Completed",t.RejectTaskCompleted="RejectTask Completed",t.SetAttributesCompleted="SetAttributes Completed",t.SetCurrentActivityCompleted="SetCurrentActivity Completed",t.WrapupTaskCompleted="WrapupTask Completed",t.CompleteTaskCompleted="CompleteTask Completed",t.SetTaskAttributesCompleted="SetTaskAttributes Completed",t.StartVoiceTaskTransferCompleted="StartVoiceTaskTransfer Completed",t.CancelVoiceTaskTransfer="CancelVoiceTaskTransfer Completed",t.KickParticipantCompleted="KickParticipant Completed",t.EndTaskCompleted="EndTask Completed",t.HoldParticipantCompleted="HoldParticipant Completed",t.UnholdParticipantCompleted="UnholdParticipant Completed",t.SetWorkerActivityCompleted="SetWorkerActivity Completed",t.SetWorkerAttributesCompleted="SetWorkerAttributes Completed",t.StartOutboundCallCompleted="StartOutboundCall Completed",t.EndConferenceForAllCompleted="EndConferenceForAll Completed",t.StartExternalWarmVoiceTaskTransferCompleted="StartExternalWarmVoiceTaskTransferCompleted",t.UpdateTokenCompleted="UpdateToken Completed",t.ClientRolesCompleted="client.roles Completed",t.ClientTokenCompleted="client.token Completed",t}({})},8327:(t,e,r)=>{"use strict";r.d(e,{$:()=>h});r(5128),r(444),r(4011),r(5226),r(3275),r(9270);const n=require("@segment/analytics-node");var o=r(4147),i=r(4957),a=r(3951),c=r(5543),u=r(6875);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,"track",(function(t,e){if(r.analytics)try{r.analytics.track({userId:null==e?void 0:e.userId,anonymousId:null==e?void 0:e.anonymousId,event:t,properties:l(l({},r.commonProperties),e)})}catch(t){r.logger.warn(t)}else r.logger.warn("Analytics is not initialized")})),this.clientOptions=e.getInstanceOf(i.r),this.logger=(0,c.j)(e)(u.q9.Analytics)}var e,r,s;return e=t,(r=[{key:"init",value:function(t){this.analytics=new n.Analytics({writeKey:t});var e,r,i=((0,a.B)()||{}).region||this.clientOptions.region||"us1",c=null!==globalThis&&void 0!==globalThis&&null!==(e=globalThis.Twilio)&&void 0!==e&&e.Flex?"flexui":"flex-mobile"===(null===globalThis||void 0===globalThis||null===(r=globalThis.__TWILIO_FLEX_SDK__)||void 0===r?void 0:r.appType)?"mobile":"headless",u="flexui"===c&&this.clientOptions.appVersion;this.commonProperties=l({product:"Flex",source:"flexsdk",realm:i,flexSdkVersion:o.i8,origin:c},u&&{flexUiVersion:u})}}])&&f(e.prototype,r),s&&f(e,s),t}()},8028:(t,e,r)=>{"use strict";r.d(e,{Z:()=>b});r(5301),r(3133),r(1e3),r(1117),r(3114);var n=r(4396),o=function(t,e){var r=(0,n.uc)(e);return"".concat(t).concat(r,".twil.io")},i=r(2504),a=(r(1624),r(2047),r(1157),r(8534),r(8029)),c=r(8423),u=r(9051),s=r(6107),l=r(7876);function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,d(t,e,"set"),r),r}function d(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var v=new WeakMap,y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v.set(this,{writable:!0,value:void 0}),this.simpleHttpAdapter=new l.q(e),h(this,v,(0,s.C6)(e)),this.simpleHttpAdapter.setIsEdgeSupported()}var e,r,n,o,i;return e=t,r=[{key:"getAuthenticationConfig",value:(o=regeneratorRuntime.mark((function t(e,r,n,o,i){var s,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={module:"backend",severity:a.W.Error,source:"ssoSetup.service.ts"},t.prev=1,t.next=4,this.simpleHttpAdapter.get("https://services[region].twilio.com/v1/Flex/Authentication/Config?AccountSid=".concat(encodeURIComponent(String(e)),"&FlexInstanceSid=").concat(encodeURIComponent(String(r)),"&RuntimeDomain=").concat(encodeURIComponent(String(n)),"&SSOProfileSid=").concat(encodeURIComponent(String(o)),"&AppType=").concat(encodeURIComponent(String(i))),void 0);case 4:l=t.sent,t.next=14;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(0,c.nr)(t.t0.code)){t.next=13;break}return f="SsoSetupService - ".concat(t.t0.message),t.abrupt("return",(p=this,h=v,function(t,e){return e.get?e.get.call(t):e.value}(p,d(p,h,"get"))).call(this,u.jK.DownstreamServiceError,s,f));case 13:return t.abrupt("return",Promise.reject(t.t0));case 14:return t.abrupt("return",l);case 15:case"end":return t.stop()}var p,h}),t,this,[[1,7]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){f(i,r,n,a,c,"next",t)}function c(t){f(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t,e,r,n,o){return i.apply(this,arguments)})}],r&&p(e.prototype,r),n&&p(e,n),t}(),m=r(1039),w=r(3951);function g(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var b=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var n,a,c,u,s,l,f,p,h,d,v,g,b,k,x,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.Nh)(r,"config"),(0,i.$r)(r,"config"),n=t.getInstanceOf(y),a=r.accountSid,c=void 0===a?"":a,u=r.instanceSid,s=void 0===u?"":u,l=r.runtimeDomain,f=void 0===l?"":l,p=r.ssoProfileSid,h=void 0===p?"":p,d=r.appType,v=void 0===d?"SinglePageApp":d,g=f,f&&(b=(0,w.B)(),k=(b||{}).region,g=o(f,k)),e.next=8,n.getAuthenticationConfig(c,s,g,h,v);case 8:return x=e.sent,E=(null==x?void 0:x.config_list)||[],e.abrupt("return",{configList:E.map((function(t){return(0,m.G0)(t)}))});case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){g(i,n,o,a,c,"next",t)}function c(t){g(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}},3147:(t,e,r)=>{"use strict";r.d(e,{K:()=>lt});r(3114),r(1e3),r(7285),r(1624),r(2047),r(8534),r(6955),r(1157),r(1117),r(5301);const n=require("query-string");var o=r(8029),i=r(9051),a=r(8423),c=r(279),u=r(1563),s=r(7044),l=r(6107);function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),this.httpAdapter=new c.B(e),v(this,m,(0,l.C6)(e)),this.httpAdapter.setIsEdgeSupported(!0)}var e,r,n,f,y,w;return e=t,r=[{key:"getIdpUrl",value:(w=p(regeneratorRuntime.mark((function t(e,r){var n,c,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:o.W.Error,source:"federatedAuth.service.ts"},null==e&&d(this,m).call(this,i.jK.InvalidParams,n,"Required parameter accountSid was null or undefined."),null==r&&d(this,m).call(this,i.jK.InvalidParams,n,"Required parameter sSOLoginRequestBody was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[region].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(e)),"/authenticate"),void 0,r);case 6:c=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(0,a.nr)(t.t0.code)){t.next=14;break}return u="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",d(this,m).call(this,i.jK.DownstreamServiceError,n,u));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return l=(0,s.F)(c),t.abrupt("return",l);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t,e){return w.apply(this,arguments)})},{key:"refreshToken",value:(y=p(regeneratorRuntime.mark((function t(e,r){var n,c,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:o.W.Error,source:"federatedAuth.service.ts"},null==e&&d(this,m).call(this,i.jK.InvalidParams,n,"Required parameter accountSid was null or undefined."),null==r&&d(this,m).call(this,i.jK.InvalidParams,n,"Required parameter token was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[region].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(e)),"/Tokens/refresh"),void 0,r);case 6:c=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(0,a.nr)(t.t0.code)){t.next=14;break}return u="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",d(this,m).call(this,i.jK.DownstreamServiceError,n,u));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return l=(0,s.F)(c),t.abrupt("return",l);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t,e){return y.apply(this,arguments)})},{key:"validateToken",value:(f=p(regeneratorRuntime.mark((function t(e,r,n){var c,l,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={module:"backend",severity:o.W.Error,source:"federatedAuth.service.ts"},null==e&&d(this,m).call(this,i.jK.InvalidParams,c,"Required parameter accountSid was null or undefined."),null==r&&d(this,m).call(this,i.jK.InvalidParams,c,"Required parameter token was null or undefined."),t.prev=3,t.next=6,this.httpAdapter.post("https://iam[region].twilio.com/v1/Accounts/".concat(encodeURIComponent(String(e)),"/Tokens/validate"),u.N.Basic,r,n);case 6:l=t.sent,t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(0,a.nr)(t.t0.code)){t.next=14;break}return f="FederatedAuthService - ".concat(t.t0.message),t.abrupt("return",d(this,m).call(this,i.jK.DownstreamServiceError,c,f));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return p=(0,s.F)(l),t.abrupt("return",p);case 17:case"end":return t.stop()}}),t,this,[[3,9]])}))),function(t,e,r){return f.apply(this,arguments)})}],r&&h(e.prototype,r),n&&h(e,n),t}(),g=r(7876);function b(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function x(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,j(t,e,"get"))}function E(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,j(t,e,"set"),r),r}function j(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var O=new WeakMap,S=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O.set(this,{writable:!0,value:void 0}),this.simpleHttpAdapter=new g.q(e),E(this,O,(0,l.C6)(e)),this.simpleHttpAdapter.setIsEdgeSupported(!1)}var e,r,n,c,u;return e=t,r=[{key:"createFlexAuth0Token",value:(c=regeneratorRuntime.mark((function t(e,r){var n,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:o.W.Error,source:"previewFlexToken.service.ts"},null==e&&x(this,O).call(this,i.jK.InvalidParams,n,"Required parameter body was null or undefined."),t.prev=2,t.next=5,this.simpleHttpAdapter.post("https://preview[region].twilio.com/Flex/Tokens",void 0,e,r,"application/x-www-form-urlencoded");case 5:c=t.sent,t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(2),!(0,a.nr)(t.t0.code)){t.next=14;break}return u="PreviewFlexTokenService - ".concat(t.t0.message),t.abrupt("return",x(this,O).call(this,i.jK.DownstreamServiceError,n,u));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,this,[[2,8]])})),u=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=c.apply(t,e);function i(t){b(o,r,n,i,a,"next",t)}function a(t){b(o,r,n,i,a,"throw",t)}i(void 0)}))},function(t,e){return u.apply(this,arguments)})}],r&&k(e.prototype,r),n&&k(e,n),t}(),P=r(4957),L=r(3951),T=r(6056),C=r(5543),_=r(6875),W=r(2504);function I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,A(t,e,"set"),r),r}function A(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var R=new WeakMap,N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R.set(this,{writable:!0,value:void 0})}var e,r,n;return e=t,(r=[{key:"accountSid",get:function(){return function(t,e){return e.get?e.get.call(t):e.value}(t=this,A(t,R,"get"));var t},set:function(t){F(this,R,t)}}])&&I(e.prototype,r),n&&I(e,n),t}();r(3524),r(9344);function D(t){return{products:["flex"],resource:(e=t.redirectUrl,e.replace(/((Token|Expiration|Identity|Roles)=[^&]+[&]?)/g,"").replace(/[&?]$/,""))};var e}function M(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function q(t,e){var r={connection_name:t,redirect_url:e};return M(btoa(JSON.stringify(r)))}require("core-js/modules/es.typed-array.uint8-array.js"),require("core-js/modules/es.typed-array.copy-within.js"),require("core-js/modules/es.typed-array.every.js"),require("core-js/modules/es.typed-array.fill.js"),require("core-js/modules/es.typed-array.filter.js"),require("core-js/modules/es.typed-array.find.js"),require("core-js/modules/es.typed-array.find-index.js"),require("core-js/modules/es.typed-array.for-each.js"),require("core-js/modules/es.typed-array.includes.js"),require("core-js/modules/es.typed-array.index-of.js"),require("core-js/modules/es.typed-array.iterator.js"),require("core-js/modules/es.typed-array.join.js"),require("core-js/modules/es.typed-array.last-index-of.js"),require("core-js/modules/es.typed-array.map.js"),require("core-js/modules/es.typed-array.reduce.js"),require("core-js/modules/es.typed-array.reduce-right.js"),require("core-js/modules/es.typed-array.reverse.js"),require("core-js/modules/es.typed-array.set.js"),require("core-js/modules/es.typed-array.slice.js"),require("core-js/modules/es.typed-array.some.js"),require("core-js/modules/es.typed-array.sort.js"),require("core-js/modules/es.typed-array.subarray.js"),require("core-js/modules/es.typed-array.to-locale-string.js"),require("core-js/modules/es.typed-array.to-string.js");r(6486);function G(t){var e=crypto.getRandomValues(new Uint8Array(t)),r=String.fromCharCode.apply(null,Array.from(e));return M(btoa(r))}const K=require("crypto-js/sha256");var U=r.n(K);const V=require("buffer");function B(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Y(t){return z.apply(this,arguments)}function z(){var t;return t=regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U()(e).toString();case 2:return r=t.sent,t.abrupt("return",M(V.Buffer.from(r,"hex").toString("base64")));case 4:case"end":return t.stop()}}),t)})),z=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){B(i,n,o,a,c,"next",t)}function c(t){B(i,n,o,a,c,"throw",t)}a(void 0)}))},z.apply(this,arguments)}function H(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t,e){return J.apply(this,arguments)}function J(){var t;return t=regeneratorRuntime.mark((function t(e,r){var n,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(48);case 2:return n=t.sent,t.next=5,Y(n);case 5:return o=t.sent,i=q(e,r),a=G(24),t.abrupt("return",{codeVerifier:n,codeChallenge:o,nonce:a,state:i});case 9:case"end":return t.stop()}}),t)})),J=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){H(i,n,o,a,c,"next",t)}function c(t){H(i,n,o,a,c,"throw",t)}a(void 0)}))},J.apply(this,arguments)}var Q=r(4396);function X(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Z(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){X(i,n,o,a,c,"next",t)}function c(t){X(i,n,o,a,c,"throw",t)}a(void 0)}))}}function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,nt(t,e,"get"))}function rt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,nt(t,e,"set"),r),r}function nt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var ot=new WeakMap,it=new WeakMap,at=new WeakMap,ct=new WeakMap,ut=new WeakMap,st=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ot.set(this,{writable:!0,value:void 0}),it.set(this,{writable:!0,value:void 0}),at.set(this,{writable:!0,value:void 0}),ct.set(this,{writable:!0,value:void 0}),ut.set(this,{writable:!0,value:void 0}),rt(this,it,(0,C.j)(e)(_.q9.Auth)),rt(this,ot,e.getInstanceOf(N)),rt(this,ut,e.getInstanceOf(P.r)),rt(this,at,e.getInstanceOf(w)),rt(this,ct,e.getInstanceOf(S))}var e,r,o,i,a,c,u,l;return e=t,r=[{key:"getIdpUrl",value:(l=Z(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,W.pY)(e.redirectUrl,"redirect url"),r=D(e),n=et(this,ot).accountSid,t.next=5,et(this,at).getIdpUrl(n,r);case 5:if((o=t.sent).location){t.next=9;break}throw et(this,it).error("No redirect location from /authenticate request, data: ",o),new T.A("Invalid response from /authenticate endpoint");case 9:return t.abrupt("return",o.location);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"validateToken",value:(u=Z(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=et(this,ot).accountSid,t.next=3,et(this,at).validateToken(r,{token:e},{token:e});case 3:return n=t.sent,t.abrupt("return",{roles:n.roles,valid:n.valid,dateExpired:n.expiration,identity:n.identity,flexUserSid:n.flexUserSid});case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"refreshToken",value:(c=Z(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=et(this,ot).accountSid,t.next=3,et(this,at).refreshToken(r,{token:e});case 3:return n=t.sent,t.abrupt("return",{token:n.token,dateExpired:n.expiration});case 5:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"getLoginDetails",value:(a=Z(regeneratorRuntime.mark((function t(e,r,o){var i,a,c,u,s,l,f,p,h,d,v,y,m,w,g,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,L.B)(),c=(a=i||{}).region,u=a.regionNonFlex,s=u||et(this,ut).regionNonFlex||c||et(this,ut).region,l=(0,Q._k)(s||""),f="https://flex".concat(l,".twilio.com/callback"),p="https://login.flex.".concat((0,Q.qq)(s),".twilio.com/authorize"),h="https://services".concat(l,".twilio.com/v1/Flex/Authentication/Callback"),d=o||f,t.next=10,$(r,d);case 10:return v=t.sent,y=v.nonce,m=v.codeChallenge,w=v.state,g=v.codeVerifier,b=(0,n.stringify)({client_id:e,connection:r,response_type:"code",state:w,nonce:y,redirect_uri:encodeURIComponent(h),code_challenge_method:"S256",code_challenge:m,scope:encodeURIComponent("openid offline_access profile email")},{encode:!1,sort:!1}),t.abrupt("return",{loginUrl:"".concat(p,"?").concat(b),nonce:y,codeChallenge:m,state:w,codeVerifier:g});case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return a.apply(this,arguments)})},{key:"exchangeToken",value:(i=Z(regeneratorRuntime.mark((function t(e){var r,n,o,i,a,c,u,l,f,p,h,d,v,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.clientId,n=e.authCode,o=e.codeVerifier,i=e.nonce,a=e.state,c=(0,L.B)(),l=(u=c||{}).region,f=u.regionNonFlex,p=f||et(this,ut).regionNonFlex||l||et(this,ut).region,h=(0,Q._k)(p||""),d="https://services".concat(h,".twilio.com/v1/Flex/Authentication/Callback"),v=new URLSearchParams({ClientId:r,CodeVerifier:o,AuthCode:n,RedirectUrl:d,State:a,Nonce:i}).toString(),t.next=9,et(this,ct).createFlexAuth0Token(v);case 9:return y=t.sent,t.abrupt("return",(0,s.F)(y));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}],r&&tt(e.prototype,r),o&&tt(e,o),t}(),lt=function(t){return function(e){return t.getInstanceOf(N).accountSid=e,new st(t)}}},3991:(t,e,r)=>{"use strict";r.d(e,{F:()=>i});r(1624),r(4391),r(1e3),r(2047),r(8534),r(4011),r(3600),r(6770);var n=function(t){return t.Guest="guest",t.Agent="agent",t.Admin="admin",t.Supervisor="supervisor",t.FlexReadqueuestats="flex.readqueuestats",t.FlexReadteams="flex.readteams",t.FlexEditstatus="flex.editstatus",t.FlexEditskills="flex.editskills",t.FlexMonitorchatcall="flex.monitorchatcall",t.FlexReadadmin="flex.readadmin",t.FlexLead="flex.lead",t.FlexQualityanalyst="flex.qualityanalyst",t.FlexReadonlyadmin="flex.readonlyadmin",t}({}),o=new Map([["/twilio/flex/agent-desktop-page/read",[n.Agent,n.Supervisor,n.Admin]],["/twilio/flex/agent-self-status/read",[n.Agent,n.Supervisor,n.Admin]],["/twilio/flex/agent-self-status/update",[n.Agent,n.Supervisor,n.Admin]],["/twilio/flex/agent-task-reservation/do",[n.Agent,n.Supervisor,n.Admin]],["/twilio/flex/queue-stats-page/read",[n.FlexReadqueuestats,n.Supervisor,n.Admin,n.FlexLead,n.FlexReadonlyadmin]],["/twilio/flex/teams-page/read",[n.FlexReadteams,n.Supervisor,n.Admin,n.FlexLead,n.FlexQualityanalyst,n.FlexReadonlyadmin]],["/twilio/flex/agent-skills/read",[n.FlexReadteams,n.Supervisor,n.Admin,n.FlexLead,n.FlexQualityanalyst,n.FlexReadonlyadmin]],["/twilio/flex/agent-status/read",[n.FlexReadteams,n.Supervisor,n.Admin,n.FlexLead,n.FlexQualityanalyst,n.FlexReadonlyadmin]],["/twilio/flex/agent-capacity/read",[n.FlexReadteams,n.Supervisor,n.Admin,n.FlexLead,n.FlexQualityanalyst,n.FlexReadonlyadmin]],["/twilio/flex/agent-task-info/read",[n.FlexReadteams,n.Supervisor,n.Admin,n.FlexLead,n.FlexQualityanalyst,n.FlexReadonlyadmin]],["/twilio/flex/agent-call-monitoring/do",[n.FlexMonitorchatcall,n.Supervisor,n.Admin,n.FlexQualityanalyst]],["/twilio/flex/agent-chat-monitoring/do",[n.FlexMonitorchatcall,n.Supervisor,n.Admin,n.FlexQualityanalyst]],["/twilio/flex/agent-skills/update",[n.FlexEditskills,n.Supervisor,n.Admin,n.FlexLead]],["/twilio/flex/agent-skills/delete",[n.FlexEditskills,n.Supervisor,n.Admin,n.FlexLead]],["/twilio/flex/agent-capacity/update",[n.FlexEditskills,n.Supervisor,n.Admin,n.FlexLead]],["/twilio/flex/agent-status/update",[n.FlexEditstatus,n.Supervisor,n.Admin]],["/twilio/flex/admin-page/read",[n.FlexReadadmin,n.Admin,n.FlexReadonlyadmin]],["/twilio/flex/admin-page/update",[n.Admin]]]),i=function(t,e){var r=o.get(t);return e.filter((function(t){return null==r?void 0:r.includes(t)})).length>=1}},9337:(t,e,r)=>{"use strict";r.d(e,{W:()=>x});r(5301),r(1e3),r(1117),r(6706),r(1624),r(2047),r(1157),r(8534);var n=r(6754),o=r(5543),i=r(6875),a=r(3722),c=r(3951),u=r(4957),s=r(8576),l=r(9051),f=r(8029);function p(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){p(i,n,o,a,c,"next",t)}function c(t){p(i,n,o,a,c,"throw",t)}a(void 0)}))}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,m(t,e,"get"))}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=new WeakMap,b=new WeakMap,k=new WeakMap,x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),y(this,g,e.getInstanceOf(a.P)),y(this,b,e.getInstanceOf(u.r)),y(this,w,(0,o.j)(e)(i.q9.CBM))}var e,r,p,m,x,E,j,O,S,P,L,T,C,_;return e=t,r=[{key:"init",value:(_=h(regeneratorRuntime.mark((function t(e){var r,o,i,a,u,s,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return y(this,k,e),t.abrupt("return",Promise.resolve());case 3:return i=(0,c.B)(),u=(a=i||{}).region,s=a.regionNonFlex,l=s||v(this,b).regionNonFlex||u||v(this,b).region,f={logLevel:this.mapToLogLevel(null===(r=v(this,b))||void 0===r||null===(o=r.logger)||void 0===o?void 0:o.level)},void 0!==l&&(f.region=l),y(this,k,new n.CbmSdk(v(this,g).token,f)),t.abrupt("return",Promise.resolve());case 10:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"updateToken",value:function(t){v(this,k).updateToken(t)}},{key:"acceptReservation",value:(C=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).acceptReservation(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return C.apply(this,arguments)})},{key:"addVoiceParticipant",value:(T=h(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).addVoiceParticipant(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return T.apply(this,arguments)})},{key:"removeVoiceParticipant",value:(L=h(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).removeVoiceParticipant(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return L.apply(this,arguments)})},{key:"endConference",value:(P=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(this,k).endConference(e.task);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return P.apply(this,arguments)})},{key:"rejectReservation",value:(S=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).rejectReservation(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return S.apply(this,arguments)})},{key:"holdParticipant",value:(O=h(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).holdParticipant(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return O.apply(this,arguments)})},{key:"unholdParticipant",value:(j=h(regeneratorRuntime.mark((function t(e,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).unHoldParticipant(e,r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return j.apply(this,arguments)})},{key:"getParticipantsByTask",value:(E=h(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(this,k).getChannels(e);case 2:return r=t.sent,t.abrupt("return",v(this,k).getParticipants(e,r[0].sid));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return E.apply(this,arguments)})},{key:"getParticipantBySid",value:(x=h(regeneratorRuntime.mark((function t(e,r){var o,i,a,c,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(this,k).getChannels(r);case 2:if(o=t.sent,(i=o.find((function(t){return t.status===n.ChannelStatus.Active})))&&i.sid){t.next=8;break}throw a="Active channel for task: ".concat(r.sid," not found"),v(this,w).error(a),new s.W(l.jK.SDK,{severity:f.W.Error},a);case 8:return t.next=10,v(this,k).getParticipants(r,i.sid);case 10:return c=t.sent,(u=c.find((function(t){return t.participantSid===e})))||(p="Participant with sid: ".concat(e," not found"),v(this,w).warn(p)),t.abrupt("return",u);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return x.apply(this,arguments)})},{key:"completeReservation",value:(m=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v(this,k).completeReservation(e));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"wrapReservation",value:function(t){return v(this,k).wrapReservation(t)}},{key:"mapToLogLevel",value:function(t){if("number"==typeof t)switch(t){case 0:return n.LogLevel.Trace;case 1:return n.LogLevel.Debug;case 2:return n.LogLevel.Info;case 3:default:return n.LogLevel.Warn;case 4:return n.LogLevel.Error;case 5:return n.LogLevel.Silent}else if("string"==typeof t){var e=t.toLowerCase();if(e in n.LogLevel)return n.LogLevel[e]}return n.LogLevel.Warn}}],r&&d(e.prototype,r),p&&d(e,p),t}()},3308:(t,e,r)=>{"use strict";r.d(e,{r:()=>n});var n=function(t){return t.TokenExpired="tokenExpired",t.TokenAboutToExpire="tokenAboutToExpire",t.TokenUpdated="tokenUpdated",t.TokenAutoUpdateFailed="tokenAutoUpdateFailed",t.TokenMaxLifetimeReached="tokenMaxLifetimeReached",t.ConnectionLost="connectionLost",t.ConnectionRestored="connectionRestored",t.Disconnected="disconnected",t.IncomingCall="incomingCall",t.ClientDestroyed="clientDestroyed",t}({})},6726:(t,e,r)=>{"use strict";r.r(e),r.d(e,{ClientImpl:()=>Ht});r(1624),r(2047),r(8534),r(1e3),r(1157),r(1117),r(444),r(1076),r(5547),r(6486),r(6257),r(6941),r(5301);var n=r(1239),o=r.n(n),i=r(3308),a=r(7971),c=r(785),u=r(5543),s=r(6875),l=r(8786),f=r(8792),p=r(8717);r(3114);function h(t,e,r,n){t.addListener(r,(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];e.emit.apply(e,[n].concat(r))}))}var d=r(3949),v=(r(6955),r(3275),r(7285),r(8029)),y=r(9051),m=r(8423),w=r(1563),g=r(6107),b=r(7876);function k(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){k(i,n,o,a,c,"next",t)}function c(t){k(i,n,o,a,c,"throw",t)}a(void 0)}))}}function E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,S(t,e,"get"))}function O(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,S(t,e,"set"),r),r}function S(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var P=new WeakMap,L=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),P.set(this,{writable:!0,value:void 0}),this.simpleHttpAdapter=new b.q(e),O(this,P,(0,g.C6)(e)),this.simpleHttpAdapter.setIsEdgeSupported(!1)}var e,r,n,o,i,a,c;return e=t,r=[{key:"findProfileByIdentifiers",value:(c=x(regeneratorRuntime.mark((function t(e,r){var n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:v.W.Error,source:"profile.service.ts"},null==e&&j(this,P).call(this,y.jK.InvalidParams,n,"Required parameter body was null or undefined."),t.prev=2,t.next=5,this.simpleHttpAdapter.post("https://preview[region].twilio.com/ProfileConnector/Profiles/Find",w.N.Basic,e,r,"application/x-www-form-urlencoded");case 5:o=t.sent,t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(2),!(0,m.nr)(t.t0.code)){t.next=14;break}return i="ProfileService - ".concat(t.t0.message),t.abrupt("return",j(this,P).call(this,y.jK.DownstreamServiceError,n,i));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t,this,[[2,8]])}))),function(t,e){return c.apply(this,arguments)})},{key:"findProfileByUniqueId",value:(a=x(regeneratorRuntime.mark((function t(e,r,n){var o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={module:"backend",severity:v.W.Error,source:"profile.service.ts"},null==e&&j(this,P).call(this,y.jK.InvalidParams,o,"Required parameter profileConnectSidPathParam was null or undefined."),t.prev=2,t.next=5,this.simpleHttpAdapter.get("https://preview[region].twilio.com/ProfileConnector/Profiles/".concat(encodeURIComponent(String(e)),"?UniqueName=").concat(encodeURIComponent(String(r))),w.N.Basic,n);case 5:i=t.sent,t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(2),!(0,m.nr)(t.t0.code)){t.next=14;break}return a="ProfileService - ".concat(t.t0.message),t.abrupt("return",j(this,P).call(this,y.jK.DownstreamServiceError,o,a));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:return t.abrupt("return",i);case 16:case"end":return t.stop()}}),t,this,[[2,8]])}))),function(t,e,r){return a.apply(this,arguments)})},{key:"getIdentifiers",value:(i=x(regeneratorRuntime.mark((function t(e,r){var n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:v.W.Error,source:"profile.service.ts"},t.prev=1,t.next=4,this.simpleHttpAdapter.get("https://preview[region].twilio.com/ProfileConnector/Identifiers?UniqueName=".concat(encodeURIComponent(String(e))),w.N.Basic,r);case 4:o=t.sent,t.next=14;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(0,m.nr)(t.t0.code)){t.next=13;break}return i="ProfileService - ".concat(t.t0.message),t.abrupt("return",j(this,P).call(this,y.jK.DownstreamServiceError,n,i));case 13:return t.abrupt("return",Promise.reject(t.t0));case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(t,e){return i.apply(this,arguments)})},{key:"getTraits",value:(o=x(regeneratorRuntime.mark((function t(e,r){var n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={module:"backend",severity:v.W.Error,source:"profile.service.ts"},t.prev=1,t.next=4,this.simpleHttpAdapter.get("https://preview[region].twilio.com/ProfileConnector/Traits?UniqueName=".concat(encodeURIComponent(String(e))),w.N.Basic,r);case 4:o=t.sent,t.next=14;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(0,m.nr)(t.t0.code)){t.next=13;break}return i="ProfileService - ".concat(t.t0.message),t.abrupt("return",j(this,P).call(this,y.jK.DownstreamServiceError,n,i));case 13:return t.abrupt("return",Promise.reject(t.t0));case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}}),t,this,[[1,7]])}))),function(t,e){return o.apply(this,arguments)})}],r&&E(e.prototype,r),n&&E(e,n),t}(),T=r(3722);function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,I(t,e,"get"))}function W(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,I(t,e,"set"),r),r}function I(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var F=new WeakMap,A=new WeakMap,R=new WeakMap,N=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),F.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),W(this,F,e.getInstanceOf(L)),W(this,R,(0,u.j)(e)(s.q9.ProfileConnector)),W(this,A,e.getInstanceOf(T.P)),_(this,R).info("ProfileConnectorImpl created!")}var e,r,n;return e=t,(r=[{key:"getIdentifiers",value:function(t){var e=_(this,A).token;if(!e)throw _(this,R).debug("getIdentifiers was called before FlexSDK.createClient"),new Error("getIdentifiers was called before FlexSDK.createClient");if(!t)throw _(this,R).debug("getIdentifiers called without proper data"),new Error("getIdentifiers called without proper data");_(this,R).info("Get Identifiers was called");try{var r=_(this,F).getIdentifiers(t,{token:e});return Promise.resolve(r)}catch(t){return Promise.reject(t)}}},{key:"getTraits",value:function(t){var e=_(this,A).token;if(!e)throw _(this,R).debug("getTraits was called before FlexSDK.createClient"),new Error("getTraits was called before FlexSDK.createClient");if(!t)throw _(this,R).debug("getTraits called without proper data"),new Error("getTraits called without proper data");_(this,R).info("GetTraits was called");try{var r=_(this,F).getTraits(t,{token:e});return Promise.resolve(r)}catch(t){return Promise.reject(t)}}},{key:"findProfileByIdentifiers",value:function(t){var e=_(this,A).token;if(!e)throw _(this,R).debug("findProfileByIdentifiers was called before FlexSDK.createClient"),new Error("findProfileByIdentifiers was called before FlexSDK.createClient");if(!t||!t.Attributes||!t.UniqueName)throw _(this,R).debug("findProfileByIdentifiers called without proper data"),new Error("findProfileByIdentifiers called without proper data");_(this,R).info("findProfileByIdentifiers was called");try{var r=new URLSearchParams;if(r.append("UniqueName",t.UniqueName),t.Attributes.forEach((function(t){r.append("Attributes",JSON.stringify(t))})),Object.prototype.hasOwnProperty.call(t,"WriteIfNotFound")){var n=t.WriteIfNotFound?"true":"false";r.append("WriteIfNotFound",n)}var o=_(this,F).findProfileByIdentifiers(r.toString(),{token:e});return Promise.resolve(o)}catch(t){return Promise.reject(t)}}},{key:"findProfileByUniqueId",value:function(t,e){var r=_(this,A).token;if(!r)throw _(this,R).debug("findProfileByUniqueId was called before FlexSDK.createClient"),new Error("findProfileByUniqueId was called before FlexSDK.createClient");if(!t||!e)throw _(this,R).debug("findProfileByUniqueId called without proper data"),new Error("findProfileByUniqueId called without proper data");_(this,R).info("findProfileByUniqueId was called");try{return _(this,F).findProfileByUniqueId(t,e,{token:r})}catch(t){return Promise.reject(t)}}}])&&C(e.prototype,r),n&&C(e,n),t}(),D=r(1198),M=(r(3133),r(5128),r(2504)),q=r(9294),G=(r(4011),r(5226),r(9270),r(3772));function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var Y=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r,n){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.getInstanceOf(G.u),e.next=3,o.updateConfiguration(U({accountSid:r},n));case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){B(i,n,o,a,c,"next",t)}function c(t){B(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}()},z=["accountSid"];function H(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function $(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Q(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Z(t,e,"get"))}function X(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Z(t,e,"set"),r),r}function Z(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),X(this,tt,e.getInstanceOf(q.B)),X(this,et,Y(e))}var e,r,n,o,i;return e=t,r=[{key:"set",value:(o=regeneratorRuntime.mark((function t(e){var r,n,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Q(this,tt).get(),n=r.accountSid,o=H(r,z),Object.keys(e).map((function(t){return(0,M.eC)(t,o)})),i=this,t.next=6,this.updateInCallOrder((function(){return Q(i,et).call(i,n,e)}));case 6:return a=t.sent,Q(this,tt).set(a),t.abrupt("return",Promise.resolve());case 9:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){$(i,r,n,a,c,"next",t)}function c(t){$(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"updateInCallOrder",value:function(t){return Q(this,rt)?X(this,rt,Q(this,rt).then((function(){return t()}))):X(this,rt,t()),Q(this,rt)}}],r&&J(e.prototype,r),n&&J(e,n),t}();function ot(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ut(t,e,"get"))}function ct(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ut(t,e,"set"),r),r}function ut(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var st=new WeakMap,lt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st.set(this,{writable:!0,value:void 0}),this.simpleHttpAdapter=new b.q(e),ct(this,st,(0,g.C6)(e)),this.simpleHttpAdapter.setIsEdgeSupported()}var e,r,n,o,i;return e=t,r=[{key:"getV1VirtualAgentData",value:(o=regeneratorRuntime.mark((function t(e,r,n){var o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={module:"backend",severity:v.W.Error,source:"virtualAgentData.service.ts"},null==e&&at(this,st).call(this,y.jK.InvalidParams,o,"Required parameter queryParamName was null or undefined."),null==r&&at(this,st).call(this,y.jK.InvalidParams,o,"Required parameter queryParamValue was null or undefined."),t.prev=3,t.next=6,this.simpleHttpAdapter.get("https://flex-api[region].twilio.com/v1/VirtualAgentData?".concat(encodeURIComponent(String(e)),"=").concat(encodeURIComponent(String(r))),w.N.Basic,n);case 6:i=t.sent,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(0,m.nr)(t.t0.code)){t.next=15;break}return a="VirtualAgentDataService - ".concat(t.t0.message),t.abrupt("return",at(this,st).call(this,y.jK.DownstreamServiceError,o,a));case 15:return t.abrupt("return",Promise.reject(t.t0));case 16:return t.abrupt("return",i);case 17:case"end":return t.stop()}}),t,this,[[3,9]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){ot(i,r,n,a,c,"next",t)}function c(t){ot(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t,e,r){return i.apply(this,arguments)})}],r&&it(e.prototype,r),n&&it(e,n),t}();function ft(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pt(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,dt(t,e,"get"))}function ht(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,dt(t,e,"set"),r),r}function dt(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var vt=new WeakMap,yt=new WeakMap,mt=new WeakMap,wt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vt.set(this,{writable:!0,value:void 0}),yt.set(this,{writable:!0,value:void 0}),mt.set(this,{writable:!0,value:void 0}),ht(this,vt,e.getInstanceOf(lt)),ht(this,mt,e.getInstanceOf(T.P)),ht(this,yt,(0,u.j)(e)(s.q9.VirtualAgentData)),pt(this,yt).info("VirtualAgentImpl created!")}var e,r,n;return e=t,(r=[{key:"getV1VirtualAgentData",value:function(t){var e=pt(this,mt).token;if(!e)throw pt(this,yt).error("getV1VirtualAgentData called without token"),new Error("getV1VirtualAgentData called without token");if(!t)throw pt(this,yt).error("getV1VirtualAgentData called without contextLookupSid"),new Error("getV1VirtualAgentData called without contextLookupSid");return pt(this,vt).getV1VirtualAgentData("ContextLookupSid",t,{token:e})}}])&&ft(e.prototype,r),n&&ft(e,n),t}(),gt=r(9492),bt=r(9337),kt=r(9369),xt=r(8576),Et=r(8327),jt=r(8834),Ot=r(3304);function St(t){return function(t){if(Array.isArray(t))return Pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lt(i,n,o,a,c,"next",t)}function c(t){Lt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _t(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,It(t,e,"get"))}function Wt(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,It(t,e,"set"),r),r}function It(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var Ft=new WeakMap,At=new WeakMap,Rt=new WeakMap,Nt=new WeakMap,Dt=new WeakMap,Mt=new WeakMap,qt=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,Ut=new WeakMap,Vt=new WeakMap,Bt=new WeakMap,Yt=new WeakMap,zt=new WeakMap,Ht=function(){function t(e){var r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ft.set(this,{writable:!0,value:void 0}),At.set(this,{writable:!0,value:void 0}),Rt.set(this,{writable:!0,value:void 0}),Nt.set(this,{writable:!0,value:void 0}),Dt.set(this,{writable:!0,value:void 0}),Mt.set(this,{writable:!0,value:void 0}),qt.set(this,{writable:!0,value:void 0}),Gt.set(this,{writable:!0,value:void 0}),Kt.set(this,{writable:!0,value:void 0}),Ut.set(this,{writable:!0,value:void 0}),Vt.set(this,{writable:!0,value:void 0}),Bt.set(this,{writable:!0,value:void 0}),Yt.set(this,{writable:!0,value:void 0}),zt.set(this,{writable:!0,value:(r=Tt(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=_t(n,Dt),r=e.createEventGroup(l.m.Default),t.next=5,r.addEvents({eventName:f.P.ClientDestroyed,eventSource:p.p.Client});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),_t(n,Rt).error("Failed to send telemetry destroy event",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(){return r.apply(this,arguments)})}),Wt(this,Ft,e.getInstanceOf(T.P)),Wt(this,At,e.getInstanceOf(D.N)),this.config={account:e.getInstanceOf(nt)},Wt(this,Dt,(0,d.A)(e)),Wt(this,Rt,(0,u.j)(e)(s.q9.Client)),Wt(this,Mt,new(o())),Wt(this,qt,e.getInstanceOf(wt)),Wt(this,Kt,e.getInstanceOf(N)),Wt(this,Gt,e.getInstanceOf(gt.E)),Wt(this,Ut,e.getInstanceOf(bt.W)),Wt(this,Vt,e.getInstanceOf(kt.o)),Wt(this,Bt,e.getInstanceOf(Et.$)),Wt(this,Nt,e),this.setupProxies()}var e,r,n,m,w;return e=t,r=[{key:"setupProxies",value:function(){h(_t(this,At),_t(this,Mt),a.J.TokenAboutToExpire,i.r.TokenAboutToExpire),h(_t(this,At),_t(this,Mt),a.J.TokenExpired,i.r.TokenExpired),h(_t(this,At),_t(this,Mt),a.J.TokenUpdated,i.r.TokenUpdated),h(_t(this,At),_t(this,Mt),a.J.ConnectionError,i.r.ConnectionLost),h(_t(this,At),_t(this,Mt),a.J.Connected,i.r.ConnectionRestored),h(_t(this,At),_t(this,Mt),a.J.Disconnected,i.r.Disconnected),h(_t(this,Ft),_t(this,Mt),c.P.TokenAutoUpdateFailed,i.r.TokenAutoUpdateFailed),h(_t(this,Ft),_t(this,Mt),c.P.TokenMaxLifetimeReached,i.r.TokenMaxLifetimeReached)}},{key:"updateToken",value:(w=Tt(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,M.pY)(e,"token"),r=[],!_t(this,Yt)){t.next=4;break}throw new xt.W(y.jK.InvalidState,{severity:v.W.Error},"Client already destroyed");case 4:if(n=function(t,e){return new xt.W(y.jK.SDK,{severity:v.W.Error},"Failed to update token on ".concat(e),t)},!_t(this,Ft)){t.next=14;break}return t.prev=6,t.next=9,_t(this,Ft).updateToken(e);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),r.push(n(t.t0,"session"));case 14:if(!_t(this,Gt)){t.next=23;break}return t.prev=15,t.next=18,_t(this,Gt).updateToken(e);case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(15),r.push(n(t.t1,"task router"));case 23:if(!_t(this,Ut)){t.next=32;break}return t.prev=24,t.next=27,_t(this,Ut).updateToken(e);case 27:t.next=32;break;case 29:t.prev=29,t.t2=t.catch(24),r.push(n(t.t2,"cbm"));case 32:if((0,Ot.jg)(jt.F.UpdateTokenCompleted,_t(this,Bt),_t(this,Gt).worker),!r.length){t.next=35;break}throw new AggregateError(r);case 35:case"end":return t.stop()}}),t,this,[[6,11],[15,20],[24,29]])}))),function(t){return w.apply(this,arguments)})},{key:"destroy",value:(m=Tt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_t(this,Rt).debug("Client destroy called"),!_t(this,Yt)){t.next=3;break}return t.abrupt("return");case 3:return Wt(this,Yt,!0),t.next=6,_t(this,zt).call(this);case 6:return t.next=8,_t(this,Ft).destroy();case 8:_t(this,Mt).emit(i.r.ClientDestroyed),_t(this,Mt).removeAllListeners(),_t(this,Vt).destroy(),_t(this,Nt).destroy(),_t(this,Rt).debug("Client has been destroyed");case 13:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"roles",get:function(){return(0,Ot.jg)(jt.F.ClientRolesCompleted,_t(this,Bt),_t(this,Gt).worker),St(_t(this,Ft).roles)}},{key:"token",get:function(){return(0,Ot.jg)(jt.F.ClientTokenCompleted,_t(this,Bt),_t(this,Gt).worker),_t(this,Ft).token}},{key:"profileConnector",get:function(){return _t(this,Kt)}},{key:"virtualAgentData",get:function(){return _t(this,qt)}},{key:"dataClient",get:function(){return _t(this,Vt).client}},{key:"worker",get:function(){return _t(this,Gt).worker}},{key:"workspace",get:function(){return _t(this,Gt).workspace}},{key:"emitter",get:function(){return _t(this,Mt)}},{key:"addListener",value:function(t,e){return _t(this,Mt).on(t,e),this}},{key:"removeListener",value:function(t,e){return _t(this,Mt).removeListener(t,e),this}},{key:"execute",value:function(t){return t.run(_t(this,Nt))}}],r&&Ct(e.prototype,r),n&&Ct(e,n),t}()},4957:(t,e,r)=>{"use strict";r.d(e,{r:()=>O});r(1624),r(1e3),r(2047),r(1157),r(8534);var n=r(2562),o=r(4100),i=r(445);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,s(t,e,"get"))}function u(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,s(t,e,"set"),r),r}function s(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var l=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,v=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),u(this,l,(0,o.S)()),u(this,f,(0,n.j)()),u(this,p,(0,i.b)()),u(this,h,{query:{UiVersion:void 0}}),u(this,x,{connectToDevTools:!1}),u(this,E,{workerOptions:{setWorkerOfflineIfDisconnected:!0}}),u(this,j,{autoAcceptIncomingCalls:!0})}var e,r,s;return e=t,(r=[{key:"session",get:function(){return c(this,l)}},{key:"logger",get:function(){return c(this,f)}},{key:"telemetry",get:function(){return c(this,p)},set:function(t){u(this,p,t)}},{key:"accountConfig",get:function(){return c(this,h)}},{key:"region",get:function(){return c(this,d)},set:function(t){u(this,d,t)}},{key:"regionNonFlex",get:function(){return c(this,v)},set:function(t){u(this,v,t)}},{key:"appName",get:function(){return c(this,y)},set:function(t){u(this,y,t)}},{key:"appVersion",get:function(){return c(this,m)},set:function(t){u(this,m,t)}},{key:"workspace",get:function(){return c(this,g)},set:function(t){u(this,g,t)}},{key:"worker",get:function(){return c(this,w)},set:function(t){u(this,w,t)}},{key:"dataClientOptions",get:function(){return c(this,x)},set:function(t){u(this,x,t)}},{key:"taskRouterOptions",get:function(){return c(this,E)},set:function(t){u(this,E,t)}},{key:"voiceOptions",get:function(){return c(this,j)},set:function(t){u(this,j,t)}},{key:"origin",get:function(){return c(this,b)||"headless"},set:function(t){u(this,b,t)}},{key:"disableDataClient",get:function(){return c(this,k)||!1},set:function(t){u(this,k,t)}}])&&a(e.prototype,r),s&&a(e,s),t}()},6227:(t,e,r)=>{"use strict";r.d(e,{e:()=>M});r(5301),r(6706),r(6941),r(1e3),r(1117);const n=require("lodash/mergeWith");var o=r.n(n),i=r(2504);function a(t,e){void 0!==e&&(0,i.$r)(e,"userOptions"),o()(t,e)}var c=r(8786),u=r(8792),s=r(8717),l=function(t){return t.TwilioClient="twilio_client",t.Twilsock="twilsock",t}({}),f=r(5294),p=r(5543),h=r(6875),d=r(8029),v=r(9051),y=r(4957),m=r(6107),w=r(3949),g=r(8023),b=r(3722),k=r(6726),x=(r(3794),r(3114),r(8423));function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=(0,w.i)(t),i=r.wrappedError,a=(0,x.$G)(r.code),e.next=6,o.addErrorEvent({eventName:"error_reported",error:{code:r.code,debugger:a,message:r.message,module:r.metadata.module,reporter:"flex-sdk",resourceSid:r.metadata.resourceSid,severity:r.metadata.severity,source:r.metadata.source||"flex-sdk",stackTrace:r.stack,unhandled:r.metadata.unhandled,wrappedErrorCode:null==i?void 0:i.code,wrappedErrorMessage:null!==(n=null==i?void 0:i.message)&&void 0!==n?n:void 0}});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),(0,p.j)(t)(h.q9.Error).debug("Failed to report the error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}var O=r(8245),S=[],P=function(t){S.push(t.getInstanceOf(O.Z).telemetryErrorStream.subscribe({next:function(e){return j(t)(e)}}))},L=r(9492),T=r(9337),C=r(8327),_=r(9369),W=r(514),I=r(3304);function F(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,c,"next",t)}function c(t){F(i,n,o,a,c,"throw",t)}a(void 0)}))}}var R,N=function(t,e){var r=null==e?void 0:e.features,n=null==r?void 0:r.find((function(e){return e.id===t}));return null==n?void 0:n.name},D=function(){var t=A(regeneratorRuntime.mark((function t(e,r,n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=r.createEventGroup(c.m.Default),t.next=4,o.addEvents({eventName:u.P.ClientInitialized,eventSource:s.p.Client,durationMs:n});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.error("Failed to send client init event",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,r,n){return t.apply(this,arguments)}}();var M=function(t){return function(){var e=A(regeneratorRuntime.mark((function e(r,n){var o,c,u,s,x,E,j,O,S,F,A,M,q,G,K,U,V,B,Y,z,H;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.pY)(r,"token"),c=g.o.newInstance(),R||(c=t||c,R=!0),P(c),u=Date.now(),s=c.getInstanceOf(y.r),x=c.getInstanceOf(f.w),E=(0,p.j)(c)(h.q9.Client),j=(0,m.C6)(c),O=(0,m.kG)(c),null!=n&&null!==(o=n.logger)&&void 0!==o&&o.level&&(x.level=null==n||null===(S=n.logger)||void 0===S?void 0:S.level),a(s,n),!(F=c.getInstanceOf(b.P))){e.next=23;break}return e.prev=14,e.next=17,F.init(r);case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(14),A={module:"client",severity:d.W.Error,source:"createClient.ts"},51102===e.t0.code||20003===e.t0.code?(A.source="Twilsock",j(v.jK.Forbidden,A,"Insufficient permissions",e.t0.source)):O(e.t0,A);case 23:return e.prev=23,M={dependencies:($={},J=l.Twilsock,Q="default",J in $?Object.defineProperty($,J,{value:Q,enumerable:!0,configurable:!0,writable:!0}):$[J]=Q,$)},q=(0,w.A)(c),e.next=28,q.setSessionData(M);case 28:return G=Date.now()-u,e.next=31,D(E,q,G);case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(23),E.error("Failed to set session data for telemetry",e.t1);case 36:return K=c.getInstanceOf(L.E),e.prev=37,e.next=40,K.init(null==s?void 0:s.worker,null==s?void 0:s.workspace);case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(37),E.error("Failed to initialise TaskRouter",e.t2);case 45:return U=c.getInstanceOf(T.W),e.prev=46,e.next=49,U.init();case 49:e.next=54;break;case 51:e.prev=51,e.t3=e.catch(46),E.error("Failed to initialise CBM SDK",e.t3);case 54:return V=c.getInstanceOf(C.$),e.next=57,(0,W.X)(c)(r);case 57:if(B=e.sent,Y=(0,I.xQ)("disable-flex-sdk-telemetry-beta",B),z=N("flex-telemetry-key",B),Y)E.info("Product analytics is disabled");else if(z)try{V.init(z)}catch(t){E.warn("Failed to initialise Analytics",t)}else E.info("Analytics Key for Telemetry not found in features config");if(s.disableDataClient){e.next=71;break}return H=c.getInstanceOf(_.o),e.prev=63,e.next=66,H.init();case 66:e.next=71;break;case 68:e.prev=68,e.t4=e.catch(63),E.error("Failed to initialize DataClient",e.t4);case 71:return e.abrupt("return",c.getInstanceOf(k.ClientImpl));case 72:case"end":return e.stop()}var $,J,Q}),e,null,[[14,19],[23,33],[37,42],[46,51],[63,68]])})));return function(t,r){return e.apply(this,arguments)}}()}},9294:(t,e,r)=>{"use strict";r.d(e,{B:()=>s});r(1624),r(1e3),r(2047),r(1157),r(8534);var n=r(6056);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,c(t,e,"set"),r),r}function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,c(t,e,"get"))}function c(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var u=new WeakMap,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u.set(this,{writable:!0,value:void 0})}var e,r,c;return e=t,(r=[{key:"get",value:function(){if(!a(this,u))throw new n.A("Config data hasn't been fetched");return a(this,u)}},{key:"set",value:function(t){i(this,u,t)}}])&&o(e.prototype,r),c&&o(e,c),t}()},7742:(t,e,r)=>{"use strict";r.d(e,{Q:()=>a});r(1e3),r(1117),r(5301);var n=r(1710),o=r(9294);function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var a=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r,i){var a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,n.o)(t),"no-cache"!==(null==i?void 0:i.fetchPolicy)){e.next=3;break}return e.abrupt("return",a(r,i));case 3:return c=t.getInstanceOf(o.B),e.prev=4,e.abrupt("return",c.get());case 8:return e.prev=8,e.t0=e.catch(4),e.abrupt("return",a(r,i));case 11:case"end":return e.stop()}}),e,null,[[4,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))});return function(t,e){return r.apply(this,arguments)}}()}},1710:(t,e,r)=>{"use strict";r.d(e,{o:()=>w});r(1e3),r(1117),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(5301);var n=r(5543),o=r(6875),i=r(9051),a=r(8029),c=r(6865),u=r(9294),s=r(6107),l=r(1753),f=r(4957),p=r(3772);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var m={module:"config",eventSource:"AccountConfigProvider.ts"},w=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var h,v,y,w,g,b,k,x,E,j,O,S,P,L,T=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y=T.length>1&&void 0!==T[1]?T[1]:{},w=t.getInstanceOf(u.B),g=t.getInstanceOf(p.u),b=(0,s.C6)(t),k=t.getInstanceOf(l.N),x=(0,n.j)(t)(o.q9.Config),E=t.getInstanceOf(f.r),j=(null==E||null===(h=E.accountConfig.query)||void 0===h?void 0:h.UiVersion)||(null==y||null===(v=y.query)||void 0===v?void 0:v.UiVersion),e.prev=8,e.next=11,g.fetchConfiguration("UiVersion",j,{token:r});case 11:O=e.sent,k.setCachedItem(c.d.AccountConfig,O),e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(8),void 0!==(S=k.getCachedItem(c.d.AccountConfig))){e.next=22;break}return P="Failed to fetch account configuration: ".concat(e.t0,". No cache found."),L=e.t0.code||i.jK.Unknown,e.abrupt("return",b(L,d(d({},m),{},{severity:a.W.Error}),P));case 22:S.dateCreated=new Date(S.dateCreated),S.dateUpdated=new Date(S.dateUpdated),x.warn("Failed to fetch account configuration: ".concat(e.t0,". Using cache instead")),O=S;case 26:return w.set(O),e.abrupt("return",O);case 28:case"end":return e.stop()}}),e,null,[[8,15]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}},3951:(t,e,r)=>{"use strict";r.d(e,{B:()=>i});r(5128),r(444),r(4011),r(5226),r(3275),r(9270);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i=function(){var t;return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},null===(t=window.__TWILIO_FLEX_SDK__)||void 0===t?void 0:t.environmentConfig)}},6601:(t,e,r)=>{"use strict";r.d(e,{o:()=>i});r(1e3),r(1117),r(5301);var n=r(514);function o(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var i=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,n.X)(t),e.next=3,i(r,o);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function c(t){o(a,n,i,c,u,"next",t)}function u(t){o(a,n,i,c,u,"throw",t)}c(void 0)}))});return function(t,e){return r.apply(this,arguments)}}()}},514:(t,e,r)=>{"use strict";r.d(e,{X:()=>S});r(1e3),r(1117),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(5301);var n=r(5543),o=r(6875),i=r(9051),a=r(8029),c=r(6865),u=r(2913),s=(r(1624),r(2047),r(1157),r(8534),r(8423)),l=r(279),f=r(1563),p=r(7044),h=r(6107);function d(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,m(t,e,"set"),r),r}function m(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var w=new WeakMap,g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w.set(this,{writable:!0,value:void 0}),this.httpAdapter=new l.B(e),y(this,w,(0,h.C6)(e)),this.httpAdapter.setIsEdgeSupported(!0)}var e,r,n,o,c;return e=t,r=[{key:"fetchFeatures",value:(o=regeneratorRuntime.mark((function t(e){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={module:"backend",severity:a.W.Error,source:"features.service.ts"},t.prev=1,t.next=4,this.httpAdapter.get("https://flex[region].twilio.com/api/v1/Session",f.N.HostedFlex,e);case 4:n=t.sent,t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(1),!(0,s.nr)(t.t0.code)){t.next=12;break}return o="FeaturesService - ".concat(t.t0.message),t.abrupt("return",(u=this,l=w,function(t,e){return e.get?e.get.call(t):e.value}(u,m(u,l,"get"))).call(this,i.jK.DownstreamServiceError,r,o));case 12:return t.abrupt("return",Promise.reject(t.t0));case 13:return c=(0,p.F)(n),t.abrupt("return",c);case 15:case"end":return t.stop()}var u,l}),t,this,[[1,7]])})),c=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){d(i,r,n,a,c,"next",t)}function c(t){d(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t){return c.apply(this,arguments)})}],r&&v(e.prototype,r),n&&v(e,n),t}(),b=r(1753);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){E(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function E(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var O={module:"config",eventSource:"FeaturesProviderImpl.ts"},S=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r,s){var l,f,p,h,d,v,y,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.getInstanceOf(g),f=(0,u.a)(t),p=t.getInstanceOf(b.N),h=(0,n.j)(t)(o.q9.Config),e.prev=4,e.next=7,l.fetchFeatures(x({token:r},s&&{headers:{"X-Flex-Version":s}}));case 7:d=e.sent,p.setCachedItem(c.d.FeaturesConfig,d),e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(4),void 0!==(v=p.getCachedItem(c.d.FeaturesConfig))){e.next=18;break}return y="Failed to fetch features: ".concat(e.t0,". No cache found."),m=e.t0.code||i.jK.Unknown,e.abrupt("return",f(m,x(x({},O),{},{severity:a.W.Error}),y));case 18:h.warn("Failed to fetch features: ".concat(e.t0,". Using cache instead")),d=v;case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){j(i,n,o,a,c,"next",t)}function c(t){j(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t,e){return r.apply(this,arguments)}}()}},346:(t,e,r)=>{"use strict";r.d(e,{b:()=>k});r(5301),r(242);require("core-js/modules/es.string.ends-with.js");r(3524),r(9344),r(3317),r(1e3),r(1117),r(5128),r(444),r(4011),r(5226),r(3275),r(9270);var n=r(3772),o=r(9051),i=r(8029),a=r(6107),c=r(2913),u=r(5543),s=r(6875),l=r(6865),f=r(1753),p=r(1039);function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var m=".twil.io",w=/^([a-z]+-[a-z]+-\d+)$/,g={module:"config",eventSource:"PublicConfigProvider.ts"};function b(t){return function(t){return!!t.accountSid}(t)?{paramName:"AccountSid",paramValue:t.accountSid}:{paramName:"RuntimeDomain",paramValue:function(t){var e=t.trim();if(e.endsWith("/")&&(e=e.replace(/\/$/,"")),!e.endsWith(m)){var r=e.match(w);r&&r[1]&&(e+=m)}return e}(t.runtimeDomain)}}var k=function(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var h,v,y,m,w,k,x,E,j,O,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=(0,a.C6)(t),v=t.getInstanceOf(n.u),y=(0,c.a)(t),m=t.getInstanceOf(f.N),w=(0,u.j)(t)(s.q9.Config),k=b(r),e.prev=6,e.next=9,v.fetchPublicConfiguration(k.paramName,k.paramValue);case 9:x=e.sent,m.setCachedItem(l.d.PublicConfig,x),e.next=25;break;case 13:if(e.prev=13,e.t0=e.catch(6),!(null==(j=m.getCachedItem(l.d.PublicConfig))||null===(E=j.configurations)||void 0===E?void 0:E.some((function(t){return t.accountSid===k.paramValue||t.runtimeDomain===k.paramValue})))){e.next=22;break}w.warn("Failed to fetch public configuration: ".concat(e.t0,". Using cache instead")),x=j,e.next=25;break;case 22:return O="Failed to fetch public configuration: ".concat(e.t0,". No cache found."),S=e.t0.code||o.jK.Unknown,e.abrupt("return",y(S,d(d({},g),{},{severity:i.W.Error}),O));case 25:return x&&x.configurations&&x.configurations.length||h(o.jK.SDK,d(d({},g),{},{severity:i.W.Error}),"Invalid response from public configuration endpoint"),e.abrupt("return",(0,p.G0)(x.configurations[0]));case 27:case"end":return e.stop()}}),e,null,[[6,13]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){y(i,n,o,a,c,"next",t)}function c(t){y(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()}},8023:(t,e,r)=>{"use strict";r.d(e,{o:()=>l});r(1624),r(4391),r(1e3),r(2047),r(8534),r(1157),r(444),r(1076),r(5547),r(6257),r(6941),r(6486);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,u(t,e,"get"))}function c(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,u(t,e,"set"),r),r}function u(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var s=new WeakMap,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.set(this,{writable:!0,value:void 0}),c(this,s,new Map)}var e,o,u;return e=t,u=[{key:"newInstance",value:function(){return new t}}],(o=[{key:"getInstanceOf",value:function(t){return a(this,s).has(t)||a(this,s).set(t,new t(this)),a(this,s).get(t)}},{key:"setInstance",value:function(t,e){if(void 0===r.g||!process.env)throw new Error("setInstance is not meant to be used externally");a(this,s).set(t,e)}},{key:"destroy",value:function(){for(var t=a(this,s).entries(),e=!1;!e;){var r=t.next(),o=r.value;if(e=!!r.done,o){var i=n(o,2)[1];i.destroy&&i.destroy()}}a(this,s).clear()}}])&&i(e.prototype,o),u&&i(e,u),t}()},9369:(t,e,r)=>{"use strict";r.d(e,{o:()=>D});r(1624),r(1e3),r(2047),r(1157),r(8534),r(1117),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(5301);var n=r(5543),o=r(6875),i=r(3722);r(3114);const a=require("@apollo/client/core"),c=require("@apollo/client/link/http"),u=require("@apollo/client/link/retry"),s=require("@apollo/client/link/core"),l=require("@apollo/client/link/subscriptions"),f=require("@apollo/client/utilities"),p=require("@apollo/client/link/context"),h=require("graphql-ws"),d=require("ws"),v=require("graphql");var y=r(3951),m=r(4396),w=function(t){return t.GraphqlFetchRemoteSchemaFailed="Failed to fetch remote GraphQL schema",t.GraphqlLocalSchemaFailed="Failed to make local GraphQL schema",t.GraphqlSchemaStitchingFailed="Failed to stitch GraphQL schemas",t.GraphqlApolloClientInitializationFailed="Failed to initialize Apollo Client",t}({});var g=new(require("@apollo/client/cache").InMemoryCache)({});function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))}}var O=function(){var t=j(regeneratorRuntime.mark((function t(e,r){var n,o,i,b,x,E,O,S,P,L,T,C,_,W,I,F,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 8e3,t.prev=1,b=(0,y.B)(),x=(b||{}).region,E=(0,m._k)(x||(null==r?void 0:r.region)||""),O="wss://event-bridge".concat(E,".twilio.com/graphql-subscriptions"),S="https://preview".concat(E,".twilio.com/Flex/graphql"),P="function"==typeof e,L=[],null!=r&&r.errorLink&&L.push(r.errorLink),T=(0,p.setContext)(function(){var t=j(regeneratorRuntime.mark((function t(r,n){var o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.headers,!P){t.next=7;break}return t.next=4,e();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=e;case 8:return i=t.t0,a=btoa("token:".concat(i)),t.abrupt("return",{headers:k(k({},o),{},{authorization:a?"Basic ".concat(a):""})});case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),L.push(T),C=new u.RetryLink({attempts:{max:5},delay:{initial:1e3,max:3e3}}),L.push(C),_=function(){return new a.ApolloLink((function(t,e){var r=t.getContext().headers,n=(0,v.print)(t.query),o=JSON.stringify(r).length,i=JSON.stringify(t.variables),a="".concat(S,"?query=").concat(encodeURIComponent(n),"&variables=").concat(encodeURIComponent(i)).length+o<=8e3;return new c.HttpLink({uri:S,useGETForQueries:a}).request(t,e)}))},L.push(_()),W=O,I=new l.GraphQLWsLink((0,h.createClient)(k(k({url:W},void 0===d.WebSocket&&{webSocketImpl:d.WebSocket}),{},{connectionParams:function(){var t=j(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0="Bearer ",!P){t.next=7;break}return t.next=4,e();case 4:t.t1=t.sent,t.next=8;break;case 7:t.t1=e;case 8:return t.t2=t.t1,t.t3=t.t0.concat.call(t.t0,t.t2),t.abrupt("return",{authToken:t.t3});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}))),F=(0,a.split)((function(t){var e=t.query,r=(0,f.getMainDefinition)(e);return"OperationDefinition"===r.kind&&"subscription"===r.operation}),I,(0,s.from)(L)),null!=r&&r.typePolicies&&g.policies.addTypePolicies(null==r?void 0:r.typePolicies),A=new a.ApolloClient({cache:g,connectToDevTools:null!==(n=null==r?void 0:r.connectToDevTools)&&void 0!==n&&n,link:F,defaultOptions:{query:{fetchPolicy:"network-only",errorPolicy:"all"}},typeDefs:null==r||null===(o=r.localSchema)||void 0===o?void 0:o.typeDefs,resolvers:null==r||null===(i=r.localSchema)||void 0===i?void 0:i.resolvers}),t.abrupt("return",Promise.resolve(A));case 24:throw t.prev=24,t.t0=t.catch(1),new Error(w.GraphqlApolloClientInitializationFailed);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})));return function(e,r){return t.apply(this,arguments)}}(),S=r(4957);function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function C(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function W(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,F(t,e,"get"))}function I(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,F(t,e,"set"),r),r}function F(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var A=new WeakMap,R=new WeakMap,N=new WeakMap,D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),A.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),N.set(this,{writable:!0,value:void 0}),I(this,R,e.getInstanceOf(i.P)),I(this,A,(0,n.j)(e)(o.q9.DataClient)),I(this,N,e.getInstanceOf(S.r)),this.client=null}var e,r,a,c,u;return e=t,r=[{key:"init",value:(c=regeneratorRuntime.mark((function t(){var e,r,n,o,i,a,c,u,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(W(this,A).debug("Initializing dataClient"),e=function(){return W(s,R).token},!this.client){t.next=4;break}return t.abrupt("return",this.client);case 4:return r=(0,y.B)(),o=(n=r||{}).region,i=n.regionNonFlex,a=W(this,N),c=a.dataClientOptions,u=i||W(this,N).regionNonFlex||o||W(this,N).region,t.next=10,O(e,L(L({},c),{},{region:u})).then((function(t){return W(s,A).debug("Initialized dataClient successfully"),t})).catch((function(t){return W(s,A).error("Failed to initialize dataClient",t),null}));case 10:return this.client=t.sent,t.abrupt("return",this.client);case 12:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=c.apply(t,e);function i(t){C(o,r,n,i,a,"next",t)}function a(t){C(o,r,n,i,a,"throw",t)}i(void 0)}))},function(){return u.apply(this,arguments)})},{key:"destroy",value:function(){this.client&&this.client.stop(),this.client=null}}],r&&_(e.prototype,r),a&&_(e,a),t}()},8423:(t,e,r)=>{"use strict";r.d(e,{FC:()=>p,i6:()=>h,$G:()=>f,nr:()=>d,L_:()=>s,vA:()=>l});r(1624),r(4391),r(1e3),r(2047),r(8534),r(6706);require("core-js/modules/es.object.values.js");r(3600),r(6770);var n,o=r(9051);function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=function(t){return t[t.SyncConnectionError=45510]="SyncConnectionError",t[t.SyncAccessForbiddenError=54007]="SyncAccessForbiddenError",t[t.SyncMapNotFoundError=54200]="SyncMapNotFoundError",t[t.SyncMapItemNotFoundError=54201]="SyncMapItemNotFoundError",t[t.SyncInvalidMapItemDataError=54206]="SyncInvalidMapItemDataError",t[t.SyncInvalidMapItemKeyError=54209]="SyncInvalidMapItemKeyError",t[t.SyncNameNotFoundError=54300]="SyncNameNotFoundError",t[t.SyncNameAlreadyExistsError=54301]="SyncNameAlreadyExistsError",t[t.SyncInvalidNameError=54302]="SyncInvalidNameError",t}({}),c=(i(n={},a.SyncConnectionError,"Sync connection error"),i(n,a.SyncAccessForbiddenError,"Sync access forbidden for identity"),i(n,a.SyncMapNotFoundError,"Sync map not found"),i(n,a.SyncInvalidMapItemDataError,"Invalid sync map item data"),i(n,a.SyncInvalidMapItemKeyError,"Invalid sync map item key"),i(n,a.SyncMapItemNotFoundError,"Sync map item not found"),i(n,a.SyncNameNotFoundError,"Sync unique name not found"),i(n,a.SyncNameAlreadyExistsError,"Sync unique name already exists"),i(n,a.SyncInvalidNameError,"Sync invalid unique name"),n),u=new Map([[a.SyncConnectionError,o.jK.ConnectionError],[a.SyncAccessForbiddenError,o.jK.Forbidden],[a.SyncMapNotFoundError,o.jK.NotFound],[a.SyncMapItemNotFoundError,o.jK.NotFound],[a.SyncInvalidMapItemDataError,o.jK.InvalidParams],[a.SyncInvalidMapItemKeyError,o.jK.InvalidParams],[a.SyncNameNotFoundError,o.jK.NotFound],[a.SyncNameAlreadyExistsError,o.jK.InvalidState],[a.SyncInvalidNameError,o.jK.InvalidParams]]);function s(t){return!!Object.values(a).find((function(e){return e===t}))}function l(t){return function(t){return!!Object.values(o.jK).find((function(e){return e===t}))}(t)||s(t)}function f(t){return o.MH.includes(t)}function p(t){return function(t){return o.Yg[t]}(t)||function(t){return c[t]}(t)||"Error"}function h(t){return u.get(t)||o.jK.Unknown}function d(t){return!t||t===o.jK.NetworkError||t===o.jK.Unknown}},9051:(t,e,r)=>{"use strict";var n;function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{MH:()=>c,Yg:()=>a,jK:()=>i});var i=function(t){return t[t.PermissionDeniedError=20003]="PermissionDeniedError",t[t.InvalidAccessToken=20101]="InvalidAccessToken",t[t.AccessTokenExpired=20104]="AccessTokenExpired",t[t.TooManyRequests=20429]="TooManyRequests",t[t.InternalServerError=20500]="InternalServerError",t[t.BadGateway=20502]="BadGateway",t[t.ServiceUnavailable=20503]="ServiceUnavailable",t[t.GatewayTimeout=20504]="GatewayTimeout",t[t.AuthorizationError=45003]="AuthorizationError",t[t.ValidationError=45004]="ValidationError",t[t.ConnectionError=45011]="ConnectionError",t[t.SDK=45500]="SDK",t[t.Unknown=45501]="Unknown",t[t.Forbidden=45502]="Forbidden",t[t.InvalidParams=45503]="InvalidParams",t[t.NotFound=45504]="NotFound",t[t.InvalidState=45505]="InvalidState",t[t.NetworkError=45508]="NetworkError",t[t.TwilsockConnectionError=45511]="TwilsockConnectionError",t[t.DownstreamServiceError=45512]="DownstreamServiceError",t[t.BadRequest=70002]="BadRequest",t[t.InvalidCertificate=70251]="InvalidCertificate",t}({}),a=(o(n={},i.PermissionDeniedError,"PermissionDeniedError: You lack permission to the resource and method you requested"),o(n,i.InvalidAccessToken,"Invalid Access Token"),o(n,i.AccessTokenExpired,"Access Token expired or expiration date invalid"),o(n,i.TooManyRequests,"TooManyRequests: Twilsock rate limit exceeded"),o(n,i.InternalServerError,"InternalServerError"),o(n,i.BadGateway,"BadGateway"),o(n,i.ServiceUnavailable,"Service Unavailable"),o(n,i.GatewayTimeout,"Gateway timed out"),o(n,i.AuthorizationError,"Attempt to access resource where access is not allowed for given credentials"),o(n,i.ValidationError,"Validation error: request body validation fails"),o(n,i.ConnectionError,"Connection error"),o(n,i.SDK,"Something went wrong, error from inner SDK"),o(n,i.Unknown,"Unknown error"),o(n,i.Forbidden,"User is not authorized to perform the requested operation"),o(n,i.InvalidParams,"Invalid parameters"),o(n,i.NotFound,"Resource not found"),o(n,i.InvalidState,"Invalid state"),o(n,i.NetworkError,"NetworkError: Not able to reach the server"),o(n,i.TwilsockConnectionError,"Twilsock connection error"),o(n,i.BadRequest,"BadRequest: The data in the request is unparsable"),o(n,i.InvalidCertificate,"Validation error: invalid certificate"),o(n,i.DownstreamServiceError,"Downstream error"),n),c=[i.PermissionDeniedError,i.InvalidAccessToken,i.AccessTokenExpired,i.TooManyRequests,i.AuthorizationError,i.ValidationError,i.BadRequest,i.InvalidCertificate]},8029:(t,e,r)=>{"use strict";r.d(e,{W:()=>n});var n=function(t){return t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Info="info",t}({})},8576:(t,e,r)=>{"use strict";r.d(e,{W:()=>E});r(3114),r(1624),r(1e3),r(2047),r(1157),r(8534),r(3064),r(7285),r(9616),r(4391),r(5128),r(444),r(4011),r(5226),r(3275),r(9270),r(1076),r(5547);var n=r(8423),o=r(8029);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){var e=h();return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;return l(t)}(this,r)}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return p(t,arguments,v(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,t)},f(t)}function p(t,e,r){return p=h()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&d(o,r.prototype),o},p.apply(null,arguments)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},d(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(p,t);var e,r,i,f=s(p);function p(t,e,r,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),a=f.call(this,"".concat((0,n.FC)(t)+(void 0!==r?": ".concat(r):"")," (").concat(t,")")),g.set(l(a),{writable:!0,value:void 0}),b.set(l(a),{writable:!0,value:void 0}),k.set(l(a),{writable:!0,value:void 0}),x.set(l(a),{writable:!0,value:void 0}),m(l(a),b,t),m(l(a),g,r),m(l(a),x,e||{severity:o.W.Error}),m(l(a),k,i),Object.setPrototypeOf(l(a),p.prototype),a}return e=p,r=[{key:"code",get:function(){return y(this,b)}},{key:"details",get:function(){return y(this,g)}},{key:"wrappedError",get:function(){return y(this,k)}},{key:"metadata",get:function(){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},y(this,x))}}],r&&u(e.prototype,r),i&&u(e,i),p}(f(Error))},6056:(t,e,r)=>{"use strict";r.d(e,{A:()=>f});r(3064),r(1e3),r(7285),r(9616),r(1624),r(4391),r(2047),r(8534),r(444),r(1076),r(5547);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){var e=u();return function(){var r,o=l(t);if(e){var a=l(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;return i(t)}(this,r)}}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){var e="function"==typeof Map?new Map:void 0;return a=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)},a(t)}function c(t,e,r){return c=u()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&s(o,r.prototype),o},c.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,t);var e=o(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Internal Error";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t=e.call(this,n),Object.setPrototypeOf(i(t),r.prototype),t}return r}(a(Error))},6107:(t,e,r)=>{"use strict";r.d(e,{C6:()=>s,gN:()=>f,kG:()=>l,yB:()=>u});r(1e3),r(1117),r(5301);var n=r(9051),o=r(8423),i=r(8576),a=r(8245);function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(e,r,n,c){if(c instanceof i.W)return c;e&&(0,o.vA)(e)||console.warn("Unknown error code");var u=e;(0,o.L_)(e)&&(u=(0,o.i6)(e));var s=new i.W(u,r,n,c);return t.getInstanceOf(a.Z).publishTelemetryError(s),s}}function s(t){return function(e,r,n,o){throw u(t)(e,r,n,o)}}function l(t){return function(e,r){if(e instanceof i.W)throw e;var o=e.code?e.code:n.jK.Unknown;s(t)(o,r,e.message)}}function f(t){return function(){var e,r=(e=regeneratorRuntime.mark((function e(r,n,o){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.json();case 2:(i=e.sent).message=o||i.message,l(t)(i,n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,e,n){return r.apply(this,arguments)}}()}},2913:(t,e,r)=>{"use strict";r.d(e,{a:()=>i});var n=r(6107),o=r(8245);function i(t){return function(e,r,i,a){var c=(0,n.yB)(t)(e,r,i,a);t.getInstanceOf(o.Z).publishTelemetryError(c),(0,n.C6)(t)(e,r,i,c)}}},6875:(t,e,r)=>{"use strict";r.d(e,{pI:()=>i,q9:()=>n,tT:()=>o});var n=function(t){return t.Client="flex:Client",t.Error="flex:Error",t.Retry="flex:Retry",t.Session="flex:Session",t.Twilsock="flex:Twilsock",t.Auth="flex:Auth",t.Config="flex:Config",t.Sync="flex:Sync",t.SyncAdapter="flex:SyncAdapter",t.Storage="flex:Storage",t.ProfileConnector="flex:ProfileConnector",t.VirtualAgentData="flex:VirtualAgentData",t.Actions="flex:Actions",t.TaskRouter="flex:TaskRouter",t.CBM="flex:CBM",t.Voice="flex:Voice",t.Call="flex:Call",t.DataClient="flex:DataClient",t.Analytics="flex:Analytics",t}({}),o=function(t){return t.Twilsock="twilsock",t}({}),i=function(t){return t.TelemetryClient="TelemetryClient",t.TelemetryProcessor="TelemetryProcessor",t.TelemetrySdkClient="TelemetrySdkClient",t}({})},5294:(t,e,r)=>{"use strict";r.d(e,{U:()=>s,w:()=>u});r(1624),r(1e3),r(2047),r(1157),r(8534);var n=r(2562);function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,a(t,e,"set"),r),r}function a(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var c=new WeakMap,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),c.set(this,{writable:!0,value:void 0}),i(this,c,(0,n.j)().level)}var e,r,u;return e=t,(r=[{key:"level",get:function(){return function(t,e){return e.get?e.get.call(t):e.value}(t=this,a(t,c,"get"));var t},set:function(t){i(this,c,t)}}])&&o(e.prototype,r),u&&o(e,u),t}(),s=function(t){return function(e){t.getInstanceOf(u).level=e}}},2562:(t,e,r)=>{"use strict";r.d(e,{j:()=>n});var n=function(){return{level:"ERROR"}}},5543:(t,e,r)=>{"use strict";r.d(e,{j:()=>O});r(1624),r(4391),r(1e3),r(2047),r(8534),r(3600),r(6770),r(5128);var n=r(9401),o=r.n(n),i=r(6622),a=r(2504),c=r(6875);r(3275),r(3114);var u=function(t){return t.Trace="trace",t.Debug="debug",t.Info="info",t.Warn="warn",t.Error="error",t}({}),s=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Debug;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.loggerName=e,this.severity=r,this.timestamp=new Date,this.context={}},l=function(t){return t<10?"0".concat(t):"".concat(t)},f=[function(t){return function(e,r,n){return function(o){for(var i=o instanceof s,a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];i||c.unshift(o);var l=i?o:new s(n,e);return t(e,r,n).apply(void 0,[l].concat(c))}}},function(t){return function(e,r,n){return function(o){for(var i=t(e,r,n),a=arguments.length,c=new Array(a>1?a-1:0),u=1;u<a;u++)c[u-1]=arguments[u];return i.apply(void 0,[o].concat(c))}}},function(t){return function(e,r,n){return function(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),c=1;c<i;c++)a[c-1]=arguments[c];return o.data||(o.data=a),t(e,r,n).apply(void 0,[o].concat(a))}}},function(t){return function(e,r,n){return function(o){for(var i,a,c,u,s,f,p,h,d=(i=o.timestamp,a=i.getFullYear(),c=l(i.getMonth()+1),u=l(i.getDate()),s=l(i.getHours()),f=l(i.getMinutes()),p=l(i.getSeconds()),h=l(i.getMilliseconds()),"".concat(a,"-").concat(c,"-").concat(u," ").concat(s,":").concat(f,":").concat(p,".").concat(h)),v=o.severity.toUpperCase(),y="[".concat(d,"] Flex SDK → ").concat(n," (").concat(v,"): "),m=t(e,r,n),w=arguments.length,g=new Array(w>1?w-1:0),b=1;b<w;b++)g[b-1]=arguments[b];return m.apply(void 0,[y].concat(g))}}}].reverse(),p=function(t){return f.forEach((function(e){var r=t.methodFactory;t.methodFactory=e(r)})),t.setLevel(t.getLevel()),t};r(1157);function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,y(t,e,"get"))}function v(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,y(t,e,"set"),r),r}function y(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var m=new WeakMap,w=function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m.set(this,{writable:!0,value:void 0}),h(this,"trace",(function(){var t;(t=d(r,m)).trace.apply(t,arguments)})),h(this,"debug",(function(){var t;(t=d(r,m)).debug.apply(t,arguments)})),h(this,"log",(function(){var t;(t=d(r,m)).debug.apply(t,arguments)})),h(this,"info",(function(){var t;(t=d(r,m)).info.apply(t,arguments)})),h(this,"warn",(function(){var t;(t=d(r,m)).warn.apply(t,arguments)})),h(this,"error",(function(){var t;(t=d(r,m)).error.apply(t,arguments)})),h(this,"setLevel",(function(t){d(r,m).setLevel(t)})),h(this,"getLevel",(function(){return d(r,m).getLevel()})),v(this,m,e)},g=r(5294);var b,k,x,E=(b={},k=c.tT.Twilsock,x=o(),k in b?Object.defineProperty(b,k,{value:x,enumerable:!0,configurable:!0,writable:!0}):b[k]=x,b),j=new Map,O=function(t){return function(e){(0,a.Ee)(e,"name");var r=j.get(e);if(r)return r;var n,o=t.getInstanceOf(g.w).level,c=[p];return n=Object.keys(E).includes(e)?function(t){return E[t].getLogger(t)}(e):i.getLogger(e),n=c.reduce((function(t,e){return e(t)}),n),(r=new w(n)).setLevel(o),j.set(e,r),r}}},8245:(t,e,r)=>{"use strict";r.d(e,{Z:()=>m});r(1624),r(1e3),r(2047),r(1157),r(8534),r(3064),r(7285),r(9616),r(4391),r(444),r(1076),r(5547);const n=require("rxjs");function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){var e=l();return function(){var r,n=p(t);if(e){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;return c(t)}(this,r)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,p(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)},u(t)}function s(t,e,r){return s=l()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&f(o,r.prototype),o},s.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t,e){return f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},f(t,e)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,v(t,e,"get"))}function d(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,v(t,e,"set"),r),r}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var y=new WeakMap,m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(s,t);var e,r,o,u=a(s);function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t=u.call(this),y.set(c(t),{writable:!0,value:void 0}),d(c(t),y,new n.Subject),t}return e=s,(r=[{key:"telemetryErrorStream",get:function(){return h(this,y).asObservable()}},{key:"publishTelemetryError",value:function(t){h(this,y).next(t)}}])&&i(e.prototype,r),o&&i(e,o),s}(u(Object))},785:(t,e,r)=>{"use strict";r.d(e,{P:()=>n});var n=function(t){return t.TokenMaxLifetimeReached="tokenMaxLifetimeReached",t.TokenAutoUpdateFailed="tokenAutoUpdateFailed",t}({})},3722:(t,e,r)=>{"use strict";r.d(e,{P:()=>G});r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(5301);var n=r(1239),o=r.n(n),i=r(785),a=r(7971),c=r(6056),u=r(5543),s=r(6875),l=r(4100),f=r(1198),p=r(3147),h=r(1710),d=r(7769);function v(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){v(i,n,o,a,c,"next",t)}function c(t){v(i,n,o,a,c,"throw",t)}a(void 0)}))}}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,b(t,e,"get"))}function g(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,b(t,e,"set"),r),r}function b(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var k=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,O=new WeakMap,S=new WeakMap,P=new WeakMap,L=new WeakMap,T=new WeakMap,C=new WeakMap,_=new WeakMap,W=new WeakMap,I=new WeakMap,F=new WeakMap,A=new WeakMap,R=new WeakMap,N=new WeakMap,D=new WeakMap,M=new WeakMap,q=new WeakMap,G=function(){function t(e){var r,n,a,v=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),O.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:void 0}),P.set(this,{writable:!0,value:void 0}),L.set(this,{writable:!0,value:[]}),T.set(this,{writable:!0,value:void 0}),C.set(this,{writable:!0,value:!0}),_.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:void 0}),N.set(this,{writable:!0,value:(r=y(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w(v,D).call(v)){t.next=3;break}return t.next=3,w(v,q).call(v);case 3:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}),D.set(this,{writable:!0,value:function(){var t=new Date;return(w(v,E).getTime()-t.getTime())/6e4<=1}}),M.set(this,{writable:!0,value:(n=y(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!w(v,P)){t.next=5;break}return t.next=3,w(v,q).call(v);case 3:t.next=6;break;case 5:g(v,W,!0);case 6:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})}),q.set(this,{writable:!0,value:(a=y(regeneratorRuntime.mark((function t(){var e,r,n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w(v,_).debug("Auto-updating token"),e=w(v,P).accountSid){t.next=4;break}throw new c.A("Account sid not set");case 4:return o=w(v,k).call(v,e),t.prev=5,t.next=8,o.refreshToken(v.token);case 8:a=t.sent,(n=a.dateExpired).getTime()===w(v,E).getTime()&&(w(v,_).warn("Token expiration not extended, because max lifetime reached"),w(v,I).emit(i.P.TokenMaxLifetimeReached,a.dateExpired)),r=a.token,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(5),w(v,_).error("Failed to refresh token",t.t0),w(v,I).emit(i.P.TokenAutoUpdateFailed);case 18:if(w(v,C)){t.next=21;break}return w(v,_).trace("AutoUpdateToken, session destroyed after refreshToken"),t.abrupt("return");case 21:if(!r||!n){t.next=33;break}return t.prev=22,t.next=25,v.updateToken(r);case 25:g(v,E,n),w(v,_).info("Token auto-updated"),t.next=33;break;case 29:t.prev=29,t.t1=t.catch(22),w(v,_).error("Failed to auto-update token",t.t1),w(v,I).emit(i.P.TokenAutoUpdateFailed);case 33:case"end":return t.stop()}}),t,null,[[5,14],[22,29]])}))),function(){return a.apply(this,arguments)})}),g(this,j,e.getInstanceOf(f.N)),g(this,O,(0,l.S)()),g(this,S,(0,h.o)(e)),g(this,k,(0,p.K)(e)),g(this,_,(0,u.j)(e)(s.q9.Session)),w(this,_).debug("Session constructed"),g(this,I,new(o())),g(this,A,e.getInstanceOf(d.s))}var e,r,n,v,b,G;return e=t,r=[{key:"init",value:(G=y(regeneratorRuntime.mark((function t(e){var r,n,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(this,_).debug("will initialize session with token: ",e),w(this,_).debug("will update token: ",w(this,O).autoUpdateToken),w(this,A).sessionToken=e,t.next=5,w(this,j).connect(e);case 5:return w(this,O).autoUpdateToken&&w(this,j).addListener(a.J.TokenAboutToExpire,w(this,M)),t.t0=g,t.t1=this,t.t2=P,t.next=11,w(this,S).call(this,e);case 11:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),r=w(this,P).accountSid,n=w(this,k).call(this,r),t.next=17,n.validateToken(w(this,A).sessionToken);case 17:if(o=t.sent,g(this,L,o.roles),g(this,E,o.dateExpired),g(this,T,o.identity),g(this,R,o.flexUserSid),w(this,O).autoUpdateToken&&(g(this,W,w(this,W)||w(this,D).call(this)),g(this,F,setInterval((function(){return w(i,N).call(i)}),15e3))),!w(this,W)){t.next=26;break}return t.next=26,w(this,q).call(this);case 26:return t.abrupt("return",Promise.resolve());case 27:case"end":return t.stop()}}),t,this)}))),function(t){return G.apply(this,arguments)})},{key:"updateToken",value:(b=y(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(this,A).sessionToken=e,t.next=3,w(this,j).updateToken(e);case 3:w(this,_).debug("new token set");case 4:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"destroy",value:(v=y(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(this,F)&&clearInterval(w(this,F)),g(this,C,!1),w(this,j).removeListener(a.J.TokenAboutToExpire,w(this,M)),t.next=5,w(this,j).destroy();case 5:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"token",get:function(){return w(this,A).sessionToken}},{key:"roles",get:function(){return w(this,L)}},{key:"addListener",value:function(t,e){return w(this,I).on(t,e),this}},{key:"removeListener",value:function(t,e){return w(this,I).removeListener(t,e),this}}],r&&m(e.prototype,r),n&&m(e,n),t}()},4100:(t,e,r)=>{"use strict";r.d(e,{S:()=>o});var n={autoUpdateToken:!0};function o(){return n}},1753:(t,e,r)=>{"use strict";r.d(e,{N:()=>l});r(1624),r(1e3),r(2047),r(1157),r(8534);var n=r(5543),o=r(6875);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,u(t,e,"get"))}function c(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,u(t,e,"set"),r),r}function u(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var s=new WeakMap,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.set(this,{writable:!0,value:void 0}),c(this,s,(0,n.j)(e)(o.q9.Storage))}var e,r,u;return e=t,(r=[{key:"getCachedItem",value:function(t){var e=localStorage.getItem(t);if(e){var r=JSON.parse(e);return(new Date).getTime()>r.expiry?(localStorage.removeItem(t),void a(this,s).debug("The ".concat(t," cache item has expired"))):r.value}a(this,s).debug("The ".concat(t," cache item is not available"))}},{key:"setCachedItem",value:function(t,e){var r={value:e,expiry:(new Date).getTime()+864e5};try{localStorage.setItem(t,JSON.stringify(r))}catch(t){a(this,s).error(t)}a(this,s).debug("Cached ".concat(t))}}])&&i(e.prototype,r),u&&i(e,u),t}()},6865:(t,e,r)=>{"use strict";r.d(e,{d:()=>n});var n=function(t){return t.AccountConfig="FLEX_SDK_CACHE_ACCOUNT_CONFIG",t.PublicConfig="FLEX_SDK_CACHE_PUBLIC_CONFIG",t.FeaturesConfig="FLEX_SDK_CACHE_FEATURES_CONFIG",t}({})},445:(t,e,r)=>{"use strict";r.d(e,{b:()=>o});var n={reportErrors:!0};function o(){return n}},8786:(t,e,r)=>{"use strict";r.d(e,{m:()=>n});var n=function(t){return t.Default="default",t.Error="error",t}({})},8792:(t,e,r)=>{"use strict";r.d(e,{P:()=>n});var n=function(t){return t.ClientInitialized="client_initialized",t.ClientDestroyed="client_destroyed",t}({})},8717:(t,e,r)=>{"use strict";r.d(e,{p:()=>n});var n=function(t){return t.Client="Client",t}({})},3949:(t,e,r)=>{"use strict";r.d(e,{A:()=>pt,i:()=>ht});r(6941),r(1624),r(1e3),r(2047),r(1157),r(8534),r(1117),r(5301);var n=r(5543),o=r(6875),i=(r(3114),r(1198)),a=r(445),c=(r(3275),r(6257),r(444),r(1076),r(5547),r(6486),r(8029)),u=r(9051),s=r(6107);function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,h(t,e,"set"),r),r}function h(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var d=new WeakMap,v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d.set(this,{writable:!0,value:void 0}),p(this,d,e.getInstanceOf(i.N))}var e,r,n,o,a;return e=t,r=[{key:"post",value:(o=regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(o=this,i=d,function(t,e){return e.get?e.get.call(t):e.value}(o,h(o,i,"get"))).post(e,{},r);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}var o,i}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){l(i,r,n,a,c,"next",t)}function c(t){l(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t,e){return a.apply(this,arguments)})}],r&&f(e.prototype,r),n&&f(e,n),t}();function y(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,g(t,e,"set"),r),r}function g(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var b=new WeakMap,k=function(){function t(e){var r,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o="http://flex-sdk.twilio.com/v1",(n="basePath")in(r=this)?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,b.set(this,{writable:!0,value:void 0}),this.twilsockAdapter=e.getInstanceOf(v),w(this,b,(0,s.C6)(e))}var e,r,n,o,i;return e=t,r=[{key:"postTelemetryEvents",value:(o=regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==e&&(r={module:"backend",severity:c.W.Error,source:"telemetry.service.ts"},(o=this,i=b,function(t,e){return e.get?e.get.call(t):e.value}(o,g(o,i,"get"))).call(this,u.jK.InvalidParams,r,"Required parameter events was null or undefined when calling postTelemetryEvents.")),t.next=3,this.twilsockAdapter.post("".concat(this.basePath,"/Telemetry/Events"),e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}var o,i}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){y(i,r,n,a,c,"next",t)}function c(t){y(i,r,n,a,c,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r&&m(e.prototype,r),n&&m(e,n),t}(),x=r(2913),E=r(2504),j=(r(3133),r(5128),r(4011),r(5226),r(9270),r(1039));function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){P(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L(t,e,r,n,o){var i,a=void 0===o?{}:(0,j.vv)(o),s=S(S({},(0,j.vv)(r)),{},{client_timestamp:(new Date).toISOString(),event_group:n});if(i=s,Object.prototype.hasOwnProperty.call(i,"event_name")&&Object.prototype.hasOwnProperty.call(i,"client_timestamp"))return{payload_type:e,payload:S(S({},s),a)};var l={module:"telemetry",severity:c.W.Error,source:"toSdkBackendEvent.ts"};return t(u.jK.InvalidParams,l,"Telemetry event has missing fields")}function T(t,e,r,n){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];return i.map((function(o){return L(t,e,o,r,n)}))}function C(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){W(i,n,o,a,c,"next",t)}function c(t){W(i,n,o,a,c,"throw",t)}a(void 0)}))}}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,N(t,e,"get"))}function R(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,N(t,e,"set"),r),r}function N(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var D=new WeakMap,M=new WeakMap,q=new WeakMap,G=new WeakMap,K=new WeakMap,U=new WeakMap,V=new WeakMap,B=new WeakMap,Y=new WeakMap,z=function(){function t(e){var r,i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:!1}),G.set(this,{writable:!0,value:!1}),K.set(this,{writable:!0,value:0}),U.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),B.set(this,{writable:!0,value:(r=I(regeneratorRuntime.mark((function t(){var e,r,n,o,a,u,s,l,f,p,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=h.length,r=new Array(e),n=0;n<e;n++)r[n]=h[n];return A(i,D).debug("Sending",r.length,"telemetry events"),A(i,D).trace("Events",r),o={number_of_successful_events:0,number_of_failed_events:0},t.prev=4,t.next=7,A(i,M).postTelemetryEvents({events:r});case 7:a=t.sent,u=a.body,R(i,K,0),u&&(o=u,A(i,D).debug("Telemetry sent successfully")),t.next=24;break;case 13:if(t.prev=13,t.t0=t.catch(4),409!==(f=null===(l=t.t0.wrappedError)||void 0===l?void 0:l.status)){t.next=20;break}return A(i,D).warn("Telemetry is disabled for this account"),R(i,q,!0),t.abrupt("return",o);case 20:R(i,K,(s=A(i,K),++s)),A(i,K)>=5?(R(i,K,0),A(i,Y).call(i,3e5)):429===f&&(A(i,D).warn("Telemetry rate limit hit"),A(i,Y).call(i,6e4)),p={module:"telemetry",severity:c.W.Error,eventSource:"TwilioTelemetryProcessor.ts"},A(i,U).call(i,t.t0,p);case 24:return t.abrupt("return",o);case 25:case"end":return t.stop()}}),t,null,[[4,13]])}))),function(){return r.apply(this,arguments)})}),Y.set(this,{writable:!0,value:function(t){R(i,G,!0),setTimeout((function(){R(i,G,!1)}),t)}}),R(this,D,(0,n.j)(e)(o.pI.TelemetryProcessor)),R(this,M,new k(e)),R(this,V,(0,x.a)(e)),R(this,U,(0,s.kG)(e))}var e,r,i,a;return e=t,r=[{key:"processEvents",value:(a=I(regeneratorRuntime.mark((function t(e,r,n){var o,i,a,c,u,s,l,f,p,h,d,v,y,m=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((0,E.pY)(e,"payload type"),void 0!==r&&(0,E.pY)(r,"group name"),o=m.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=m[a];if(i.forEach((function(t){var e=t.eventName,r=t.eventSource;(0,E.pY)(e,"event name"),void 0!==r&&(0,E.pY)(r,"event source")})),c={eventsNotProcessed:i.length,eventsSucceeded:0,eventsFailed:0},!A(this,q)){t.next=8;break}return A(this,D).trace("Events not sent: telemetry disabled"),t.abrupt("return",c);case 8:if(!A(this,G)){t.next=11;break}return A(this,D).trace("Events not sent: telemetry is paused due to server errors"),t.abrupt("return",c);case 11:if(A(this,D).debug("common attributes:",n),u=T.apply(void 0,[A(this,V),e,r,n].concat(i)),s=0,l=0,!u.length){t.next=31;break}p=[],h=0;case 18:if(!(h<u.length)){t.next=26;break}if(!A(this,q)&&!A(this,G)){t.next=21;break}return t.abrupt("break",26);case 21:f=u.slice(h,h+50),p.push((d=A(this,B)).call.apply(d,[this].concat(C(f))));case 23:h+=50,t.next=18;break;case 26:return t.next=28,Promise.all(p);case 28:v=t.sent,s=v.reduce((function(t,e){return t+e.number_of_successful_events}),0),l=v.reduce((function(t,e){return t+e.number_of_failed_events}),0);case 31:return y=i.length-s-l,t.abrupt("return",{eventsSucceeded:s,eventsFailed:l,eventsNotProcessed:y});case 33:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return a.apply(this,arguments)})}],r&&F(e.prototype,r),i&&F(e,i),t}();function H(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){H(i,n,o,a,c,"next",t)}function c(t){H(i,n,o,a,c,"throw",t)}a(void 0)}))}}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Q(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Z(t,e,"get"))}function X(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,Z(t,e,"set"),r),r}function Z(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var tt=new WeakMap,et=new WeakMap,rt=new WeakMap,nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),tt.set(this,{writable:!0,value:void 0}),et.set(this,{writable:!0,value:void 0}),rt.set(this,{writable:!0,value:void 0}),X(this,tt,e.getInstanceOf(z)),X(this,et,(0,a.b)()),X(this,rt,e.getInstanceOf(i.N))}var e,r,n,o,c;return e=t,r=[{key:"addEvents",value:(c=$(regeneratorRuntime.mark((function t(){var e,r,n,o,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=i.length,n=new Array(r),o=0;o<r;o++)n[o]=i[o];return t.abrupt("return",(e=Q(this,tt)).processEvents.apply(e,[this.telemetryClient.name,this.name,this.telemetryClient.sessionData].concat(n)));case 2:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"addErrorEvent",value:(o=$(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Q(this,rt).isConnected(),Q(this,et).reportErrors&&r){t.next=4;break}return t.abrupt("return",{eventsSucceeded:0,eventsFailed:0,eventsNotProcessed:1});case 4:return t.abrupt("return",Q(this,tt).processEvents("flex-ui-sdk-error-v1",this.name,this.telemetryClient.sessionData,e));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],r&&J(e.prototype,r),n&&J(e,n),t}();function ot(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,ut(t,e,"get"))}function ct(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,ut(t,e,"set"),r),r}function ut(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var st=new WeakMap,lt=new WeakMap,ft=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),st.set(this,{writable:!0,value:void 0}),lt.set(this,{writable:!0,value:void 0}),ct(this,st,function(t){return function(e,r){var n=new nt(t);return n.name=r,n.telemetryClient=e,n}}(e)),ct(this,lt,(0,n.j)(e)(o.pI.TelemetryClient))}var e,r,i,a,c;return e=t,r=[{key:"createEventGroup",value:function(t){return at(this,lt).debug("creating event group with name: ",t),at(this,st).call(this,this,t)}},{key:"setSessionData",value:(a=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sessionData=e;case 1:case"end":return t.stop()}}),t,this)})),c=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=a.apply(t,e);function i(t){ot(o,r,n,i,c,"next",t)}function c(t){ot(o,r,n,i,c,"throw",t)}i(void 0)}))},function(t){return c.apply(this,arguments)})}],r&&it(e.prototype,r),i&&it(e,i),t}();var pt=function(t){return function(t){return function(e){var r=new ft(t);return r.name=e,r}}(t)("sdk-v1")},ht=function(t){return pt(t).createEventGroup()}},924:(t,e,r)=>{"use strict";r.d(e,{B:()=>R});r(5301),r(1624),r(1e3),r(1117),r(2047),r(8534),r(6486),r(6706),r(1157),r(9280),r(3524);require("core-js/modules/es.string.split.js");var n=r(2419),o=r(4147),i=r(4957),a=r(5543),c=r(6875),u=r(3722),s=r(3951),l=r(3308);function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function y(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,w(t,e,"get"))}function m(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,w(t,e,"set"),r),r}function w(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var g=new WeakMap,b=new WeakMap,k=new WeakMap,x=new WeakMap,E=new WeakMap,j=new WeakMap,O=new WeakMap,S=new WeakMap,P=new WeakSet,L=new WeakSet,T=new WeakSet,C=new WeakMap,_=new WeakMap,W=new WeakMap,I=new WeakMap,F=new WeakSet,A=new WeakSet,R=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),A.add(this),F.add(this),T.add(this),L.add(this),P.add(this),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),E.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),O.set(this,{writable:!0,value:void 0}),S.set(this,{writable:!0,value:function(){y(r,j)&&y(r,j).destroy()}}),d(this,"subscribeToIncomingCallEvent",(function(t){if(!y(r,j))throw new Error("Voice device is not initialized");y(r,j).on(n.Device.EventName.Incoming,t)})),d(this,"unsubscribeFromIncomingCallEvent",(function(t){if(!y(r,j))throw new Error("Voice device is not initialized");y(r,j).removeListener(n.Device.EventName.Incoming,t)})),C.set(this,{writable:!0,value:function(t){var e;y(r,k).debug("Incoming voice call in VoiceController",t),v(r,L,D).call(r,t),null!==(e=y(r,E))&&void 0!==e&&e.autoAcceptIncomingCalls&&t.accept()}}),_.set(this,{writable:!0,value:function(t){var e=t.status();y(r,k).debug("Voice call status changed, call status",e),e===n.Call.State.Closed&&v(r,T,M).call(r,t)}}),W.set(this,{writable:!0,value:function(t,e){y(r,k).error("Voice device error",t)}}),I.set(this,{writable:!0,value:function(t){y(r,j)||y(r,k).warn("onNewToken in VoiceController, but there is no voiceDevice"),y(r,j).updateToken(t)}}),m(this,g,e.getInstanceOf(u.P)),m(this,b,e.getInstanceOf(i.r)),m(this,k,(0,a.j)(e)(c.q9.Voice)),m(this,x,e),y(this,k).debug("VoiceController constructed")}var e,f,w,R;return e=t,f=[{key:"init",value:(R=p(regeneratorRuntime.mark((function t(e){var n,i,a,c,u,f,p,h,d,w,k,L,T,C,_,W;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(r.bind(r,6726));case 2:if(a=t.sent,c=a.ClientImpl,u=y(this,x).getInstanceOf(c),m(this,E,y(this,b).voiceOptions),u.addListener(l.r.TokenUpdated,y(this,I)),u.addListener(l.r.ClientDestroyed,y(this,S)),!e){t.next=13;break}return m(this,j,e),v(this,P,N).call(this),m(this,O,!0),t.abrupt("return",Promise.resolve(y(this,j)));case 13:return f=(0,s.B)(),h=(p=f||{}).region,d=p.regionNonFlex,w=d||y(this,b).regionNonFlex||h||y(this,b).region,k=v(this,A,K).call(this,w),L=k?".".concat(k):"",T="chunderw-vpc-gll".concat(L,".twilio.com"),C="eventgw-vpc-gll".concat(L,".twilio.com"),_=o.i8,W={allowIncomingWhileBusy:!0,appName:"flex-sdk",appVersion:_,logLevel:null===(n=y(this,b))||void 0===n||null===(i=n.logger)||void 0===i?void 0:i.level,chunderw:T,eventgw:C},t.t0=m,t.t1=this,t.t2=j,t.next=27,v(this,F,q).call(this,y(this,g).token,W);case 27:return t.t3=t.sent,(0,t.t0)(t.t1,t.t2,t.t3),v(this,P,N).call(this),m(this,O,!0),t.abrupt("return",Promise.resolve(y(this,j)));case 32:case"end":return t.stop()}}),t,this)}))),function(t){return R.apply(this,arguments)})},{key:"voiceDevice",get:function(){return y(this,j)}},{key:"isInitialized",get:function(){return y(this,O)}},{key:"isAudioInputDeviceAvailable",value:function(){var t,e;if(!y(this,j))return y(this,k).error("Voice device is not initialized"),!1;y(this,k).debug("Current device",y(this,j)),y(this,k).debug("Available input devices:",null===(t=y(this,j).audio)||void 0===t?void 0:t.availableInputDevices);var r=Array.from((null===(e=y(this,j).audio)||void 0===e?void 0:e.availableInputDevices.keys())||[]);if(!r.length)return y(this,k).error("No audio input device"),!1;y(this,k).debug("Available input device IDs:",r);var n=r.find((function(t){return"default"===t}))||r[0];return y(this,k).debug("Active device ID: ".concat(n)),!0}}],f&&h(e.prototype,f),w&&h(e,w),t}();function N(){y(this,j).on(n.Device.EventName.Incoming,y(this,C)),y(this,j).on(n.Device.EventName.Error,y(this,W))}function D(t){t.on("accept",y(this,_)),t.on("cancel",y(this,_)),t.on("disconnect",y(this,_))}function M(t){t.off("accept",y(this,_)),t.off("cancel",y(this,_)),t.off("disconnect",y(this,_))}function q(t,e){return G.apply(this,arguments)}function G(){return(G=p(regeneratorRuntime.mark((function t(e,r){var o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new n.Device(e,r),t.next=3,o.register();case 3:if(o.state!==n.Device.State.Registered){t.next=6;break}return y(this,k).info("Voice device is already registered"),t.abrupt("return",o);case 6:return t.abrupt("return",new Promise((function(t,e){var r=setTimeout((function(){var t="Voice device registration timed out";y(i,k).error(t),e(new Error(t))}),1e4);o.on(n.Device.EventName.Registered,(function e(a){a.state===n.Device.State.Registered&&(y(i,k).info("Voice device registered successfully"),clearTimeout(r),o.off(n.Device.EventName.Registered,e),t(a))}))})));case 7:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function K(t){var e=(null==t?void 0:t.split("-"))||[];return e.length>1?e[0]:t}},7971:(t,e,r)=>{"use strict";r.d(e,{J:()=>n});var n=function(t){return t.TokenExpired="tokenExpired",t.TokenAboutToExpire="tokenAboutToExpire",t.StateChanged="stateChanged",t.ConnectionError="connectionError",t.Connected="connected",t.Disconnected="disconnected",t.TokenUpdated="tokenUpdated",t}({})},1198:(t,e,r)=>{"use strict";r.d(e,{N:()=>Q});r(5301),r(3114),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534),r(9280);var n=r(6622),o=r.n(n),i=r(4147),a=r(1239),c=r.n(a);const u=require("twilsock");var s=function(t){return t.TokenExpired="tokenExpired",t.TokenAboutToExpire="tokenAboutToExpire",t.StateChanged="stateChanged",t.ConnectionError="connectionError",t.Connected="connected",t.Disconnected="disconnected",t}({}),l=r(7971),f=r(8576),p=r(9051),h=r(6056),d=r(8029),v=r(5543),y=r(6875),m=r(125);r(3064),r(7285),r(9616),r(4391),r(444),r(1076),r(5547);function w(t){var e=Object.prototype.hasOwnProperty.call(t,"reply"),r=e&&Object.prototype.hasOwnProperty.call(t.reply,"status"),n=r&&Object.prototype.hasOwnProperty.call(t.reply.status,"code");return e&&r&&n}var g=r(4396),b=r(6107),k=r(4957),x=r(3951);function E(t,e,r){return new u.TwilsockClient(t,e,r)}function j(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function O(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){j(i,n,o,a,c,"next",t)}function c(t){j(i,n,o,a,c,"throw",t)}a(void 0)}))}}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function P(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function L(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,C(t,e,"get"))}function T(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,C(t,e,"set"),r),r}function C(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var _=new WeakMap,W=new WeakMap,I=new WeakMap,F=new WeakMap,A=new WeakMap,R=new WeakMap,N=new WeakMap,D=new WeakMap,M=new WeakMap,q=new WeakSet,G=new WeakMap,K=new WeakMap,U=new WeakMap,V=new WeakMap,B=new WeakMap,Y=new WeakMap,z=new WeakMap,H=new WeakMap,$=new WeakMap,J=new WeakMap,Q=function(){function t(e){var r,n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),q.add(this),_.set(this,{writable:!0,value:void 0}),W.set(this,{writable:!0,value:void 0}),I.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0}),A.set(this,{writable:!0,value:void 0}),R.set(this,{writable:!0,value:!1}),N.set(this,{writable:!0,value:void 0}),D.set(this,{writable:!0,value:void 0}),M.set(this,{writable:!0,value:void 0}),G.set(this,{writable:!0,value:function(t,e){n.getRawTwilsockClient().on(t,(function(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(t=L(n,N)).emit.apply(t,[e].concat(o))}))}}),K.set(this,{writable:!0,value:function(){L(n,G).call(n,s.TokenExpired,l.J.TokenExpired),L(n,G).call(n,s.TokenAboutToExpire,l.J.TokenAboutToExpire),L(n,G).call(n,s.StateChanged,l.J.StateChanged),L(n,G).call(n,s.Connected,l.J.Connected),L(n,G).call(n,s.Disconnected,l.J.Disconnected),L(n,V).call(n)}}),U.set(this,{writable:!0,value:function(){var t=o().getLogger("twilsock");t.methodFactory=function(t){return function(){var e;return(e=L(n,I))[t].apply(e,arguments)}},t.setLevel("trace")}}),V.set(this,{writable:!0,value:function(){n.getRawTwilsockClient().on(s.ConnectionError,(function(t){var e=t.errorCode,r=t.metadata,o=t.message,i=new f.W(e||p.jK.TwilsockConnectionError,r,o);L(n,N).emit(l.J.ConnectionError,i)}))}}),B.set(this,{writable:!0,value:function(t){return t instanceof f.W&&t.code===p.jK.TwilsockConnectionError}}),Y.set(this,{writable:!0,value:function(t){return w(t)&&429===t.reply.status.code}}),z.set(this,{writable:!0,value:function(t){return w(t)&&t.reply.status.code>=500}}),H.set(this,{writable:!0,value:function(t){return L(n,Y).call(n,t)||L(n,z).call(n,t)||L(n,B).call(n,t)}}),$.set(this,{writable:!0,value:(r=O(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(n,R)){t.next=11;break}if(L(n,I).debug("updateTokenOnce called, but isConnected flag is false"),n.twilsockClient){t.next=4;break}throw new h.A("twilsockClient is undefined");case 4:return t.next=6,n.twilsockClient.updateToken(e);case 6:return t.next=8,n.getTwilsockClientConnected();case 8:L(n,N).emit(l.J.TokenUpdated,e),t.next=17;break;case 11:if(L(n,I).debug("updateTokenOnce called and isConnected flag is:",L(n,R)),n.twilsockClient){t.next=14;break}throw new h.A("TwilsockClient_is_null");case 14:return t.next=16,n.twilsockClient.updateToken(e);case 16:L(n,N).emit(l.J.TokenUpdated,e);case 17:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}),J.set(this,{writable:!0,value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e5;return new Promise((function(e,r){var o;if(n.getRawTwilsockClient().isConnected)return T(n,R,!0),L(n,I).debug("rawTwilsockClient.isConnected in waitUntilConnectedOrRejected"),void e();var i=function(){return L(n,I).debug("successHandler in waitUntilConnectedOrRejected"),o(),e()},a=function(t){return L(n,I).warn("Twilsock connection error, setting isConnected to false",t),T(n,R,!1),o(),r(t)},c=setTimeout((function(){L(n,I).warn("Timed out in waitUntilConnectedOrRejected"),o(),r(new Error("Timed out in waitUntilConnectedOrRejected"))}),t);o=function(){L(n,I).debug("Cleaning up listeners in waitUntilConnectedOrRejected"),n.removeListener(l.J.Connected,i),n.removeListener(l.J.ConnectionError,a),clearTimeout(c)},n.addListener(l.J.Connected,i),n.addListener(l.J.ConnectionError,a)}))}}),T(this,W,E),T(this,_,"flex"),T(this,I,(0,v.j)(e)(y.q9.Twilsock)),L(this,I).debug("Twilsock constructed"),T(this,F,(0,x.B)()),T(this,A,e.getInstanceOf(k.r)),T(this,N,new(c())),T(this,D,(0,b.C6)(e)),T(this,M,(0,b.kG)(e))}var e,r,n,a,u,j,C,Q;return e=t,r=[{key:"connect",value:(Q=O(regeneratorRuntime.mark((function t(e){var r,n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(this,I).debug("Connect called"),!L(this,R)){t.next=3;break}throw new h.A("Twilsock connection already exists");case 3:return r=L(this,F)||{},n=r.region,o=r.regionNonFlex,a={region:(0,g.qq)(o||L(this,A).regionNonFlex||n||L(this,A).region),clientMetadata:{type:"flex-sdk",sdk:"JS",sdkv:i.i8,app:L(this,A).appName,appv:L(this,A).appVersion}},this.twilsockClient=L(this,W).call(this,e,L(this,_),a),L(this,K).call(this),L(this,U).call(this),P(this,q,X).call(this),t.next=11,L(this,J).call(this);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return Q.apply(this,arguments)})},{key:"updateToken",value:(C=O(regeneratorRuntime.mark((function t(e){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,m.X)({functionToRetry:function(){return L(n,$).call(n,e)},retryCondition:L(this,H),initialDelay:500,logger:L(this,I)});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),r={module:"websocket",severity:d.W.Error,source:"update Twilsock token"},L(this,M).call(this,t.t0,r);case 9:case"end":return t.stop()}}),t,this,[[0,5]])}))),function(t){return C.apply(this,arguments)})},{key:"getRawTwilsockClient",value:function(){if(!this.twilsockClient)throw new h.A("Twilsock hasn't been initialized");return this.twilsockClient}},{key:"post",value:(j=O(regeneratorRuntime.mark((function t(e,r,n){var o,i,a,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(this,R)){t.next=4;break}return L(this,I).debug("Attempting to post, but isConnect is false, reconnecting first"),t.next=4,this.getTwilsockClientConnected();case 4:return t.prev=4,t.next=7,this.getRawTwilsockClient().post(e,r,n);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),a=(null===(o=t.t0.body)||void 0===o?void 0:o.code)||p.jK.SDK,c=(null===(i=t.t0.body)||void 0===i?void 0:i.message)||t.t0.message,u={module:"websocket",severity:d.W.Error,source:"TwilsockImpl.ts"},t.abrupt("return",L(this,D).call(this,a,u,c,t.t0));case 16:case"end":return t.stop()}}),t,this,[[4,10]])}))),function(t,e,r){return j.apply(this,arguments)})},{key:"destroy",value:(u=O(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(L(this,I).debug("destroy called"),T(this,R,!1),this.twilsockClient){t.next=5;break}return L(this,I).warn("[TwilsockImpl.destroy] - TwilsockClient_is_null"),t.abrupt("return");case 5:return e=new Promise((function(t){r.twilsockClient&&r.twilsockClient.on(s.Disconnected,t)})),t.next=8,this.twilsockClient.disconnect();case 8:return t.next=10,e;case 10:delete this.twilsockClient,L(this,N).removeAllListeners();case 12:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"addListener",value:function(t,e){return L(this,N).on(t,e),this}},{key:"removeListener",value:function(t,e){return L(this,N).removeListener(t,e),this}},{key:"isConnected",value:function(){return!!L(this,R)&&!!this.twilsockClient&&this.getRawTwilsockClient().isConnected}},{key:"getTwilsockClientConnected",value:(a=O(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P(this,q,X).call(this),t.next=3,L(this,J).call(this);case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}],r&&S(e.prototype,r),n&&S(e,n),t}();function X(){if(L(this,I).debug("connect0 called"),L(this,R))throw new h.A("Twilsock connection already exists");if(!this.twilsockClient)throw new h.A("TwilsockClient_is_null");try{this.twilsockClient.connect(),T(this,R,!0)}catch(t){L(this,I).warn("connection to twilsockClient failed",t)}}},9492:(t,e,r)=>{"use strict";r.d(e,{E:()=>k});r(5301),r(1e3),r(1117),r(1624),r(2047),r(1157),r(8534);var n=r(3998),o=r(4396),i=r(5543),a=r(6875),c=r(3722),u=r(3951),s=r(4957);function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,v(t,e,"get"))}function d(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,v(t,e,"set"),r),r}function v(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var y=new WeakMap,m=new WeakMap,w=new WeakMap,g=new WeakMap,b=new WeakMap,k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),g.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),d(this,m,e.getInstanceOf(c.P)),d(this,w,e.getInstanceOf(s.r)),d(this,y,(0,i.j)(e)(a.q9.TaskRouter))}var e,r,l,v,k;return e=t,r=[{key:"init",value:(k=f(regeneratorRuntime.mark((function t(e,r){var i,a,c,s,l,f,p,v,y,k,x,E,j,O,S=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&d(this,g,e),r&&d(this,b,r),!h(this,g)||!h(this,b)){t.next=4;break}return t.abrupt("return",Promise.resolve());case 4:if(c=(0,u.B)(),l=(s=c||{}).region,f=s.regionNonFlex,p=f||h(this,w).regionNonFlex||l||h(this,w).region,v=(0,o.qq)(p),h(this,g)||((j=(null===(y=h(this,w))||void 0===y||null===(k=y.taskRouterOptions)||void 0===k?void 0:k.workerOptions)||{}).logLevel=(null==j?void 0:j.logLevel)||this.mapToLogLevelString(null===(x=h(this,w))||void 0===x||null===(E=x.logger)||void 0===E?void 0:E.level),void 0!==p&&(j.region=v),d(this,g,new n.Supervisor(h(this,m).token,j))),O=null===(i=h(this,w))||void 0===i||null===(a=i.taskRouterOptions)||void 0===a?void 0:a.workspaceOptions,void 0!==p&&((O={}).region=v),h(this,b)||!e){t.next=14;break}return d(this,b,new n.Workspace(h(this,m).token,O,h(this,g).workspaceSid)),t.abrupt("return",Promise.resolve());case 14:return t.abrupt("return",new Promise((function(t){h(S,g).on("ready",(function(){d(S,b,new n.Workspace(h(S,m).token,O,h(S,g).workspaceSid)),t()}))})));case 15:case"end":return t.stop()}}),t,this)}))),function(t,e){return k.apply(this,arguments)})},{key:"updateToken",value:function(t){if(h(this,y).debug("updateToken called"),h(this,g))try{this.worker.updateToken(t)}catch(t){h(this,y).error("Failed to update token on worker",t)}if(h(this,b))try{this.workspace.updateToken(t)}catch(t){h(this,y).error("Failed to update token on workspace",t)}h(this,y).debug("updateToken completed")}},{key:"createTask",value:(v=f(regeneratorRuntime.mark((function t(e,r,n,o){var i,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.length>4&&void 0!==a[4]?a[4]:{},t.abrupt("return",h(this,g).createTask(e,r,n,o,i));case 2:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return v.apply(this,arguments)})},{key:"worker",get:function(){return h(this,g)}},{key:"workspace",get:function(){return h(this,b)}},{key:"mapToLogLevelString",value:function(t){if("number"==typeof t)switch(t){case 0:return"trace";case 1:return"debug";case 2:return"info";case 3:default:return"warn";case 4:return"error";case 5:return"silent"}else if("string"==typeof t){var e=t.toLowerCase();if(e in{trace:0,debug:1,info:2,warn:3,error:4,silent:5})return e}return"warn"}}],r&&p(e.prototype,r),l&&p(e,l),t}()},872:()=>{},1288:(t,e,r)=>{"use strict";r.d(e,{W:()=>n});var n=function(t){return t[t.TooManyRequests=429]="TooManyRequests",t[t.InternalServerError=500]="InternalServerError",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t}({})},2504:(t,e,r)=>{"use strict";r.d(e,{Nh:()=>c,eC:()=>p,Uq:()=>s,pY:()=>f,$r:()=>u,Ee:()=>l});require("core-js/modules/es.number.is-nan.js");r(5538),r(242),r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534);var n=r(8029),o=r(8576),i=r(9051);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e){if(void 0===t){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(e,", expected a defined value"))}}function u(t,e){if("object"!==a(t)||null===t||Array.isArray(t)){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(e,", expected an object"))}}function s(t,e){if(u(t,e),function(t){try{JSON.stringify(t)}catch(t){return/^TypeError: Converting circular structure to JSON/.test(t)}return!1}(t)){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(e,", expected an object without cycles"))}}function l(t,e){if("string"!=typeof t){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(e,", expected a string"))}}function f(t,e){if(l(t,e),""===t.trim()){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(e,", expected a string which is not empty"))}}function p(t,e){if(!(t in e)){var r={module:"",severity:n.W.Error,source:"assert.ts"};throw new o.W(i.jK.InvalidParams,r,"".concat(t," is not a valid key"))}}},1039:(t,e,r)=>{"use strict";r.d(e,{vv:()=>w,G0:()=>m,hf:()=>y});r(3275),r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534);var n=r(6897),o=r.n(n),i=r(1131),a=r.n(i);const c=require("lodash/mapKeys");var u=r.n(c),s=r(4341),l=r.n(s),f=r(2504);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var h=function t(e,r){var n=[];return e.forEach((function(e){var o;o=Array.isArray(e)?t(e,r):"object"===p(e)?d(e,r):e,n.push(o)})),n},d=function t(e,r){return l()(e,(function(e,n,o){Array.isArray(n)?e["".concat(r(o))]=h(n,r):n instanceof Object&&!(n instanceof Date)?e["".concat(r(o))]=t(n,r):e["".concat(r(o))]=n}),{})},v=function(t,e){return u()(t,(function(t,r){return e(r)}))},y=function(t){return v(t,(function(t){return a()(t)}))},m=function(t){return v(t,(function(t){return o()(t)}))},w=function(t){return(0,f.Uq)(t,"key-value dictionary"),d(t,(function(t){return a()(t)}))}},7044:(t,e,r)=>{"use strict";r.d(e,{F:()=>i});require("core-js/modules/es.regexp.constructor.js");r(3524),r(7285),r(3275),r(1865),r(444),r(1076),r(1e3),r(5547),r(1624),r(2047),r(8534),r(6257),r(6941),r(6486);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){var e=/^\d{4}-\d{1,2}-\d{1,2}/,r=new RegExp("date|expiration","i"),o={};return Object.entries(t).forEach((function(i){var a=n(i,2),c=a[0],u=a[1];(function(t,e){return Object.prototype.hasOwnProperty.call(t,e)})(t,c)&&r.test(c)&&e.test(u)?o[c]=new Date(u):o[c]=u})),o}},4396:(t,e,r)=>{"use strict";r.d(e,{Us:()=>i,_k:()=>o,qq:()=>n,uc:()=>a});r(4182);function n(t){switch(t){case"prod":case"":case void 0:case null:return"us1";case"stage":return"stage-us1";case"dev":return"dev-us1";default:return t}}function o(t){switch(t){case"prod":case"us1":case"":return"";case"dev-us1":return".dev";case"stage-us1":return".stage";default:return".".concat(t)}}function i(t,e){var r=o(t),n="";return e&&(n+=".".concat(e)),r&&(n+="".concat(r)),n}function a(t){return t?t.startsWith("stage-")?".stage":t.startsWith("dev-")?".dev":"":""}},125:(t,e,r)=>{"use strict";r.d(e,{X:()=>a});r(5301),r(1e3),r(1117),r(2047),r(1624),r(8534),r(444),r(1076),r(5547);var n=r(2227);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return c.apply(this,arguments)}function c(){var t;return t=regeneratorRuntime.mark((function t(e){var r,i,a,c,u,s,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.logger,i=0,a=800,c=3e3,u=3,(0,n.qh)(e.initialDelay)&&(a=e.initialDelay),(0,n.qh)(e.maxDelay)&&(c=e.maxDelay),(0,n.qh)(e.maxAttempts)&&(u=e.maxAttempts),a>c&&r.warn("Initial delay cannot be greater than Max delay, hence defaulting to Max delay"),u<1&&(r.warn("The value of max retry attempts has to be greater than 0, hence reset to 1"),u=1),l=regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i>0&&r.debug("Retry attempt: ",i),t.next=4,e.functionToRetry();case 4:return t.t0=t.sent,t.abrupt("return",{v:t.t0});case 8:if(t.prev=8,t.t1=t.catch(0),e.retryCondition(t.t1)){t.next=12;break}return t.abrupt("return",{v:Promise.reject(t.t1)});case 12:if(!(i>=u-1)){t.next=15;break}return s=t.t1,t.abrupt("return","break");case 15:return o=(0,n.M$)(a,c,i+1),r.debug("Retry after(ms): ",o),t.next=19,new Promise((function(t){return setTimeout(t,o)}));case 19:case"end":return t.stop()}}),t,null,[[0,8]])}));case 11:return t.delegateYield(l(),"t0",12);case 12:if("break"!==(f=t.t0)){t.next=15;break}return t.abrupt("break",18);case 15:if("object"!==o(f)){t.next=17;break}return t.abrupt("return",f.v);case 17:if(i++<u-1){t.next=11;break}case 18:return t.abrupt("return",Promise.reject(s));case 19:case"end":return t.stop()}}),t)})),c=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))},c.apply(this,arguments)}},2227:(t,e,r)=>{"use strict";r.d(e,{M$:()=>c,qh:()=>u,Mb:()=>l,AL:()=>f,$Y:()=>s});require("core-js/modules/es.number.is-finite.js");r(5538);var n,o=r(1288),i=r(9051);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e,r){var n=Math.max(t,t*(Math.pow(2,r)-1)/2);return Math.min(Math.max(t,n),e)+function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Math.ceil(Math.random()*t)}()}function u(t){return Number.isFinite(t)&&Number(t)>=0}var s=[o.W.TooManyRequests,o.W.InternalServerError,o.W.BadGateway,o.W.ServiceUnavailable,o.W.GatewayTimeout],l=[i.jK.TooManyRequests,i.jK.InternalServerError,i.jK.BadGateway,i.jK.ServiceUnavailable,i.jK.GatewayTimeout,i.jK.NetworkError],f=(a(n={},o.W.TooManyRequests,i.jK.TooManyRequests),a(n,o.W.InternalServerError,i.jK.InternalServerError),a(n,o.W.BadGateway,i.jK.BadGateway),a(n,o.W.ServiceUnavailable,i.jK.ServiceUnavailable),a(n,o.W.GatewayTimeout,i.jK.GatewayTimeout),n)},2419:t=>{"use strict";t.exports=require("@twilio/voice-sdk")},3114:t=>{"use strict";t.exports=require("core-js/modules/es.array.concat.js")},4011:t=>{"use strict";t.exports=require("core-js/modules/es.array.filter.js")},6706:t=>{"use strict";t.exports=require("core-js/modules/es.array.find.js")},6486:t=>{"use strict";t.exports=require("core-js/modules/es.array.from.js")},3600:t=>{"use strict";t.exports=require("core-js/modules/es.array.includes.js")},1624:t=>{"use strict";t.exports=require("core-js/modules/es.array.iterator.js")},887:t=>{"use strict";t.exports=require("core-js/modules/es.array.join.js")},3133:t=>{"use strict";t.exports=require("core-js/modules/es.array.map.js")},6257:t=>{"use strict";t.exports=require("core-js/modules/es.array.slice.js")},3794:t=>{"use strict";t.exports=require("core-js/modules/es.array.splice.js")},6941:t=>{"use strict";t.exports=require("core-js/modules/es.function.name.js")},2112:t=>{"use strict";t.exports=require("core-js/modules/es.json.to-string-tag.js")},4391:t=>{"use strict";t.exports=require("core-js/modules/es.map.js")},6353:t=>{"use strict";t.exports=require("core-js/modules/es.math.to-string-tag.js")},5538:t=>{"use strict";t.exports=require("core-js/modules/es.number.constructor.js")},1865:t=>{"use strict";t.exports=require("core-js/modules/es.object.entries.js")},3260:t=>{"use strict";t.exports=require("core-js/modules/es.object.freeze.js")},5226:t=>{"use strict";t.exports=require("core-js/modules/es.object.get-own-property-descriptor.js")},9270:t=>{"use strict";t.exports=require("core-js/modules/es.object.get-own-property-descriptors.js")},3064:t=>{"use strict";t.exports=require("core-js/modules/es.object.get-prototype-of.js")},5128:t=>{"use strict";t.exports=require("core-js/modules/es.object.keys.js")},1e3:t=>{"use strict";t.exports=require("core-js/modules/es.object.to-string.js")},1117:t=>{"use strict";t.exports=require("core-js/modules/es.promise.js")},9616:t=>{"use strict";t.exports=require("core-js/modules/es.reflect.construct.js")},1112:t=>{"use strict";t.exports=require("core-js/modules/es.reflect.get.js")},3524:t=>{"use strict";t.exports=require("core-js/modules/es.regexp.exec.js")},7285:t=>{"use strict";t.exports=require("core-js/modules/es.regexp.to-string.js")},6770:t=>{"use strict";t.exports=require("core-js/modules/es.string.includes.js")},2047:t=>{"use strict";t.exports=require("core-js/modules/es.string.iterator.js")},3317:t=>{"use strict";t.exports=require("core-js/modules/es.string.match.js")},9344:t=>{"use strict";t.exports=require("core-js/modules/es.string.replace.js")},4182:t=>{"use strict";t.exports=require("core-js/modules/es.string.starts-with.js")},242:t=>{"use strict";t.exports=require("core-js/modules/es.string.trim.js")},8496:t=>{"use strict";t.exports=require("core-js/modules/es.symbol.async-iterator.js")},1076:t=>{"use strict";t.exports=require("core-js/modules/es.symbol.description.js")},5547:t=>{"use strict";t.exports=require("core-js/modules/es.symbol.iterator.js")},444:t=>{"use strict";t.exports=require("core-js/modules/es.symbol.js")},4802:t=>{"use strict";t.exports=require("core-js/modules/es.symbol.to-string-tag.js")},1157:t=>{"use strict";t.exports=require("core-js/modules/es.weak-map.js")},9280:t=>{"use strict";t.exports=require("core-js/modules/es.weak-set.js")},2857:t=>{"use strict";t.exports=require("core-js/modules/esnext.global-this.js")},3275:t=>{"use strict";t.exports=require("core-js/modules/web.dom-collections.for-each.js")},8534:t=>{"use strict";t.exports=require("core-js/modules/web.dom-collections.iterator.js")},6955:t=>{"use strict";t.exports=require("core-js/modules/web.url.js")},1239:t=>{"use strict";t.exports=require("events")},6897:t=>{"use strict";t.exports=require("lodash/camelCase")},9699:t=>{"use strict";t.exports=require("lodash/isEmpty")},5795:t=>{"use strict";t.exports=require("lodash/isObject")},7026:t=>{"use strict";t.exports=require("lodash/isString")},1831:t=>{"use strict";t.exports=require("lodash/merge")},1131:t=>{"use strict";t.exports=require("lodash/snakeCase")},4341:t=>{"use strict";t.exports=require("lodash/transform")},6622:t=>{"use strict";t.exports=require("loglevel")},5301:t=>{"use strict";t.exports=require("regenerator-runtime/runtime.js")},3998:t=>{"use strict";t.exports=require("twilio-taskrouter")},6754:(t,e,r)=>{
/*!
 * 
 * @twiliointernal/cbm-sdk.js 2.1.3
 * The following license applies to all parts of this software except as
 * documented below.
 * 
 *     Copyright (c) 2017, Twilio, inc.
 *     All rights reserved.
 * 
 *     Redistribution and use in source and binary forms, with or without
 *     modification, are permitted provided that the following conditions are
 *     met:
 * 
 *       1. Redistributions of source code must retain the above copyright
 *          notice, this list of conditions and the following disclaimer.
 * 
 *       2. Redistributions in binary form must reproduce the above copyright
 *          notice, this list of conditions and the following disclaimer in
 *          the documentation and/or other materials provided with the
 *          distribution.
 * 
 *       3. Neither the name of Twilio nor the names of its contributors may
 *          be used to endorse or promote products derived from this software
 *          without specific prior written permission.
 * 
 *     THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 *     "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 *     LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 *     A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 *     HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 *     SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 *     LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 *     DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 *     THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 *     (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 *     OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *     
 * This software includes buffer.js under the following license.
 * 
 *     Copyright (c) 2014 Junction Networks, Inc. <http://www.onsip.com>
 * 
 *     License: The MIT License
 * 
 *     Permission is hereby granted, free of charge, to any person obtaining
 *     a copy of this software and associated documentation files (the
 *     "Software"), to deal in the Software without restriction, including
 *     without limitation the rights to use, copy, modify, merge, publish,
 *     distribute, sublicense, and/or sell copies of the Software, and to
 *     permit persons to whom the Software is furnished to do so, subject to
 *     the following conditions:
 * 
 *     The above copyright notice and this permission notice shall be
 *     included in all copies or substantial portions of the Software.
 * 
 *     THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 *     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 *     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 *     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 *     LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 *     OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 *     WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * 
 * 
 * 
 */
t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=47)}([function(t,e){t.exports=r(1e3)},function(t,e){t.exports=r(1624)},function(t,e){t.exports=r(2047)},function(t,e){t.exports=r(8534)},function(t,e){t.exports=r(444)},function(t,e){t.exports=r(1076)},function(t,e){t.exports=r(5547)},function(t,e){t.exports=r(3064)},function(t,e){t.exports=r(6941)},function(t,e){t.exports=r(3275)},function(t,e){t.exports=r(6257)},function(t,e){t.exports=r(1117)},function(t,e){t.exports=r(8496)},function(t,e){t.exports=r(4802)},function(t,e){t.exports=r(2112)},function(t,e){t.exports=r(6353)},function(t,e,r){(function(t){function n(t,e){for(var r=0,n=t.length-1;n>=0;n--){var o=t[n];"."===o?t.splice(n,1):".."===o?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function o(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}r(44),r(27),r(10),r(23),r(17),r(0),e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return(r?"/":"")+(e=n(o(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),a="/"===i(t,-1);return(t=n(o(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var o=n(t.split("/")),i=n(r.split("/")),a=Math.min(o.length,i.length),c=a,u=0;u<a;u++)if(o[u]!==i[u]){c=u;break}var s=[];for(u=c;u<o.length;u++)s.push("..");return(s=s.concat(i.slice(c))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,o=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,n=-1,o=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!o){r=e+1;break}}else-1===n&&(o=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,o=!0,i=0,a=t.length-1;a>=0;--a){var c=t.charCodeAt(a);if(47!==c)-1===n&&(o=!1,n=a+1),46===c?-1===e?e=a:1!==i&&(i=1):-1!==e&&(i=-1);else if(!o){r=a+1;break}}return-1===e||-1===n||0===i||1===i&&e===n-1&&e===r+1?"":t.slice(e,n)};var i=function(t,e,r){return t.substr(e,r)}}).call(this,r(43))},function(t,e){t.exports=r(4011)},function(t,e){t.exports=r(5226)},function(t,e){t.exports=r(7026)},function(t,e){t.exports=r(5128)},function(t,e){t.exports=r(9270)},function(t,e){t.exports=r(9699)},function(t,e){t.exports=r(3114)},function(t,e){t.exports=r(6706)},function(t,e){t.exports=r(1157)},function(t,e){t.exports=r(9616)},function(t,e){t.exports=r(887)},function(t,e){t.exports=r(3133)},function(t,e){t.exports=r(1239)},function(t,e){t.exports=r(6622)},function(t,e){t.exports=r(5795)},function(t){t.exports=JSON.parse('{"a":"2.1.3"}')},function(t,e){t.exports=r(6897)},function(t,e){t.exports=r(4341)},function(t,e){t.exports=r(1131)},function(t,e){t.exports=r(3998)},function(t,e){t.exports=r(3260)},function(t,e){t.exports=r(7285)},function(t,e){t.exports=r(4391)},function(t,e){t.exports=r(3524)},function(t,e){t.exports=r(3317)},function(t,e){t.exports=r(9344)},function(t,e,r){r(23);var n,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{o="function"==typeof clearTimeout?clearTimeout:c}catch(t){o=c}}();var s,l=[],f=!1,p=-1;function h(){f&&s&&(f=!1,s.length?l=s.concat(l):p=-1,l.length&&d())}function d(){if(!f){var t=u(h);f=!0;for(var e=l.length;e;){for(s=l,l=[];++p<e;)s&&s[p].run();p=-1,e=l.length}s=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new v(t,e)),1!==l.length||f||u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){t.exports=r(3794)},function(t,e){t.exports=r(2857)},function(t,e){t.exports=r(1112)},function(t,e,r){"use strict";r.r(e),r.d(e,"CbmSdk",(function(){return ko})),r.d(e,"Logger",(function(){return S})),r.d(e,"CbmParticipant",(function(){return Kt})),r.d(e,"RoutingProperties",(function(){return Tt})),r.d(e,"Configuration",(function(){return D})),r.d(e,"ParticipantType",(function(){return Nt})),r.d(e,"ChannelStatus",(function(){return yo})),r.d(e,"MediaChannelType",(function(){return Gt})),r.d(e,"ParticipantLevel",(function(){return mo})),r.d(e,"LogLevel",(function(){return k})),r.d(e,"ParticipantEventHandler",(function(){return Co})),r(1),r(0),r(2),r(25),r(3),r(7),r(26),r(4),r(5),r(6);var n=r(19),o=r.n(n),i=r(29),a=r(30),c=r.n(a);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,d(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,t)})(t)}function f(t,e,r){return(f=p()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&h(o,r.prototype),o}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r(37),r(8),r(38),r(39);var v,y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(a,t);var e,r,n,o,i=(e=a,r=p(),function(){var t,n=d(e);if(r){var o=d(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).errorData=t,r.name=t.name,r.message=null!=e?e:t.message,r}return n=a,(o=[{key:"clone",value:function(t){return new a(this.errorData,t)}}])&&s(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),a}(l(Error));!function(t){t.EMAIL="email",t.SMS="sms",t.WHATSAPP="whatsapp"}(v||(v={})),Object.freeze({canceled:"canceled",complete:"complete",failed:"failed",initiated:"initiated"}),Object.freeze({activitySid:"WorkerActivitySid"}),Object.freeze({rejectPendingReservations:"RejectPendingReservations"}),Object.freeze({accept:"CallAccept",record:"CallRecord",statusCallbackUrl:"CallStatusCallbackUrl",timeout:"CallTimeout",to:"CallTo"}),Object.freeze({to:"DequeueTo",from:"DequeueFrom",postWorkActivitySid:"DequeuePostWorkActivitySid",record:"DequeueRecord",timeout:"DequeueTimeout",statusCallbackUrl:"DequeueStatusCallbackUrl",statusCallbackEvents:"DequeueStatusCallbackEvents"}),Object.freeze({accept:"RedirectAccept"}),Object.freeze({accepted:0,rejected:1,timeout:2,canceled:3,rescinded:4,completed:5,wrapup:6}),Object.freeze({"task.updated":"updated","task.canceled":"canceled","task.completed":"completed","task.wrapup":"wrapup"}),Object.freeze({"reservation.completed":"completed","reservation.rejected":"rejected","reservation.timeout":"timeout","reservation.canceled":"canceled","reservation.rescinded":"rescinded","reservation.accepted":"accepted","reservation.wrapup":"wrapup"}),Object.freeze({taskTransfer:"task_transfer",activeOutgoingTaskTransfer:"active_outgoing_task_transfer"}),Object.freeze({"transfer-attempt-failed":"attemptFailed","transfer-completed":"completed","transfer-failed":"failed","transfer-initiated":"transferInitiated","transfer-canceled":"canceled"}),Object.freeze({"task.transfer-attempt-failed":"transfer-attempt-failed","task.transfer-completed":"transfer-completed","task.transfer-failed":"transfer-failed","task.transfer-initiated":"transfer-initiated","task.transfer-canceled":"transfer-canceled"}),Object.freeze({"participant.added":"participantAdded","participant.add.failed":"participantAddFailed","participant.removed":"participantRemoved","participant.remove.failed":"participantRemoveFailed","participant.modified":"participantModified","participant.modify.failed":"participantModifyFailed"});var m=[{name:"INVALID_ARGUMENT",message:"One or more arguments passed were invalid."},{name:"INVALID_TOKEN",message:"The token is invalid or malformed."},{name:"TOKEN_EXPIRED",message:"CbmSdkClient's active token has expired."},{name:"GATEWAY_CONNECTION_FAILED",message:"Could not connect to Twilio's servers."},{name:"GATEWAY_DISCONNECTED",message:"Connection to Twilio's servers was lost."},{name:"INVALID_GATEWAY_MESSAGE",message:"The JSON message received was malformed."},{name:"TASKROUTER_ERROR",message:"TaskRouter failed to complete the request."}].reduce((function(t,e){return t[e.name]=new y(e),t}),{});function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function g(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,b(t,e,"get"))}function b(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var k,x=m,E=["trace","debug","info","warn","error","silent"];!function(t){t.Trace="trace",t.Debug="debug",t.Info="info",t.Warn="warn",t.Error="error",t.Silent="silent"}(k||(k={}));var j,O=new WeakMap,S=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}(this,O,{writable:!0,value:void 0}),!e)throw x.INVALID_ARGUMENT.clone("Error instantiating Logger. <string>moduleName is a required parameter.");(function(t,e,r){(function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}})(t,b(t,e,"set"),r)})(this,O,c.a.getLogger(e)),r&&this.setLevel(r)}var e,r;return e=t,(r=[{key:"trace",value:function(){var t;(t=g(this,O)).trace.apply(t,arguments)}},{key:"debug",value:function(){var t;(t=g(this,O)).debug.apply(t,arguments)}},{key:"info",value:function(){var t;(t=g(this,O)).info.apply(t,arguments)}},{key:"warn",value:function(){var t;(t=g(this,O)).warn.apply(t,arguments)}},{key:"error",value:function(){var t;(t=g(this,O)).error.apply(t,arguments)}},{key:"setLevel",value:function(t){if(-1===E.indexOf(t))throw x.INVALID_ARGUMENT.clone("Error setting Logger level. <string>level must be one of ['trace', 'debug', 'info', 'warn', 'error', 'silent']");g(this,O).setLevel(t,!1),g(this,O).setDefaultLevel(t)}},{key:"getLogger",value:function(){return g(this,O)}},{key:"getLevel",value:function(){return E[g(this,O).getLevel()]}}])&&w(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),P=(r(20),r(17),r(18),r(21),r(27),r(40),r(41),r(9),r(42),r(16)),L=r.n(P);function T(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _=m,W=(C(j={},"createInteraction",{path:L.a.join("v1/Interactions")}),C(j,"interactionInstance",{path:L.a.join("v1","Interactions","%s")}),C(j,"interactionChannelInviteAccept",{path:L.a.join("v1","Interactions","%s","Channels","%s","Invites","%s")}),C(j,"interactionChannelInviteDecline",{path:L.a.join("v1","Interactions","%s","Channels","%s","Invites","%s")}),C(j,"interactionGetChannels",{path:L.a.join("v1","Interactions","%s","Channels")}),C(j,"createInteractionChannel",{path:L.a.join("v1","Interactions","%s","Channels")}),C(j,"interactionChannel",{path:L.a.join("v1","Interactions","%s","Channels","%s")}),C(j,"interactionGetChannelParticipants",{path:L.a.join("v1","Interactions","%s","Channels","%s","Participants")}),C(j,"interactionAddParticipant",{path:L.a.join("v1","Interactions","%s","Channels","%s","Participants")}),C(j,"interactionModifyParticipant",{path:L.a.join("v1","Interactions","%s","Channels","%s","Participants","%s")}),C(j,"leaveChannel",{path:L.a.join("v1","Interactions","%s","Channels","%s")}),C(j,"pauseChannel",{path:L.a.join("v1","Interactions","%s","Channels","%s")}),C(j,"resumeChannel",{path:L.a.join("v1","Interactions","%s","Channels","%s")}),C(j,"pausedChannels",{path:L.a.join("v1/Channels")}),C(j,"transferChannel",{path:L.a.join("v1","Instances","%s","Interactions","%s","Channels","%s","Transfers")}),j);function I(t){if(!W[t])throw _.INVALID_ARGUMENT.clone('Invalid route fetched <string>route "'.concat(t,'" does not exist.'));for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(r.length){var o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},W[t]);if(r.length!==(o.path.match(/%s/g)||[]).length)throw _.INVALID_ARGUMENT.clone("Invalid number of positional arguments supplied for route ".concat(t));return r.forEach((function(t){o.path=o.path.replace(/%s/,t)})),o}return W[t]}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}var R,N=new WeakMap,D=function(){function t(e,r){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}(this,N,{writable:!0,value:void 0}),!o()(e)||!e)throw new TypeError("Failed to initialize Configuration. <string>token is a required parameter.");if(this.token=e,this.logIdentifier=new Date,this.logLevel=null!==(n=null==r?void 0:r.logLevel)&&void 0!==n?n:k.Warn,function(t,e,r){(function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}})(t,A(t,e,"set"),r)}(this,N,new S("Configuration-".concat(this.logIdentifier),this.logLevel)),null!=r&&r.ebServer&&(this.ebServer=r.ebServer),null!=r&&r.wsServer&&(this.wsServer=r.wsServer),null!=r&&r.ebServer||null!=r&&r.wsServer)(this,i=N,function(t,e){return e.get?e.get.call(t):e.value}(this,A(this,i,"get"))).warn('"ebServer" and "wsServer" parameter will be removed in next major version. You may start using "region" and "edge".');else{var i,a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";return t&&(r+=".".concat(t)),e&&"prod"!==e&&(r+=".".concat(e)),r}(null==r?void 0:r.edge,null==r?void 0:r.region);this.ebServer="https://event-bridge".concat(a,".twilio.com/v1/wschannels"),this.wsServer="wss://event-bridge".concat(a,".twilio.com/v1/wschannels")}}var e,r;return e=t,(r=[{key:"updateToken",value:function(t){if(!o()(t)||!t)throw new TypeError("To update the Twilio token, a new Twilio token must be passed in. <string>newToken is a required parameter.");this.token=t}},{key:"getLogIdentifier",value:function(){return this.logIdentifier}}])&&F(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),M=(r(11),r(45),r(23),r(12),r(13),r(14),r(15),r(10),r(31)),q=r.n(M),G=r(32);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach((function(e){B(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function B(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==K(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function z(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function H(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){z(i,n,o,a,c,"next",t)}function c(t){z(i,n,o,a,c,"throw",t)}a(void 0)}))}}!function(t){t.Get="GET",t.Post="POST",t.Put="PUT"}(R||(R={}));var $,J={"Content-Type":"application/json",clientVersion:G.a,apiVersion:"v2"};function Q(t,e){return X.apply(this,arguments)}function X(){return(X=H(Y().mark((function t(e,r){var n,o,i,a;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=V({},r),void 0!==globalThis.AbortController&&(i=new globalThis.AbortController,n=V(V({},n),{},{signal:i.signal}),o=setTimeout((function(){return i.abort()}),5e3)),t.next=4,fetch(e,n);case 4:return a=t.sent,void 0!==o&&clearTimeout(o),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return tt.apply(this,arguments)}function tt(){return(tt=H(Y().mark((function t(e){var r,n,o,i,a,c,u,s;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.method,n=e.server,o=e.url,i=e.params,a=e.token,$){t.next=3;break}throw new Error("Failed to make ".concat(r," request. Make sure 'configureRequest' is invoked prior to making a request ."));case 3:if(o){t.next=5;break}throw new Error("Failed to make ".concat(r," request. <string>url is a required parameter."));case 5:return c=JSON.stringify({url:o,params:i,method:r,token:a}),t.next=8,Q(n,{body:c,method:R.Post,headers:J});case 8:if((u=t.sent).ok){t.next=11;break}throw new Error("".concat(r," request failed: ").concat(u.statusText));case 11:return t.next=13,u.json();case 13:return s=t.sent,t.abrupt("return",s.payload);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var et,rt=function(){var t=H(Y().mark((function t(e){var r,n=arguments;return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},t.abrupt("return",Z({url:e,params:r,method:R.Get,server:$.ebServer,token:$.token}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=H(Y().mark((function t(e,r){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($){t.next=2;break}throw new Error("Failed to make POST request. Make sure `configureRequest` is invoked prior to `post` .");case 2:if(q()(r)){t.next=4;break}throw new Error("Failed to make POST request. <object>params is a required parameter.");case 4:return t.abrupt("return",Z({url:e,params:r,method:R.Post,server:$.ebServer,token:$.token}));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),ot=r(22),it=r.n(ot);function at(t){if(!t)throw new Error("No task specified for getting interaction sid");if(it()(t.attributes))throw new Error("Task's attributes are not set");var e=t.attributes.flexInteractionSid;return e||(e="KD".concat(t.sid.slice(2))),e}function ct(t,e,r){console.debug("Waiting for event: ".concat(e));var n=new Promise((function(t,n){setTimeout((function(){n(new Error("Event not received: ".concat(e)))}),r||et)}));return Promise.race([t,n])}function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function st(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */st=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ut(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function lt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ft(t){return pt.apply(this,arguments)}function pt(){return(pt=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){lt(i,n,o,a,c,"next",t)}function c(t){lt(i,n,o,a,c,"throw",t)}a(void 0)}))}}(st().mark((function t(e){var r,n,o,i,a,c;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.task){t.next=2;break}throw new Error("Failed to complete Reservation. Task is missing from Reservation.");case 2:if(r=new Promise((function(t){e.once("completed",t)})),!(n=e.task.attributes)||!n.flexInteractionChannelSid){t.next=14;break}return o=at(e.task),i=n.flexInteractionChannelSid,a=I("interactionChannel",o,i).path,c={status:"closed",routing:{status:"closed"}},t.next=12,nt(a,c);case 12:t.next=16;break;case 14:return t.next=16,e.complete();case 16:return t.abrupt("return",ct(r,"Reservation.completed"));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */dt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ht(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function vt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function yt(t){return mt.apply(this,arguments)}function mt(){return(mt=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){vt(i,n,o,a,c,"next",t)}function c(t){vt(i,n,o,a,c,"throw",t)}a(void 0)}))}}(dt().mark((function t(e){var r,n,o,i,a,c,u;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Promise((function(t,r){e.once("accepted",t),e.task.once("participantAddFailed",(function(t,n){var o=n.error_data&&n.error_data.error_message;r(new y(n,"Failed to add Participant to Task sid=".concat(e.task.sid,", Participant sid=").concat(n.participant_sid,". Reason: ").concat(o)))}))})),!(n=e.task.attributes)||!n.flexInteractionChannelSid){t.next=14;break}if(n.flexChannelInviteSid){t.next=5;break}throw new Error("flexChannelInviteSid is missing in CBM task attributes");case 5:return o=at(e.task),i=n.flexInteractionChannelSid,a=n.flexChannelInviteSid,c=I("interactionChannelInviteAccept",o,i,a).path,u={action:"accept",routing:{type:"taskrouter",reservation:{sid:e.sid}}},t.next=12,nt(c,u);case 12:t.next=16;break;case 14:return t.next=16,e.accept();case 16:return t.abrupt("return",ct(r,"Reservation.accepted"));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(t){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */gt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==wt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function bt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function kt(t){return xt.apply(this,arguments)}function xt(){return(xt=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){bt(i,n,o,a,c,"next",t)}function c(t){bt(i,n,o,a,c,"throw",t)}a(void 0)}))}}(gt().mark((function t(e){var r,n,o,i,a,c,u;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Promise((function(t){e.once("rejected",t)})),!(n=e.task.attributes)||!n.flexInteractionChannelSid){t.next=14;break}if(n.flexChannelInviteSid){t.next=5;break}throw new Error("flexChannelInviteSid is missing in CBM task attributes");case 5:return o=at(e.task),i=n.flexInteractionChannelSid,a=n.flexChannelInviteSid,c=I("interactionChannelInviteDecline",o,i,a).path,u={action:"decline",routing:{type:"taskrouter",reservation:{sid:e.sid}}},t.next=12,nt(c,u);case 12:t.next=16;break;case 14:return t.next=16,e.reject();case 16:return t.abrupt("return",ct(r,"Reservation.rejected"));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Et(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ot(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function St(t){return Pt.apply(this,arguments)}function Pt(){return(Pt=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ot(i,n,o,a,c,"next",t)}function c(t){Ot(i,n,o,a,c,"throw",t)}a(void 0)}))}}(jt().mark((function t(e){var r,n,o,i,a,c;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Promise((function(t){e.once("wrapup",t)})),!(n=e.task.attributes)||!n.flexInteractionChannelSid){t.next=11;break}return o=at(e.task),i=n.flexInteractionChannelSid,a=I("interactionChannel",o,i).path,c={status:"closed",routing:{status:"wrapup"}},t.next=9,nt(a,c);case 9:t.next=13;break;case 11:return t.next=13,e.wrap();case 13:return t.abrupt("return",ct(r,"Reservation.wrapup"));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(28);var Tt=function(t,e,r){return e&&Lt(t.prototype,e),r&&Lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.taskSid=e.task_sid,this.workerSid=e.worker_sid,this.reservationSid=e.reservation_sid})),Ct=r(33),_t=r.n(Ct),Wt=r(34),It=r.n(Wt),Ft=r(35),At=r.n(Ft);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Nt,Dt=function t(e,r){return It()(e,(function(e,n,o){Array.isArray(n)?e["".concat(r(o))]=function t(e,r){var n=[];return e.forEach((function(e){var o;o=Array.isArray(e)?t(e,r):"object"===Rt(e)?Dt(e,r):e,n.push(o)})),n}(n,r):n instanceof Object&&!(n instanceof Date)?e["".concat(r(o))]=t(n,r):e["".concat(r(o))]=n}),{})},Mt=function(t){return Dt(t,(function(t){return At()(t)}))};function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t.Agent="agent",t.Customer="customer",t.Supervisor="supervisor",t.External="external",t.Unknown="unknown"}(Nt||(Nt={}));var Gt,Kt=function(t,e,r){return e&&qt(t.prototype,e),r&&qt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.participantSid=e.participant_sid,this.channelSid=e.channel_sid,this.interactionSid=e.interaction_sid,this.type=e.type,this.channelType=e.channel_type,null!==e.routing_properties&&(this.routingProperties=new Tt(e.routing_properties)),null!==e.media_properties&&(this.mediaProperties=(r=e.media_properties,Dt(r,(function(t){return _t()(t)}))))}));function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Vt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Ut(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(r),!0).forEach((function(e){zt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $t(t,e){return Jt.apply(this,arguments)}function Jt(){return(Jt=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Vt().mark((function t(e,r){var n,o,i,a,c,u=arguments;return Vt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>2&&void 0!==u[2]?u[2]:{},r){t.next=3;break}throw new TypeError("Failed to get Participants in a channel in Task sid=".concat(e.sid,". Missing a channel sid."));case 3:if(!it()(e.attributes)){t.next=5;break}throw new TypeError("Failed to get Participants in a channel in Task sid=".concat(e.sid,". Missing attributes."));case 5:return o=at(e),i=I("interactionGetChannelParticipants",o,r).path,a=Yt({},n),t.next=10,rt(i,a);case 10:if(!(c=t.sent).participants){t.next=13;break}return t.abrupt("return",c.participants.map((function(t){return new Kt(Yt(Yt({},t),{},{participant_sid:t.sid,channel_type:c.channel_type}))})));case 13:throw new TypeError("Failed to get Participants in a channel in Task sid=".concat(e.sid,". ")+"Response does not contain participants object.");case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Qt(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(r),!0).forEach((function(e){ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ee(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function re(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ne(t){return oe.apply(this,arguments)}function oe(){return(oe=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){re(i,n,o,a,c,"next",t)}function c(t){re(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Xt().mark((function t(e){var r,n,o,i;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!it()(e.attributes)){t.next=2;break}throw new Error("Task attributes missing - getChannels expects the task to have attributes");case 2:return r=at(e),n=I("interactionGetChannels",r).path,t.next=6,rt(n);case 6:return o=t.sent,i=[],o.channels&&o.channels.forEach((function(t){i.push(te(te({},t),{},{interactionSid:t.interaction_sid,mediaSid:t.media_sid}))})),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ie(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ce(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ue(t){return se.apply(this,arguments)}function se(){return(se=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ce(i,n,o,a,c,"next",t)}function c(t){ce(i,n,o,a,c,"throw",t)}a(void 0)}))}}(ae().mark((function t(e){var r,n,o,i,a,c,u;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:if(r=t.sent,n=r.find((function(t){return"voice"===t.type}))){t.next=6;break}throw new TypeError("Failed to close the conference in a channel in Task sid=".concat(e.sid,". ")+"The task is expected to have a voice channel.");case 6:return o=at(e),i=I("interactionChannel",o,n.sid).path,a={status:"closed"},u=new Promise((function(t){e.once("wrapup",(function(){t(c)}))})),t.next=12,nt(i,a);case 12:return c=t.sent,t.abrupt("return",ct(u,"Task.wrapup"));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==le(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function pe(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function he(t,e,r){return de.apply(this,arguments)}function de(){return(de=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pe(i,n,o,a,c,"next",t)}function c(t){pe(i,n,o,a,c,"throw",t)}a(void 0)}))}}(fe().mark((function t(e,r,n){var o,i,a,c,u;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new TypeError("Error calling method setEndConferenceOnExit(). <string>participantSid is a required parameter.");case 2:if(void 0!==e.attributes){t.next=4;break}throw new Error("Task's attributes are not set");case 4:return t.next=6,ne(e);case 6:return o=t.sent,i=o.find((function(t){return"voice"===t.type})).sid,a=at(e),c=I("interactionModifyParticipant",a,i,r).path,u={media_properties:{end_conference_on_exit:n}},t.abrupt("return",nt(c,u));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ye=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==ve(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function me(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function we(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){me(i,n,o,a,c,"next",t)}function c(t){me(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ge(t,e,r,n){return be.apply(this,arguments)}function be(){return(be=we(ye().mark((function t(e,r,n,o){var i,a,c,u,s;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}throw new TypeError("Error calling method ".concat(o,"(). <string>participantSid is a required parameter."));case 2:if(void 0!==e.attributes){t.next=4;break}throw new Error("Task's attributes are not set");case 4:return t.next=6,ne(e);case 6:return i=t.sent,a=i.find((function(t){return"voice"===t.type})).sid,c=at(e),u=I("interactionModifyParticipant",c,a,r).path,s={media_properties:n},t.abrupt("return",nt(u,s));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ke(t,e,r,n){return xe.apply(this,arguments)}function xe(){return(xe=we(ye().mark((function t(e,r,n,o){var i,a;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Promise((function(t,r){e.on("participantModified",(function r(n,o){var a;o.participant_sid===(null===(a=i)||void 0===a?void 0:a.sid)&&(e.removeListener("participantModified",r),t(new Kt(o)))})),e.on("participantModifyFailed",(function t(n,o){var a;o.participant_sid===(null===(a=i)||void 0===a?void 0:a.sid)&&(e.removeListener("participantModifyFailed",t),r(new y(o,"Failed to modify Participant to Task sid=".concat(e.sid))))}))})),t.next=3,ge(e,r,n,o);case 3:return i=t.sent,t.abrupt("return",ct(a,"Task.participantModified"));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ee(t,e){return ke(t,e,{hold:!0},"holdParticipant")}function je(t,e){return ke(t,e,{hold:!1},"unHoldParticipant")}function Oe(t){return t.participant_sid}function Se(t){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(r),!0).forEach((function(e){Te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ce(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ce=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Se(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _e(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function We(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_e(i,n,o,a,c,"next",t)}function c(t){_e(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ie(t,e){return Fe.apply(this,arguments)}function Fe(){return(Fe=We(Ce().mark((function t(e,r){var n,o,i,a,c;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new Promise((function(t,r){e.on("participantAdded",(function r(o,i){var a;Oe(i)===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantAdded",r),t(new Kt(i)))})),e.on("participantAddFailed",(function t(o,i){var a;if(Oe(i)===(null===(a=n)||void 0===a?void 0:a.sid)){e.removeListener("participantAddFailed",t);var c=i.error_data&&i.error_data.error_message;r(new y(i,"Failed to add Participant to Task sid=".concat(e.sid,". Reason: ").concat(c)))}}))})),i=at(e),a=e.attributes.flexInteractionChannelSid,c=I("interactionAddParticipant",i,a).path,t.next=6,nt(c,r);case 6:return n=t.sent,t.abrupt("return",ct(o,"Task.participantAdded"));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ae(t,e){return Re.apply(this,arguments)}function Re(){return(Re=We(Ce().mark((function t(e,r){var n,o;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.attributes)&&"email"===n.channelType){t.next=3;break}throw new Error("Wrong channel type - addParticipant expects the task to have an email channel");case 3:if(n&&n.flexInteractionChannelSid){t.next=5;break}throw new TypeError("Failed to add Participant to Task sid=".concat(e.sid,". Missing flexInteractionChannelSid."));case 5:return o={type:Nt.Customer,media_properties:{level:r.level,name:r.toName,address:r.address,type:Gt.Email}},t.abrupt("return",Ie(e,o));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ne(t,e){return De.apply(this,arguments)}function De(){return(De=We(Ce().mark((function t(e,r){var n,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o()(r.from)&&r.from){t.next=2;break}throw new TypeError("Error calling method addSmsParticipant(). <string>from is a required parameter.");case 2:if(o()(r.to)&&r.to){t.next=4;break}throw new TypeError("Error calling method addSmsParticipant(). <string>to is a required parameter.");case 4:if((n=e.attributes)&&"sms"===n.channelType){t.next=7;break}throw new Error("Wrong channel type - addSmsParticipant expects the task to have a sms channel");case 7:if(n&&n.flexInteractionChannelSid){t.next=9;break}throw new Error("Failed to add Participant to Task sid=".concat(e.sid,". Missing flexInteractionChannelSid."));case 9:return i={type:Nt.Customer,media_properties:{address:r.to,proxy_address:r.from,type:Gt.Sms}},t.abrupt("return",Ie(e,i));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Me(t,e){return qe.apply(this,arguments)}function qe(){return(qe=We(Ce().mark((function t(e,r){var n,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o()(r.from)&&r.from){t.next=2;break}throw new TypeError("Error calling method addWhatsAppParticipant(). <string>from is a required parameter.");case 2:if(o()(r.to)&&r.to){t.next=4;break}throw new TypeError("Error calling method addWhatsAppParticipant(). <string>to is a required parameter.");case 4:if((n=e.attributes)&&"whatsapp"===n.channelType){t.next=7;break}throw new Error("Wrong channel type - addWhatsAppParticipant expects the task to have a whatsapp channel");case 7:if(n&&n.flexInteractionChannelSid){t.next=9;break}throw new Error("Failed to addWhatsAppParticipant to Task sid=".concat(e.sid,". Missing flexInteractionChannelSid."));case 9:return i={type:Nt.Customer,media_properties:{address:r.to,proxy_address:r.from,type:Gt.WhatsApp}},t.abrupt("return",Ie(e,i));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ge(t,e){return Ke.apply(this,arguments)}function Ke(){return(Ke=We(Ce().mark((function t(e,r){var n,i;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o()(r.identity)&&r.identity){t.next=2;break}throw new TypeError("Error calling method addWebChatParticipant(). <string>participantIdentity is a required parameter.");case 2:if((n=e.attributes)&&"web"===n.channelType){t.next=5;break}throw new Error("Wrong channel type - addWebChatParticipant expects the task to have a web channel");case 5:if(n&&n.flexInteractionChannelSid){t.next=7;break}throw new Error("Failed to addWebChatParticipant to Task sid=".concat(e.sid,". Missing flexInteractionChannelSid."));case 7:return i={type:Nt.Customer,media_properties:{identity:r.identity,type:Gt.Web}},t.abrupt("return",Ie(e,i));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ue(t,e,r,n){return Ve.apply(this,arguments)}function Ve(){return(Ve=We(Ce().mark((function t(e,r,n,o){var i,a,c,u;return Ce().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={type:n,media_properties:Le({},o&&{identity:o})},a=I("interactionAddParticipant",e,r).path,t.next=4,nt(a,i);case 4:return c=t.sent,u={sid:c.sid,type:c.type,channelSid:c.channel_sid,mediaProperties:c.media_properties||null},t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Ye=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Be(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ze(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function He(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(r),!0).forEach((function(e){$e(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Je(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Qe(t,e){return Xe.apply(this,arguments)}function Xe(){return(Xe=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Je(i,n,o,a,c,"next",t)}function c(t){Je(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Ye().mark((function t(e,r){var n,o,i,a,c,u,s,l,f,p,h;return Ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!it()(e.attributes)){t.next=2;break}throw new TypeError("Failed to addVoiceParticipant in Task sid=".concat(e.sid,". Missing attributes."));case 2:return o=new Promise((function(t,r){e.on("participantAdded",(function r(o,i){var a;i.participant_sid===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantAdded",r),t(new Kt(i)))})),e.on("participantAddFailed",(function t(o,i){var a;i.participant_sid===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantAddFailed",t),r(new y(i,"Failed to add Participant from Task sid=".concat(e.sid,"."))))})),e.on("participantRemoved",(function r(o,i){var a;i.participant_sid===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoved",r),t(new Kt(i)))})),e.on("participantRemoveFailed",(function t(o,i){var a;i.participant_sid===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoved",t),r(new y(i,"Failed to remove Participant from Task sid=".concat(e.sid,"."))))}))})),i=at(e),t.next=6,ne(e);case 6:return a=t.sent,c=a.find((function(t){return"voice"===t.type})).sid,u=I("interactionAddParticipant",i,c).path,s={type:r.type,media_properties:He({coordinates:{from:r.from,to:r.to}},r.mediaProperties&&He({},Mt(r.mediaProperties)))},r.type===Nt.Agent&&r.routingProperties&&(l=r.routingProperties,f=l.taskSid,p=l.workerSid,h=l.reservationSid,s.routing_properties={task_sid:f,worker_sid:p,reservation_sid:h}),t.next=13,nt(u,s);case 13:return n=t.sent,t.abrupt("return",{pendingParticipantResponse:n,waitForParticipantToSettle:ct(o,"Task.participantAdded",3e5)});case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */tr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Ze(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function er(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function rr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?er(Object(r),!0).forEach((function(e){nr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function nr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function or(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ir(t,e){return ar.apply(this,arguments)}function ar(){return(ar=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){or(i,n,o,a,c,"next",t)}function c(t){or(i,n,o,a,c,"throw",t)}a(void 0)}))}}(tr().mark((function t(e,r){var n,o,i,a,c,u,s,l,f=arguments;return tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>2&&void 0!==f[2]?f[2]:{},null===(n=it()(e.attributes))||void 0===n||!n.flexInteractionChannelSid){t.next=3;break}throw new Error("Failed to remove a participant from the Task sid=".concat(e.sid,". Missing flexInteractionChannelSid."));case 3:return a=new Promise((function(t,r){e.on("participantRemoved",(function r(n,o){var a;Oe(o)===(null===(a=i)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoved",r),t(new Kt(o)))})),e.on("participantRemoveFailed",(function t(n,o){var a;Oe(o)===(null===(a=i)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoveFailed",t),r(new y(o,"Failed to remove Participant from Task sid=".concat(e.sid,". Reason: ").concat(o.reason))))}))})),c=e.attributes.flexInteractionChannelSid,u=at(e),s=I("interactionModifyParticipant",u,c,r).path,l=rr({status:"closed"},o),t.next=10,nt(s,l);case 10:return i=t.sent,t.abrupt("return",ct(a,"Task.participantRemoved"));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ur=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==cr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function sr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function lr(t,e){return fr.apply(this,arguments)}function fr(){return(fr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){sr(i,n,o,a,c,"next",t)}function c(t){sr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(ur().mark((function t(e,r){var n,o,i,a,c,u,s;return ur().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new Promise((function(t,r){e.on("participantRemoved",(function r(o,i){var a;Oe(i)===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoved",r),t(new Kt(i)))})),e.on("participantRemoveFailed",(function t(o,i){var a;Oe(i)===(null===(a=n)||void 0===a?void 0:a.sid)&&(e.removeListener("participantRemoveFailed",t),r(new y(i,"Failed to remove Participant from Task sid=".concat(e.sid,". Reason: ").concat(i.reason))))}))})),t.next=3,ne(e);case 3:return i=t.sent,a=i.find((function(t){return"voice"===t.type})).sid,c=at(e),u=I("interactionModifyParticipant",c,a,r).path,s={status:"closed"},t.next=10,nt(u,s);case 10:return n=t.sent,t.abrupt("return",ct(o,"Task.participantRemoved"));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */hr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==pr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function dr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function vr(t,e,r,n){return yr.apply(this,arguments)}function yr(){return(yr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dr(i,n,o,a,c,"next",t)}function c(t){dr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(hr().mark((function t(e,r,n,o){var i,a,c,u,s,l;return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.to){t.next=2;break}throw new TypeError("Error calling method createTask(). <string>to is a required parameter.");case 2:if(o.from){t.next=4;break}throw new TypeError("Error calling method createTask(). <string>from is a required parameter.");case 4:if(r){t.next=6;break}throw new TypeError("Error calling method createTask(). <string>workflowSid is a required parameter.");case 6:if(n){t.next=8;break}throw new TypeError("Error calling method createTask(). <string>taskQueueSid is a required parameter.");case 8:return a=I("createInteraction").path,c={channel:{type:Gt.Email,initiated_by:"agent",properties:{type:Gt.Email,direction:"outbound",from_name:o.fromName||"",from:o.from},participants:[{level:"to",name:o.toName||"",address:o.to,type:Gt.Email}]},routing:{type:"TaskRouter",properties:{workspace_sid:e.workspaceSid,workflow_sid:r,task_channel_unique_name:"email",queue_sid:n,worker_sid:e.sid,attributes:{}}}},u=o.taskChannelSid,s=o.taskUniqueChannelName,c.taskChannelSid=u,c.taskUniqueChannelName=s,c.routing.properties.attributes=null!==(i=o.attributes)&&void 0!==i?i:{},t.next=16,nt(a,c);case 16:return l=t.sent,t.abrupt("return",{interactionSid:l.sid,taskSid:l.routing.properties.sid});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mr(t){return(mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */wr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==mr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function gr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(r),!0).forEach((function(e){kr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Er(t,e,r,n){return jr.apply(this,arguments)}function jr(){return(jr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xr(i,n,o,a,c,"next",t)}function c(t){xr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(wr().mark((function t(e,r,n,o){var i,a,c,u,s;return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.to){t.next=2;break}throw new TypeError("Error calling method createTask(). <string>to is a required parameter.");case 2:if(o.from){t.next=4;break}throw new TypeError("Error calling method createTask(). <string>from is a required parameter.");case 4:if(r){t.next=6;break}throw new TypeError("Error calling method createTask(). <string>workflowSid is a required parameter.");case 6:if(n){t.next=8;break}throw new TypeError("Error calling method createTask(). <string>taskQueueSid is a required parameter.");case 8:return i=I("createInteraction").path,a={channel:{type:Gt.Sms,initiated_by:"agent",properties:{type:Gt.Sms},participants:[{address:o.to,proxy_address:o.from}]},routing:{type:"TaskRouter",properties:{workspace_sid:e.workspaceSid,workflow_sid:r,task_channel_unique_name:"sms",queue_sid:n,worker_sid:e.sid,attributes:{customerName:o.toName||"",customerAddress:o.to}}}},c=o.taskChannelSid,u=o.taskUniqueChannelName,a.taskChannelSid=c,a.taskUniqueChannelName=u,a.routing.properties.attributes=br(br({},a.routing.properties.attributes),o.attributes),t.next=16,nt(i,a);case 16:return s=t.sent,t.abrupt("return",{interactionSid:s.sid,taskSid:s.routing.properties.sid});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Sr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Or(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pr(Object(r),!0).forEach((function(e){Tr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function _r(t,e,r,n){return Wr.apply(this,arguments)}function Wr(){return(Wr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Cr(i,n,o,a,c,"next",t)}function c(t){Cr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Sr().mark((function t(e,r,n,o){var i,a,c,u,s;return Sr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.to){t.next=2;break}throw new TypeError("Error calling method createTask(). <string>to is a required parameter.");case 2:if(o.from){t.next=4;break}throw new TypeError("Error calling method createTask(). <string>from is a required parameter.");case 4:if(r){t.next=6;break}throw new TypeError("Error calling method createTask(). <string>workflowSid is a required parameter.");case 6:if(n){t.next=8;break}throw new TypeError("Error calling method createTask(). <string>taskQueueSid is a required parameter.");case 8:return i=I("createInteraction").path,a={channel:{type:Gt.WhatsApp,initiated_by:"agent",properties:{type:Gt.WhatsApp},participants:[{address:o.to,proxy_address:o.from}]},routing:{type:"TaskRouter",properties:{workspace_sid:e.workspaceSid,workflow_sid:r,queue_sid:n,worker_sid:e.sid,attributes:{customerName:o.toName||"",customerAddress:o.to}}}},c=o.taskChannelSid,u=o.taskUniqueChannelName,a.taskChannelSid=c,a.taskUniqueChannelName=u,a.routing.properties.attributes=Lr(Lr({},a.routing.properties.attributes),o.attributes),t.next=16,nt(i,a);case 16:return s=t.sent,t.abrupt("return",{interactionSid:s.sid,taskSid:s.routing.properties.sid});case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Fr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Ir(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Nr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Mr(t,e,r,n){return qr.apply(this,arguments)}function qr(){return(qr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Dr(i,n,o,a,c,"next",t)}function c(t){Dr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Fr().mark((function t(e,r,n,o){var i,a,c,u,s;return Fr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.to){t.next=2;break}throw new TypeError("Error calling method createTask(). <string>to is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method createTask(). <string>workflowSid is a required parameter.");case 4:if(n){t.next=6;break}throw new TypeError("Error calling method createTask(). <string>taskQueueSid is a required parameter.");case 6:return i=I("createInteraction").path,a={channel:{type:Gt.Web,initiated_by:"agent",properties:{type:Gt.Web},participants:[{identity:o.to}]},routing:{type:"TaskRouter",properties:{workspace_sid:e.workspaceSid,workflow_sid:r,task_channel_unique_name:"chat",queue_sid:n,worker_sid:e.sid,attributes:{identity:o.to}}}},c=o.taskChannelSid,u=o.taskUniqueChannelName,a.taskChannelSid=c,a.taskUniqueChannelName=u,a.routing.properties.attributes=Rr(Rr({},a.routing.properties.attributes),o.attributes),t.next=14,nt(i,a);case 14:return s=t.sent,t.abrupt("return",{interactionSid:s.sid,taskSid:s.routing.properties.sid});case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Kr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Gr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ur(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Vr(t,e,r,n){return Br.apply(this,arguments)}function Br(){return(Br=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ur(i,n,o,a,c,"next",t)}function c(t){Ur(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Kr().mark((function t(e,r,n,o){var i;return Kr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method leaveConversation(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method leaveConversation(). <string>channelSid is a required parameter.");case 4:return i=I("leaveChannel",e,r).path,t.abrupt("return",nt(i,{status:n,routing:{status:o}}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */zr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Yr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Hr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function $r(t,e,r,n){return Jr.apply(this,arguments)}function Jr(){return(Jr=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Hr(i,n,o,a,c,"next",t)}function c(t){Hr(i,n,o,a,c,"throw",t)}a(void 0)}))}}(zr().mark((function t(e,r,n,o){var i;return zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method leaveChannel(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method leaveChannel(). <string>channelSid is a required parameter.");case 4:return i=I("leaveChannel",e,r).path,t.abrupt("return",nt(i,{status:n,routing:{status:o}}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Qr(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(r),!0).forEach((function(e){en(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function en(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function nn(t,e,r,n){return on.apply(this,arguments)}function on(){return(on=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){rn(i,n,o,a,c,"next",t)}function c(t){rn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Xr().mark((function t(e,r,n,o){var i,a,c;return Xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=I("createInteractionChannel",e).path,a=tn(tn({},{interactionSid:e,type:r,initiated_by:n,properties:{type:r}}),{},{participants:o}),t.next=5,nt(i,a);case 5:return c=t.sent,t.abrupt("return",{sid:c.sid,interactionSid:c.interaction_sid,type:c.type,status:c.status,mediaSid:c.media_sid,mediaProperties:c.media_properties});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function an(t){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */cn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==an(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function un(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function sn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){un(i,n,o,a,c,"next",t)}function c(t){un(i,n,o,a,c,"throw",t)}a(void 0)}))}}function ln(t,e,r){return fn.apply(this,arguments)}function fn(){return(fn=sn(cn().mark((function t(e,r,n){var o,i;return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=I("interactionChannel",e,r).path,i={status:n},t.abrupt("return",nt(o,i));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pn(t,e){return hn.apply(this,arguments)}function hn(){return(hn=sn(cn().mark((function t(e,r){return cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ln(e,r,"close"));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dn(t){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */vn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==dn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function yn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function mn(t,e,r,n){return wn.apply(this,arguments)}function wn(){return(wn=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yn(i,n,o,a,c,"next",t)}function c(t){yn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(vn().mark((function t(e,r,n,o){var i,a;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method pauseEmailConversation(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method pauseEmailConversation(). <string>channelSid is a required parameter.");case 4:if(n){t.next=6;break}throw new TypeError("Error calling method pauseEmailConversation(). <string>taskStatus is a required parameter.");case 6:return i=I("pauseChannel",e,r).path,a={status:n,routing:{status:o}},t.abrupt("return",nt(i,a));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */bn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==gn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function kn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xn(t,e,r,n){return En.apply(this,arguments)}function En(){return(En=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){kn(i,n,o,a,c,"next",t)}function c(t){kn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(bn().mark((function t(e,r,n,o){var i,a;return bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method pauseChannel(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method pauseChannel(). <string>channelSid is a required parameter.");case 4:if(n){t.next=6;break}throw new TypeError("Error calling method pauseChannel(). <string>taskStatus is a required parameter.");case 6:return i=I("pauseChannel",e,r).path,a={status:n,routing:{status:o}},t.abrupt("return",nt(i,a));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function On(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */On=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==jn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Sn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Pn(t,e,r){return Ln.apply(this,arguments)}function Ln(){return(Ln=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Sn(i,n,o,a,c,"next",t)}function c(t){Sn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(On().mark((function t(e,r,n){var o;return On().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method resumeEmailConversation(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method resumeEmailConversation(). <string>channelSid is a required parameter.");case 4:if(n){t.next=6;break}throw new TypeError("Error calling method resumeEmailConversation(). <string>taskStatus is a required parameter.");case 6:return o=I("resumeChannel",e,r).path,t.abrupt("return",nt(o,{status:n}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Cn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Tn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _n(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Wn(t,e,r){return In.apply(this,arguments)}function In(){return(In=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_n(i,n,o,a,c,"next",t)}function c(t){_n(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Cn().mark((function t(e,r,n){var o;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method resumeChannel(). <string>interactionSid is a required parameter.");case 2:if(r){t.next=4;break}throw new TypeError("Error calling method resumeChannel(). <string>channelSid is a required parameter.");case 4:if(n){t.next=6;break}throw new TypeError("Error calling method resumeChannel(). <string>taskStatus is a required parameter.");case 6:return o=I("resumeChannel",e,r).path,t.abrupt("return",nt(o,{status:n}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function An(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */An=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Fn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Rn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Nn(t){return Dn.apply(this,arguments)}function Dn(){return(Dn=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Rn(i,n,o,a,c,"next",t)}function c(t){Rn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(An().mark((function t(e){var r,n;return An().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=I("pausedChannels").path,n={status:"pause",pageSize:e||50},t.abrupt("return",rt(r,n));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */qn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Mn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Gn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Kn(t,e){return Un.apply(this,arguments)}function Un(){return(Un=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Gn(i,n,o,a,c,"next",t)}function c(t){Gn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(qn().mark((function t(e,r){return qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new TypeError("Error calling method getPausedEmailConversations(). <string>status is a required parameter.");case 2:return t.abrupt("return",Nn(r));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Bn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Vn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Yn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function zn(t){throw new TypeError("Error calling method transferChannel(). <string>".concat(t," is a required parameter."))}function Hn(t,e,r,n,o){t||zn("instanceSId"),e||zn("interactionSid"),r||zn("channelSid"),n||zn("from"),o||zn("to")}function $n(t,e,r,n,o,i){return Jn.apply(this,arguments)}function Jn(){return(Jn=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yn(i,n,o,a,c,"next",t)}function c(t){Yn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Bn().mark((function t(e,r,n,o,i,a){var c,u,s=arguments;return Bn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=s.length>6&&void 0!==s[6]?s[6]:"cold",Hn(e,r,n,o,i),u=I("transferChannel",e,r,n).path,t.abrupt("return",nt(u,{noteSid:a,type:c,from:o,to:i}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function p(){}function h(){}function d(){}var v={};u(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==e&&r.call(m,i)&&(v=m);var w=d.prototype=p.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var o;n(this,"_invoke",{value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==Qn(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=x(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:h,configurable:!0}),h.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Zn(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function to(t){throw new TypeError("Error calling method getChannelTransfers(). <string>".concat(t," is a required parameter."))}function eo(t,e,r){t||to("instanceSId"),e||to("interactionSid"),r||to("channelSid")}function ro(t,e,r){return no.apply(this,arguments)}function no(){return(no=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zn(i,n,o,a,c,"next",t)}function c(t){Zn(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Xn().mark((function t(e,r,n){var o,i;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return eo(e,r,n),o=I("transferChannel",e,r,n).path,t.next=4,rt(o);case 4:if(i=t.sent,Array.isArray(i)){t.next=7;break}throw i;case 7:return t.abrupt("return",i.map((function(t){return{sid:t.sid,accountSid:t.account_sid,instanceSid:t.instance_sid,interactionSid:t.interaction_sid,channelSid:t.channel_sid,type:t.type,from:t.from,to:t.to,status:t.status,executionSid:t.note_sid,noteSid:t.note_sid,summarySid:t.note_sid,reason:t.note_sid,dateCreated:t.date_created,dateUpdated:t.date_updated}})));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oo(t){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ao(t,e){return(ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function co(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=so(t);if(e){var o=so(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uo(t)}(this,r)}}function uo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function so(t){return(so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fo(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}function po(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,vo(t,e,"get"))}function ho(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,vo(t,e,"set"),r),r}function vo(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}r(24),function(t){t.Email="email",t.Sms="sms",t.WhatsApp="whatsapp",t.Web="web",t.Voice="voice",t.Messenger="messenger",t.Chat="chat",t.Gbm="gbm",t.Video="video"}(Gt||(Gt={}));var yo,mo,wo=new WeakMap,go=new WeakMap,bo=new WeakMap,ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}(i,t);var e,r,n=co(i);function i(t,e){var r,a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),fo(uo(r=n.call(this)),wo,{writable:!0,value:void 0}),fo(uo(r),go,{writable:!0,value:void 0}),fo(uo(r),bo,{writable:!0,value:void 0}),lo(uo(r),"addEmailParticipant",Ae),lo(uo(r),"addSmsParticipant",Ne),lo(uo(r),"addWhatsAppParticipant",Me),lo(uo(r),"addWebChatParticipant",Ge),lo(uo(r),"addVoiceParticipant",Qe),lo(uo(r),"addInteractionChannelParticipant",Ue),lo(uo(r),"removeParticipant",ir),lo(uo(r),"removeVoiceParticipant",lr),lo(uo(r),"getChannels",ne),lo(uo(r),"getParticipants",$t),lo(uo(r),"acceptReservation",yt),lo(uo(r),"completeReservation",ft),lo(uo(r),"holdParticipant",Ee),lo(uo(r),"unHoldParticipant",je),lo(uo(r),"endConference",ue),lo(uo(r),"setEndConferenceOnExit",he),lo(uo(r),"rejectReservation",kt),lo(uo(r),"wrapReservation",St),lo(uo(r),"createEmailTask",vr),lo(uo(r),"createWhatsAppTask",_r),lo(uo(r),"createSmsTask",Er),lo(uo(r),"createWebTask",Mr),lo(uo(r),"leaveConversation",Vr),lo(uo(r),"leaveChannel",$r),lo(uo(r),"createInteractionChannel",nn),lo(uo(r),"updateInteractionChannel",ln),lo(uo(r),"closeInteractionChannel",pn),lo(uo(r),"pauseEmailConversation",mn),lo(uo(r),"pauseChannel",xn),lo(uo(r),"resumeEmailConversation",Pn),lo(uo(r),"resumeChannel",Wn),lo(uo(r),"getPausedEmailConversations",Kn),lo(uo(r),"getPausedChannels",Nn),lo(uo(r),"transferChannel",$n),lo(uo(r),"getChannelTransfers",ro),!o()(t)||!t)throw new TypeError("Failed to instantiate CbmSdkClient. <string>token is a required parameter.");return ho(uo(r),wo,e.logLevel||k.Error),ho(uo(r),go,new D(t,e)),ho(uo(r),bo,new S("Worker-".concat(po(uo(r),go).getLogIdentifier()),po(uo(r),wo))),function(t){if(!(t instanceof D))throw new TypeError("Failed to initialize Request. <Configuration>userConfig is a required parameter.");$=t}(po(uo(r),go)),a=e.eventsTimeout,et=a||1e4,r}return e=i,(r=[{key:"getLogger",value:function(t){return new S("".concat(t),po(this,go).logLevel)}},{key:"updateToken",value:function(t){if(!o()(t)||!t)throw new TypeError("To update the Twilio token, a new Twilio token must be passed in. <string>newToken is a required parameter.");po(this,bo).info("Proceeding to update the CbmSdkClient's current active token with a new token."),po(this,bo).debug("New token: ".concat(t));try{po(this,go).updateToken(t),this.emit("tokenUpdated")}catch(t){this.emit("error",t)}}}])&&io(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),i}(i.EventEmitter);!function(t){t.Active="active",t.Setup="setup",t.Closed="closed",t.Failed="failed"}(yo||(yo={})),function(t){t.To="to",t.CC="cc",t.BCC="bcc"}(mo||(mo={})),r(46);var xo=r(36);function Eo(t){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oo(){return(Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function So(t,e){return(So=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Po(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Lo(t);if(e){var o=Lo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Eo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var To={"participant.added":"participantAdded","participant.add.failed":"participantAddFailed","participant.removed":"participantRemoved","participant.remove.failed":"participantRemoveFailed","participant.modified":"participantModified","participant.modify.failed":"participantModifyFailed"},Co=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&So(t,e)}(o,t);var e,r,n=Po(o);function o(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,t,r))._worker=t,e._logLevel=r.logLevel||k.Error,e._log=new S("ParticipantEventHandler",e._logLevel),e}return e=o,(r=[{key:"getTREventsToHandlerMapping",value:function(){var t=Oo(Lo(o.prototype),"getTREventsToHandlerMapping",this).call(this);return t["participant.added"]="_participantEventHandler",t["participant.add.failed"]="_participantEventHandler",t["participant.removed"]="_participantEventHandler",t["participant.remove.failed"]="_participantEventHandler",t["participant.modified"]="_participantEventHandler",t["participant.modify.failed"]="_participantEventHandler",t}},{key:"_participantEventHandler",value:function(t,e){var r=To[e];this._log.info("Worker ".concat(this._worker.sid," received Event: ").concat(e," mapped to ").concat(r,"."));var n=t.routing_properties&&t.routing_properties.task_sid;if(!n)throw this._log.error("Event: participant. ".concat(r," did not contain a Task sid. \n              Unable to emit event for Worker ").concat(this._worker.sid,". Data ").concat(JSON.stringify(t))),new Error("Failed to emit event for Worker ".concat(this._worker.sid,"."));this._log.debug("Task sid ".concat(n,", proceeding to get tasks."));var o=this._worker._dataServices.reservationsEntity.getTasks(n);o&&o.length>0?(o[0]._emitEvent(r,t),this._log.debug("Emitted event ".concat(r," with data ").concat(JSON.stringify(t)))):this._log.warn("The task ".concat(n," specified by Event: participant.").concat(r," does not exist in \n                    Worker ").concat(this._worker.sid," Reservations map. Skipping event with data ").concat(JSON.stringify(t),"."))}}])&&jo(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(xo.TaskRouterEventHandler)}])},4147:t=>{"use strict";t.exports={i8:"0.99.32-dev"}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{AcceptTask:()=>y.o,AddVoiceEventListener:()=>C.T,CancelVoiceTaskTransfer:()=>k.N,ClientEvent:()=>_.r,CompleteTask:()=>w.N,EndConferenceForAll:()=>L.m,EndTask:()=>g.m,ErrorCode:()=>R.jK,ErrorSeverity:()=>N.W,FlexSdkError:()=>A.W,HoldParticipant:()=>O.Z,KickParticipant:()=>P.X,MonitorCall:()=>T._,RejectTask:()=>m.G,SetAttributes:()=>h.U,SetCurrentActivity:()=>d._,SetTaskAttributes:()=>v.W,SetWorkerActivity:()=>p._,SetWorkerAttributes:()=>f.l,StartExternalWarmVoiceTaskTransfer:()=>j.G,StartOutboundCall:()=>E.N,StartVoiceTaskTransfer:()=>x.G,UnholdParticipant:()=>S.t,WrapUpTask:()=>b.n,auth:()=>M,createClient:()=>B,getAccountConfig:()=>K,getAuthenticationConfig:()=>U,getFeaturesConfig:()=>V,getPublicConfig:()=>G,hasPermission:()=>W.F,setLogLevel:()=>q,version:()=>Y});var t=r(4147),e=r(3147),o=r(8023),i=r(7742),a=r(6227),c=r(346),u=r(6601),s=r(5294),l=r(8028),f=r(3941),p=r(5729),h=r(6797),d=r(7177),v=r(3257),y=r(8934),m=r(6224),w=r(4930),g=r(2169),b=r(776),k=r(6149),x=r(7095),E=r(5540),j=r(5700),O=r(2910),S=r(2788),P=r(2621),L=r(103),T=r(8629),C=r(7399),_=r(3308),W=r(3991),I=r(872),F={};for(const t in I)["default","SetWorkerAttributes","SetWorkerActivity","SetAttributes","SetCurrentActivity","SetTaskAttributes","AcceptTask","RejectTask","CompleteTask","EndTask","WrapUpTask","CancelVoiceTaskTransfer","StartVoiceTaskTransfer","StartOutboundCall","StartExternalWarmVoiceTaskTransfer","HoldParticipant","UnholdParticipant","KickParticipant","EndConferenceForAll","MonitorCall","AddVoiceEventListener","ClientEvent","hasPermission","auth","setLogLevel","getPublicConfig","getAccountConfig","getAuthenticationConfig","getFeaturesConfig","createClient","version","FlexSdkError","ErrorCode","ErrorSeverity"].indexOf(t)<0&&(F[t]=()=>I[t]);r.d(n,F);var A=r(8576),R=r(9051),N=r(8029),D=o.o.newInstance(),M=function(t){return(0,e.K)(D)(t)},q=function(t){return(0,s.U)(D)(t)},G=function(t){return(0,c.b)(D)(t)},K=function(t,e){return(0,i.Q)(D)(t,e)},U=function(t){return(0,l.Z)(D)(t)},V=function(t,e){return(0,u.o)(D)(t,e)},B=function(t,e){return(0,a.e)(D)(t,e)},Y=t.i8})(),module.exports=n})();
//# sourceMappingURL=index.js.map