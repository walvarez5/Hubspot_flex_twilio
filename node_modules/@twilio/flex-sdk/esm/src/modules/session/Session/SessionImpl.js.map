{"version":3,"file":"SessionImpl.js","sources":["../../../../../../../../../../src/modules/session/Session/SessionImpl.ts"],"sourcesContent":[null],"names":["TOKEN_ABOUT_TO_EXPIRE_MINUTES","VERIFICATION_INTERVAL_MS","SessionImpl","ctx","_SessionImpl_authFactory","_SessionImpl_token","_SessionImpl_tokenExpiration","_SessionImpl_connection","_SessionImpl_options","_SessionImpl_accountConfigProvider","_SessionImpl_accountConfigData","_SessionImpl_roles","_SessionImpl_identity","_SessionImpl_isActive","_SessionImpl_logger","_SessionImpl_needsToAutoUpdateToken","_SessionImpl_emitter","_SessionImpl_verificationInterval","_SessionImpl_tokenStorer","_SessionImpl_flexUserSid","_SessionImpl_verifyToken","__classPrivateFieldGet","_SessionImpl_isTokenCloseToExpiry","_SessionImpl_autoUpdateToken","now","getCurrentDate","_SessionImpl_handleTokenAboutToExpire","__classPrivateFieldSet","accountSid","InternalError","newToken","newTokenDateExpired","auth","tokenRefreshResult","SessionEvent","e","TwilsockImpl","getDefaultSessionOptions","accountConfigProvider","createAuthenticator","getLogger","LoggerName","EventEmitter","TokenRegistry","token","TwilsockEvent","tokenData","eventName","listener"],"mappings":"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"}