typeof window<"u"&&(window.global=window);import{__classPrivateFieldSet as s,__classPrivateFieldGet as t}from"../../../node_modules/tslib/tslib.es6.js";import"../logger/Logger/LogEntry.js";import{LoggerName as f}from"../logger/Logger/LoggerName.js";import{getLogger as g}from"../logger/LoggerFactory/getLogger.js";import"../logger/LoggerFactory/LoggerConfigImpl.js";import{SessionImpl as h}from"../session/Session/SessionImpl.js";import{createDataClient as d}from"../../packages/data-client/client/index.js";import{ClientOptionsStore as u}from"../client/ClientOptions/ClientOptionsStore.js";import{getEnvironmentConfig as C}from"../config/EnvironmentConfig/EnvironmentConfigImpl.js";import"../error/FlexSdkError/FlexSdkError.js";import"../error/ErrorCode/ErrorCodes.js";import"../error/ErrorCode/InternalErrorCodes.js";import"../error/ErrorCode/ErrorCodeHelper.js";import"../error/ErrorSeverity/ErrorSeverity.js";import"../storage/LocalStorage/LocalStorageKeys.js";import"../config/AccountConfig/AccountConfigImpl/AccountConfigDataContainer/AccountConfigDataContainer.js";import"../reporter/ErrorReporter.js";import"../storage/LocalStorage/LocalStorageImpl.js";import"../../backend/generated/Configuration/api/configuration.service.js";var i,o,e;class w{constructor(n){i.set(this,void 0),o.set(this,void 0),e.set(this,void 0),s(this,o,n.getInstanceOf(h),"f"),s(this,i,g(n)(f.DataClient),"f"),s(this,e,n.getInstanceOf(u),"f"),this.client=null}async init(){t(this,i,"f").debug("Initializing dataClient");const n=()=>t(this,o,"f").token;if(this.client)return this.client;const a=C(),{region:l,regionNonFlex:m}=a||{},{dataClientOptions:p}=t(this,e,"f"),c=m||t(this,e,"f").regionNonFlex||l||t(this,e,"f").region;return this.client=await d(n,Object.assign(Object.assign({},p),{region:c})).then(r=>(t(this,i,"f").debug("Initialized dataClient successfully"),r)).catch(r=>(t(this,i,"f").error("Failed to initialize dataClient",r),null)),this.client}destroy(){this.client&&this.client.stop(),this.client=null}}i=new WeakMap,o=new WeakMap,e=new WeakMap;export{w as DataClientImpl};
//# sourceMappingURL=DataClientImpl.js.map
