{"version":3,"file":"TwilsockImpl.js","sources":["../../../../../../../../../../src/modules/websocket/Twilsock/TwilsockImpl.ts"],"sourcesContent":[null],"names":["FLEX_SDK_NAME","FLEX_SDK_PLATFORM","PRODUCT_ID","TwilsockImpl","ctx","_TwilsockImpl_productId","_TwilsockImpl_twilsockClientFactory","_TwilsockImpl_logger","_TwilsockImpl_environmentConfig","_TwilsockImpl_clientOptions","_TwilsockImpl_isConnected","_TwilsockImpl_emitter","_TwilsockImpl_throwError","_TwilsockImpl_throwErrorFromErrorResponse","_TwilsockImpl_proxyTwilsockClientEvent","event","alias","args","__classPrivateFieldGet","_TwilsockImpl_proxyEventsFromTwilsockClient","TwilsockClientEvent","TwilsockEvent","_TwilsockImpl_listenAndEmitConnectionError","_TwilsockImpl_proxyLogsFromTwilsockClient","twilsockLogger","loglevel","methodName","messages","errorCode","metadata","message","flexError","FlexSdkError","ErrorCode","_TwilsockImpl_isConnectionError","error","_TwilsockImpl_isTooManyRequestsError","isTwilsockReplyError","_TwilsockImpl_isServerError","_TwilsockImpl_retryOnTooManyErrorOrConnectionErrorOrServerError","_TwilsockImpl_updateTokenOnce","token","InternalError","_TwilsockImpl_waitUntilConnectedOrRejected","timeoutMs","resolve","reject","__classPrivateFieldSet","cleanup","successHandler","connectionErrorHandler","timeoutId","getTwilsockClient","getLogger","LoggerName","getEnvironmentConfig","ClientOptionsStore","EventEmitter","throwFlexSdkError","throwFlexSdkErrorFromErrorResponse","region","regionNonFlex","clientOptions","parseRegionForTwilsock","packageInfo","_TwilsockImpl_instances","_TwilsockImpl_connect0","retry","ErrorSeverity","url","headers","body","code","_a","_b","connectionDestroyed","eventName","listener","err"],"mappings":"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"}