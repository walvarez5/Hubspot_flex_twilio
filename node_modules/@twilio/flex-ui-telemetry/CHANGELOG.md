# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## 1.3.1 (2023-11-20)

### Added
- New common property `isEmployee` which is retrieved through Flex Manager `configuration` object.
- New common property `flexUserRole` which is retrieved through Flex Manager `user` object.
- New common property `instanceSid` which is retrieved through Flex Manager `serviceConfiguration` object.
- Added support for node 20

## 1.2.0 (2023-08-23)

### Added
- New common property `realm` which is retrieved through Flex Manager `configuration` object.

### Changed
- README to include an important note.

## 1.1.1 (2023-08-10)

### Fixed
- Changed the `onmessage` listener from global initialisation style to attaching a listener for the event `message`. This fixes the issue caused by multiple window `onmessage` listeners overwriting each other's definition.

## 1.1.0 (2023-08-04)

### Added
- Support for `callback` parameter in `track`, `page`, `identify` and `group`.
- `ready` method which invokes the callback function when the iframe in Hosted Flex and Segment AnalyticsJS bundle are loaded.

## 1.0.1 (2023-07-31)

### Fixed
- Moved accessing of Flex Manager to inside the `FlexTelemetry` constructor as it was throwing an error if Flex Manager is not loaded yet.

### Changed
- Throw a meaningful error when `FlexTelemetry` is initialised before Flex Manager instance is added to the browser window object.

## 1.0.0 (2023-07-28)

We're excited to announce the **v1.0.0** of **`@twilio/flex-ui-telemetry`**!

This release is focused on creating an abstraction layer for the usage of iframe in Flex to push events to Flex UI Segment Source connection. It provides Segment AnalyticsJS-like APIs.

### Added

- `FlexTelemetry` class which allows passing common properties that need to be set with every event pushed to Segment.
- `FlexTelemetry` sets a few common properties implicitly using Flex Manager.
- `track` method to track the user events.
- `page` to track page views.
- `identify` to identify an user.
- `group` to group an user into a category.