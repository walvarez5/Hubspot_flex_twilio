{"version":3,"file":"tree.js","sources":["../../src/utils/tree.ts"],"sourcesContent":["interface Map<K, V> {\n  get(key: K): V;\n  set(key: K, value: V): void;\n}\n\ninterface TreeMapInterface<K, V> extends Map<K, V>, Iterable<[K, V]> {\n\n}\n\ninterface HashMap<K, V> extends Map<K, V> {\n\n}\n\nclass Node<K, V> {\n  parent: Node<K, V>;\n  left: Node<K, V>;\n  right: Node<K, V>;\n  balanceFactor: number;\n\n  key: K;\n  value: V;\n\n  constructor(key: K, value: V) {\n    this.balanceFactor = 0;\n    this.key = key;\n    this.value = value;\n    this.parent = null;\n    this.left = null;\n    this.right = null;\n  }\n\n  get isRoot(): boolean { return this.parent === null; }\n  get isLeaf(): boolean { return (this.left === null) && (this.right === null); }\n  get isLeftChild(): boolean { return this.parent.left === this; }\n\n  update(value: V) {\n    this.value = value;\n  }\n\n  replace(target: Node<K, V>, replacement: Node<K, V>) {\n    if (!target) {\n      return;\n    }\n\n    if (this.left === replacement) {\n      this.left = replacement;\n    } else if (this.right === replacement) {\n      this.right = replacement;\n    }\n  }\n}\n\ntype Less<T> = (x: T, y: T) => boolean;\ntype Equal<T> = (x: T, y: T) => boolean;\n\n/**\n * @property length\n */\nclass TreeMap<K, V> implements TreeMapInterface<K, V> {\n  private isLessThan: Less<K>;\n  private isEqual: Equal<K>;\n\n  private root: Node<K, V>;\n  private count: number;\n\n  constructor(less?: Less<K>, equal?: Equal<K>) {\n    this.isLessThan = less || ((x, y) => x < y);\n    this.isEqual = equal || ((x, y) => x === y);\n    this.root = null;\n    this.count = null;\n  }\n\n  get size(): number { return this.count; }\n\n  clear() {\n    this.root = null;\n    this.count = 0;\n  }\n\n  set(key: K, value: V): void {\n    let node = this.getNode(key);\n    if (node) {\n      node.update(value);\n    } else {\n      this.insert(key, value);\n    }\n    // return node;\n  }\n\n  insert(key: K, value: V): void {\n    let node = new Node(key, value);\n    this.count++;\n\n    if (!this.root) {\n      this.root = node;\n      // return node;\n      return;\n    }\n\n    let currNode = this.root;\n    for (;;) {\n      if (this.isLessThan(key, currNode.key)) {\n        if (currNode.left) {\n          currNode = currNode.left;\n        } else {\n          currNode.left = node;\n          break;\n        }\n      } else {\n        if (currNode.right) { // eslint-disable-line no-lonely-if\n          currNode = currNode.right;\n        } else {\n          currNode.right = node;\n          break;\n        }\n      }\n    }\n\n    node.parent = currNode;\n    currNode = node;\n    while (currNode.parent) {\n      let parent = currNode.parent;\n      let prevBalanceFactor = parent.balanceFactor;\n\n      if (currNode.isLeftChild) {\n        parent.balanceFactor++;\n      } else {\n        parent.balanceFactor--;\n      }\n\n      if (Math.abs(parent.balanceFactor) < Math.abs(prevBalanceFactor)) {\n        break;\n      }\n\n      if (parent.balanceFactor < -1 || parent.balanceFactor > 1) {\n        this.rebalance(parent);\n        break;\n      }\n\n      currNode = parent;\n    }\n\n    // return node;\n  }\n\n  get(key: K): V {\n    let currentNode = this.root;\n    while (currentNode) {\n      if (this.isEqual(key, currentNode.key)) {\n        return currentNode.value;\n      }\n\n      if (this.isLessThan(key, currentNode.key)) {\n        currentNode = currentNode.left;\n      } else {\n        currentNode = currentNode.right;\n      }\n    }\n    return null;\n  }\n\n  delete(key: K): void {\n    // update this algorithm and remove any\n    let node = this.getNode(key) as any;\n    if (!node || node.key !== key) {\n      return null;\n    }\n\n    let parent = node.parent;\n    let left = node.left;\n    let right = node.right;\n\n    if (!!left !== !!right) { // one child\n      let child = left || right;\n      if (!parent && !child) {\n        this.root = null;\n      } else if (parent && !child) {\n        this.root = child;\n      } else {\n        parent.replace(node, null);\n        this.rebalance(parent);\n      }\n    } else { // two children\n      let maxLeft = node.left;\n      while (maxLeft.right) {\n        maxLeft = maxLeft.right;\n      }\n\n      if (node.left === maxLeft) {\n        if (node.isRoot) {\n          this.root = maxLeft;\n          maxLeft.parent = null;\n        } else {\n          if (node.isLeftChild) {\n            node.parent.left = maxLeft;\n          } else {\n            node.parent.right = maxLeft;\n          }\n          maxLeft.parent = node.parent;\n        }\n\n        maxLeft.right = node.right;\n        maxLeft.right.parent = maxLeft;\n        maxLeft.balanceFactor = node.balanceFactor;\n        node = {\n          parent: maxLeft, isLeftChild: true\n        };\n      } else {\n        let mlParent = maxLeft.parent;\n        let mlLeft = maxLeft.left;\n\n        mlParent.right = mlLeft;\n        if (mlLeft) {\n          mlLeft.parent = mlParent;\n        }\n\n        if (node.isRoot) {\n          this.root = maxLeft;\n          maxLeft.parent = null;\n        } else {\n          if (node.isLeftChild) {\n            node.parent.left = maxLeft;\n          } else {\n            node.parent.right = maxLeft;\n          }\n          maxLeft.parent = node.parent;\n        }\n\n        maxLeft.right = node.right;\n        maxLeft.right.parent = maxLeft;\n        maxLeft.left = node.left;\n        maxLeft.left.parent = maxLeft;\n        maxLeft.balanceFactor = node.balanceFactor;\n\n        node = {\n          parent: mlParent, isLeftChild: false\n        };\n      }\n    }\n\n    this.count--;\n\n    while (node.parent) {\n      let parent = node.parent;\n      let prevBalanceFactor = parent.balanceFactor;\n\n      if (node.isLeftChild) {\n        parent.balanceFactor -= 1;\n      } else {\n        parent.balanceFactor += 1;\n      }\n\n      if (Math.abs(parent.balanceFactor) > Math.abs(prevBalanceFactor)) {\n        if (parent.balanceFactor < -1 || parent.balanceFactor > 1) {\n          this.rebalance(parent);\n\n          if (parent.parent.balanceFactor === 0) {\n            node = parent.parent;\n          } else {\n            break;\n          }\n        } else {\n          break;\n        }\n      } else {\n        node = parent;\n      }\n    }\n\n    return null;\n  }\n\n  private getNode(key: K): Node<K, V> {\n    let currentNode = this.root;\n    while (currentNode) {\n      if (this.isEqual(key, currentNode.key)) {\n        return currentNode;\n      }\n\n      if (this.isLessThan(key, currentNode.key)) {\n        currentNode = currentNode.left;\n      } else {\n        currentNode = currentNode.right;\n      }\n    }\n    return null;\n  }\n\n  private rebalance(node: Node<K, V>) {\n    if (node.balanceFactor < 0) {\n      if (node.right.balanceFactor > 0) {\n        this.rotateRight(node.right);\n        this.rotateLeft(node);\n      } else {\n        this.rotateLeft(node);\n      }\n    } else if (node.balanceFactor > 0) {\n      if (node.left.balanceFactor < 0) {\n        this.rotateLeft(node.left);\n        this.rotateRight(node);\n      } else {\n        this.rotateRight(node);\n      }\n    }\n  }\n\n  private rotateLeft(pivot: Node<K, V>) {\n    let root = pivot.right;\n    pivot.right = root.left;\n    if (root.left !== null) {\n      root.left.parent = pivot;\n    }\n\n    root.parent = pivot.parent;\n    if (root.parent === null) {\n      this.root = root;\n    } else if (pivot.isLeftChild) {\n      root.parent.left = root;\n    } else {\n      root.parent.right = root;\n    }\n\n    root.left = pivot;\n    pivot.parent = root;\n    pivot.balanceFactor = pivot.balanceFactor + 1 - Math.min(root.balanceFactor, 0);\n    root.balanceFactor = root.balanceFactor + 1 - Math.max(pivot.balanceFactor, 0);\n  }\n\n  private rotateRight(pivot: Node<K, V>) {\n    let root = pivot.left;\n    pivot.left = root.right;\n    if (root.right !== null) {\n      root.right.parent = pivot;\n    }\n\n    root.parent = pivot.parent;\n    if (root.parent === null) {\n      this.root = root;\n    } else if (pivot.isLeftChild) {\n      root.parent.left = root;\n    } else {\n      root.parent.right = root;\n    }\n\n    root.right = pivot;\n    pivot.parent = root;\n    pivot.balanceFactor = pivot.balanceFactor - 1 - Math.min(root.balanceFactor, 0);\n    root.balanceFactor = root.balanceFactor - 1 - Math.max(pivot.balanceFactor, 0);\n  }\n\n  *[Symbol.iterator](): IterableIterator<[K, V]> {\n    for (let iter of this.getIterator()) {\n      yield iter;\n    }\n  }\n\n  *getIterator(key: K = null): IterableIterator<[K, V]> {\n    let currentNode = this.root;\n    while (currentNode) {\n      if (this.isEqual(key, currentNode.key) || ((key === null) && !currentNode.left)) {\n        break;\n      }\n\n      if (this.isLessThan(key, currentNode.key) || (key === null)) {\n        currentNode = currentNode.left;\n      } else {\n        currentNode = currentNode.right;\n      }\n    }\n\n    if (!currentNode) {\n      return null;\n    }\n\n    let fromleft = true;\n    for (;;) {\n      if (fromleft) {\n        yield [currentNode.key, currentNode.value];\n        fromleft = false;\n\n        if (currentNode.right) {\n          currentNode = currentNode.right;\n          while (currentNode.left) {\n            currentNode = currentNode.left;\n          }\n          fromleft = true;\n        } else if (currentNode.parent) {\n          fromleft = (currentNode.parent.left === currentNode);\n          currentNode = currentNode.parent;\n        } else {\n          break;\n        }\n      } else if (currentNode.parent) {\n        fromleft = (currentNode.parent.left === currentNode);\n        currentNode = currentNode.parent;\n      } else {\n        break;\n      }\n    }\n\n    return null;\n  }\n\n  *getReverseIterator(key: K = null): IterableIterator<[K, V]> {\n    let currentNode = this.root;\n    while (currentNode) {\n      if (this.isEqual(key, currentNode.key) || ((key === null) && !currentNode.right)) {\n        break;\n      }\n\n      if (!this.isLessThan(key, currentNode.key) || (key === null)) {\n        currentNode = currentNode.right;\n      } else {\n        currentNode = currentNode.left;\n      }\n    }\n\n    if (!currentNode) {\n      return null;\n    }\n\n    let fromright = true;\n    for (;;) {\n      if (fromright) {\n        yield [currentNode.key, currentNode.value];\n        fromright = false;\n\n        if (currentNode.left) {\n          currentNode = currentNode.left;\n          while (currentNode.right) {\n            currentNode = currentNode.right;\n          }\n          fromright = true;\n        } else if (currentNode.parent) {\n          fromright = (currentNode.parent.right === currentNode);\n          currentNode = currentNode.parent;\n        } else {\n          break;\n        }\n      } else if (currentNode.parent) {\n        fromright = (currentNode.parent.right === currentNode);\n        currentNode = currentNode.parent;\n      } else {\n        break;\n      }\n    }\n\n    return null;\n  }\n}\n\nexport { Map, Less, Equal, TreeMapInterface, TreeMap };\n"],"names":[],"mappings":"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"}